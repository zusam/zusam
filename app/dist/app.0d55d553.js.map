{"version":3,"sources":["../src/options.js","../src/constants.js","../src/create-element.js","../src/component.js","../src/render.js","../src/create-context.js","../src/util.js","../src/diff/children.js","../src/diff/props.js","../src/diff/index.js","../src/clone-element.js","../src/diff/catch-error.js","../src/index.js","../src/PureComponent.js","../src/memo.js","../src/forwardRef.js","../src/Children.js","../src/suspense.js","../src/suspense-list.js","../src/portals.js","../src/events.js","core/alert.js","core/me.js","core/lang.js","core/router.js","core/util.js","core/http.js","core/cache.js","core/index.js","components/fa-icon.component.js","components/search.component.js","components/groups-dropdown-navbar.component.js","components/notification.component.js","components/notifications-dropdown-navbar.component.js","components/navbar.component.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/bundle-loader.js","message/file-grid.component.js","message/message-head.component.js","message/message-footer.component.js","message/embeds/twitch-embed.component.js","message/embeds/bandcamp-embed.component.js","message/embeds/generic-embed.component.js","message/embed-block.component.js","message/message-body.component.js","message/writer.component.js","message/message-child.component.js","message/message-children.component.js","message/message-parent.component.js","message/message-preview.component.js","message/message-search-result.component.js","message/index.js","components/create-group.component.js","components/group-search.component.js","components/group-board.component.js","settings/user-settings.component.js","settings/group-settings.component.js","settings/settings.component.js","components/share.component.js","components/main-content.component.js","outside/login.component.js","outside/reset-password.component.js","outside/signup.component.js","outside/stop-notification-emails.component.js","outside/public.component.js","outside/index.js","app.js","../node_modules/parcel-bundler/src/builtins/loaders/browser/js-loader.js"],"names":["options","isValidElement","rerenderQueue","defer","prevDebounce","IS_HYDRATE","i","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","normalizedProps","arguments","length","push","defaultProps","createVNode","key","ref","vnode","_children","_parent","_depth","_dom","_nextDom","_component","constructor","createRef","Fragment","Component","context","getDomSibling","childIndex","indexOf","sibling","updateParentDomPointers","child","base","enqueueRender","c","_dirty","debounceRendering","process","component","commitQueue","newDom","oldDom","parentDom","sort","a","b","_vnode","pop","_parentDom","diff","_globalContext","ownerSVGElement","commitRoot","diffChildren","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","j","oldVNode","sibDom","firstChildDom","refs","oldChildren","oldChildrenLength","toChildArray","childVNode","undefined","nextDom","outer","appendChild","nextSibling","insertBefore","value","unmount","applyRef","callback","flattened","Array","isArray","diffProps","dom","newProps","oldProps","hydrate","setProperty","setStyle","style","test","name","oldValue","s","useCapture","nameLower","cssText","replace","toLowerCase","slice","addEventListener","eventProxy","_listeners","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","e","event","newVNode","tmp","isNew","oldState","snapshot","clearProcessingException","provider","componentContext","newType","_diff","contextType","_id","_defaultValue","_processingException","_pendingError","prototype","render","doRender","sub","state","_renderCallbacks","_nextState","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","_force","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","_render","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","_catchError","root","_commit","some","cb","call","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","is","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","checked","current","parentVNode","skipRemove","r","componentWillUnmount","this","replaceNode","_root","cloneElement","createContext","defaultValue","ctx","Consumer","Provider","subs","_this","_props","old","splice","error","hasCaught","getDerivedStateFromError","setState","componentDidCatch","update","forceUpdate","Promise","then","bind","resolve","setTimeout","currentIndex","currentComponent","prevRaf","afterPaintEffects","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","getHookState","index","_hook","hooks","__hooks","_list","_pendingEffects","useState","initialState","useReducer","invokeOrReturn","reducer","init","hookState","_value","action","nextValue","useEffect","args","argsChanged","_args","useLayoutEffect","useRef","initialValue","useMemo","useImperativeHandle","createHandle","concat","factory","_factory","useCallback","useContext","useDebugValue","formatter","useErrorBoundary","errState","err","flushAfterPaintEffects","forEach","invokeCleanup","invokeEffect","hook","_cleanup","result","oldArgs","newArgs","arg","f","requestAnimationFrame","raf","done","clearTimeout","timeout","cancelAnimationFrame","window","filter","shallowDiffers","PureComponent","isPureReactComponent","memo","comparer","shouldUpdate","nextProps","updateRef","Memoed","isReactComponent","displayName","_forwarded","oldVNodeHook","forwardRef","fn","Forwarded","clone","mapFn","reduce","acc","Children","map","count","only","Error","toArray","oldCatchError","detachedClone","Suspense","_pendingSuspensionCount","_suspenders","_detachOnNextRender","suspended","_suspended","lazy","loader","prom","Lazy","exports","default","SuspenseList","_next","_map","_childDidSuspend","promise","suspendingComponent","resolved","onResolved","onSuspensionComplete","_suspendedComponentWillUnmount","fallback","list","delete","revealOrder","size","delegated","get","unsuspend","wrappedUnsuspend","Map","reverse","set","ContextProvider","Portal","container","wrap","_container","_temp","_unmount","_wrap","_hasMounted","createPortal","CAMEL_PROPS","REACT_ELEMENT_TYPE","Symbol","for","parent","firstChild","preactRender","preactHydrate","oldEventHook","setSafeDescriptor","proto","Object","defineProperty","configurable","v","persist","isDefaultPrevented","defaultPrevented","normalStopPropagation","stopPropagation","stoppedPropagating","isPropagationStopped","nativeEvent","classNameDescriptor","class","$$typeof","className","enumerable","shouldSanitize","attrs","multiple","selected","ondoubleclick","ondblclick","onbeforeinput","onchange","normalized","oninput","_patchedLifecycles","version","createFactory","element","preactCloneElement","apply","unmountComponentAtNode","findDOMNode","unstable_batchedUpdates","alert","remove","id","getElementById","outerHTML","add","text","alertStyle","countdown","alertNode","hash","classList","body","str","charCodeAt","me","cache","notifications","loadNotifications","fetchDict","dispatchEvent","CustomEvent","matchNotification","notif","target","n","fromMessage","removeMatchingNotifications","_","all","http","reject","lang","dict","possibleLang","en","es","fr","sk","getDefaultLang","querySelector","content","getCurrentLang","t","params","keys","getOwnPropertyNames","isNaN","match","rid","router","route","backUrl","backUrlPrompt","entityUrl","entityType","search","entity","isValidUrl","url","URL","getSubpath","baseURI","pathname","toApp","location","origin","removeSubpath","path","RegExp","getParam","param","searchParams","substring","res","split","find","getSegments","isOutside","includes","isEntity","getUrlComponents","components","navigate","href","console","warn","util","getId","group","catch","reset","history","replaceState","pushState","apiKey","post","user","groups","sync","onClick","newTab","preventDefault","closest","getAttribute","startsWith","targetUrl","host","ctrlKey","open","getElementsByClassName","urlRegExp","getUrl","txt","link","endsWith","humanFullDate","timestamp","d","Date","getTime","getTimezoneOffset","toISOString","humanTime","duration","Math","abs","round","now","floor","getGroupId","getGroupName","g","thumbnail","width","height","crop","defaultAvatar","colorHash","backgroundHash","c1","c2","join","sendFile","formData","loadFn","progressFn","errorFn","xhr","XMLHttpRequest","setRequestHeader","status","JSON","parse","response","statusText","upload","onprogress","loaded","total","send","nocache","h","fetch","method","headers","Headers","ok","json","contentType","request","put","fetchOptions","stringify","exception","message","events","register","localStorage","removeItem","cacheDuration","persistant","storageBox","setItem","getItem","resetCache","clear","_alert","_cache","_http","_me","_router","_util","_lang","FaIcon","regular","comment","images","bell","solid","film","times","icon","family","Search","evt","searchTerms","normalize","group_id","encodeURIComponent","decodeURIComponent","GroupsDropdownNavbar","currentTarget","toggle","Notification","getMiniature","setMiniatureOnError","getAction","getTarget","imgSrc","fromUser","avatar","src","getObject","fromGroup","createdAt","NotificationsDropdownNavbar","clearAllNotifications","Navbar","clickBackButton","confirm","bundleURL","getBundleURLCached","getBundleURL","matches","stack","getBaseURL","require","loadBundlesLazy","bundles","code","LazyPromise","loadBundles","loadBundle","bundleLoaders","registerBundleLoader","module","load","bundle","lastIndexOf","bundleLoader","executor","onSuccess","onError","FileGrid","toggleFile","files","fileIndex","renderFile","file","miniature","filePath","contentUrl","inWriter","removed","progress","nlg","start","MessageHead","author","isChild","MessageFooter","editMessage","isPublic","deleteMessage","openPublicLink","shareMessage","isInFront","publishInGroup","TwitchEmbed","embedUrl","splits","BandCampEmbed","revealed","preview","GenericEmbed","playBtnClass","EmbedBlock","execute","eval","script","async","head","embedContainer","from","getElementsByTagName","getPreview","MessageBody","displayMessageText","trim","shift","gotPreview","previewUrl","prevState","title","Writer","sendMessage","genPreview","postMessage","putMessage","onKeyPress","inputImages","inputVideo","uploadFile","uploadNextImage","writerId","doGenPreview","scrollHeight","links","messageId","msg","sending","detail","lastActivityDate","input","display","accept","iterator","click","placeholderIndex","it","next","imageService","handleImage","FormData","append","focus","cancel","MessageChild","loadMessage","cancelEdit","onEditMessage","processEmbed","displayedChildren","edit","isRemoved","displayWriter","scrollTo","msgElement","contains","scrollIntoView","block","behavior","hidden","MessageChildren","lastDisplayedChild","firstDisplayedChild","displayPreviousChildren","m","displayNextChildren","MessageParent","onNewChild","msgIndex","findIndex","max","min","token","resetGroupDisplay","newMsg","MessagePreview","getAvatar","tabindex","MessageSearchResult","getLink","displayMessageTitle","displayAuthorName","authorName","words","k","lines","hashtags","_FileGrid","_MessageBody","_MessageFooter","_MessageParent","_MessageChild","_MessageChildren","_MessageHead","_MessagePreview","_MessageSearchResult","_EmbedBlock","CreateGroup","postNewGroup","secretKey","GroupSearch","groupId","screen","messages","totalMessages","loadMessages","GroupBoard","scrollTop","pageYOffset","page","scroll_cooldown","onScroll","new_loaded","msgList","getComputedStyle","UserSettings","destroyAccount","inputAvatar","updateSettings","img","Image","onload","w","naturalWidth","naturalHeight","nw","nh","resize","blob","createObjectURL","login","password","notification_emails","default_group","GroupSettings","leaveGroup","leave","resetSecretKey","hydratedUsers","protocol","users","Settings","Share","currentUrl","groupSelect","MainContent","Login","showAlert","sendLoginForm","sendPasswordReset","showPasswordReset","mail","api_key","showResetPassword","zusam_logo","ResetPassword","sendNewPassword","passwordConfirmation","Signup","inviteKey","sendSignupForm","invite_key","StopNotificationEmails","Public","_Login","_ResetPassword","_Signup","_StopNotificationEmails","_Public","App","onRouterStateChange","querySelectorAll","navigator","serviceWorker","charset","onerror"],"mappings":"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","file":"app.0d55d553.js","sourceRoot":"../src","sourcesContent":["import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\ti;\n\tfor (i in props) {\n\t\tif (i !== 'key' && i !== 'ref') normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type === 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(\n\t\ttype,\n\t\tnormalizedProps,\n\t\tprops && props.key,\n\t\tprops && props.ref\n\t);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined\n\t};\n\n\tif (options.vnode) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn {};\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\tupdate = update(s, this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type === 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tlet newDom = diff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\tassign({}, vnode),\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tnull,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (newDom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty && (c._dirty = true) && rerenderQueue.push(c) === 1) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c;\n\trerenderQueue.sort((a, b) => b._vnode._depth - a._vnode._depth);\n\twhile ((c = rerenderQueue.pop())) {\n\t\t// forceUpdate's callback argument is reused here to indicate a non-forced update.\n\t\tif (c._dirty) renderComponent(c);\n\t}\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\n\nconst IS_HYDRATE = EMPTY_OBJ;\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {Element | Text} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we\n\t// are in hydration mode or not by passing `IS_HYDRATE` instead of a\n\t// DOM element.\n\tlet isHydrating = replaceNode === IS_HYDRATE;\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\tvnode = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\t((isHydrating ? parentDom : replaceNode || parentDom)._children = vnode),\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\treplaceNode && !isHydrating\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: EMPTY_ARR.slice.call(parentDom.childNodes),\n\t\tcommitQueue,\n\t\treplaceNode || EMPTY_OBJ,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, IS_HYDRATE);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tconst ctx = {};\n\n\tconst context = {\n\t\t_id: '__cC' + i++,\n\t\t_defaultValue: defaultValue,\n\t\tConsumer(props, context) {\n\t\t\treturn props.children(context);\n\t\t},\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tconst subs = [];\n\t\t\t\tthis.getChildContext = () => {\n\t\t\t\t\tctx[context._id] = this;\n\t\t\t\t\treturn ctx;\n\t\t\t\t};\n\t\t\t\tthis.shouldComponentUpdate = _props => {\n\t\t\t\t\tif (props.value !== _props.value) {\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc.context = _props.value;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\told && old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\tcontext.Consumer.contextType = context;\n\n\treturn context;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { removeNode } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Node | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, newDom, sibDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\t// Only in very specific places should this logic be invoked (top level `render` and `diffElementNodes`).\n\t// I'm using `EMPTY_OBJ` to signal when `diffChildren` is invoked in these situations. I can't use `null`\n\t// for this purpose, because `null` is a valid value for `oldDom` which can mean to skip to this logic\n\t// (e.g. if mounting a new tree in which the old DOM should be ignored (usually for Fragments).\n\tif (oldDom == EMPTY_OBJ) {\n\t\tif (excessDomChildren != null) {\n\t\t\toldDom = excessDomChildren[0];\n\t\t} else if (oldChildrenLength) {\n\t\t\toldDom = getDomSibling(oldParentVNode, 0);\n\t\t} else {\n\t\t\toldDom = null;\n\t\t}\n\t}\n\n\ti = 0;\n\tnewParentVNode._children = toChildArray(\n\t\tnewParentVNode._children,\n\t\tchildVNode => {\n\t\t\tif (childVNode != null) {\n\t\t\t\tchildVNode._parent = newParentVNode;\n\t\t\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t\t\t// Check if we find a corresponding element in oldChildren.\n\t\t\t\t// If found, delete the array item by setting to `undefined`.\n\t\t\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t\t\t// (holes).\n\t\t\t\toldVNode = oldChildren[i];\n\n\t\t\t\tif (\n\t\t\t\t\toldVNode === null ||\n\t\t\t\t\t(oldVNode &&\n\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t\t\t) {\n\t\t\t\t\toldChildren[i] = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t\t\t// We always match by type (in either case).\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toldVNode &&\n\t\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toldVNode = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\t\t\tnewDom = diff(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\tglobalContext,\n\t\t\t\t\tisSvg,\n\t\t\t\t\texcessDomChildren,\n\t\t\t\t\tcommitQueue,\n\t\t\t\t\toldDom,\n\t\t\t\t\tisHydrating\n\t\t\t\t);\n\n\t\t\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\t\t\tif (!refs) refs = [];\n\t\t\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t\t\t}\n\n\t\t\t\t// Only proceed if the vnode has not been unmounted by `diff()` above.\n\t\t\t\tif (newDom != null) {\n\t\t\t\t\tif (firstChildDom == null) {\n\t\t\t\t\t\tfirstChildDom = newDom;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet nextDom;\n\t\t\t\t\tif (childVNode._nextDom !== undefined) {\n\t\t\t\t\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t\t\t\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t\t\t\t\t// of last DOM child of this child VNode\n\t\t\t\t\t\tnextDom = childVNode._nextDom;\n\n\t\t\t\t\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t\t\t\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t\t\t\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t\t\t\t\t// can clean up the property\n\t\t\t\t\t\tchildVNode._nextDom = undefined;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\texcessDomChildren == oldVNode ||\n\t\t\t\t\t\tnewDom != oldDom ||\n\t\t\t\t\t\tnewDom.parentNode == null\n\t\t\t\t\t) {\n\t\t\t\t\t\t// NOTE: excessDomChildren==oldVNode above:\n\t\t\t\t\t\t// This is a compression of excessDomChildren==null && oldVNode==null!\n\t\t\t\t\t\t// The values only have the same type when `null`.\n\n\t\t\t\t\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\t\t\t\t\tparentDom.appendChild(newDom);\n\t\t\t\t\t\t\tnextDom = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\tsibDom = oldDom, j = 0;\n\t\t\t\t\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildrenLength;\n\t\t\t\t\t\t\t\tj += 2\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\t\t\t\t\tnextDom = oldDom;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t\t\t\t// there are probably some internal data structures that aren't\n\t\t\t\t\t\t// updated properly.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t\t\t\t// value check in `diff()` won't be skipped.\n\t\t\t\t\t\tif (newParentVNode.type == 'option') {\n\t\t\t\t\t\t\tparentDom.value = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t\t\t\t\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t\t\t\t\t// See more detail in create-element.js:createVNode\n\t\t\t\t\tif (nextDom !== undefined) {\n\t\t\t\t\t\toldDom = nextDom;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toldDom = newDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t\t\t// node's nextSibling.\n\n\t\t\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t\t\t}\n\t\t\t\t} else if (\n\t\t\t\t\toldDom &&\n\t\t\t\t\toldVNode._dom == oldDom &&\n\t\t\t\t\toldDom.parentNode != parentDom\n\t\t\t\t) {\n\t\t\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti++;\n\t\t\treturn childVNode;\n\t\t}\n\t);\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove children that are not part of any vnode.\n\tif (excessDomChildren != null && typeof newParentVNode.type !== 'function') {\n\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) unmount(oldChildren[i], oldChildren[i]);\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @param {(vnode: import('../internal').VNode) => import('../internal').VNode} [callback]\n * A function to invoke for each child before it is added to the flattened list.\n * @param {Array<import('../internal').VNode | string | number>} [flattened] An flat array of children to modify\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, callback, flattened) {\n\tif (flattened == null) flattened = [];\n\n\tif (children == null || typeof children === 'boolean') {\n\t\tif (callback) flattened.push(callback(null));\n\t} else if (Array.isArray(children)) {\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\ttoChildArray(children[i], callback, flattened);\n\t\t}\n\t} else if (!callback) {\n\t\tflattened.push(children);\n\t} else if (typeof children === 'string' || typeof children === 'number') {\n\t\tflattened.push(callback(createVNode(null, children, null, null)));\n\t} else if (children._dom != null || children._component != null) {\n\t\tflattened.push(\n\t\t\tcallback(createVNode(children.type, children.props, children.key, null))\n\t\t);\n\t} else {\n\t\tflattened.push(callback(children));\n\t}\n\n\treturn flattened;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (!(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (\n\t\ttypeof value === 'number' &&\n\t\tIS_NON_DIMENSIONAL.test(key) === false\n\t) {\n\t\tstyle[key] = value + 'px';\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else {\n\t\tstyle[key] = value;\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nfunction setProperty(dom, name, value, oldValue, isSvg) {\n\tif (isSvg) {\n\t\tif (name === 'className') {\n\t\t\tname = 'class';\n\t\t}\n\t} else if (name === 'class') {\n\t\tname = 'className';\n\t}\n\n\tif (name === 'key' || name === 'children') {\n\t} else if (name === 'style') {\n\t\tconst s = dom.style;\n\n\t\tif (typeof value === 'string') {\n\t\t\ts.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue === 'string') {\n\t\t\t\ts.cssText = '';\n\t\t\t\toldValue = null;\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (let i in oldValue) {\n\t\t\t\t\tif (!(value && i in value)) {\n\t\t\t\t\t\tsetStyle(s, i, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (let i in value) {\n\t\t\t\t\tif (!oldValue || value[i] !== oldValue[i]) {\n\t\t\t\t\t\tsetStyle(s, i, value[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tlet useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tlet nameLower = name.toLowerCase();\n\t\tname = (nameLower in dom ? nameLower : name).slice(2);\n\n\t\tif (value) {\n\t\t\tif (!oldValue) dom.addEventListener(name, eventProxy, useCapture);\n\t\t\t(dom._listeners || (dom._listeners = {}))[name] = value;\n\t\t} else {\n\t\t\tdom.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t} else if (\n\t\tname !== 'list' &&\n\t\tname !== 'tagName' &&\n\t\t// HTMLButtonElement.form and HTMLInputElement.form are read-only but can be set using\n\t\t// setAttribute\n\t\tname !== 'form' &&\n\t\tname !== 'type' &&\n\t\tname !== 'size' &&\n\t\t!isSvg &&\n\t\tname in dom\n\t) {\n\t\tdom[name] = value == null ? '' : value;\n\t} else if (\n\t\ttypeof value !== 'function' &&\n\t\tname !== 'dangerouslySetInnerHTML'\n\t) {\n\t\tif (name !== (name = name.replace(/^xlink:?/, ''))) {\n\t\t\tif (value == null || value === false) {\n\t\t\t\tdom.removeAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdom.setAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase(),\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (\n\t\t\tvalue == null ||\n\t\t\t(value === false &&\n\t\t\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t\t\t// The value `false` is different from the attribute not\n\t\t\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t\t\t// that other VDOM frameworks also always stringify `false`.\n\t\t\t\t!/^ar/.test(name))\n\t\t) {\n\t\t\tdom.removeAttribute(name);\n\t\t} else {\n\t\t\tdom.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Element | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType === 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\tc.shouldComponentUpdate(newProps, c._nextState, componentContext) ===\n\t\t\t\t\t\tfalse\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\t\t\t\t\tfor (tmp = 0; tmp < newVNode._children.length; tmp++) {\n\t\t\t\t\t\tif (newVNode._children[tmp]) {\n\t\t\t\t\t\t\tnewVNode._children[tmp]._parent = newVNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type == Fragment && tmp.key == null;\n\t\t\tnewVNode._children = isTopLevelFragment\n\t\t\t\t? tmp.props.children\n\t\t\t\t: Array.isArray(tmp)\n\t\t\t\t? tmp\n\t\t\t\t: [tmp];\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n\n\treturn newVNode._dom;\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet i;\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvg = newVNode.type === 'svg' || isSvg;\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild != null &&\n\t\t\t\t((newVNode.type === null\n\t\t\t\t\t? child.nodeType === 3\n\t\t\t\t\t: child.localName === newVNode.type) ||\n\t\t\t\t\tdom == child)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (newVNode.type === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = isSvg\n\t\t\t? document.createElementNS('http://www.w3.org/2000/svg', newVNode.type)\n\t\t\t: document.createElement(\n\t\t\t\t\tnewVNode.type,\n\t\t\t\t\tnewProps.is && { is: newProps.is }\n\t\t\t  );\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t}\n\n\tif (newVNode.type === null) {\n\t\tif (oldProps !== newProps && dom.data != newProps) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else if (newVNode !== oldVNode) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren = EMPTY_ARR.slice.call(dom.childNodes);\n\t\t}\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\tif (oldProps === EMPTY_OBJ) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (!newHtml || !oldHtml || newHtml.__html != oldHtml.__html) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\tnewVNode._children = newVNode.props.children;\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (!newHtml) {\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnewVNode.type === 'foreignObject' ? false : isSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tEMPTY_OBJ,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\tnewProps.value !== undefined &&\n\t\t\t\tnewProps.value !== dom.value\n\t\t\t) {\n\t\t\t\tdom.value = newProps.value == null ? '' : newProps.value;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\tnewProps.checked !== undefined &&\n\t\t\t\tnewProps.checked !== dom.checked\n\t\t\t) {\n\t\t\t\tdom.checked = newProps.checked;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) applyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type !== 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._dom = vnode._nextDom = undefined;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { assign } from './util';\nimport { EMPTY_ARR } from './constants';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./index').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n */\nexport function cloneElement(vnode, props) {\n\tprops = assign(assign({}, vnode.props), props);\n\tif (arguments.length > 2) props.children = EMPTY_ARR.slice.call(arguments, 2);\n\treturn createVNode(\n\t\tvnode.type,\n\t\tprops,\n\t\tprops.key || vnode.key,\n\t\tprops.ref || vnode.ref\n\t);\n}\n","import { enqueueRender } from '../component';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component, hasCaught;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tif (\n\t\t\t\t\tcomponent.constructor &&\n\t\t\t\t\tcomponent.constructor.getDerivedStateFromError != null\n\t\t\t\t) {\n\t\t\t\t\thasCaught = true;\n\t\t\t\t\tcomponent.setState(\n\t\t\t\t\t\tcomponent.constructor.getDerivedStateFromError(error)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\thasCaught = true;\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t}\n\n\t\t\t\tif (hasCaught)\n\t\t\t\t\treturn enqueueRender((component._pendingError = component));\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tif (currentComponent.__hooks) {\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\tcurrentComponent.__hooks._pendingEffects = [];\n\t}\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\tif (hooks._pendingEffects.length) {\n\t\t\tafterPaint(afterPaintEffects.push(c));\n\t\t}\n\t}\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\ttry {\n\t\t\thooks._list.forEach(hook => hook._cleanup && hook._cleanup());\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @returns {import('./internal').HookState}\n */\nfunction getHookState(index) {\n\tif (options._hook) options._hook(currentComponent);\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = { _list: [], _pendingEffects: [] });\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} initialState\n */\nexport function useState(initialState) {\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++);\n\tif (!hookState._component) {\n\t\thookState._component = currentComponent;\n\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value[0] = nextValue;\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\treturn hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref === 'function') ref(createHandle());\n\t\t\telse if (ref) ref.current = createHandle();\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t\treturn (state._value = factory());\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\tif (!provider) return context._defaultValue;\n\tconst state = getHookState(currentIndex++);\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\nexport function useErrorBoundary(cb) {\n\tconst state = getHookState(currentIndex++);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = err => {\n\t\t\tif (state._value) state._value(err);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tafterPaintEffects.some(component => {\n\t\tif (component._parentDom) {\n\t\t\ttry {\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, component._vnode);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\tafterPaintEffects = [];\n}\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tcancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (typeof window !== 'undefined') {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\tif (hook._cleanup) hook._cleanup();\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\tconst result = hook._value();\n\tif (typeof result === 'function') hook._cleanup = result;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn !oldArgs || newArgs.some((arg, index) => arg !== oldArgs[index]);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f === 'function' ? f(arg) : f;\n}\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport class PureComponent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// Some third-party libraries check if this property is present\n\t\tthis.isPureReactComponent = true;\n\t}\n\n\tshouldComponentUpdate(props, state) {\n\t\treturn (\n\t\t\tshallowDiffers(this.props, props) || shallowDiffers(this.state, state)\n\t\t);\n\t}\n}\n","import { createElement } from 'preact';\nimport { shallowDiffers, assign } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionalComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, assign({}, props));\n\t}\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref);\n\t}\n\tForwarded.prototype.isReactComponent = true;\n\tForwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (!children) return null;\n\treturn toChildArray(children).reduce(\n\t\t(acc, value, index) => acc.concat(fn(value, index)),\n\t\t[]\n\t);\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tchildren = toChildArray(children);\n\t\tif (children.length !== 1) {\n\t\t\tthrow new Error('Children.only() expects only one child.');\n\t\t}\n\t\treturn children[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { Component, createElement, options } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function(error, newVNode, oldVNode) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode._component);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode);\n};\n\nfunction detachedClone(vnode) {\n\tif (vnode) {\n\t\tvnode = assign({}, vnode);\n\t\tvnode._component = null;\n\t\tvnode._children = vnode._children && vnode._children.map(detachedClone);\n\t}\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense(props) {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @param {Promise} promise The thrown promise\n * @param {Component<any, any>} suspendingComponent The suspending component\n */\nSuspense.prototype._childDidSuspend = function(promise, suspendingComponent) {\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._suspendedComponentWillUnmount =\n\t\tsuspendingComponent.componentWillUnmount;\n\tsuspendingComponent.componentWillUnmount = () => {\n\t\tonResolved();\n\n\t\tif (suspendingComponent._suspendedComponentWillUnmount) {\n\t\t\tsuspendingComponent._suspendedComponentWillUnmount();\n\t\t}\n\t};\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\tc._vnode._children[0] = c.state._suspended;\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\tif (!c._pendingSuspensionCount++) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.render = function(props, state) {\n\tif (this._detachOnNextRender) {\n\t\tthis._vnode._children[0] = detachedClone(this._detachOnNextRender);\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\treturn [\n\t\tcreateElement(Component, null, state._suspended ? null : props.children),\n\t\tstate._suspended && props.fallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('../src/internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function(child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function(props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate = SuspenseList.prototype.componentDidMount = function() {\n\t// Iterate through all children after mounting for two reasons:\n\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t//    The nodes can now be completely consumed from the linked list.\n\t// 2. Handle nodes that might have gotten resolved between render and\n\t//    componentDidMount.\n\tconst list = this;\n\tlist._map.forEach((node, child) => {\n\t\tresolve(list, child, node);\n\t});\n};\n","import { createElement, hydrate, render, _unmount } from 'preact';\n\nclass ContextProvider {\n\tgetChildContext() {\n\t\treturn this.props.context;\n\t}\n\trender(props) {\n\t\treturn props.children;\n\t}\n}\n\n/**\n * Portal component\n * @param {object | null | undefined} props\n */\nfunction Portal(props) {\n\tlet _this = this;\n\tlet container = props.container;\n\tlet wrap = createElement(\n\t\tContextProvider,\n\t\t{ context: _this.context },\n\t\tprops.vnode\n\t);\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t\t_this._hasMounted = false;\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props.vnode) {\n\t\tif (!_this._hasMounted) {\n\t\t\t// Create a placeholder that we can use to insert into.\n\t\t\t_this._temp = document.createTextNode('');\n\t\t\t// Hydrate existing nodes to keep the dom intact, when rendering\n\t\t\t// wrap into the container.\n\t\t\thydrate('', container);\n\t\t\t// Append to the container (this matches React's behavior)\n\t\t\tcontainer.appendChild(_this._temp);\n\t\t\t// At this point we have mounted and should set our container.\n\t\t\t_this._hasMounted = true;\n\t\t\t_this._container = container;\n\t\t\t// Render our wrapping element into temp.\n\t\t\trender(wrap, container, _this._temp);\n\t\t\t_this._children = this._temp._children;\n\t\t} else {\n\t\t\t// When we have mounted and the vnode is present it means the\n\t\t\t// props have changed or a parent is triggering a rerender.\n\t\t\t// This implies we only need to call render. But we need to keep\n\t\t\t// the old tree around, otherwise will treat the vnodes as new and\n\t\t\t// will wrongly call `componentDidMount` on them\n\t\t\tcontainer._children = _this._children;\n\t\t\trender(wrap, container);\n\t\t\t_this._children = container._children;\n\t\t}\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._hasMounted) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t}\n\t// Set the wrapping element for future unmounting.\n\t_this._wrap = wrap;\n\n\t_this.componentWillUnmount = () => {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t};\n\n\treturn null;\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\treturn createElement(Portal, { vnode, container });\n}\n","/**\n * Normalize event handlers like react does. Most famously it uses `onChange` for any input element.\n * @param {import('./internal').VNode} vnode The vnode to normalize events on\n */\nexport function applyEventNormalization({ type, props }) {\n\tif (!props || typeof type != 'string') return;\n\tlet newProps = {};\n\n\tfor (let i in props) {\n\t\tif (/^on(Ani|Tra|Tou)/.test(i)) {\n\t\t\tprops[i.toLowerCase()] = props[i];\n\t\t\tdelete props[i];\n\t\t}\n\t\tnewProps[i.toLowerCase()] = i;\n\t}\n\tif (newProps.ondoubleclick) {\n\t\tprops.ondblclick = props[newProps.ondoubleclick];\n\t\tdelete props[newProps.ondoubleclick];\n\t}\n\tif (newProps.onbeforeinput) {\n\t\tprops.onbeforeinput = props[newProps.onbeforeinput];\n\t\tdelete props[newProps.onbeforeinput];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (\n\t\tnewProps.onchange &&\n\t\t(type === 'textarea' ||\n\t\t\t(type.toLowerCase() === 'input' && !/^fil|che|ra/i.test(props.type)))\n\t) {\n\t\tlet normalized = newProps.oninput || 'oninput';\n\t\tif (!props[normalized]) {\n\t\t\tprops[normalized] = props[newProps.onchange];\n\t\t\tdelete props[newProps.onchange];\n\t\t}\n\t}\n}\n","const alert = {\n  remove: id => (document.getElementById(id).outerHTML = \"\"),\n  add: (text, alertStyle = \"alert-success\", countdown = 5000) => {\n    if (!text) {\n      return;\n    }\n    let alertNode = document.createElement(\"DIV\");\n    alertNode.id = alert.hash(text);\n    alertNode.innerHTML = text;\n    alertNode.classList.add(\"global-alert\", \"alert\", alertStyle);\n    document.body.appendChild(alertNode);\n    setTimeout(() => alert.remove(alertNode.id), countdown);\n  },\n  hash: str => {\n    let hash = 0;\n    if (str.length == 0) {\n      return hash;\n    }\n    for (let i = 0; i < str.length; i++) {\n      let char = str.charCodeAt(i);\n      hash = (hash << 5) - hash + char;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n  }\n};\nexport default alert;\n","import http from \"./http.js\";\nimport lang from \"./lang.js\";\nimport cache from \"./cache.js\";\n\nconst me = {\n  me: {},\n  get: () => (me.me.id ? Promise.resolve(me.me) : me.update()),\n  update: () =>\n    cache.get(\"/api/me\", true).then(r => {\n      if (!r) {\n        return;\n      }\n      me.me = Object.assign({ notifications: [] }, r);\n      me.loadNotifications();\n      lang.fetchDict();\n      window.dispatchEvent(new CustomEvent(\"meStateChange\"));\n      return r;\n    }),\n  loadNotifications: () =>\n    cache.get(\"/api/users/\" + me.me.id + \"/notifications\").then(r => {\n      me.me.notifications = r;\n      window.dispatchEvent(new CustomEvent(\"meStateChange\"));\n    }),\n  matchNotification: (notif, id) => {\n    if (notif.id === id) {\n      return true;\n    }\n    if (notif.target === id) {\n      return true;\n    }\n    return false;\n  },\n  isNew: id =>\n    Array.isArray(me.me.notifications)\n      ? me.me.notifications.some(\n          n =>\n            me.matchNotification(n, id) ||\n            (n.type == \"new_comment\" && n.fromMessage.id === id)\n        )\n      : false,\n  removeMatchingNotifications: id => {\n    return me.loadNotifications().then(_ => {\n      if (!Array.isArray(me.me.notifications)) {\n        return Promise.reject(\"Failed to get notifications from server\");\n      }\n      return Promise.all(\n        me.me.notifications\n          .filter(n => me.matchNotification(n, id))\n          .map(n =>\n            http.delete(\"/api/notifications/\" + n.id).then(r => {\n              me.me.notifications = me.me.notifications.filter(\n                e => !me.matchNotification(e, id)\n              );\n              window.dispatchEvent(new CustomEvent(\"meStateChange\"));\n            })\n          )\n      );\n    });\n  }\n};\nexport default me;\n","import me from \"./me.js\";\nimport http from \"./http.js\";\n\nconst lang = {\n  dict: [], // dicts loaded for the current session\n  possibleLang: {\n    en: \"English\",\n    es: \"Espaol\",\n    fr: \"Franais\",\n    sk: \"Slovensk\"\n  }, // possible dicts names to load\n  getDefaultLang: () =>\n    (document.querySelector(\"meta[name='zusam:default-lang']\") || {}).content ||\n    \"en\",\n  getCurrentLang: () =>\n    me.me && me.me[\"data\"]\n      ? me.me.data[\"lang\"] || lang.getDefaultLang()\n      : lang.getDefaultLang(),\n  fetchDict: (dict = lang.getCurrentLang()) =>\n    !lang.dict[dict] &&\n    http.get(\"/lang/\" + dict + \".json\").then(r => {\n      lang.dict[dict] = r;\n      window.dispatchEvent(new CustomEvent(\"fetchedNewDict\"));\n    }),\n  t: (id, params = {}) => {\n    // prepare default values\n    params.dict = params[\"dict\"] || lang.getCurrentLang();\n    params.count = params[\"count\"] || 0;\n\n    // quick validity checks\n    if (!id || !lang.dict[params.dict]) {\n      return \"\";\n    }\n\n    // select translation string corresponding to count\n    // We treat the list of translation keys like ranges\n    // So if we have the keys 0, 1, 5; we have the ranges [0], [1, 4], [5, +inf]\n    let str = lang.dict[params.dict][id] || \"\";\n    if (typeof str == \"object\") {\n      let keys = Object.getOwnPropertyNames(str)\n        .map(e => +e)\n        .filter(e => !isNaN(e) && e <= params.count)\n        .sort((a, b) => a - b);\n      str = keys.length ? str[keys.slice(-1)[0]] : \"\";\n    }\n\n    // replace parameters\n    Object.assign([], str.match(/{{\\w+}}/g)).forEach(s => {\n      let rid = s.replace(/[\\{\\}]/g, \"\");\n      if (params[rid]) {\n        str = str.replace(s, params[rid]);\n      }\n    });\n\n    return str;\n  }\n};\nexport default lang;\n","import cache from \"./cache.js\";\nimport http from \"./http.js\";\nimport me from \"./me.js\";\nimport util from \"./util.js\";\nimport lang from \"./lang.js\";\n\nconst router = {\n  route: \"\",\n  id: \"\",\n  action: \"\",\n  backUrl: \"\",\n  backUrlPrompt: \"\",\n  entityUrl: \"\",\n  entityType: \"\",\n  search: \"\",\n  entity: {},\n  isValidUrl: url => {\n    try {\n      new URL(url);\n      return true;\n    } catch (_) {\n      return false;\n    }\n  },\n  getSubpath: () => new URL(document.baseURI).pathname.replace(/\\/$/, \"\"),\n  toApp: url => {\n    if (!url || typeof url != \"string\") {\n      return \"\";\n    }\n    if (router.isValidUrl(url)) {\n      return url;\n    }\n    return location.origin + router.getSubpath() + url;\n  },\n  removeSubpath: path =>\n    path ? path.replace(new RegExp(\"^\" + router.getSubpath()), \"\") : \"\",\n  getParam: (param, searchParams = window.location.search.substring(1)) => {\n    let res = searchParams.split(\"&\").find(e => e.split(\"=\")[0] === param);\n    return res ? res.split(\"=\")[1] : \"\";\n  },\n  getSegments: () =>\n    window.location.pathname\n      .slice(1)\n      .split(\"?\")[0]\n      .split(\"/\"),\n  // check if route is \"outside\": accessible to non connected user\n  isOutside: () =>\n    [\n      \"login\",\n      \"password-reset\",\n      \"signup\",\n      \"invitation\",\n      \"stop-notification-emails\",\n      \"public\"\n    ].includes(router.route || router.getSegments()[0]),\n  isEntity: name =>\n    [\"messages\", \"groups\", \"users\", \"links\", \"files\"].includes(name),\n  getUrlComponents: url => {\n    let components = {};\n    if (url) {\n      components.url = new URL(url);\n      components.path = components.url.pathname;\n      components.search = components.url.search.slice(1);\n      [components.route, components.id, components.action] = router\n        .removeSubpath(components.path)\n        .slice(1)\n        .split(\"/\");\n    }\n    components.entityUrl = \"\";\n    components.entityType = \"\";\n    components.backUrl = \"\";\n    components.backUrlPrompt = \"\";\n    return components;\n  },\n  navigate: async (url = \"/\", options = {}) => {\n    if (!url.match(/^http/) && !options[\"raw_url\"]) {\n      url = router.toApp(url);\n    }\n    let components = router.getUrlComponents(url);\n    // do not allow to renavigate to the same url. This is done to avoid accidental navigate locks\n    if (router.url && router.url.href == components.url.href) {\n      console.warn(\"navigate lock !\");\n      return;\n    }\n    Object.assign(router, components);\n\n    // set url, backUrl and entityUrl\n    if (router.route && router.id && router.isEntity(router.route)) {\n      router.entityUrl = \"/api/\" + router.route + \"/\" + router.id;\n      router.entityType = router.route;\n\n      await cache\n        .get(router.entityUrl)\n        .then(res => {\n          if (!res) {\n            console.warn(\"Unknown entity\");\n            router.navigate();\n            return;\n          }\n          router.entity = res;\n          switch (router.route) {\n            case \"groups\":\n              if (router.action == \"write\") {\n                router.backUrl = \"/\" + router.route + \"/\" + router.id;\n                router.backUrlPrompt = lang.t(\"cancel_write\");\n              }\n              if (router.search) {\n                router.backUrl = \"/\" + router.route + \"/\" + router.id;\n              }\n              break;\n            case \"messages\":\n              if (res[\"parent\"] && !res[\"isInFront\"]) {\n                router.backUrl = \"/messages/\" + res[\"parent\"].id;\n              } else {\n                router.backUrl = \"/groups/\" + util.getId(res.group);\n              }\n              break;\n            case \"users\":\n              router.backUrl = \"/\";\n              break;\n            default:\n              if (router.action) {\n                router.backUrl = \"/\";\n              }\n          }\n        })\n        .catch(e => console.warn(e));\n    }\n\n    switch (router.route) {\n      case \"login\":\n        cache.reset();\n      case \"create-group\":\n      case \"groups\":\n      case \"messages\":\n      case \"password-reset\":\n      case \"public\":\n      case \"share\":\n      case \"signup\":\n      case \"stop-notification-emails\":\n      case \"users\":\n        if (options.replace) {\n          history.replaceState(null, \"\", url);\n        } else {\n          history.pushState(null, \"\", url);\n        }\n        window.dispatchEvent(new CustomEvent(\"routerStateChange\"));\n        break;\n      case \"logout\":\n        cache.reset();\n        window.location.href = window.location.origin;\n        break;\n      case \"invitation\":\n        cache.get(\"apiKey\").then(apiKey => {\n          if (apiKey) {\n            http.post(\"/api/groups/invitation/\" + router.id, {}).then(res => {\n              window.location.href = window.location.origin;\n            });\n          } else {\n            router.navigate(\"/signup?inviteKey=\" + router.id);\n          }\n        });\n        break;\n      default:\n        me.get().then(user => {\n          if (!user) {\n            router.navigate(\"/login\");\n            return;\n          }\n          if (user.data[\"default_group\"]) {\n            router.navigate(\"/groups/\" + user.data[\"default_group\"]);\n          } else {\n            if (user.groups[0]) {\n              router.navigate(\"/groups/\" + user.groups[0].id);\n            } else {\n              window.location = \"/create-group\";\n            }\n          }\n        });\n    }\n  },\n  sync: () =>\n    router.navigate(location.pathname + location.search + location.hash, {\n      replace: true\n    }),\n  onClick: (e, newTab = false, url = null) => {\n    // stop propagation\n    e.preventDefault();\n    e.stopPropagation();\n\n    // if url is not given, try to guess it\n    if (!url) {\n      const t = e.target.closest(\"a\");\n      if (t) {\n        if (t.target == \"_blank\") {\n          newTab = true;\n        }\n        url = t.getAttribute(\"href\");\n      }\n    }\n\n    if (!url) {\n      return;\n    }\n\n    // check if it's an external url\n    if (url.startsWith(\"http\")) {\n      let targetUrl = new URL(url);\n      if (targetUrl.host != location.host) {\n        if (e.ctrlKey || newTab) {\n          open(url, \"_blank\");\n        } else {\n          location.href = url;\n        }\n        return;\n      }\n    }\n\n    // disable active stances (dropdowns...)\n    for (let e of document.getElementsByClassName(\"active\")) {\n      e.classList.remove(\"active\");\n    }\n\n    // go to target url\n    if (e.ctrlKey || newTab) {\n      open(url, \"_blank\");\n    } else {\n      router.navigate(url);\n    }\n  }\n};\nexport default router;\n","import lang from \"./lang.js\";\nimport router from \"./router.js\";\nimport me from \"./me.js\";\n\nconst util = {\n  urlRegExp: new RegExp(\n    \"(\\\\([^()]*)?https?:\\\\/\\\\/[-A-Za-z0-9+&@#/%?=~_()|!:,.;*]*[-A-Za-z0-9+&@#/%=~_()|]\",\n    \"i\"\n  ),\n  getUrl: txt => {\n    if (!txt) {\n      return \"\";\n    }\n    let url = txt.match(util.urlRegExp);\n    if (url && url[0].startsWith(\"(\")) {\n      let link = url[0].match(/https?:\\/\\//i);\n      url[\"index\"] += link[\"index\"];\n      url[0] = url[0].slice(link[\"index\"]);\n      if (url[0].endsWith(\")\")) {\n        url[0] = url[0].slice(0, -1);\n      }\n    }\n    return url;\n  },\n  // full datetime as a string adapted to the users timezone\n  humanFullDate: timestamp => {\n    let d = new Date(timestamp * 1000);\n    d = new Date(d.getTime() + d.getTimezoneOffset() * 60000 * -1);\n    return d\n      .toISOString()\n      .replace(\"T\", \" \")\n      .replace(/\\..*$/, \"\");\n  },\n  // duration relative to event\n  humanTime: timestamp => {\n    if (!timestamp) {\n      return null;\n    }\n    const duration = Math.abs(Math.round((Date.now() / 1000 - timestamp) / 60));\n    if (duration < 1) {\n      return lang.t(\"just_now\");\n    }\n    if (duration < 60) {\n      return lang.t(\"ago\", { duration: duration + \"mn\" });\n    }\n    if (duration < 60 * 24) {\n      return lang.t(\"ago\", { duration: Math.floor(duration / 60) + \"h\" });\n    }\n    let date = new Date(timestamp * 1000);\n    return util.humanFullDate(timestamp).split(\" \")[0];\n  },\n  getGroupId: _ => {\n    if (me.me.groups) {\n      switch (router.entity.entityType) {\n        case \"group\":\n          return util.getId(router.entity);\n        case \"message\":\n          return util.getId(router.entity.group);\n      }\n    }\n    return \"\";\n  },\n  getGroupName: _ => {\n    let group = me.me.groups.find(g => g[\"id\"] == util.getGroupId());\n    return group ? group[\"name\"] : \"\";\n  },\n  // get the id of an object from an url\n  getId: e => {\n    switch (typeof e) {\n      case \"object\":\n        return e ? e.id : null;\n      case \"string\":\n        return e\n          .split(\"/\")\n          .pop()\n          .replace(/\\?.*$/, \"\")\n          .replace(/\\.\\w+$/, \"\");\n      default:\n        console.warn(e);\n        throw \"Could not extract id !\";\n    }\n  },\n  // get the url to a thubmnail\n  thumbnail: (id, width, height) =>\n    id\n      ? router.toApp(\"/api/images/thumbnail/\" + width + \"/\" + height + \"/\" + id)\n      : null,\n  // same as http.thumbnail but for a crop\n  crop: (id, width, height) =>\n    id\n      ? router.toApp(\"/api/images/crop/\" + width + \"/\" + height + \"/\" + id)\n      : null,\n  // default avatar in base64\n  defaultAvatar:\n    \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMA/iyWEiMAAAMJSURBVHja7ZtBjpwwEEWxmIhFFmiURZZEyi6HCLkZHCXr2eQKHIUjoEiRSGRRiWB6klaDU/hDF4z+W6LuNz3+ZRvbkCSEEEIIIYQQQgghhBBCCCGEEEIIITvwGfy+kxoTpNJigkw6TJBLjwkK8ZiglMFYUInAAqwQRKRBBR0q8FhXEKwVR0GLCvxCjeo6oyzkoIxnEvj5661acPO3yvFqpxdcV+Pj88VeNZ7cGB4ul1QFkv399KT4KBIpmGEwF4i9oL6DIN/3FzToL2ju8AvsBeE2aNFfQMFJBCkF0/R+bkHyCgSVuaDcVaC5zyvMBTkqyHYVaBZDKSpw5oJgLcMC5doXFBSoIMNutjcQBHJULmlhQYUKlmNQbs9kqGC5P2o3FqBBOVjMWkEOdcZQKam3dyqkkgP/g35zxmEpLhbjir0ZFz2tXHgbPR5deI+EMPKmig/hhU/fIkOYL4iYDbIyqpCXajp2Zy4yhNuxqUfbMCaEIraQZ9swJgQBQ0jBQr6eYXrzQrYIYdtC9uaFbDKayJajyTkL+VijyWA+mnBajGpDeFrMzAu5BNvwKoQBDaFHQ+jQEBo0hBoMYUBD8GgIHRpCi44mcAiJRQhoITvzQs63LGQxL2SOJnEhiHUI296bwNOixb1JYr5kz8yX7Odf6XDfBC9kd6yVzq+np69QIY/8AEJ45kt0T4hIM0VONm5CiLlVhLflS+CwdTGEVa2AnfOFTogaVAAfcg1QivpqzLFHD4LnrR0q8FAhqlux3PPUu0EFLSrooL6kLeaQwKMCTY4OfUjVoY+IOvTxSFiw81NtnbmgRwXeXDAg08IxBPIKBPX5BQ0FBxC0+wtSCg4gcBT853nruwiqfQXNHQT/LDiGD9Old6sEL2umn3MtqxDks9NotVbwfaG+FDfL6fznsjV32365cTXrtqoPdJKYrbmreIDvT42DCMYoIUEu4FvIKSpwgr6JvYEAfJm8QgUl+j58gb6Rn4Nvcv/p0jUmcODr8IQQQgghhBBCCCGEEEIIIYQQQgghs/wGp6uYgtiKODIAAAAASUVORK5CYII=\",\n  hash: str =>\n    str.split(\"\").reduce((a, c) => ((a << 5) - a + c.charCodeAt()) | 0),\n  colorHash: str =>\n    [\n      \"#000000\",\n      \"#333366\",\n      \"#333399\",\n      \"#3333CC\",\n      \"#339933\",\n      \"#339999\",\n      \"#33CC33\",\n      \"#33CC99\",\n      \"#663333\",\n      \"#663366\",\n      \"#666633\",\n      \"#666699\",\n      \"#66CC33\",\n      \"#66CCCC\",\n      \"#993333\",\n      \"#993366\",\n      \"#993399\",\n      \"#996633\",\n      \"#999966\",\n      \"#CC3333\",\n      \"#CC3366\",\n      \"#CC3399\",\n      \"#CC33CC\",\n      \"#CC6633\",\n      \"#CC9933\",\n      \"#CC99CC\",\n      \"#CCCC33\"\n    ][Math.abs(util.hash(str)) % 27],\n  backgroundHash: str => {\n    if (!str) {\n      return \"background-color: #aaa;\";\n    }\n    let c1 = util.colorHash(str);\n    let c2 = util.colorHash(\n      str\n        .split(\"\")\n        .reverse()\n        .join(\".\")\n    );\n    let deg = 45 * (Math.abs(util.hash(str)) % 4);\n    return (\n      \"background-color:\" +\n      c1 +\n      \";background-image:linear-gradient(\" +\n      deg +\n      \"deg, \" +\n      c2 +\n      \" 15%, transparent 15% 30%, \" +\n      c2 +\n      \" 30% 45%, transparent 45% 60%, \" +\n      c2 +\n      \" 60% 75%, transparent 75% 90%, \" +\n      c2 +\n      \" 90%);\"\n    );\n  }\n};\nexport default util;\n","import util from \"./util.js\";\nimport alert from \"./alert.js\";\nimport cache from \"./cache.js\";\nimport router from \"./router.js\";\n\nconst http = {\n  sendFile: (formData, loadFn, progressFn = null, errorFn = null) => {\n    return cache\n      .get(\"apiKey\")\n      .then(apiKey => {\n        let xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", document.baseURI + \"api/files\", true);\n        xhr.setRequestHeader(\"X-AUTH-TOKEN\", apiKey);\n        xhr.addEventListener(\"load\", e => {\n          if (e.target.status > 199 && e.target.status < 300) {\n            loadFn(JSON.parse(e.target.response));\n          } else {\n            if (errorFn) {\n              errorFn(e.target.statusText);\n            } else {\n              console.error(e.target.statusText);\n            }\n          }\n        });\n        if (progressFn) {\n          xhr.upload.onprogress = e =>\n            progressFn({ loaded: e.loaded, total: e.total });\n        }\n        if (errorFn) {\n          xhr.addEventListener(\"error\", e => errorFn(e));\n        }\n        xhr.send(formData);\n      })\n      .catch(err => {\n        err => console.warn(\"ERROR for \" + url, err);\n      })\n      .catch(error => alert.add(error, \"alert-danger\"));\n  },\n  get: (url, nocache = false) => {\n    return cache\n      .get(\"apiKey\")\n      .then(apiKey => {\n        url = router.toApp(url);\n        if (!url) {\n          return;\n        }\n        let h = {};\n        if (apiKey) {\n          h[\"X-AUTH-TOKEN\"] = apiKey;\n        }\n        if (nocache) {\n          h[\"X-NOCACHE\"] = \"nocache\";\n        }\n        return fetch(url, {\n          method: \"GET\",\n          headers: new Headers(h)\n        })\n          .then(res => res.ok && res.json())\n          .catch(err => console.warn(\"ERROR for \" + url, err));\n      })\n      .catch(error => alert.add(error, \"alert-danger\"));\n  },\n  post: (url, data, contentType = \"application/json\") =>\n    http.request(url, data, \"POST\", contentType),\n  put: (url, data, contentType = \"application/json\") =>\n    http.request(url, data, \"PUT\", contentType),\n  delete: (url, data, contentType = \"application/json\") =>\n    http.request(url, null, \"DELETE\", contentType),\n  request: (url, data, method, contentType = \"application/json\") => {\n    return cache\n      .get(\"apiKey\")\n      .then(apiKey => {\n        url = router.toApp(url);\n        if (!url) {\n          return;\n        }\n        let h = {};\n        if (apiKey) {\n          h[\"X-AUTH-TOKEN\"] = apiKey;\n        }\n        if (contentType) {\n          h[\"Content-type\"] = contentType;\n        }\n        let fetchOptions = {\n          method: method,\n          headers: new Headers(h)\n        };\n        if (data) {\n          fetchOptions.body =\n            typeof data == \"object\" && data.constructor.name == \"Object\"\n              ? JSON.stringify(data)\n              : data;\n        }\n        return fetch(url, fetchOptions)\n          .then(res => {\n            if (method == \"DELETE\") {\n              return res;\n            }\n            try {\n              return res.json();\n            } catch (exception) {\n              console.warn(exception.message);\n              return Promise.reject(exception.message);\n            }\n          })\n          .catch(err => console.warn(\"ERROR for \" + url, err));\n      })\n      .catch(error => alert.add(error, \"alert-danger\"));\n  }\n};\nexport default http;\n","import http from \"./http.js\";\n\nconst cache = {\n  // reactive data store AND cache\n  data: {},\n  events: {},\n  register: (event, resolve) => {\n    if (typeof cache.events[event] === \"undefined\") {\n      cache.events[event] = [];\n    }\n    cache.events[event].push(resolve);\n  },\n  remove: id => {\n    Object.keys(cache.data).forEach(key => {\n      if (key.startsWith(id)) {\n        delete cache.data[key];\n        window.localStorage.removeItem(key);\n      }\n    });\n  },\n  set: (id, data, cacheDuration = null, persistant = true) => {\n    const storageBox = {\n      data: data,\n      timestamp: Date.now(),\n      cacheDuration: cacheDuration\n    };\n    if (persistant) {\n      window.localStorage.setItem(id, JSON.stringify(storageBox));\n    } else {\n      cache.data[id] = storageBox;\n    }\n    return Promise.resolve(id);\n  },\n  get: (id, nocache = false) => {\n    if (!id) {\n      return new Promise(r => null);\n    }\n    // if nocache is false, try to load from the cache\n    if (!nocache) {\n      let data = null;\n      data = cache.data[id];\n      if (!data) {\n        data = window.localStorage.getItem(id);\n        data = data ? JSON.parse(data) : null;\n      }\n      if (data) {\n        let c = data.cacheDuration || 1000 * 60 * 60 * 24 * 365; // 1 year when not specified\n        if (data.timestamp < Date.now() - c) {\n          cache.remove(id);\n          data = null;\n        }\n      }\n      if (data) {\n        if (data.status == \"pending\") {\n          // a request for the resource was made. Let's wait for it\n          return new Promise(r => cache.register(id, r));\n        }\n        return new Promise(r => r(data.data));\n      }\n    }\n    // if it's an api resource, refresh it\n    if (/^\\/api/.test(id)) {\n      let cacheDuration = 10000; // short cache by default to avoid double calls (10s)\n      //if (/^\\/api\\/messages/.test(id)) {\n      //    cacheDuration = 10 * 60 * 1000; // 10mn for a message (not likely to be changed often)\n      //}\n      //if (/^\\/api\\/(users|links|groups|me)/.test(id)) {\n      //    cacheDuration = 60 * 60 * 1000; // 60mn for a user/group/link\n      //}\n      if (/^\\/api\\/(links)/.test(id)) {\n        cacheDuration = 6 * 60 * 60 * 1000; // 6h for a link\n      }\n      cache.data[id] = { status: \"pending\" };\n      return cache.update(id, cacheDuration, false);\n    }\n    return new Promise(r => r(null));\n  },\n  update: (url, cacheDuration = 60 * 1000, persistant = false) => {\n    cache.data[url] = Object.assign({ status: \"pending\" }, cache.data[url]);\n    return http.get(url).then(res => {\n      cache.set(url, res, cacheDuration, persistant);\n      cache.data[url] = Object.assign({ status: \"ready\" }, cache.data[url]);\n      if (Array.isArray(cache.events[url])) {\n        cache.events[url].forEach(r => r.call(null, cache.data[url].data));\n      }\n      delete cache.events[url];\n      return new Promise(r => r(res));\n    });\n  },\n  resetCache: () => {\n    cache.data = {};\n    cache.events = {};\n    window.dispatchEvent(new CustomEvent(\"resetCache\"));\n  },\n  reset: () => window.localStorage.clear() && cache.resetCache()\n};\nexport default cache;\n","import _alert from \"./alert.js\";\nimport _cache from \"./cache.js\";\nimport _http from \"./http.js\";\nimport _me from \"./me.js\";\nimport _router from \"./router.js\";\nimport _util from \"./util.js\";\nimport _lang from \"./lang.js\";\n\nexport const alert = _alert;\nexport const cache = _cache;\nexport const http = _http;\nexport const me = _me;\nexport const router = _router;\nexport const util = _util;\nexport const lang = _lang;\n","import { h, render, Component } from \"preact\";\n\n// Fontawesome icons taken from https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/js/all.js\n\nexport default class FaIcon extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      regular: {\n        comment: [\n          512,\n          512,\n          [],\n          \"f075\",\n          \"M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z\"\n        ],\n        images: [\n          576,\n          512,\n          [],\n          \"f302\",\n          \"M480 416v16c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V176c0-26.51 21.49-48 48-48h16v48H54a6 6 0 0 0-6 6v244a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6v-10h48zm42-336H150a6 6 0 0 0-6 6v244a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6V86a6 6 0 0 0-6-6zm6-48c26.51 0 48 21.49 48 48v256c0 26.51-21.49 48-48 48H144c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h384zM264 144c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.909-40 40-40 40 17.909 40 40zm-72 96l39.515-39.515c4.686-4.686 12.284-4.686 16.971 0L288 240l103.515-103.515c4.686-4.686 12.284-4.686 16.971 0L480 208v80H192v-48z\"\n        ],\n        \"check-circle\": [\n          512,\n          512,\n          [],\n          \"f058\",\n          \"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z\"\n        ],\n        \"file-pdf\": [\n          384,\n          512,\n          [],\n          \"f1c1\",\n          \"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm250.2-143.7c-12.2-12-47-8.7-64.4-6.5-17.2-10.5-28.7-25-36.8-46.3 3.9-16.1 10.1-40.6 5.4-56-4.2-26.2-37.8-23.6-42.6-5.9-4.4 16.1-.4 38.5 7 67.1-10 23.9-24.9 56-35.4 74.4-20 10.3-47 26.2-51 46.2-3.3 15.8 26 55.2 76.1-31.2 22.4-7.4 46.8-16.5 68.4-20.1 18.9 10.2 41 17 55.8 17 25.5 0 28-28.2 17.5-38.7zm-198.1 77.8c5.1-13.7 24.5-29.5 30.4-35-19 30.3-30.4 35.7-30.4 35zm81.6-190.6c7.4 0 6.7 32.1 1.8 40.8-4.4-13.9-4.3-40.8-1.8-40.8zm-24.4 136.6c9.7-16.9 18-37 24.7-54.7 8.3 15.1 18.9 27.2 30.1 35.5-20.8 4.3-38.9 13.1-54.8 19.2zm131.6-5s-5 6-37.3-7.8c35.1-2.6 40.9 5.4 37.3 7.8z\"\n        ],\n        bell: [\n          448,\n          512,\n          [],\n          \"f0f3\",\n          \"M439.39 362.29c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71zM67.53 368c21.22-27.97 44.42-74.33 44.53-159.42 0-.2-.06-.38-.06-.58 0-61.86 50.14-112 112-112s112 50.14 112 112c0 .2-.06.38-.06.58.11 85.1 23.31 131.46 44.53 159.42H67.53zM224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64z\"\n        ]\n      },\n      solid: {\n        comment: [\n          512,\n          512,\n          [],\n          \"f075\",\n          \"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z\"\n        ],\n        \"pencil-alt\": [\n          512,\n          512,\n          [],\n          \"f303\",\n          \"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z\"\n        ],\n        \"arrow-left\": [\n          448,\n          512,\n          [],\n          \"f060\",\n          \"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z\"\n        ],\n        \"caret-down\": [\n          320,\n          512,\n          [],\n          \"f0d7\",\n          \"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\"\n        ],\n        film: [\n          512,\n          512,\n          [],\n          \"f008\",\n          \"M488 64h-8v20c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V64H96v20c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12V64h-8C10.7 64 0 74.7 0 88v336c0 13.3 10.7 24 24 24h8v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h320v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h8c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24zM96 372c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm272 208c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm0-168c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm112 152c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z\"\n        ],\n        times: [\n          352,\n          512,\n          [],\n          \"f00d\",\n          \"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\"\n        ],\n        bell: [\n          448,\n          512,\n          [],\n          \"f0f3\",\n          \"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z\"\n        ],\n        \"ellipsis-h\": [\n          512,\n          512,\n          [],\n          \"f141\",\n          \"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z\"\n        ],\n        search: [\n          512,\n          512,\n          [],\n          \"f002\",\n          \"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z\"\n        ]\n      }\n    };\n  }\n\n  render() {\n    const icon = this.state[this.props.family][this.props.icon];\n    return (\n      icon && (\n        <svg\n          className={\"fa-icon \" + this.props.family + \" \" + this.props.icon}\n          viewBox={\"0 0 \" + icon[0] + \" \" + icon[1]}\n        >\n          <path fill=\"currentColor\" d={icon[4]}></path>\n        </svg>\n      )\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, router, util } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\n\nexport default class Search extends Component {\n  constructor(props) {\n    super(props);\n    this.search = this.search.bind(this);\n  }\n\n  search(evt) {\n    evt.preventDefault();\n    // https://stackoverflow.com/a/37511463\n    let searchTerms = document\n      .getElementById(\"search\")\n      .value.normalize(\"NFD\")\n      .replace(/[\\u0300-\\u036f]/g, \"\")\n      .split(\" \");\n    let group_id =\n      router.route == \"messages\" ? router.entity.group.id : router.entity.id;\n    router.navigate(\n      \"/groups/\" +\n        group_id +\n        \"?search=\" +\n        searchTerms.map(e => encodeURIComponent(e)).join(\"+\")\n    );\n  }\n\n  render() {\n    return (\n      <form class=\"navbar-block search-block\">\n        <div class=\"input-group\">\n          <input\n            class=\"form-control\"\n            type=\"text\"\n            id=\"search\"\n            placeholder={lang.t(\"search_in_group\")}\n            value={decodeURIComponent(\n              router.getParam(\"search\").replace(/\\+/g, \" \")\n            )}\n          ></input>\n          <div class=\"input-group-append\">\n            <button\n              onClick={e => this.search(e)}\n              class=\"btn btn-secondary\"\n              type=\"submit\"\n            >\n              <FaIcon family={\"solid\"} icon={\"search\"} />\n            </button>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, router } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\n\nexport default class GroupsDropdownNavbar extends Component {\n  constructor(props) {\n    super(props);\n    // force update the navbar when me gets updated\n    addEventListener(\"meStateChange\", _ => this.setState({}));\n  }\n\n  render() {\n    return (\n      <div class=\"navbar-block\">\n        {me.me.groups && (\n          <div\n            class=\"nav-link dropdown groups unselectable\"\n            tabindex=\"-1\"\n            onClick={e => e.currentTarget.classList.toggle(\"active\")}\n          >\n            <div class=\"unselectable pr-5px\">\n              {lang.t(\"groups\")} <FaIcon family={\"solid\"} icon={\"caret-down\"} />\n            </div>\n            <div class=\"dropdown-menu dropdown-left\">\n              {me.me.groups.map(e => (\n                <a\n                  class=\"d-block seamless-link unselectable\"\n                  href={router.toApp(\"/groups/\" + e.id)}\n                  onClick={e => router.onClick(e)}\n                >\n                  {e.name}\n                </a>\n              ))}\n              <a\n                class=\"seamless-link unselectable\"\n                href={router.toApp(\"/create-group\")}\n                onClick={e => router.onClick(e)}\n              >\n                {\"+ \" + lang.t(\"create_a_group\")}\n              </a>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import { h, render, Component, Fragment } from \"preact\";\nimport { lang, me, router, util } from \"/core\";\n\nexport default class Notification extends Component {\n  constructor(props) {\n    super(props);\n    this.getMiniature = this.getMiniature.bind(this);\n    this.setMiniatureOnError = this.setMiniatureOnError.bind(this);\n    this.getAction = this.getAction.bind(this);\n    this.getTarget = this.getTarget.bind(this);\n    this.state = {\n      target: this.getTarget(),\n      action: this.getAction()\n    };\n  }\n\n  getMiniature() {\n    let imgSrc = util.defaultAvatar;\n    if (\n      this.props.fromUser &&\n      this.props.fromUser.avatar &&\n      this.props.type != \"global_notification\"\n    ) {\n      imgSrc = util.crop(this.props.fromUser.avatar[\"id\"], 80, 80);\n    }\n    return (\n      <img\n        style={util.backgroundHash(\n          this.props.fromUser ? this.props.fromUser.id : \"\"\n        )}\n        src={imgSrc}\n        onError={e => this.setMiniatureOnError(e)}\n      />\n    );\n  }\n\n  setMiniatureOnError(event) {\n    event.currentTarget.src = util.defaultAvatar;\n  }\n\n  getAction() {\n    switch (this.props.type) {\n      case \"new_message\":\n        return lang.t(\"has_posted_in\");\n      case \"new_comment\":\n        return lang.t(\"has_commented_on\");\n      case \"user_joined_group\":\n        return lang.t(\"has_joined\");\n      case \"user_left_group\":\n        return lang.t(\"has_left\");\n      case \"group_name_change\":\n        return lang.t(\"changed_group_name\");\n      default:\n        return \"\";\n    }\n  }\n\n  getObject() {\n    switch (this.props.type) {\n      case \"new_message\":\n        return (\n          <a\n            href={router.toApp(\"/groups/\" + this.props.fromGroup.id)}\n            onClick={e => router.onClick(e)}\n          >\n            {this.props.fromGroup.name}\n          </a>\n        );\n      case \"new_comment\":\n        return (\n          <span>\n            {lang.t(\"the_message_from\") + \" \"}\n            <strong>\n              {this.props.fromMessage && this.props.fromMessage[\"author\"]\n                ? this.props.fromMessage[\"author\"][\"name\"]\n                : \"\"}\n            </strong>\n            {\" \" + lang.t(\"in\") + \" \"}\n            <a\n              href={router.toApp(\"/groups/\" + this.props.fromGroup.id)}\n              onClick={e => router.onClick(e)}\n            >\n              {this.props.fromGroup.name}\n            </a>\n          </span>\n        );\n      case \"user_joined_group\":\n      case \"user_left_group\":\n        return (\n          <a\n            href={router.toApp(\"/groups/\" + this.props.fromGroup.id)}\n            onClick={e => router.onClick(e)}\n          >\n            {this.props.fromGroup.name}\n          </a>\n        );\n      case \"group_name_change\":\n        return (\n          <span>\n            <strong>{this.props.data[\"previousGroupName\"]}</strong>\n            {\" \" + lang.t(\"to\") + \" \"}\n            <strong>{this.props.data[\"newGroupName\"]}</strong>\n          </span>\n        );\n      case \"global_notification\":\n        return this.props.data[\"text\"];\n      default:\n        return \"\";\n    }\n  }\n\n  getTarget() {\n    switch (this.props.type) {\n      case \"user_joined_group\":\n      case \"user_left_group\":\n      case \"group_name_change\":\n        return \"/groups/\" + this.props.fromGroup.id;\n      case \"new_message\":\n        return \"/messages/\" + this.props.target;\n      case \"new_comment\":\n        return (\n          \"/messages/\" + this.props.fromMessage.id + \"/\" + this.props.target\n        );\n      case \"global_notification\":\n        return this.props.target;\n      default:\n        return \"\";\n    }\n  }\n\n  render() {\n    return (\n      <a\n        class=\"notification seamless-link unselectable\"\n        href={router.toApp(this.state.target)}\n        onClick={e => {\n          e.preventDefault();\n          me.removeMatchingNotifications(this.props.id).then(_ =>\n            router.onClick(e, false, this.state.target)\n          );\n        }}\n      >\n        <div class=\"miniature unselectable\">{this.getMiniature()}</div>\n        <div class=\"infos\">\n          <div class=\"description\">\n            {this.props.type != \"global_notification\" && (\n              <Fragment>\n                <strong>{this.props.fromUser.name || \"--\"}</strong>\n                <span>{\" \" + this.state.action + \" \"}</span>\n              </Fragment>\n            )}\n            {this.getObject()}\n          </div>\n          <div class=\"date\" title={util.humanFullDate(this.props.createdAt)}>\n            {util.humanTime(this.props.createdAt)}\n          </div>\n        </div>\n      </a>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, router, http } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\nimport Notification from \"./notification.component.js\";\n\nexport default class NotificationsDropdownNavbar extends Component {\n  constructor(props) {\n    super(props);\n    // force update the navbar when me gets updated\n    addEventListener(\"meStateChange\", _ => this.setState({}));\n    this.clearAllNotifications = this.clearAllNotifications.bind(this);\n  }\n\n  clearAllNotifications() {\n    if (me.me.notifications.length) {\n      Promise.all(\n        me.me.notifications.map(n => http.delete(\"/api/notifications/\" + n.id))\n      ).then(me.update());\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={\n          \"menu dropdown\" +\n          (me.me.notifications.length ? \" cursor-pointer\" : \"\")\n        }\n        tabindex=\"-1\"\n        onClick={e =>\n          me.me.notifications.length &&\n          e.currentTarget.classList.toggle(\"active\")\n        }\n      >\n        <div class=\"unselectable notification-button\">\n          <FaIcon\n            family={me.me.notifications.length ? \"solid\" : \"regular\"}\n            icon={\"bell\"}\n          />\n          {!!me.me.notifications.length && (\n            <span class=\"notification-count\">{me.me.notifications.length}</span>\n          )}\n        </div>\n        <div class=\"dropdown-menu dropdown-right notifications-menu\">\n          <div class=\"notification-header\">\n            <strong class=\"capitalize\">{lang.t(\"notifications\")}</strong>\n            <div\n              class=\"action capitalize\"\n              onClick={e => this.clearAllNotifications()}\n            >\n              {lang.t(\"mark_all_as_read\")}\n            </div>\n          </div>\n          {me.me.notifications\n            ? me.me.notifications\n                .sort((a, b) => b.createdAt - a.createdAt)\n                .map(e => <Notification key={e.id} {...e} />)\n            : null}\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, router, util } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\nimport Search from \"./search.component.js\";\nimport GroupsDropdownNavbar from \"./groups-dropdown-navbar.component.js\";\nimport NotificationsDropdownNavbar from \"./notifications-dropdown-navbar.component.js\";\n\nexport default class Navbar extends Component {\n  constructor(props) {\n    super(props);\n    this.clickBackButton = this.clickBackButton.bind(this);\n    // force update the navbar when me gets updated\n    addEventListener(\"meStateChange\", _ => this.setState({}));\n  }\n\n  clickBackButton(evt) {\n    evt.preventDefault();\n    if (router.backUrlPrompt && !confirm(router.backUrlPrompt)) {\n      return false;\n    }\n    router.onClick(evt);\n  }\n\n  render() {\n    return (\n      <div class=\"main-nav nav align-items-center z-index-100\">\n        <div class=\"navbar-block\">\n          {([\"share\"].includes(router.route) ||\n            [\"settings\"].includes(router.action) ||\n            !router.backUrl) && (\n            <div\n              class=\"menu dropdown cursor-pointer\"\n              tabindex=\"-1\"\n              onClick={e => e.currentTarget.classList.toggle(\"active\")}\n            >\n              <div class=\"rounded-circle avatar unselectable\">\n                <img\n                  class=\"rounded-circle\"\n                  style={util.backgroundHash(me.me.id)}\n                  src={\n                    me.me.avatar\n                      ? util.crop(me.me.avatar[\"id\"], 80, 80)\n                      : util.defaultAvatar\n                  }\n                  onError={e => (e.currentTarget.src = util.defaultAvatar)}\n                />\n              </div>\n              <div class=\"dropdown-menu dropdown-right\">\n                <a\n                  class=\"d-block seamless-link\"\n                  href={router.toApp(\"/users/\" + me.me.id + \"/settings\")}\n                  onClick={e => router.onClick(e)}\n                >\n                  {lang.t(\"settings\")}\n                </a>\n                <a\n                  class=\"d-block seamless-link\"\n                  href={router.toApp(\"/logout\")}\n                  onClick={e => router.onClick(e)}\n                >\n                  {lang.t(\"logout\")}\n                </a>\n              </div>\n            </div>\n          )}\n          {[\"groups\", \"messages\"].includes(router.route) && router.backUrl && (\n            <a\n              class=\"seamless-link back\"\n              href={router.toApp(router.backUrl)}\n              onClick={e => this.clickBackButton(e)}\n            >\n              <FaIcon family={\"solid\"} icon={\"arrow-left\"} />\n            </a>\n          )}\n          <NotificationsDropdownNavbar />\n        </div>\n        <Search />\n        <GroupsDropdownNavbar />\n      </div>\n    );\n  }\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","import { h, render, Component } from \"preact\";\nimport { cache, util, router } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class FileGrid extends Component {\n  constructor(props) {\n    super(props);\n    this.toggleFile = this.toggleFile.bind(this);\n    let files = [];\n    if (Array.isArray(props.files)) {\n      props.files.forEach((e, i) => {\n        if (e.fileIndex == null) {\n          e.fileIndex = i;\n        }\n        files.splice(e.fileIndex, 0, e);\n      });\n    }\n    this.state = { files: files };\n  }\n\n  toggleFile(evt, fileIndex) {\n    evt.stopPropagation();\n    evt.preventDefault();\n    if (typeof this.props.toggleFile == \"function\") {\n      this.props.toggleFile(evt.currentTarget.getAttribute(\"fileIndex\"));\n    }\n  }\n\n  renderFile(file, miniature = false) {\n    let filePath = file.contentUrl ? \"/files/\" + file.contentUrl : null;\n    let url = filePath;\n    if (/image/.test(file.type) && file.type != \"image/gif\") {\n      // no limit in height for long format images\n      url = util.thumbnail(file.id, 1366, 999999);\n    }\n    if (miniature == true) {\n      if (file.status == \"ready\") {\n        return (\n          <a\n            data-nlg={!this.props.inWriter}\n            data-origin={filePath}\n            data-src={util.thumbnail(file.id, 1366, 768)}\n            href={!this.props.inWriter && router.toApp(url)}\n            class=\"rounded\"\n          >\n            <div\n              className={\"miniature\" + (file.removed ? \" removed\" : \"\")}\n              style={\n                \"background-image:url('\" + util.crop(file.id, 160, 160) + \"')\"\n              }\n            ></div>\n            <div\n              class=\"remove-button\"\n              style={file.removed ? \"color:red\" : \"\"}\n              fileIndex={file.fileIndex}\n              onClick={e => this.toggleFile(e)}\n            >\n              <FaIcon family={\"solid\"} icon={\"times\"} />\n            </div>\n          </a>\n        );\n      }\n      if (file.status == \"raw\") {\n        return (\n          <a class=\"rounded\">\n            <div class=\"miniature\">\n              <FaIcon family={\"regular\"} icon={\"check-circle\"} />\n            </div>\n          </a>\n        );\n      }\n      return (\n        <a class=\"rounded\">\n          <div\n            class=\"miniature video-raw\"\n            style={\n              \"background-image:url('\" + util.crop(file.id, 160, 160) + \"')\"\n            }\n          ></div>\n          <div class=\"spinner orange-spinner\">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n        </a>\n      );\n    }\n    if (file.contentUrl) {\n      if (/video/.test(file.type)) {\n        if (file.status == \"ready\") {\n          return (\n            <video\n              poster={util.thumbnail(file.id, 1280, 720)}\n              class=\"img-fluid contained-height video\"\n              controls=\"true\"\n              src={url}\n            ></video>\n          );\n        }\n        return (\n          <a class=\"image video-uploaded\">\n            <img\n              class=\"img-fluid video-raw\"\n              src={util.crop(file.id, 320, 180)}\n            ></img>\n            <div class=\"spinner orange-spinner\">\n              <div></div>\n              <div></div>\n              <div></div>\n              <div></div>\n              <div></div>\n            </div>\n          </a>\n        );\n      }\n      if (/image/.test(file.type)) {\n        return (\n          <a\n            data-nlg={!this.props.inWriter}\n            data-origin={filePath}\n            href={!this.props.inWriter && router.toApp(url)}\n            className={\"image\" + (file.removed ? \" removed\" : \"\")}\n          >\n            <img class=\"img-fluid\" src={url}></img>\n            <div\n              class=\"remove-button\"\n              style={file.removed ? \"color:red\" : \"\"}\n              fileIndex={file.fileIndex}\n              onClick={e => this.toggleFile(e)}\n            >\n              <FaIcon family={\"solid\"} icon={\"times\"} />\n            </div>\n          </a>\n        );\n      }\n    }\n    return (\n      <div class=\"file-placeholder\">\n        {file[\"error\"] ? (\n          <div class=\"orange-error\">&times;</div>\n        ) : (\n          <div class=\"spinner orange-spinner\">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n        )}\n        <div class=\"progress-bar\">\n          <div style={{ width: file.progress + \"%\" }}></div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    if (!this.props.files || this.props.files.length === 0) {\n      return null;\n    }\n    if (this.props.files && this.props.files.length > 3) {\n      return (\n        <div class=\"file-grid\">\n          {this.state.files\n            .sort((a, b) => (a.fileIndex > b.fileIndex ? 1 : -1))\n            .map(e => this.renderFile(e, true))}\n        </div>\n      );\n    }\n    return (\n      <div class=\"d-flex justify-content-center flex-wrap\">\n        {this.state.files\n          .sort((a, b) => (a.fileIndex > b.fileIndex ? 1 : -1))\n          .map(e => this.renderFile(e))}\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    import(\"/lazy/nlg.js\").then(nlg => nlg.default.start());\n  }\n\n  componentDidUpdate() {\n    import(\"/lazy/nlg.js\").then(nlg => nlg.default.start());\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessageHead extends Component {\n  render() {\n    return (\n      <div class=\"message-head d-flex\">\n        <div>\n          <img\n            className={\n              \"rounded-circle material-shadow avatar\" +\n              (this.props.author.name ? \"\" : \" removed-user\")\n            }\n            style={util.backgroundHash(\n              this.props.author.name ? this.props.author.id : \"\"\n            )}\n            src={\n              this.props.author && this.props.author.avatar\n                ? util.crop(this.props.author.avatar.id, 100, 100)\n                : util.defaultAvatar\n            }\n            title={this.props.author.name || \"\"}\n          />\n        </div>\n        {!this.props.isChild && (\n          <div class=\"infos\">\n            <span class=\"capitalize author\">\n              {this.props.author.name || \"--\"}\n            </span>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import { Fragment, h, render, Component } from \"preact\";\nimport { router, lang, me, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessageFooter extends Component {\n  render() {\n    return (\n      <div class=\"message-footer\">\n        <div class=\"infos\">\n          {this.props.author && this.props.author.id == me.me.id && (\n            <Fragment>\n              <a\n                class=\"action seamless-link font-size-90 capitalize d-none d-sm-block\"\n                onClick={e => this.props.editMessage(e)}\n              >\n                {lang.t(\"edit\")}\n              </a>\n              <div class=\"dot d-none d-sm-block\">&bull;</div>\n            </Fragment>\n          )}\n          {!this.props.isPublic && this.props.isChild && (\n            <Fragment>\n              <a\n                class=\"action seamless-link font-size-90 capitalize\"\n                href={router.toApp(\n                  \"/messages/\" +\n                    this.props.message.id +\n                    (this.props.message.children.length ? \"\" : \"?focus=reply\")\n                )}\n                onClick={e => router.onClick(e)}\n              >\n                {this.props.message.children.length ? (\n                  this.props.message.children.some(e => me.isNew(e.id)) ? (\n                    <b>\n                      {lang.t(\"replies\", {\n                        count: this.props.message.children.length\n                      })}\n                    </b>\n                  ) : (\n                    lang.t(\"replies\", {\n                      count: this.props.message.children.length\n                    })\n                  )\n                ) : (\n                  lang.t(\"reply\")\n                )}\n              </a>\n              <div class=\"dot\">&bull;</div>\n            </Fragment>\n          )}\n          <div\n            class=\"date font-size-90\"\n            title={util.humanFullDate(this.props.message.createdAt)}\n          >\n            {util.humanTime(this.props.message.createdAt)}\n          </div>\n          <Fragment>\n            <div class=\"dot\">&bull;</div>\n            <div class=\"font-size-90\">{this.props.author.name || \"--\"}</div>\n          </Fragment>\n        </div>\n        <div>\n          {!this.props.isPublic && (\n            <div\n              class=\"options dropdown\"\n              onClick={e =>\n                e.target.closest(\".dropdown\").classList.toggle(\"active\")\n              }\n            >\n              <div class=\"dropdown-menu dropdown-options\">\n                {this.props.author && this.props.author.id == me.me.id && (\n                  <a\n                    class=\"seamless-link capitalize\"\n                    onClick={e => this.props.deleteMessage(e)}\n                  >\n                    {lang.t(\"delete\")}\n                  </a>\n                )}\n                {\n                  <a\n                    class=\"seamless-link capitalize\"\n                    onClick={e => this.props.openPublicLink(e)}\n                  >\n                    {lang.t(\"public_link\")}\n                  </a>\n                }\n                {me.me.groups.length > 1 && (\n                  <a\n                    class=\"seamless-link capitalize\"\n                    onClick={e => this.props.shareMessage(e)}\n                  >\n                    {lang.t(\"share_message\")}\n                  </a>\n                )}\n                {!this.props.message.isInFront &&\n                  this.props.author &&\n                  this.props.author.id == me.me.id && (\n                    <a\n                      class=\"seamless-link capitalize\"\n                      onClick={e => this.props.publishInGroup(e)}\n                    >\n                      {lang.t(\"publish_in_group\")}\n                    </a>\n                  )}\n                {this.props.author && this.props.author.id == me.me.id && (\n                  <a\n                    class=\"seamless-link capitalize d-block d-sm-none\"\n                    onClick={e => this.props.editMessage(e)}\n                  >\n                    {lang.t(\"edit\")}\n                  </a>\n                )}\n              </div>\n              <div class=\"none-if-follows-empty\">\n                <FaIcon family=\"solid\" icon=\"ellipsis-h\" />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { router } from \"/core\";\n\nexport default class TwitchEmbed extends Component {\n  render() {\n    let embedUrl = \"\";\n    const splits = this.props.url.split(\"/\");\n    const t = router.getParam(\"t\", this.props.url.split(\"?\")[1]);\n    switch (splits[2]) {\n      case \"www.twitch.tv\":\n        if (splits.length > 5 && splits[4] == \"clip\") {\n          embedUrl =\n            \"https://clips.twitch.tv/embed?clip=\" +\n            splits[5].replace(/\\?.*$/, \"\") +\n            \"&autoplay=false\";\n        } else {\n          embedUrl =\n            \"https://player.twitch.tv/?video=\" +\n            splits[4].replace(/\\?.*$/, \"\") +\n            \"&autoplay=false\" +\n            (t ? \"&t=\" + t : \"\");\n        }\n        break;\n      case \"clips.twitch.tv\":\n        embedUrl =\n          \"https://clips.twitch.tv/embed?clip=\" +\n          splits[3].replace(/\\?.*$/, \"\") +\n          \"&autoplay=false\";\n        break;\n    }\n    return (\n      <div class=\"embed-responsive embed-responsive-16by9\">\n        <iframe\n          allowfullscreen\n          class=\"embed-responsive-item\"\n          src={embedUrl}\n        ></iframe>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\n\nexport default class BandCampEmbed extends Component {\n  render() {\n    const embedUrl =\n      this.props.url +\n      \"/size=large/bgcol=f5f5f5/linkcol=0687f5/minimal=true/tracklist=false/\";\n    if (this.state.revealed) {\n      return (\n        <div class=\"bandcamp-embed embed-responsive embed-responsive-1by1\">\n          <iframe class=\"embed-responsive-item\" src={embedUrl}></iframe>\n        </div>\n      );\n    }\n    return (\n      <div\n        class=\"embed-preview\"\n        onClick={() => this.setState({ revealed: true })}\n      >\n        <div class=\"bandcamp\"></div>\n        <img src={this.props.preview} />\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\n\nexport default class GenericEmbed extends Component {\n  render() {\n    if (this.state.revealed) {\n      return (\n        <div class=\"embed-responsive embed-responsive-16by9\">\n          <iframe\n            allowfullscreen\n            class=\"embed-responsive-item\"\n            src={this.props.url}\n          ></iframe>\n        </div>\n      );\n    }\n    return (\n      <div\n        class=\"embed-preview\"\n        onClick={() => this.setState({ revealed: true })}\n      >\n        <div className={this.props.playBtnClass}></div>\n        <img src={this.props.preview} />\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { util, router } from \"/core\";\nimport TwitchEmbed from \"./embeds/twitch-embed.component.js\";\nimport BandCampEmbed from \"./embeds/bandcamp-embed.component.js\";\nimport GenericEmbed from \"./embeds/generic-embed.component.js\";\n\nexport default class EmbedBlock extends Component {\n  execute(e) {\n    if (e.innerHTML) {\n      eval(e.innerHTML);\n    } else {\n      const url = e.getAttribute(\"src\");\n      if (url) {\n        const script = document.createElement(\"script\");\n        script.async = true;\n        script.src = url;\n        document.head.appendChild(script);\n      }\n    }\n  }\n\n  componentDidMount() {\n    if (this.embedContainer) {\n      Array.from(\n        this.embedContainer.getElementsByTagName(\"script\")\n      ).forEach(e => this.execute(e));\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.embedContainer) {\n      Array.from(\n        this.embedContainer.getElementsByTagName(\"script\")\n      ).forEach(e => this.execute(e));\n    }\n  }\n\n  getPreview() {\n    if (this.props.data[\"providerUrl\"]) {\n      switch (\n        this.props.data[\"providerUrl\"]\n          .toLowerCase()\n          .replace(/\\/$/, \"\")\n          .replace(/^https?:\\/\\/(www\\.)?/, \"\")\n      ) {\n        case \"gamerdvr.com\":\n          if (this.props.data[\"url\"].match(/\\/gamer\\/\\w+\\/video\\//)) {\n            return (\n              <GenericEmbed\n                preview={util.crop(this.props.preview.id, 1024, 270)}\n                url={this.props.data[\"url\"] + \"/embed\"}\n                playBtnClass={\"gamerdvr\"}\n              />\n            );\n          }\n          break;\n        case \"youtube.com\":\n          if (this.props.data[\"type\"] == \"video\" && this.props.data[\"code\"]) {\n            return (\n              <GenericEmbed\n                preview={util.crop(this.props.preview.id, 1024, 270)}\n                url={\n                  this.props.data[\"code\"].match(/https:\\/\\/[^\\\"\\s]+/)[0] +\n                  \"&autoplay=1&controls=2&wmode=opaque\"\n                }\n                playBtnClass={\"youtube\"}\n              />\n            );\n          }\n          break;\n        case \"soundcloud.com\":\n          if (this.props.data[\"code\"]) {\n            return (\n              <GenericEmbed\n                preview={util.crop(this.props.preview.id, 1024, 270)}\n                url={\n                  this.props.data[\"code\"].match(/https:\\/\\/[^\\\"\\s]+/)[0] +\n                  \"&auto_play=true\"\n                }\n                playBtnClass={\"soundcloud\"}\n              />\n            );\n          }\n        case \"twitch.tv\":\n          return (\n            <TwitchEmbed\n              preview={this.props.preview}\n              url={this.props.data[\"url\"]}\n            />\n          );\n        case \"bandcamp.com\":\n          if (this.props.data[\"code\"]) {\n            let id = this.props.data[\"code\"].match(/https:\\/\\/.*album=\\d+/);\n            if (!id) {\n              id = this.props.data[\"code\"].match(/https:\\/\\/.*track=\\d+/);\n            }\n            if (id) {\n              return (\n                <BandCampEmbed\n                  preview={util.crop(this.props.preview.id, 1024, 270)}\n                  url={id[0]}\n                />\n              );\n            }\n          }\n        case \"imgur.com\":\n          // skip default embed code if it's an imgur image\n          if (this.props.data[\"type\"] == \"photo\") {\n            break;\n          }\n        case \"vimeo.com\":\n        case \"dailymotion.com\":\n        case \"facebook.com\":\n        case \"kickstarter.com\":\n          // default embed code\n          if (this.props.data[\"code\"]) {\n            return (\n              <div\n                class=\"embed-container\"\n                ref={e => (this.embedContainer = e)}\n                dangerouslySetInnerHTML={{ __html: this.props.data[\"code\"] }}\n              ></div>\n            );\n          }\n        default:\n      }\n    }\n    if (this.props.data[\"providerName\"]) {\n      switch (this.props.data[\"providerName\"].toLowerCase()) {\n        case \"peertube\":\n          // default embed code\n          if (this.props.data[\"code\"]) {\n            return (\n              <div\n                class=\"embed-container\"\n                ref={e => (this.embedContainer = e)}\n                dangerouslySetInnerHTML={{ __html: this.props.data[\"code\"] }}\n              ></div>\n            );\n          }\n        default:\n      }\n    }\n    if (/image/.test(this.props.data[\"content-type\"])) {\n      return (\n        <div class=\"container d-flex justify-content-center flex-wrap align-items-center\">\n          <img\n            data-nlg={!this.props.inWriter}\n            href={router.toApp(this.props.url)}\n            class=\"img-fluid cursor-pointer\"\n            data-src={this.props.url}\n            src={\n              this.props.preview && !/gif/.test(this.props.data[\"content-type\"])\n                ? util.thumbnail(this.props.preview.id, 1366, 99999)\n                : this.props.url\n            }\n          />\n        </div>\n      );\n    }\n    if (/video/.test(this.props.data[\"content-type\"])) {\n      return (\n        <div class=\"container d-flex justify-content-center flex-wrap align-items-center\">\n          <video class=\"img-fluid\" controls src={this.props.url} />\n        </div>\n      );\n    }\n    if (/audio/.test(this.props.data[\"content-type\"])) {\n      return (\n        <div class=\"container d-flex justify-content-center flex-wrap align-items-center\">\n          <audio class=\"width-100\" controls>\n            <source src={this.props.url}></source>\n          </audio>\n        </div>\n      );\n    }\n    if (\n      this.props.data[\"title\"] &&\n      (this.props.preview || this.props.data[\"description\"])\n    ) {\n      return (\n        <a\n          class=\"preview-card seamless-link d-inline-block\"\n          target=\"_blank\"\n          href={router.toApp(this.props.url)}\n        >\n          <div class=\"card\" style=\"max-width: 480px\">\n            {this.props.preview && (\n              <img\n                class=\"card-img-top\"\n                src={util.crop(this.props.preview.id, 320, 180)}\n              />\n            )}\n            <div class=\"card-body p-1\">\n              <h5>{this.props.data[\"title\"]}</h5>\n              {this.props.data[\"description\"] && (\n                <p>\n                  <small>{this.props.data[\"description\"].slice(0, 500)}</small>\n                </p>\n              )}\n            </div>\n          </div>\n        </a>\n      );\n    }\n    return null;\n  }\n\n  render() {\n    if (!this.props.url || !this.props.data) {\n      return null;\n    }\n    let preview = this.getPreview();\n    if (preview) {\n      return <p class=\"text-center card-text\">{preview}</p>;\n    }\n    return null;\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, lang, me, util } from \"/core\";\nimport EmbedBlock from \"./embed-block.component.js\";\nimport FileGrid from \"./file-grid.component.js\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessageBody extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { preview: null };\n  }\n\n  displayMessageText() {\n    if (!this.props.message.data) {\n      return \"\";\n    }\n    // escape html a little (just enough to avoid xss I hope)\n    let txt = this.props.message.data[\"text\"]\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\")\n      .trim();\n    // replace url by real links\n    let shift = 0;\n    let match = null;\n    while ((match = util.getUrl(txt.slice(shift)))) {\n      let url = match[0];\n      if (url.length >= 50) {\n        url = url.slice(0, 25) + \"...\" + url.slice(-24);\n      }\n      let link = '<a href=\"' + match[0] + '\" target=\"_blank\">' + url + \"</a>\";\n      txt =\n        txt.slice(0, match[\"index\"] + shift) +\n        link +\n        txt.slice(match[\"index\"] + shift + match[0].length);\n      shift += match[\"index\"] + link.length;\n    }\n    // replace line returns\n    txt = txt.replace(/\\n/g, \"<br/>\");\n    return { __html: txt };\n  }\n\n  componentDidMount() {\n    this.componentWillUpdate();\n  }\n\n  componentWillUpdate() {\n    if (!this.state.gotPreview && this.props.message) {\n      if (this.props.message.data) {\n        let previewUrl = util.getUrl(this.props.message.data[\"text\"]);\n        if (previewUrl) {\n          cache\n            .get(\"/api/links/by_url?url=\" + encodeURIComponent(previewUrl[0]))\n            .then(r => {\n              this.setState(prevState => ({\n                preview: r,\n                gotPreview: true\n              }));\n            });\n        } else {\n          this.setState(prevState => ({\n            gotPreview: true\n          }));\n        }\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div class=\"message-body\">\n        {this.props.message.data && this.props.message.data.title && (\n          <div class=\"title\">\n            <span>{this.props.message.data.title}</span>\n          </div>\n        )}\n        {this.props.message.data &&\n          this.props.message.data.text &&\n          this.props.message.data.text.trim() && (\n            <p\n              class=\"card-text\"\n              dangerouslySetInnerHTML={this.displayMessageText()}\n            ></p>\n          )}\n        {this.state.preview && (\n          <EmbedBlock\n            key={this.state.preview.url}\n            url={this.state.preview.url}\n            preview={this.state.preview.preview}\n            data={this.state.preview.data}\n          />\n        )}\n        {this.props.message.files && (\n          <FileGrid files={this.props.message.files} />\n        )}\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, alert, cache, http, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\nimport EmbedBlock from \"./embed-block.component.js\";\nimport FileGrid from \"./file-grid.component.js\";\n\nexport default class Writer extends Component {\n  constructor(props) {\n    super(props);\n    this.sendMessage = this.sendMessage.bind(this);\n    this.genPreview = this.genPreview.bind(this);\n    this.postMessage = this.postMessage.bind(this);\n    this.putMessage = this.putMessage.bind(this);\n    this.onKeyPress = this.onKeyPress.bind(this);\n    this.toggleFile = this.toggleFile.bind(this);\n    this.inputImages = this.inputImages.bind(this);\n    this.inputVideo = this.inputVideo.bind(this);\n    this.uploadFile = this.uploadFile.bind(this);\n    this.uploadNextImage = this.uploadNextImage.bind(this);\n    this.state = { files: [], writerId: +Date.now() };\n  }\n\n  componentWillMount() {\n    this.setState({\n      files: this.props.files || [],\n      link: null,\n      preview: null\n    });\n  }\n\n  componentDidMount() {\n    if (document.getElementById(\"title\")) {\n      document.getElementById(\"title\").value = this.props.title || \"\";\n    }\n    if (document.getElementById(\"text\")) {\n      document.getElementById(\"text\").value = this.props.text || \"\";\n    }\n  }\n\n  onKeyPress(event, doGenPreview = false) {\n    if (event.ctrlKey && event.key == \"Enter\") {\n      this.sendMessage();\n      return;\n    }\n    if (![\" \", \"Enter\", \"v\"].includes(event.key)) {\n      return;\n    }\n    if (doGenPreview) {\n      this.genPreview(event.currentTarget);\n    }\n  }\n\n  genPreview(t) {\n    t.style.height = \"1px\";\n    t.style.height = 25 + t.scrollHeight + \"px\";\n    // waiting for the dom to be updated\n    setTimeout(() => {\n      const text = t.value;\n      let links = text.match(/(https?:\\/\\/[^\\s]+)/gi);\n      if (links && links[0] != this.state.link) {\n        cache\n          .get(\"/api/links/by_url?url=\" + encodeURIComponent(links[0]))\n          .then(r => {\n            if (r && t.value.indexOf(links[0]) >= 0) {\n              this.setState({ link: links[0], preview: r });\n            }\n          });\n      }\n    }, 0);\n  }\n\n  // toggle state (removed or not) of a file\n  toggleFile(fileIndex) {\n    let files = this.state.files;\n    let f = files.find(f => f.fileIndex == fileIndex);\n    f.removed = f.removed ? false : true;\n    this.setState({ files: files });\n  }\n\n  sendMessage() {\n    if (this.props.messageId) {\n      this.putMessage();\n    } else {\n      this.postMessage();\n    }\n  }\n\n  putMessage() {\n    let msg = {\n      files: this.state.files\n        .filter(e => !e.removed)\n        .map(e => e[\"id\"])\n        .filter(e => !!e),\n      data: {\n        text: document.getElementById(\"text\").value\n      }\n    };\n    if (document.getElementById(\"title\")) {\n      msg.data.title = document.getElementById(\"title\").value || \"\";\n    }\n    http.put(\"/api/messages/\" + this.props.messageId, msg).then(res => {\n      this.setState({ sending: false });\n      if (!res) {\n        alert.add(lang.t(\"error_new_message\"), \"alert-danger\");\n        return;\n      }\n      window.dispatchEvent(new CustomEvent(\"editMessage\", { detail: res }));\n    });\n    this.setState({ sending: true });\n  }\n\n  postMessage() {\n    let msg = {\n      createdAt: Math.floor(Date.now() / 1000),\n      author: me.me[\"id\"],\n      group: util.getId(this.props.group),\n      children: [],\n      files: this.state.files\n        .filter(e => !e.removed)\n        .map(e => e[\"id\"])\n        .filter(e => !!e),\n      data: {\n        text: (document.getElementById(\"text\").value || \"\").substring(0, 50000)\n      },\n      lastActivityDate: Math.floor(Date.now() / 1000)\n    };\n    if (this.props.parent) {\n      msg.parent = util.getId(this.props.parent);\n    }\n    if (document.getElementById(\"title\")) {\n      msg.data.title = document.getElementById(\"title\").value || \"\";\n    }\n    // don't post if there is nothing to post\n    if (!msg.files.length && !msg.data.text && !msg.data.title) {\n      alert.add(lang.t(\"empty_message\"), \"alert-danger\");\n      return;\n    }\n    http.post(\"/api/messages\", msg).then(res => {\n      if (!res) {\n        this.setState({ sending: false });\n        alert.add(lang.t(\"error_new_message\"), \"alert-danger\");\n        return;\n      }\n      if (this.props.isChild) {\n        this.setState({ sending: false });\n        cache.remove(\"/api/messages/\" + this.props.parent);\n        window.dispatchEvent(new CustomEvent(\"newChild\", { detail: res }));\n      } else {\n        cache.remove(this.props.group);\n        setTimeout(_ => {\n          router.navigate(router.backUrl || msg.group.slice(4));\n        }, 500);\n      }\n      this.setState({\n        files: [],\n        link: null,\n        preview: null,\n        writerId: +Date.now()\n      });\n      if (document.getElementById(\"text\")) {\n        document.getElementById(\"text\").value = \"\";\n      }\n    });\n    this.setState({ sending: true });\n  }\n\n  inputImages(event) {\n    const input = document.createElement(\"input\");\n    document.body.appendChild(input);\n    input.style.display = \"none\";\n    input.type = \"file\";\n    input.multiple = \"multiple\";\n    input.accept = \"image/*\";\n    input.addEventListener(\"change\", event => {\n      let list = Array.from(event.target.files);\n      let files = this.state.files;\n      this.setState({\n        files: [\n          ...files,\n          ...Array.apply(null, Array(list.length)).map(\n            _ =>\n              new Object({\n                fileIndex: 1000\n              })\n          )\n        ]\n      });\n      this.uploadNextImage(list, list[Symbol.iterator](), files.length);\n    });\n    input.click();\n  }\n\n  inputVideo(event) {\n    const input = document.createElement(\"input\");\n    document.body.appendChild(input);\n    input.style.display = \"none\";\n    input.type = \"file\";\n    input.accept = \"video/*\";\n    input.addEventListener(\"change\", event => {\n      let files = this.state.files;\n      let placeholderIndex = Date.now();\n      this.setState({\n        files: [\n          ...files,\n          {\n            fileIndex: placeholderIndex,\n            type: \"video\",\n            progress: 0\n          }\n        ]\n      });\n      this.uploadFile(event.target.files[0], files.length, placeholderIndex);\n    });\n    input.click();\n  }\n\n  uploadNextImage(list, it, n) {\n    let e = null;\n    try {\n      if (!it) {\n        return;\n      }\n      e = it.next();\n      if (!e || !e.value) {\n        return;\n      }\n      let fileSize = e.value.size;\n    } catch (evt) {\n      // this is a fix for firefox mobile\n      // firefox mobile only gets one file on \"input multiple\" and throws on getting the size\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=1456557\n      alert.add(lang.t(\"multiple_photos_upload\"), \"alert-danger\");\n      return;\n    }\n    import(\"/lazy/image-service.js\").then(imageService => {\n      imageService.default.handleImage(e.value, res =>\n        this.uploadFile(res, n + list.indexOf(e.value), null, () =>\n          this.uploadNextImage(list, it, n)\n        )\n      );\n    });\n  }\n\n  uploadFile(file, fileIndex, placeholderIndex, callback = null) {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"fileIndex\", fileIndex);\n    let progressFn = placeholderIndex\n      ? e => {\n          if (Array.isArray(this.state.files)) {\n            let a = this.state.files;\n            file = a.find(f => f.fileIndex == placeholderIndex);\n            if (file) {\n              file.progress = Math.floor((e.loaded / e.total) * 100);\n              a.splice(fileIndex, 1, file);\n              this.setState({ files: a });\n            }\n          }\n        }\n      : null;\n    // update state only if it's the good writeId\n    let writerId = this.state.writerId;\n    http.sendFile(\n      formData,\n      file => {\n        if (writerId != this.state.writerId) {\n          return;\n        }\n        let a = this.state.files;\n        if (!file) {\n          alert.add(lang.t(\"error_upload\"), \"alert-danger\");\n        } else {\n          a.splice(fileIndex, 1, file);\n        }\n        this.setState({ files: a });\n        if (callback) {\n          callback();\n        }\n      },\n      progressFn,\n      e => {\n        console.warn(e);\n        alert.add(lang.t(\"error_upload\"), \"alert-danger\");\n        let a = this.state.files;\n        a.splice(fileIndex, 1, { fileIndex: fileIndex, error: e });\n        this.setState({ files: a });\n      }\n    );\n  }\n\n  render() {\n    if (this.state.sending) {\n      return (\n        <div class=\"message-placeholder\">\n          <div class=\"spinner orange-spinner\">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div class=\"writer\">\n        {!this.props.isChild && (\n          <input\n            type=\"text\"\n            id=\"title\"\n            onKeyPress={e => this.onKeyPress(e)}\n            placeholder={lang.t(\"title_placeholder\")}\n          ></input>\n        )}\n        <textarea\n          onKeyPress={e => this.onKeyPress(e, true)}\n          id=\"text\"\n          rows=\"5\"\n          autocomplete=\"off\"\n          autofocus={this.props.focus}\n          placeholder={lang.t(\"text_placeholder\")}\n          maxlength=\"50000\"\n        ></textarea>\n        {this.state.preview && (\n          <EmbedBlock inWriter={true} {...this.state.preview} />\n        )}\n        {!!this.state.files.length && (\n          <FileGrid\n            key={this.state.files.reduce(\n              (a, c) => a + c.id + c.fileIndex + c.error,\n              \"\"\n            )}\n            files={this.state.files}\n            toggleFile={this.toggleFile}\n            inWriter={true}\n          />\n        )}\n        <div class=\"options\">\n          <button\n            class=\"option\"\n            onClick={e => this.inputImages(e)}\n            title={lang.t(\"upload_image\")}\n          >\n            <FaIcon family={\"regular\"} icon={\"images\"} />\n          </button>\n          <button\n            class=\"option\"\n            onClick={e => this.inputVideo(e)}\n            title={lang.t(\"upload_video\")}\n          >\n            <FaIcon family={\"solid\"} icon={\"film\"} />\n          </button>\n          <div class=\"actions\">\n            {this.props.cancel && (\n              <button class=\"cancel\" onClick={e => this.props.cancel(e)}>\n                {lang.t(\"cancel\")}\n              </button>\n            )}\n            <button\n              disabled={!this.props.group}\n              type=\"submit\"\n              class=\"submit\"\n              onClick={e => this.sendMessage(e)}\n            >\n              {lang.t(\"submit\")}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Fragment, h, render, Component } from \"preact\";\nimport { lang, cache, http, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\nimport MessageHead from \"./message-head.component.js\";\nimport MessageFooter from \"./message-footer.component.js\";\nimport MessageBody from \"./message-body.component.js\";\nimport MessageChildren from \"./message-children.component.js\";\nimport Writer from \"./writer.component.js\";\n\nexport default class MessageChild extends Component {\n  constructor(props) {\n    super(props);\n    this.loadMessage = this.loadMessage.bind(this);\n    this.deleteMessage = this.deleteMessage.bind(this);\n    this.editMessage = this.editMessage.bind(this);\n    this.shareMessage = this.shareMessage.bind(this);\n    this.cancelEdit = this.cancelEdit.bind(this);\n    this.onEditMessage = this.onEditMessage.bind(this);\n    this.processEmbed = this.processEmbed.bind(this);\n    this.publishInGroup = this.publishInGroup.bind(this);\n\n    window.addEventListener(\"editMessage\", this.onEditMessage);\n\n    let url = router.entityUrl;\n    if (!url && props.message) {\n      url = \"/api/message/\" + props.message.id;\n    }\n\n    this.state = { url: url, preview: null };\n  }\n\n  loadMessage(msg) {\n    me.removeMatchingNotifications(msg.id);\n    this.setState({\n      message: msg,\n      author: msg.author,\n      displayedChildren: msg.children && 5 // display 5 first children\n    });\n    setTimeout(this.processEmbed);\n  }\n\n  cancelEdit(event) {\n    event.preventDefault();\n    this.setState({ edit: false });\n  }\n\n  deleteMessage(event) {\n    event.preventDefault();\n    if (confirm(lang.t(\"ask_delete_message\"))) {\n      http.delete(\"/api/messages/\" + this.state.message[\"id\"]);\n      cache.resetCache();\n      // give some time to the cache to delete itself properly\n      setTimeout(() => this.setState({ isRemoved: true }), 100);\n    }\n  }\n\n  publishInGroup() {\n    http\n      .put(\"/api/messages/\" + this.state.message.id, {\n        lastActivityDate: Math.floor(Date.now() / 1000),\n        isInFront: true\n      })\n      .then(res => {\n        if (!res) {\n          alert.add(lang.t(\"error\"), \"alert-danger\");\n          return;\n        }\n        router.navigate(\"/groups/\" + this.state.message.group.id);\n      });\n  }\n\n  shareMessage(event) {\n    event.preventDefault();\n    router.navigate(\"/share?message=\" + this.state.message.id);\n  }\n\n  editMessage(event) {\n    event.preventDefault();\n    this.setState({ edit: true });\n  }\n\n  onEditMessage(event) {\n    if (event.detail.id == this.state.message.id) {\n      this.props.key = +Date.now();\n      let msg = this.state.message;\n      msg.data = event.detail.data;\n      msg.files = event.detail.files;\n      this.setState({\n        message: msg,\n        data: msg.data,\n        gotPreview: false\n      });\n      setTimeout(_ => this.setState({ edit: false }));\n    }\n  }\n\n  displayWriter(isChild) {\n    return (\n      <Writer\n        cancel={this.state.edit ? this.cancelEdit : null}\n        files={this.state.edit ? this.state.message.files : []}\n        focus={!!this.state.edit}\n        group={this.state.message.group}\n        messageId={this.state.edit ? this.state.message.id : null}\n        parent={\n          this.state.edit ? this.state.message[\"parent\"] : this.state.message.id\n        }\n        text={this.state.edit ? this.state.message.data[\"text\"] : \"\"}\n        title={this.state.edit ? this.state.message.data[\"title\"] : \"\"}\n        isChild={isChild}\n      />\n    );\n  }\n\n  componentDidMount() {\n    if (this.props.message) {\n      this.loadMessage(this.props.message);\n    } else {\n      cache.get(url).then(msg => this.loadMessage(msg));\n    }\n    setTimeout(() => window.scrollTo(0, 0));\n  }\n\n  processEmbed() {\n    if (this.state.message && this.state.message.data) {\n      let previewUrl = util.getUrl(this.state.message.data[\"text\"]);\n      if (previewUrl) {\n        cache\n          .get(\"/api/links/by_url?url=\" + encodeURIComponent(previewUrl[0]))\n          .then(r => {\n            this.setState({ preview: r, gotPreview: true });\n          });\n      } else {\n        this.setState({ gotPreview: true });\n      }\n    }\n  }\n\n  componentWillUpdate() {\n    if (!this.state.gotPreview) {\n      this.processEmbed();\n    }\n    if (this.state.message) {\n      let msgElement = document.getElementById(this.state.message.id);\n      if (\n        this.state.message.id == router.action &&\n        msgElement.classList.contains(\"highlight\")\n      ) {\n        setTimeout(_ => {\n          msgElement.scrollIntoView({ block: \"start\", behavior: \"smooth\" });\n          setTimeout(_ => msgElement.classList.remove(\"highlight\"), 1000);\n        }, 1000);\n      }\n    }\n  }\n\n  render() {\n    if (this.props.hidden || !this.state.message || this.state.isRemoved) {\n      return;\n    }\n    return (\n      <div>\n        <div\n          id={this.state.message && this.state.message.id}\n          className={\n            \"message child\" +\n            (this.state.message.id == router.action ? \" highlight\" : \"\")\n          }\n        >\n          {this.state.edit && me.me && (\n            <div class=\"message-head d-none d-md-block\">\n              <img\n                class=\"rounded-circle w-3 material-shadow avatar\"\n                style={util.backgroundHash(me.me.id)}\n                src={\n                  me.me.avatar\n                    ? util.crop(me.me.avatar[\"id\"], 100, 100)\n                    : util.defaultAvatar\n                }\n              />\n            </div>\n          )}\n          {this.state.edit && this.displayWriter(true)}\n          {!this.state.edit && (\n            <Fragment>\n              <MessageHead\n                author={this.state.author}\n                message={this.state.message}\n                isPublic={this.props.isPublic}\n                isChild={true}\n              />\n              <div class=\"main\">\n                <MessageBody\n                  message={this.state.message}\n                  isPublic={this.props.isPublic}\n                  isChild={true}\n                />\n                <MessageFooter\n                  author={this.state.author}\n                  message={this.state.message}\n                  editMessage={this.editMessage}\n                  deleteMessage={this.deleteMessage}\n                  shareMessage={this.shareMessage}\n                  publishInGroup={this.publishInGroup}\n                  isPublic={this.props.isPublic}\n                  isChild={true}\n                />\n              </div>\n            </Fragment>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component, toChildArray } from \"preact\";\nimport { lang } from \"/core\";\nimport MessageChild from \"./message-child.component.js\";\n\nexport default class MessageChildren extends Component {\n  render() {\n    if (\n      !this.props.children ||\n      this.props.lastDisplayedChild - this.props.firstDisplayedChild < 1\n    ) {\n      return null;\n    }\n    return (\n      <div>\n        {this.props.firstDisplayedChild > 0 && (\n          <div class=\"d-flex\">\n            <a\n              class=\"more-coms unselectable\"\n              onClick={e => this.props.displayPreviousChildren(e)}\n            >\n              {lang.t(\"previous_coms\")}\n            </a>\n          </div>\n        )}\n        {toChildArray(this.props.children).map((e, i, m) => {\n          // bypass empty messages\n          if (!e.files.length && e.data[\"text\"] == \"\" && !e.children.length) {\n            return null;\n          }\n\n          return (\n            <MessageChild\n              message={e}\n              key={e.id}\n              hidden={\n                i < this.props.firstDisplayedChild ||\n                i > this.props.lastDisplayedChild\n              }\n              isPublic={this.props.isPublic}\n            />\n          );\n        })}\n        {this.props.lastDisplayedChild + 1 <\n          toChildArray(this.props.children).length && (\n          <div class=\"d-flex\">\n            <a\n              class=\"more-coms unselectable\"\n              onClick={e => this.props.displayNextChildren(e)}\n            >\n              {lang.t(\"next_coms\")}\n            </a>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, cache, http, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\nimport MessageHead from \"./message-head.component.js\";\nimport MessageFooter from \"./message-footer.component.js\";\nimport MessageBody from \"./message-body.component.js\";\nimport MessageChildren from \"./message-children.component.js\";\nimport Writer from \"./writer.component.js\";\n\nexport default class MessageParent extends Component {\n  constructor(props) {\n    super(props);\n    this.loadMessage = this.loadMessage.bind(this);\n    this.deleteMessage = this.deleteMessage.bind(this);\n    this.editMessage = this.editMessage.bind(this);\n    this.shareMessage = this.shareMessage.bind(this);\n    this.openPublicLink = this.openPublicLink.bind(this);\n    this.cancelEdit = this.cancelEdit.bind(this);\n    this.onNewChild = this.onNewChild.bind(this);\n    this.onEditMessage = this.onEditMessage.bind(this);\n    this.processEmbed = this.processEmbed.bind(this);\n    this.publishInGroup = this.publishInGroup.bind(this);\n\n    window.addEventListener(\"newChild\", this.onNewChild);\n\n    window.addEventListener(\"editMessage\", this.onEditMessage);\n    let url = router.entityUrl;\n    if (!url && props.message) {\n      url = \"/api/message/\" + props.message.id;\n    }\n    this.state = { url: url };\n  }\n\n  componentDidMount() {\n    if (this.props.message) {\n      this.loadMessage(this.props.message);\n    } else {\n      cache.get(this.state.url).then(msg => this.loadMessage(msg));\n    }\n    setTimeout(() => window.scrollTo(0, 0));\n  }\n\n  publishInGroup() {\n    http\n      .put(\"/api/messages/\" + this.state.message.id, {\n        lastActivityDate: Math.floor(Date.now() / 1000),\n        isInFront: true\n      })\n      .then(res => {\n        if (!res) {\n          alert.add(lang.t(\"error\"), \"alert-danger\");\n          return;\n        }\n        router.navigate(\"/groups/\" + this.state.message.group.id);\n      });\n  }\n\n  loadMessage(msg) {\n    if (!msg) {\n      return;\n    }\n    me.removeMatchingNotifications(msg.id);\n    let firstDisplayedChild = null;\n    let lastDisplayedChild = null;\n    if (msg.children.length) {\n      let msgIndex = router.action\n        ? msg.children.findIndex(e => e && e.id === router.action)\n        : -1;\n      if (msgIndex != -1) {\n        firstDisplayedChild = Math.max(0, msgIndex - 1);\n        lastDisplayedChild = Math.min(msg.children.length, msgIndex + 1);\n      } else {\n        firstDisplayedChild = msg.children && msg.children.length - 5; // display the last 5 children\n        lastDisplayedChild = msg.children && msg.children.length;\n      }\n    }\n    this.setState({\n      message: msg,\n      author: msg.author,\n      firstDisplayedChild: firstDisplayedChild,\n      lastDisplayedChild: lastDisplayedChild\n    });\n    setTimeout(this.processEmbed);\n  }\n\n  processEmbed() {\n    if (this.state.message && this.state.message.data) {\n      let previewUrl = util.getUrl(this.state.message.data[\"text\"]);\n      if (previewUrl) {\n        cache\n          .get(\"/api/links/by_url?url=\" + encodeURIComponent(previewUrl[0]))\n          .then(r => {\n            this.setState({ preview: r, gotPreview: true });\n          });\n      } else {\n        this.setState({ gotPreview: true });\n      }\n    }\n  }\n\n  componentWillUpdate() {\n    if (!this.state.gotPreview) {\n      this.processEmbed();\n    }\n  }\n\n  cancelEdit(event) {\n    event.preventDefault();\n    this.setState({ edit: false });\n  }\n\n  async openPublicLink(event) {\n    event.preventDefault();\n    let newTab = window.open(\"about:blank\", \"_blank\");\n    const res = await http.get(\n      \"/api/messages/\" + this.state.message[\"id\"] + \"/get-public-link\"\n    );\n    newTab.location = window.origin + \"/public/\" + res.token;\n  }\n\n  deleteMessage(event) {\n    event.preventDefault();\n    if (confirm(lang.t(\"ask_delete_message\"))) {\n      http.delete(\"/api/messages/\" + this.state.message[\"id\"]);\n      cache.resetCache();\n      // give some time to the cache to delete itself properly\n      setTimeout(() => {\n        router.navigate(\"/groups/\" + this.state.message.group.id, {\n          data: { resetGroupDisplay: true }\n        });\n      }, 100);\n    }\n  }\n\n  shareMessage(event) {\n    event.preventDefault();\n    router.navigate(\"/share?message=\" + this.state.message.id);\n  }\n\n  editMessage(event) {\n    event.preventDefault();\n    this.setState({ edit: true });\n  }\n\n  onEditMessage(event) {\n    if (event.detail.id == this.state.message.id) {\n      this.props.key = +Date.now();\n      let msg = this.state.message;\n      msg.data = event.detail.data;\n      msg.files = event.detail.files;\n      this.setState({\n        message: msg,\n        data: msg.data\n      });\n      setTimeout(_ => this.setState({ edit: false }));\n    }\n  }\n\n  onNewChild(event) {\n    const newMsg = event.detail;\n    let msg = this.state.message;\n    if (newMsg.parent && util.getId(newMsg.parent) == msg[\"id\"]) {\n      newMsg.author = me.me;\n      msg.children = [...msg.children, newMsg];\n      this.setState(prevState => ({\n        lastDisplayedChild: prevState.lastDisplayedChild + 1,\n        message: msg\n      }));\n    }\n  }\n\n  displayWriter(isChild, focus = false) {\n    return (\n      <Writer\n        cancel={this.state.edit ? this.cancelEdit : null}\n        files={this.state.edit ? this.state.message.files : []}\n        focus={focus || !!this.state.edit}\n        group={this.state.message.group}\n        messageId={this.state.edit ? this.state.message.id : null}\n        parent={\n          this.state.edit ? this.state.message[\"parent\"] : this.state.message.id\n        }\n        text={this.state.edit ? this.state.message.data[\"text\"] : \"\"}\n        title={this.state.edit ? this.state.message.data[\"title\"] : \"\"}\n        isChild={isChild}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.hidden || !this.state.message || this.state.isRemoved) {\n      return;\n    }\n    return (\n      <div>\n        <div class=\"message\">\n          {this.state.edit && this.displayWriter(false)}\n          {!this.state.edit && (\n            <div>\n              <MessageHead\n                author={this.state.author}\n                message={this.state.message}\n                isPublic={this.props.isPublic}\n                isChild={false}\n              />\n              <MessageBody\n                message={this.state.message}\n                isPublic={this.props.isPublic}\n                isChild={false}\n              />\n            </div>\n          )}\n          {!this.state.edit && (\n            <MessageFooter\n              author={this.state.author}\n              message={this.state.message}\n              editMessage={this.editMessage}\n              deleteMessage={this.deleteMessage}\n              openPublicLink={this.openPublicLink}\n              publishInGroup={this.publishInGroup}\n              shareMessage={this.shareMessage}\n              isPublic={this.props.isPublic}\n            />\n          )}\n        </div>\n        <MessageChildren\n          children={this.state.message.children}\n          firstDisplayedChild={this.state.firstDisplayedChild}\n          lastDisplayedChild={this.state.lastDisplayedChild}\n          displayPreviousChildren={_ =>\n            this.setState(prevState => ({\n              firstDisplayedChild: Math.max(\n                0,\n                prevState.firstDisplayedChild - 10\n              )\n            }))\n          }\n          displayNextChildren={_ =>\n            this.setState(prevState => ({\n              lastDisplayedChild: Math.min(\n                this.state.message.children,\n                prevState.lastDisplayedChild + 10\n              )\n            }))\n          }\n          isPublic={this.props.isPublic}\n          key={this.state.message.id}\n        />\n        {!this.state.edit && !this.props.isPublic && (\n          <div class=\"message child mt-2\">\n            {me.me && (\n              <div class=\"message-head d-none d-md-block\">\n                <img\n                  class=\"rounded-circle w-3 material-shadow avatar\"\n                  style={util.backgroundHash(me.me.id)}\n                  src={\n                    me.me.avatar\n                      ? util.crop(me.me.avatar[\"id\"], 100, 100)\n                      : util.defaultAvatar\n                  }\n                />\n              </div>\n            )}\n            {this.displayWriter(true, this.props.focus)}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessagePreview extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: props.message\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.message && this.state.message.author) {\n      cache\n        .get(\"/api/users/\" + this.state.message.author)\n        .then(author => author && this.setState({ author: author }));\n    }\n  }\n\n  getAvatar(user) {\n    return (\n      <img\n        title={user ? user.name : \"--\"}\n        className={\"avatar material-shadow\" + (user ? \"\" : \" removed-user\")}\n        style={util.backgroundHash(user ? user.id : \"\")}\n        src={\n          user && user.avatar\n            ? util.crop(user.avatar[\"id\"], 100, 100)\n            : util.defaultAvatar\n        }\n        onError={e => (e.currentTarget.src = util.defaultAvatar)}\n      />\n    );\n  }\n\n  render() {\n    if (!this.state.message) {\n      return null;\n    }\n    return (\n      <a\n        class=\"d-inline-block seamless-link message-preview unselectable\"\n        href={router.toApp(\"/messages/\" + this.state.message.id)}\n        onClick={e => router.onClick(e)}\n        title={this.state.message.data[\"title\"]}\n      >\n        <div tabindex={this.props.tabindex} class=\"card material-shadow\">\n          {this.getAvatar(this.state.author)}\n          {this.state.message.preview ? (\n            <div\n              class=\"card-miniature\"\n              style={\n                \"background-image: url('\" +\n                util.crop(this.state.message.preview, 320, 180) +\n                \"')\"\n              }\n            />\n          ) : (\n            <div class=\"text-preview\">{this.state.message.data[\"text\"]}</div>\n          )}\n          <div class=\"card-body border-top d-flex justify-content-between\">\n            <span class=\"left-buffer\"></span>\n            <span\n              class=\"title\"\n              title={\n                this.state.message.data[\"title\"] ||\n                util.humanFullDate(this.state.message.lastActivityDate)\n              }\n            >\n              {this.state.message.data[\"title\"] ||\n                util.humanTime(this.state.message.lastActivityDate)}\n            </span>\n            <span class=\"children\">\n              {!!this.state.message.children && (\n                <span>\n                  {this.state.message.children + \" \"}\n                  <FaIcon\n                    family={\n                      me.isNew(this.state.message.id) ? \"solid\" : \"regular\"\n                    }\n                    icon={\"comment\"}\n                  />\n                </span>\n              )}\n            </span>\n          </div>\n        </div>\n      </a>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, me, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class MessageSearchResult extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: props.message,\n      title: props.message.data[\"title\"] || \"\",\n      text: props.message.data[\"text\"] || \"\",\n      preview: props.message[\"preview\"] || null\n    };\n    this.getMiniature = this.getMiniature.bind(this);\n    this.getLink = this.getLink.bind(this);\n    this.displayMessageTitle = this.displayMessageTitle.bind(this);\n    this.displayMessageText = this.displayMessageText.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.message.author) {\n      cache\n        .get(\"/api/users/\" + this.props.message.author)\n        .then(author => author && this.setState({ author: author }));\n    }\n  }\n\n  displayAuthorName() {\n    if (!this.state.author) {\n      return { __html: \"--\" };\n    }\n    let authorName = this.state.author.name;\n\n    // make the search terms stand out\n    let words = authorName.split(\" \");\n    for (let j = 0; j < words.length; j++) {\n      if (!words[j].match(util.urlRegExp)) {\n        let searchTerms = this.props.search.split(\" \");\n        for (let k = 0; k < searchTerms.length; k++) {\n          words[j] = words[j].replace(\n            new RegExp(searchTerms[k], \"gi\"),\n            \"<b>$&</b>\"\n          );\n        }\n      }\n    }\n    authorName = words.join(\" \");\n    return { __html: authorName };\n  }\n\n  displayMessageTitle() {\n    if (!this.props.message.data || !this.props.message.data[\"title\"]) {\n      return { __html: util.humanTime(this.props.message.lastActivityDate) };\n    }\n    // escape html a little (just enough to avoid xss I hope)\n    let title = this.props.message.data[\"title\"]\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\")\n      .trim();\n\n    // make the search terms stand out\n    let words = title.split(\" \");\n    for (let j = 0; j < words.length; j++) {\n      if (!words[j].match(util.urlRegExp)) {\n        let searchTerms = this.props.search.split(\" \");\n        for (let k = 0; k < searchTerms.length; k++) {\n          words[j] = words[j].replace(\n            new RegExp(searchTerms[k], \"gi\"),\n            \"<b>$&</b>\"\n          );\n        }\n      }\n    }\n    title = words.join(\" \");\n    return { __html: title };\n  }\n\n  displayMessageText() {\n    if (!this.props.message.data || !this.props.message.data[\"text\"]) {\n      return \"\";\n    }\n\n    // escape html a little (just enough to avoid xss I hope)\n    let txt = this.props.message.data[\"text\"]\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\")\n      .trim();\n\n    // make the search terms stand out for not url words\n    let lines = txt.split(\"\\n\");\n    for (let i = 0; i < lines.length; i++) {\n      let words = lines[i].split(\" \");\n      for (let j = 0; j < words.length; j++) {\n        if (!words[j].match(util.urlRegExp)) {\n          let searchTerms = this.props.search.split(\" \");\n          for (let k = 0; k < searchTerms.length; k++) {\n            if (!searchTerms[k]) {\n              continue;\n            }\n            words[j] = words[j].replace(\n              new RegExp(searchTerms[k], \"gi\"),\n              \"<b>$&</b>\"\n            );\n          }\n          let hashtags = this.props.hashtags.split(\" \");\n          for (let k = 0; k < hashtags.length; k++) {\n            if (!hashtags[k]) {\n              continue;\n            }\n            words[j] = words[j].replace(\n              new RegExp(\"#\" + hashtags[k], \"gi\"),\n              \"<b>$&</b>\"\n            );\n          }\n        }\n      }\n      lines[i] = words.join(\" \");\n    }\n    txt = lines.join(\"\\n\");\n\n    // replace url by real links\n    let shift = 0;\n    let match = null;\n    while ((match = util.getUrl(txt.slice(shift)))) {\n      let url = match[0];\n      if (url.length >= 50) {\n        url = url.slice(0, 25) + \"...\" + url.slice(-24);\n      }\n      let searchTerms = this.props.search.split(\" \");\n      for (let i = 0; i < searchTerms.length; i++) {\n        url = url.replace(new RegExp(searchTerms[i], \"gi\"), \"<b>$&</b>\");\n      }\n      let link = '<a href=\"' + match[0] + '\" target=\"_blank\">' + url + \"</a>\";\n      txt =\n        txt.slice(0, match[\"index\"] + shift) +\n        link +\n        txt.slice(match[\"index\"] + shift + match[0].length);\n      shift += match[\"index\"] + link.length;\n    }\n\n    // replace line returns\n    txt = txt.replace(/\\n/g, \"<br/>\");\n\n    return { __html: txt };\n  }\n\n  getMiniature() {\n    if (this.state.preview) {\n      return (\n        <div\n          class=\"card-miniature\"\n          style={\n            \"background-image: url('\" +\n            util.crop(this.state.preview, 100, 100) +\n            \"')\"\n          }\n        />\n      );\n    }\n    let avatar = util.defaultAvatar;\n    if (\n      this.state.author &&\n      this.state.author.avatar &&\n      this.state.author.avatar.id\n    ) {\n      avatar = util.crop(this.state.author.avatar[\"id\"], 100, 100);\n    }\n    return (\n      <div\n        class=\"card-miniature\"\n        style={\"background-image: url('\" + avatar + \"')\"}\n      />\n    );\n  }\n\n  getLink() {\n    if (this.state.message.parent && this.state.message.children == 0) {\n      return (\n        \"/messages/\" + this.state.message.parent + \"/\" + this.state.message.id\n      );\n    }\n    return \"/messages/\" + this.state.message.id;\n  }\n\n  render() {\n    return (\n      <a\n        class=\"d-inline-block seamless-link message-preview unselectable\"\n        href={router.toApp(this.getLink())}\n        onClick={e => router.onClick(e)}\n        title={this.state.title}\n      >\n        <div tabindex={this.props.tabindex} class=\"card material-shadow\">\n          <div class=\"card-body border-top\">\n            {this.getMiniature()}\n            <div class=\"infos\">\n              <div\n                class=\"title\"\n                dangerouslySetInnerHTML={this.displayAuthorName()}\n              ></div>\n              <div class=\"dot\">&bull;</div>\n              <div\n                class=\"title\"\n                title={\n                  this.state.title ||\n                  util.humanFullDate(this.state.message.lastActivityDate)\n                }\n                dangerouslySetInnerHTML={this.displayMessageTitle()}\n              ></div>\n            </div>\n            <div class=\"text\">\n              {this.state.text.trim() && (\n                <p\n                  class=\"card-text\"\n                  dangerouslySetInnerHTML={this.displayMessageText()}\n                ></p>\n              )}\n            </div>\n            <div class=\"children\">\n              {!!this.state.message.children && (\n                <span>\n                  {this.state.message.children + \" \"}\n                  <FaIcon\n                    family={\n                      me.isNew(this.state.message.id) ? \"solid\" : \"regular\"\n                    }\n                    icon={\"comment\"}\n                  />\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n      </a>\n    );\n  }\n}\n","import _FileGrid from \"./file-grid.component.js\";\nimport _MessageParent from \"./message-parent.component.js\";\nimport _MessageChild from \"./message-child.component.js\";\nimport _MessageBody from \"./message-body.component.js\";\nimport _MessageChildren from \"./message-children.component.js\";\nimport _MessageHead from \"./message-head.component.js\";\nimport _MessageFooter from \"./message-footer.component.js\";\nimport _MessagePreview from \"./message-preview.component.js\";\nimport _MessageSearchResult from \"./message-search-result.component.js\";\nimport _EmbedBlock from \"./embed-block.component.js\";\n\nexport const FileGrid = _FileGrid;\nexport const MessageBody = _MessageBody;\nexport const MessageFooter = _MessageFooter;\nexport const MessageParent = _MessageParent;\nexport const MessageChild = _MessageChild;\nexport const MessageChildren = _MessageChildren;\nexport const MessageHead = _MessageHead;\nexport const MessagePreview = _MessagePreview;\nexport const MessageSearchResult = _MessageSearchResult;\nexport const EmbedBlock = _EmbedBlock;\n","import { h, render, Component } from \"preact\";\nimport { lang, http, router } from \"/core\";\n\nexport default class CreateGroup extends Component {\n  constructor() {\n    super();\n    this.postNewGroup = this.postNewGroup.bind(this);\n  }\n\n  postNewGroup(event) {\n    event.preventDefault();\n    const name = document.querySelector(\"#create_group_form input[name='name']\")\n      .value;\n    let group = {};\n    if (name) {\n      group.name = name;\n    } else {\n      return false;\n    }\n    group.createdAt = Math.floor(Date.now() / 1000);\n    http.post(\"/api/groups\", group).then(res => {\n      http.post(\"/api/groups/invitation/\" + res.secretKey, {}).then(res => {\n        window.location = \"/groups/\" + res.id;\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div class=\"container mt-2\">\n        <div class=\"group-settings\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"container-fluid p-1\">\n                <div class=\"row\">\n                  <div class=\"col-12 col-md-10\">\n                    <form id=\"create_group_form\" class=\"mb-1\">\n                      <div class=\"form-group\">\n                        <label for=\"name\">{lang.t(\"name\")}: </label>\n                        <input\n                          type=\"text\"\n                          name=\"name\"\n                          minlength=\"1\"\n                          maxlength=\"128\"\n                          placeholder={lang.t(\"name_input\")}\n                          class=\"form-control\"\n                          required\n                        ></input>\n                      </div>\n                      <button\n                        onClick={e => this.postNewGroup(e)}\n                        class=\"btn btn-primary\"\n                      >\n                        {lang.t(\"create_the_group\")}\n                      </button>\n                    </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, me, router, util, http } from \"/core\";\nimport { MessageSearchResult } from \"/message\";\n\nexport default class GroupSearch extends Component {\n  constructor(props) {\n    super(props);\n    let groupId = util.getId(router.id);\n    let loaded =\n      1 +\n      Math.floor((window.screen.width * window.screen.height) / (320 * 215));\n    this.state = {\n      groupId: groupId,\n      loaded: loaded,\n      messages: [],\n      totalMessages: 0,\n      search: router.getParam(\"search\").replace(/\\+/g, \" \"),\n      hashtags: router.getParam(\"hashtags\").replace(/\\+/g, \" \")\n    };\n    this.loadMessages = this.loadMessages.bind(this);\n    window.addEventListener(\"routerStateChange\", _ => this.loadMessages());\n  }\n\n  getGroupName() {\n    if (me.me.groups && router.entity.entityType == \"group\") {\n      let group = me.me.groups.find(g => g[\"id\"] == util.getId(router.entity));\n      return group ? group[\"name\"] : \"\";\n    }\n    return \"\";\n  }\n\n  componentDidMount() {\n    this.loadMessages();\n  }\n\n  loadMessages() {\n    let search = router.getParam(\"search\").replace(/\\+/g, \" \");\n    let hashtags = router\n      .getParam(\"hashtags\")\n      .split(\"+\")\n      .join(\" \");\n    http\n      .post(\"/api/messages/search\", {\n        group: this.state.groupId,\n        search: search,\n        hashtags: hashtags\n      })\n      .then(res => {\n        if (res && Array.isArray(res[\"messages\"])) {\n          this.setState({\n            search: search,\n            messages: res[\"messages\"],\n            totalMessages: res[\"totalItems\"],\n            loaded: res.messages.length\n          });\n        }\n      });\n  }\n\n  render() {\n    return (\n      Array.isArray(this.state.messages) && (\n        <div>\n          <div class=\"group-name\">{this.getGroupName()}</div>\n          <article id=\"group\" class=\"justify-content-center d-flex\">\n            <div class=\"search-results-container container-fluid d-flex justify-content-center flex-wrap\">\n              {this.state.messages.slice(0, this.state.loaded).map((msg, i) => {\n                return (\n                  <MessageSearchResult\n                    tabindex={i + 1}\n                    key={msg.id}\n                    message={msg}\n                    groupId={this.state.groupId}\n                    search={this.state.search}\n                    hashtags={this.state.hashtags}\n                  />\n                );\n              })}\n            </div>\n          </article>\n        </div>\n      )\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { cache, me, router, util } from \"/core\";\nimport { MessagePreview } from \"/message\";\n\nexport default class GroupBoard extends Component {\n  constructor(props) {\n    super(props);\n    let groupId = util.getId(router.id);\n    let loaded =\n      1 +\n      Math.floor((window.screen.width * window.screen.height) / (320 * 215));\n    this.state = {\n      groupId: groupId,\n      loaded: loaded,\n      messages: [],\n      scrollTop: 0,\n      totalMessages: 0,\n      pageYOffset: 0,\n      page: 0\n    };\n    this.scroll_cooldown = Date.now();\n    this.onScroll = this.onScroll.bind(this);\n    this.loadMessages = this.loadMessages.bind(this);\n    window.addEventListener(\"resetCache\", this.resetGroupDisplay);\n  }\n\n  componentDidMount() {\n    this.loadMessages(0);\n    window.addEventListener(\"scroll\", this.onScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.onScroll);\n  }\n\n  loadMessages(page) {\n    cache\n      .get(\"/api/groups/\" + this.state.groupId + \"/page/\" + page)\n      .then(res => {\n        if (res && Array.isArray(res[\"messages\"])) {\n          let new_loaded = Math.max(this.state.loaded, page * 30);\n          let msgList = this.state.messages;\n          // don't add already added messages\n          res[\"messages\"].map(\n            m => !msgList.find(msg => msg.id == m.id) && msgList.push(m)\n          );\n          this.setState({\n            messages: msgList,\n            totalMessages: res[\"totalItems\"],\n            page: page,\n            loaded: new_loaded\n          });\n          if ((page + 1) * 30 < new_loaded) {\n            setTimeout(() => this.loadMessages(page + 1));\n          }\n        }\n      });\n  }\n\n  onScroll() {\n    // prevent loading messages if we are in a post\n    if (\n      window.getComputedStyle(document.getElementById(\"group\").parentNode)\n        .display == \"none\"\n    ) {\n      return;\n    }\n    // don't load if on cooldown\n    if (this.scroll_cooldown + 100 < Date.now()) {\n      this.scroll_cooldown = Date.now();\n      this.setState({ pageYOffset: window.pageYOffset });\n      // don't load if unecessary\n      if (\n        Array.isArray(this.state.messages) &&\n        document.body.scrollHeight - window.screen.height - 500 <\n          window.pageYOffset &&\n        this.state.loaded < this.state.totalMessages\n      ) {\n        this.setState(prevState => ({ loaded: prevState.loaded + 10 }));\n        if (this.state.loaded + 30 > this.state.messages.length) {\n          this.loadMessages(this.state.page + 1);\n          // update page count right away\n          this.setState(prevState => ({ page: prevState.page + 1 }));\n        }\n      }\n    }\n  }\n\n  render() {\n    return (\n      Array.isArray(this.state.messages) && (\n        <div>\n          <a\n            href={router.toApp(\"/groups/\" + util.getGroupId())}\n            onClick={e => router.onClick(e)}\n          >\n            <div class=\"group-name\">{util.getGroupName()}</div>\n          </a>\n          <article id=\"group\" class=\"justify-content-center d-flex\">\n            <div class=\"message-container container-fluid d-flex justify-content-center flex-wrap\">\n              {this.state.messages.slice(0, this.state.loaded).map((msg, i) => {\n                return (\n                  <MessagePreview\n                    tabindex={i + 1}\n                    key={msg.id}\n                    message={msg}\n                    groupId={util.getId(router.id)}\n                  />\n                );\n              })}\n            </div>\n          </article>\n        </div>\n      )\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, router, me, alert, cache, http, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class UserSettings extends Component {\n  constructor(props) {\n    super(props);\n    this.destroyAccount = this.destroyAccount.bind(this);\n    this.inputAvatar = this.inputAvatar.bind(this);\n    this.updateSettings = this.updateSettings.bind(this);\n    this.state = Object.assign({}, props);\n  }\n\n  inputAvatar(event) {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \"image/*\";\n    input.addEventListener(\"change\", event => {\n      let img = new Image();\n      img.onload = () => {\n        let w = Math.min(img.naturalWidth, 1024);\n        let h = Math.min(img.naturalHeight, 1024);\n        let g = Math.min(w / img.naturalWidth, h / img.naturalHeight);\n        let nw = Math.floor(img.naturalWidth * g);\n        let nh = Math.floor(img.naturalHeight * g);\n        import(\"/lazy/image-service.js\").then(imageService => {\n          imageService.default.resize(img, nw, nh, blob => {\n            const formData = new FormData();\n            formData.append(\"file\", blob);\n            http.post(\"/api/files\", formData, false).then(file => {\n              http\n                .put(\"/api/users/\" + this.state.id, { avatar: file[\"id\"] })\n                .then(res => {\n                  this.setState({ avatar: file });\n                  cache.resetCache();\n                  alert.add(lang.t(\"settings_updated\"));\n                });\n            });\n          });\n        });\n      };\n      img.src = URL.createObjectURL(event.target.files[0]);\n    });\n    input.click();\n  }\n\n  destroyAccount(event) {\n    event.preventDefault();\n    let confirmDeletion = confirm(lang.t(\"are_you_sure\"));\n    if (confirmDeletion) {\n      http.delete(\"/api/users/\" + this.state.id).then(res => {\n        router.navigate(\"/logout\");\n      });\n    }\n  }\n\n  updateSettings(event) {\n    event.preventDefault();\n    const name = document.querySelector(\"#settings_form input[name='name']\")\n      .value;\n    const login = document.querySelector(\"#settings_form input[name='email']\")\n      .value;\n    const password = document.querySelector(\n      \"#settings_form input[name='password']\"\n    ).value;\n    const notification_emails = document.querySelector(\n      \"#settings_form select[name='notification_emails']\"\n    ).value;\n    const default_group = document.querySelector(\n      \"#settings_form select[name='default_group']\"\n    ).value;\n    const lang = document.querySelector(\"#settings_form select[name='lang']\")\n      .value;\n    let user = {};\n    if (name) {\n      user.name = name;\n    }\n    if (login) {\n      user.login = login;\n    }\n    if (password) {\n      user.password = password;\n    }\n    user.data = {\n      notification_emails: notification_emails,\n      default_group: default_group,\n      lang: lang\n    };\n    http.put(\"/api/users/\" + this.state.id, user).then(res => {\n      if (res[\"error\"]) {\n        alert.add(res[\"error\"], \"alert-danger\");\n      } else {\n        this.setState(prevState => Object.assign(prevState, res));\n        location.href = router.toApp(\n          location.pathname + \"?alert=settings_updated\"\n        );\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div class=\"user-settings\">\n        <div class=\"card\">\n          <div class=\"identite card-body\">\n            <div class=\"container-fluid p-1\">\n              <div class=\"row\">\n                <div class=\"col-12 col-md-2\">\n                  <img\n                    class=\"img-fluid rounded-circle material-shadow avatar\"\n                    src={\n                      this.state.avatar\n                        ? util.crop(this.state.avatar[\"id\"], 100, 100)\n                        : util.defaultAvatar\n                    }\n                    onError={e => (e.currentTarget.src = util.defaultAvatar)}\n                    onClick={e => this.inputAvatar(e)}\n                  />\n                </div>\n                <div class=\"col-12 col-md-10\">\n                  <form id=\"settings_form\" class=\"mb-3\">\n                    <div class=\"form-group\">\n                      <label for=\"name\">{lang.t(\"name\")}: </label>\n                      <input\n                        type=\"text\"\n                        name=\"name\"\n                        minlength=\"1\"\n                        maxlength=\"128\"\n                        placeholder={lang.t(\"name_input\")}\n                        value={this.state.name}\n                        class=\"form-control\"\n                      ></input>\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"email\">{lang.t(\"email\")}: </label>\n                      <input\n                        type=\"email\"\n                        name=\"email\"\n                        placeholder={lang.t(\"email_input\")}\n                        value={this.state.login}\n                        class=\"form-control\"\n                      ></input>\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"password\">{lang.t(\"password\")}: </label>\n                      <input\n                        type=\"password\"\n                        name=\"password\"\n                        autocomplete=\"off\"\n                        minlength=\"8\"\n                        maxlength=\"128\"\n                        placeholder={lang.t(\"password_input\")}\n                        class=\"form-control\"\n                      ></input>\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"notification_emails\">\n                        {lang.t(\"notification_emails\")}:\n                      </label>\n                      <select\n                        name=\"notification_emails\"\n                        class=\"form-control\"\n                        value={this.state.data[\"notification_emails\"]}\n                      >\n                        <option value=\"none\">{lang.t(\"none\")}</option>\n                        <option value=\"hourly\">{lang.t(\"hourly\")}</option>\n                        <option value=\"daily\">{lang.t(\"daily\")}</option>\n                        <option value=\"weekly\">{lang.t(\"weekly\")}</option>\n                        <option value=\"monthly\">{lang.t(\"monthly\")}</option>\n                      </select>\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"default_group\">\n                        {lang.t(\"default_group\")}:\n                      </label>\n                      <select\n                        name=\"default_group\"\n                        class=\"form-control\"\n                        value={this.state.data[\"default_group\"]}\n                      >\n                        {me.me.groups.map(e => (\n                          <option value={e.id}>{e.name}</option>\n                        ))}\n                      </select>\n                    </div>\n                    <div class=\"form-group\">\n                      <label class=\"capitalize\" for=\"lang\">\n                        {lang.t(\"lang\")}:\n                      </label>\n                      <select\n                        name=\"lang\"\n                        class=\"form-control\"\n                        value={lang.getCurrentLang()}\n                      >\n                        {Object.keys(lang.possibleLang).map(k => (\n                          <option value={k}>{lang.possibleLang[k]}</option>\n                        ))}\n                      </select>\n                    </div>\n                    <button\n                      onClick={e => this.updateSettings(e)}\n                      class=\"btn btn-primary\"\n                    >\n                      {lang.t(\"save_changes\")}\n                    </button>\n                  </form>\n                  <form id=\"destroy_form\">\n                    <label class=\"d-block\" for=\"destroy_account\">\n                      {lang.t(\"destroy_account_explain\")}\n                    </label>\n                    <button\n                      onClick={e => this.destroyAccount(e)}\n                      name=\"destroy_account\"\n                      class=\"btn btn-danger\"\n                    >\n                      {lang.t(\"destroy_account\")}\n                    </button>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {this.state.alert && (\n          <div class=\"global-alert alert alert-success\">{this.state.alert}</div>\n        )}\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, alert, cache, http, router, util } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\n\nexport default class GroupSettings extends Component {\n  constructor(props) {\n    super(props);\n    this.updateSettings = this.updateSettings.bind(this);\n    this.leaveGroup = this.leaveGroup.bind(this);\n    this.leave = this.leave.bind(this);\n    this.resetSecretKey = this.resetSecretKey.bind(this);\n    this.state = Object.assign({ hydratedUsers: [] }, props);\n  }\n\n  resetSecretKey(event) {\n    event.preventDefault();\n    http\n      .post(\"/api/groups/\" + this.state.id + \"/reset-invite-key\", {})\n      .then(res => {\n        alert.add(lang.t(\"group_updated\"));\n        cache.resetCache();\n        this.setState({ secretKey: res[\"inviteKey\"] });\n      });\n  }\n\n  updateSettings(event) {\n    event.preventDefault();\n    const name = document.querySelector(\"#settings_form input[name='name']\")\n      .value;\n    let group = {};\n    if (name) {\n      group.name = name;\n    }\n    http.put(\"/api/groups/\" + this.state.id, group).then(res => {\n      alert.add(lang.t(\"group_updated\"));\n      cache.resetCache();\n      this.setState(prevState => Object.assign(prevState, res));\n    });\n  }\n\n  leaveGroup(event) {\n    event.preventDefault();\n    if (me.me.data[\"default_group\"] == this.state.id) {\n      let user = {};\n      user.data = { default_group: me.me.groups[0].id };\n      http.put(\"/api/users/\" + me.me.id, user).then(res => {\n        me.update();\n        this.leave();\n      });\n    } else {\n      this.leave();\n    }\n  }\n\n  leave() {\n    http.post(\"/api/groups/\" + this.state.id + \"/leave\", {}).then(res => {\n      if (!res || !res[\"entityType\"]) {\n        alert.add(lang.t(\"error\"), \"alert-danger\");\n      } else {\n        me.update();\n        alert.add(lang.t(\"group_left\"));\n        router.navigate(\"/\");\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div class=\"group-settings mb-3\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"container-fluid p-1\">\n                <div class=\"row\">\n                  <div class=\"col-12 col-md-10\">\n                    <form id=\"settings_form\" class=\"mb-1 border-bottom pb-1\">\n                      <div class=\"form-group\">\n                        <label for=\"name\">{lang.t(\"name\")}: </label>\n                        <input\n                          type=\"text\"\n                          name=\"name\"\n                          minlength=\"1\"\n                          maxlength=\"128\"\n                          placeholder={lang.t(\"name_input\")}\n                          value={this.state.name}\n                          class=\"form-control\"\n                          required\n                        ></input>\n                      </div>\n                      <button\n                        onClick={this.updateSettings}\n                        class=\"btn btn-outline-secondary\"\n                      >\n                        {lang.t(\"save_changes\")}\n                      </button>\n                    </form>\n                    <form class=\"mb-1 border-bottom pb-1\">\n                      <div class=\"form-group\">\n                        <label for=\"inviteKey\">\n                          {lang.t(\"invitation_link\")}:{\" \"}\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"inviteKey\"\n                          value={\n                            location.protocol +\n                            \"//\" +\n                            location.host +\n                            \"/invitation/\" +\n                            this.state.secretKey\n                          }\n                          class=\"form-control font-size-80\"\n                          readonly=\"readonly\"\n                        ></input>\n                      </div>\n                      <button\n                        class=\"btn btn-outline-secondary\"\n                        onClick={this.resetSecretKey}\n                      >\n                        {lang.t(\"reset_invitation_link\")}\n                      </button>\n                    </form>\n                    <form>\n                      <button\n                        onClick={e => this.leaveGroup(e)}\n                        class=\"btn btn-outline-danger\"\n                      >\n                        {lang.t(\"quit_group\")}\n                      </button>\n                    </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"user-list mb-3\">\n          <h3>{lang.t(\"users\")}</h3>\n          {this.props.users.map(\n            user =>\n              user && (\n                <div class=\"user-card\">\n                  <img\n                    class=\"avatar material-shadow\"\n                    style={util.backgroundHash(user.id)}\n                    src={\n                      user.avatar\n                        ? util.crop(user.avatar[\"id\"], 200, 200)\n                        : util.defaultAvatar\n                    }\n                    onError={e => (e.currentTarget.src = util.defaultAvatar)}\n                  />\n                  <span>{user[\"name\"]}</span>\n                </div>\n              )\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, cache, me, router } from \"/core\";\nimport FaIcon from \"../components/fa-icon.component.js\";\nimport UserSettings from \"./user-settings.component.js\";\nimport GroupSettings from \"./group-settings.component.js\";\n\nexport default class Settings extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    if (props.entityUrl) {\n      cache.get(props.entityUrl).then(res => this.setState({ entity: res }));\n    }\n  }\n\n  render() {\n    if (!this.state.entity || !me.me) {\n      return;\n    }\n    return (\n      <div class=\"settings\">\n        <ul class=\"nav nav-tabs\">\n          <li class=\"nav-item\">\n            <a\n              class={\n                \"nav-link\" +\n                (this.state.entity[\"entityType\"] == \"user\" ? \" active\" : \"\")\n              }\n              href={router.toApp(\"/users/\" + me.me.id + \"/settings\")}\n              onClick={e => router.onClick(e)}\n            >\n              {lang.t(\"account\")}\n            </a>\n          </li>\n          {me.me.groups.length > 0 && (\n            <li\n              class=\"nav-item dropdown group-list\"\n              tabindex=\"-1\"\n              onClick={e => e.currentTarget.classList.toggle(\"active\")}\n            >\n              <div\n                class={\n                  \"nav-link\" +\n                  (this.state.entity[\"entityType\"] == \"group\" ? \" active\" : \"\")\n                }\n              >\n                {lang.t(\"groups\")}\n              </div>\n              <div class=\"dropdown-menu\">\n                {me.me.groups.map(e => (\n                  <a\n                    class=\"seamless-link\"\n                    href={router.toApp(\"/groups/\" + e.id + \"/settings\")}\n                    onClick={e => router.onClick(e)}\n                  >\n                    {e.name}\n                  </a>\n                ))}\n              </div>\n            </li>\n          )}\n        </ul>\n        {this.state.entity[\"entityType\"] === \"user\" && (\n          <UserSettings {...this.state.entity} />\n        )}\n        {this.state.entity[\"entityType\"] === \"group\" && (\n          <GroupSettings {...this.state.entity} />\n        )}\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, router, http } from \"/core\";\nimport FaIcon from \"./fa-icon.component.js\";\nimport Writer from \"/message/writer.component.js\";\n\nexport default class Share extends Component {\n  constructor() {\n    super();\n    let currentUrl = new URL(window.location);\n    this.state = {\n      loaded: false,\n      group: null,\n      currentUrl: currentUrl,\n      title: currentUrl.searchParams.get(\"title\") || \"\",\n      text: currentUrl.searchParams.get(\"text\") || \"\",\n      url: currentUrl.searchParams.get(\"url\") || \"\",\n      files: null\n    };\n    this.groupSelect = this.groupSelect.bind(this);\n  }\n\n  componentDidMount() {\n    me.get().then(user => {\n      if (user.data[\"default_group\"]) {\n        this.setState({ group: user.data[\"default_group\"] });\n        router.backUrl = \"/groups/\" + user.data[\"default_group\"];\n      } else {\n        if (user.groups.length == 1) {\n          this.setState({ group: user.groups[0][\"id\"] });\n          router.backUrl = \"/groups/\" + user.groups[0];\n        }\n      }\n      if (this.state.currentUrl.searchParams.get(\"message\")) {\n        http\n          .get(\n            \"/api/messages/\" + this.state.currentUrl.searchParams.get(\"message\")\n          )\n          .then(m => {\n            this.setState({\n              loaded: true,\n              title: (m && m.data.title) || \"\",\n              text: (m && m.data.text) || \"\",\n              url: \"\",\n              files: (m && m.files) || null\n            });\n          });\n      } else {\n        this.setState({ loaded: true });\n      }\n    });\n  }\n\n  groupSelect(e) {\n    this.setState({ group: e.target.value });\n    router.backUrl = \"/groups/\" + e.target.value;\n  }\n\n  render() {\n    if (!this.state[\"loaded\"]) {\n      return;\n    }\n    return (\n      <article class=\"mt-2\">\n        <div class=\"container\">\n          {me.me && me.me.groups.length > 1 && (\n            <div class=\"mb-1\">\n              <label for=\"group_share_choice\">\n                {lang.t(\"group_share_choice\")}\n              </label>\n              <select\n                value={this.state.group}\n                class=\"form-control\"\n                name=\"group_share_choice\"\n                onChange={e => this.groupSelect(e)}\n                required\n              >\n                {me.me.groups.map(e => (\n                  <option value={e[\"id\"]}>{e.name}</option>\n                ))}\n              </select>\n            </div>\n          )}\n          <Writer\n            focus={true}\n            group={this.state.group}\n            title={this.state.title}\n            text={\n              this.state.text || this.state.url\n                ? this.state.text + \"\\n\" + this.state.url\n                : \"\"\n            }\n            files={this.state.files}\n          />\n        </div>\n      </article>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { util, router } from \"/core\";\nimport { MessageParent } from \"/message\";\nimport CreateGroup from \"./create-group.component.js\";\nimport GroupSearch from \"./group-search.component.js\";\nimport GroupBoard from \"./group-board.component.js\";\nimport FaIcon from \"./fa-icon.component.js\";\nimport Writer from \"/message/writer.component.js\";\nimport Settings from \"/settings/settings.component.js\";\nimport Share from \"./share.component.js\";\n\nexport default class MainContent extends Component {\n  render() {\n    if (this.props.action == \"settings\") {\n      return (\n        <article class=\"mt-2 justify-content-center d-flex\">\n          <div class=\"container pb-3\">\n            <Settings\n              key={this.props.entityUrl}\n              entityUrl={this.props.entityUrl}\n            />\n          </div>\n        </article>\n      );\n    }\n    switch (this.props.route) {\n      case \"create-group\":\n        return <CreateGroup />;\n      case \"share\":\n        return <Share />;\n      case \"messages\":\n        return (\n          <article class=\"mb-3 justify-content-center d-flex\">\n            <div class=\"container pb-3\">\n              <a\n                href={router.toApp(\"/groups/\" + util.getGroupId())}\n                onClick={e => router.onClick(e)}\n              >\n                <div class=\"group-name\">{util.getGroupName()}</div>\n              </a>\n              <MessageParent\n                focus={!!router.getParam(\"focus\", router.search)}\n                key={this.props.id}\n                url={this.props.entityUrl}\n              />\n            </div>\n          </article>\n        );\n      case \"groups\":\n        if (this.props.action == \"write\") {\n          return (\n            <article class=\"mb-3\">\n              <div class=\"container pb-3\">\n                <a\n                  href={router.toApp(\"/groups/\" + util.getGroupId())}\n                  onClick={e => router.onClick(e)}\n                >\n                  <div class=\"group-name\">{util.getGroupName()}</div>\n                </a>\n                <Writer focus={true} group={this.props.id} />\n              </div>\n            </article>\n          );\n        }\n        if (router.getParam(\"search\") || router.getParam(\"hashtags\")) {\n          return (\n            <div>\n              <GroupSearch key={this.props.id} />\n            </div>\n          );\n        }\n        return (\n          <div>\n            <GroupBoard key={this.props.id} />\n            <a\n              class=\"write-button material-shadow seamless-link\"\n              href={router.toApp(\"/groups/\" + this.props.id + \"/write\")}\n              onClick={e => router.onClick(e)}\n            >\n              <FaIcon family={\"solid\"} icon={\"pencil-alt\"} />\n            </a>\n          </div>\n        );\n      default:\n    }\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, me, alert, cache, http, router } from \"/core\";\nimport zusam_logo from \"/assets/zusam_logo.svg\";\n\nexport default class Login extends Component {\n  constructor() {\n    super();\n    this.state = {\n      showAlert: false,\n      error: \"\"\n    };\n    this.sendLoginForm = this.sendLoginForm.bind(this);\n    this.sendPasswordReset = this.sendPasswordReset.bind(this);\n    this.showPasswordReset = this.showPasswordReset.bind(this);\n    // reroute if already logged in\n    cache.get(\"apiKey\").then(apiKey => apiKey && router.navigate(\"/\"));\n  }\n\n  sendPasswordReset(e) {\n    e.preventDefault();\n    let login = document.getElementById(\"login\").value || \"\";\n    login.toLowerCase();\n    this.setState({ sending: true });\n    http.post(\"/api/password-reset-mail\", { mail: login }).then(res => {\n      this.setState({ sending: false });\n      if (res && !res.message) {\n        alert.add(lang.t(\"password_reset_mail_sent\"));\n      } else {\n        alert.add(lang.t(res.message), \"alert-danger\");\n      }\n    });\n  }\n\n  sendLoginForm(e) {\n    e.preventDefault();\n    this.setState({ showAlert: false, sending: true });\n    let login = document.getElementById(\"login\").value || \"\";\n    login.toLowerCase();\n    const password = document.getElementById(\"password\").value;\n    http.post(\"/api/login\", { login: login, password: password }).then(res => {\n      this.setState({ sending: false });\n      if (res && res.api_key) {\n        cache.set(\"apiKey\", res.api_key).then(() => {\n          me.update().then(() => {\n            setTimeout(() => router.navigate(\"/\"), 100);\n          });\n        });\n      } else {\n        if (res.message) {\n          alert.add(lang.t(res.message), \"alert-danger\");\n        } else {\n          alert.add(lang.t(\"error\"), \"alert-danger\");\n        }\n      }\n    });\n  }\n\n  showPasswordReset() {\n    this.setState({ showResetPassword: true });\n  }\n\n  render() {\n    return (\n      <div class=\"login\">\n        <div class=\"login-form\">\n          <img src={zusam_logo} />\n          {!this.state.showResetPassword && (\n            <form>\n              <div class=\"form-group\">\n                <input\n                  type=\"email\"\n                  class=\"form-control\"\n                  required\n                  id=\"login\"\n                  placeholder={lang.t(\"login_placeholder\")}\n                />\n              </div>\n              <div class=\"form-group\">\n                <input\n                  type=\"password\"\n                  class=\"form-control\"\n                  required\n                  id=\"password\"\n                  placeholder={lang.t(\"password_placeholder\")}\n                />\n              </div>\n              <div class=\"forgot-password\">\n                <span onClick={e => this.showPasswordReset(e)}>\n                  {lang.t(\"forgot_password\")}\n                </span>\n              </div>\n              <button\n                type=\"submit\"\n                class=\"btn btn-light\"\n                onClick={e => this.sendLoginForm(e)}\n                disabled={this.state.sending}\n              >\n                {lang.t(\"connect\")}\n              </button>\n            </form>\n          )}\n          {!!this.state.showResetPassword && (\n            <form>\n              <div class=\"form-group\">\n                <input\n                  type=\"email\"\n                  class=\"form-control\"\n                  required\n                  id=\"login\"\n                  placeholder={lang.t(\"login_placeholder\")}\n                />\n              </div>\n              <button\n                type=\"submit\"\n                class=\"btn btn-light\"\n                onClick={e => this.sendPasswordReset(e)}\n                disabled={this.state.sending}\n              >\n                {lang.t(\"submit\")}\n              </button>\n            </form>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, alert, cache, http, router } from \"/core\";\n\nexport default class ResetPassword extends Component {\n  constructor() {\n    super();\n    this.sendNewPassword = this.sendNewPassword.bind(this);\n  }\n\n  sendNewPassword(e) {\n    e.preventDefault();\n    cache.set(\"apiKey\", \"\");\n    const password = document.getElementById(\"password\").value || \"\";\n    const passwordConfirmation =\n      document.getElementById(\"password_confirmation\").value || \"\";\n    const mail = router.getParam(\"mail\");\n    const key = router.getParam(\"key\");\n    if (mail && password) {\n      if (password != passwordConfirmation) {\n        alert.add(lang.t(\"passwords_dont_match\"));\n        return;\n      }\n      http\n        .post(\"/api/new-password\", { mail: mail, key: key, password: password })\n        .then(res => {\n          if (res.api_key) {\n            cache.set(\"apiKey\", res.api_key);\n            setTimeout(() => router.navigate(\"/\"), 100);\n          } else {\n            alert.add(lang.t(res.message));\n          }\n        })\n        .catch(res => console.warn(res));\n    }\n  }\n\n  render() {\n    return (\n      <div class=\"login\">\n        <div class=\"login-form\">\n          <h2 class=\"title\">{lang.t(\"reset_password_title\")}</h2>\n          <form>\n            <div class=\"form-group\">\n              <input\n                type=\"password\"\n                class=\"form-control\"\n                required\n                id=\"password\"\n                placeholder={lang.t(\"new_password_placeholder\")}\n              />\n            </div>\n            <div class=\"form-group\">\n              <input\n                type=\"password\"\n                class=\"form-control\"\n                required\n                id=\"password_confirmation\"\n                placeholder={lang.t(\"confirm_password_placeholder\")}\n              />\n            </div>\n            <button\n              type=\"submit\"\n              class=\"btn btn-light\"\n              onClick={e => this.sendNewPassword(e)}\n            >\n              {lang.t(\"submit\")}\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, alert, cache, http, router } from \"/core\";\nimport zusam_logo from \"/assets/zusam_logo.svg\";\n\nexport default class Signup extends Component {\n  constructor() {\n    super();\n    this.state = {\n      showAlert: false,\n      error: \"\",\n      inviteKey: router.getParam(\"inviteKey\")\n    };\n    this.sendSignupForm = this.sendSignupForm.bind(this);\n  }\n\n  sendSignupForm(e) {\n    e.preventDefault();\n    this.setState({ showAlert: false });\n    let login = document.getElementById(\"login\").value || \"\";\n    login.toLowerCase();\n    const password = document.getElementById(\"password\").value;\n    cache.set(\"apiKey\", \"\");\n    http\n      .post(\"/api/signup\", {\n        login: login,\n        password: password,\n        invite_key: this.state.inviteKey\n      })\n      .then(res => {\n        if (res && !res.message) {\n          cache.set(\"apiKey\", res.api_key);\n          setTimeout(() => router.navigate(\"/\"), 100);\n        } else {\n          alert.add(lang.t(res.message));\n        }\n      });\n  }\n\n  render() {\n    return (\n      <div class=\"signup\">\n        <div class=\"signup-form\">\n          <img src={zusam_logo} />\n          <div class=\"welcome lead\">{lang.t(\"invitation_welcome\")}</div>\n          <form>\n            <div class=\"form-group\">\n              <input\n                type=\"email\"\n                class=\"form-control\"\n                required\n                id=\"login\"\n                placeholder={lang.t(\"login_placeholder\")}\n              />\n            </div>\n            <div class=\"form-group\">\n              <input\n                type=\"password\"\n                class=\"form-control\"\n                required\n                id=\"password\"\n                placeholder={lang.t(\"password_placeholder\")}\n              />\n            </div>\n            <button\n              type=\"submit\"\n              class=\"btn btn-light\"\n              onClick={e => this.sendSignupForm(e)}\n            >\n              {lang.t(\"signup\")}\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { lang, http } from \"/core\";\n\nexport default class StopNotificationEmails extends Component {\n  constructor() {\n    super();\n    http\n      .get(\"/api\" + window.location.pathname)\n      .then(res => {\n        this.setState({ message: lang.t(\"notification_emails_stopped\") });\n      })\n      .catch(err => {\n        console.warn(err);\n        this.setState({ message: lang.t(\"error\") });\n      });\n  }\n\n  render() {\n    return <div>{this.state.message || \"\"}</div>;\n  }\n}\n","import { h, render, Component } from \"preact\";\nimport { http, router } from \"/core\";\nimport { MessageParent } from \"/message\";\n\nexport default class Public extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    if (this.props.token) {\n      http\n        .get(\"/api/public/\" + this.props.token)\n        .then(res => this.setState({ message: res }));\n    }\n  }\n\n  render() {\n    if (!this.state.message) {\n      return;\n    }\n    return (\n      <article class=\"justify-content-center d-flex mt-2\">\n        <div class=\"container\">\n          <MessageParent\n            isPublic={true}\n            key={this.state.message.id}\n            message={this.state.message}\n          />\n        </div>\n      </article>\n    );\n  }\n}\n","import _Login from \"./login.component.js\";\nimport _ResetPassword from \"./reset-password.component.js\";\nimport _Signup from \"./signup.component.js\";\nimport _StopNotificationEmails from \"./stop-notification-emails.component.js\";\nimport _Public from \"./public.component.js\";\n\nexport const Login = _Login;\nexport const ResetPassword = _ResetPassword;\nexport const Signup = _Signup;\nexport const StopNotificationEmails = _StopNotificationEmails;\nexport const Public = _Public;\n","import { h, render, Component } from \"preact\";\nimport { lazy } from \"preact/compat\";\nimport { alert, lang, cache, router, me } from \"/core\";\nimport Navbar from \"./components/navbar.component.js\";\nimport MainContent from \"./components/main-content.component.js\";\nimport {\n  Login,\n  Public,\n  ResetPassword,\n  Signup,\n  StopNotificationEmails\n} from \"/outside\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.onRouterStateChange = this.onRouterStateChange.bind(this);\n    window.addEventListener(\"routerStateChange\", this.onRouterStateChange);\n    window.addEventListener(\"meStateChange\", _ => this.setState({ me: me.me }));\n    window.addEventListener(\"fetchedNewDict\", _ => this.setState({}));\n    window.addEventListener(\"popstate\", router.sync);\n    window.addEventListener(\"click\", e => {\n      // close dropdowns if we are clicking on something else\n      if (!e.target.closest('.dropdown')) {\n        document.querySelectorAll('.dropdown').forEach(n => n.classList.remove(\"active\"));\n      }\n    });\n    lang.fetchDict();\n    cache.get(\"apiKey\").then(apiKey => {\n      if (router.isOutside() || apiKey) {\n        router.sync();\n      } else {\n        // redirect to login if we don't have an apiKey\n        router.navigate(\"/login\");\n      }\n    });\n    this.state = {\n      action: router.action,\n      route: router.route,\n      id: router.id,\n      entityUrl: router.entityUrl\n    };\n  }\n\n  onRouterStateChange() {\n    this.setState({\n      action: router.action,\n      route: router.route,\n      id: router.id,\n      entityUrl: router.entityUrl\n    });\n    setTimeout(() => window.scrollTo(0, 0));\n    cache.get(\"apiKey\").then(apiKey => {\n      if (apiKey && router.route != \"login\") {\n        me.get().then(user => {\n          if (!user && !router.isOutside()) {\n            cache.set(\"apiKey\", \"\").then(_ => router.navigate(\"/login\"));\n          } else {\n            this.setState({\n              action: router.action,\n              route: router.route,\n              id: router.id,\n              me: user,\n              entityUrl: router.entityUrl\n            });\n          }\n        });\n      } else {\n        if (!router.isOutside()) {\n          router.navigate(\"/login\");\n        }\n      }\n    });\n    alert.add(lang.t(router.getParam(\"alert\", router.search)));\n  }\n\n  render() {\n    // external pages for non connected users\n    switch (this.state.route) {\n      case \"signup\":\n        return <Signup />;\n        break;\n      case \"stop-notification-emails\":\n        return <StopNotificationEmails />;\n        break;\n      case \"public\":\n        return <Public token={this.state.id} key={this.state.id}/>;\n        break;\n      case \"password-reset\":\n        return <ResetPassword />;\n        break;\n      case \"login\":\n        return <Login />;\n        break;\n    }\n\n    // here, we enter the \"connected\" realm of pages.\n    // If the user is not connected, what should we do ?\n    if (!this.state.me || !this.state.me.groups) {\n      return;\n    }\n\n    return (\n      <main>\n        <Navbar />\n        <div class=\"content\">\n          <MainContent {...this.state} />\n        </div>\n      </main>\n    );\n  }\n}\n\nrender(<App />, document.body);\n\nif (\"serviceWorker\" in navigator) {\n  navigator.serviceWorker\n    .register(\"/service-worker.js\")\n    .catch(err => console.warn(err));\n}\n","module.exports = function loadJSBundle(bundle) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.charset = 'utf-8';\n    script.src = bundle;\n    script.onerror = function (e) {\n      script.onerror = script.onload = null;\n      reject(e);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n};\n"]}