function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},s=n.parcelRequiredc87;null==s&&((s=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){i[e]=t},n.parcelRequiredc87=s),s.register("c1bOu",(function(t,n){var r,i;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var s={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)s[t[n]]=e[t[n]]},i=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s("c1bOu").register(JSON.parse('{"bXkwM":"index.0d5e845f.js","fGyc1":"service-workers.js","IA7EQ":"zusam_logo.1eebfd28.svg","1UwEQ":"nlg.41672c04.js","jrHYO":"image-service.929466c7.js"}'));var o,a,l,u,c,p,d,h={},f=[],g=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function m(e,t){for(var n in t)e[n]=t[n];return e}function v(e){var t=e.parentNode;t&&t.removeChild(e)}function y(e,t,n){var r,i,s,a={};for(s in t)"key"==s?r=t[s]:"ref"==s?i=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?o.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return _(e,a,r,i,null)}function _(e,t,n,r,i){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++l:i};return null==i&&null!=a.vnode&&a.vnode(s),s}function b(e){return e.children}function w(e,t){this.props=e,this.context=t}function k(e,t){if(null==t)return e.__?k(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?k(e):null}function x(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return x(e)}}function S(e){(!e.__d&&(e.__d=!0)&&u.push(e)&&!C.__r++||p!==a.debounceRendering)&&((p=a.debounceRendering)||c)(C)}function C(){for(var e;C.__r=u.length;)e=u.sort((function(e,t){return e.__v.__b-t.__v.__b})),u=[],e.some((function(e){var t,n,r,i,s,o;e.__d&&(s=(i=(t=e).__v).__e,(o=t.__P)&&(n=[],(r=m({},i)).__v=i.__v+1,R(o,i,r,t.__n,void 0!==o.ownerSVGElement,null!=i.__h?[s]:null,n,null==s?k(i):s,i.__h),I(n,i),i.__e!=s&&x(i)))}))}function O(e,t,n,r,i,s,o,a,l,u){var c,p,d,g,m,v,y,w=r&&r.__k||f,x=w.length;for(n.__k=[],c=0;c<t.length;c++)if(null!=(g=n.__k[c]=null==(g=t[c])||"boolean"==typeof g?null:"string"==typeof g||"number"==typeof g||"bigint"==typeof g?_(null,g,null,null,g):Array.isArray(g)?_(b,{children:g},null,null,null):g.__b>0?_(g.type,g.props,g.key,null,g.__v):g)){if(g.__=n,g.__b=n.__b+1,null===(d=w[c])||d&&g.key==d.key&&g.type===d.type)w[c]=void 0;else for(p=0;p<x;p++){if((d=w[p])&&g.key==d.key&&g.type===d.type){w[p]=void 0;break}d=null}R(e,g,d=d||h,i,s,o,a,l,u),m=g.__e,(p=g.ref)&&d.ref!=p&&(y||(y=[]),d.ref&&y.push(d.ref,null,g),y.push(p,g.__c||m,g)),null!=m?(null==v&&(v=m),"function"==typeof g.type&&g.__k===d.__k?g.__d=l=E(g,l,e):l=A(e,g,d,w,m,l),"function"==typeof n.type&&(n.__d=l)):l&&d.__e==l&&l.parentNode!=e&&(l=k(d))}for(n.__e=v,c=x;c--;)null!=w[c]&&("function"==typeof n.type&&null!=w[c].__e&&w[c].__e==n.__d&&(n.__d=k(r,c+1)),$(w[c],w[c]));if(y)for(c=0;c<y.length;c++)T(y[c],y[++c],y[++c])}function E(e,t,n){for(var r,i=e.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=e,t="function"==typeof r.type?E(r,t,n):A(n,r,r,i,r.__e,t));return t}function P(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){P(e,t)})):t.push(e)),t}function A(e,t,n,r,i,s){var o,a,l;if(void 0!==t.__d)o=t.__d,t.__d=void 0;else if(null==n||i!=s||null==i.parentNode)e:if(null==s||s.parentNode!==e)e.appendChild(i),o=null;else{for(a=s,l=0;(a=a.nextSibling)&&l<r.length;l+=2)if(a==i)break e;e.insertBefore(i,s),o=s}return void 0!==o?o:i.nextSibling}function j(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||g.test(t)?n:n+"px"}function M(e,t,n,r,i){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||j(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||j(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r||e.addEventListener(t,s?N:L,s):e.removeEventListener(t,s?N:L,s);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function L(e){this.l[e.type+!1](a.event?a.event(e):e)}function N(e){this.l[e.type+!0](a.event?a.event(e):e)}function R(e,t,n,r,i,s,l,u,c){var p,d,f,g,y,_,x,S,C,E,P,A=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(c=n.__h,u=t.__e=n.__e,t.__h=null,s=[u]),(p=a.__b)&&p(t);try{e:if("function"==typeof A){if(S=t.props,C=(p=A.contextType)&&r[p.__c],E=p?C?C.props.value:p.__:r,n.__c?x=(d=t.__c=n.__c).__=d.__E:("prototype"in A&&A.prototype.render?t.__c=d=new A(S,E):(t.__c=d=new w(S,E),d.constructor=A,d.render=D),C&&C.sub(d),d.props=S,d.state||(d.state={}),d.context=E,d.__n=r,f=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=A.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=m({},d.__s)),m(d.__s,A.getDerivedStateFromProps(S,d.__s))),g=d.props,y=d.state,f)null==A.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==A.getDerivedStateFromProps&&S!==g&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(S,E),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(S,d.__s,E)||t.__v===n.__v){d.props=S,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),d.__h.length&&l.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(S,d.__s,E),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(g,y,_)}))}d.context=E,d.props=S,d.state=d.__s,(p=a.__r)&&p(t),d.__d=!1,d.__v=t,d.__P=e,p=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(r=m(m({},r),d.getChildContext())),f||null==d.getSnapshotBeforeUpdate||(_=d.getSnapshotBeforeUpdate(g,y)),P=null!=p&&p.type===b&&null==p.key?p.props.children:p,O(e,Array.isArray(P)?P:[P],t,n,r,i,s,l,u,c),d.base=t.__e,t.__h=null,d.__h.length&&l.push(d),x&&(d.__E=d.__=null),d.__e=!1}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,i,s,a,l){var u,c,p,d=n.props,f=t.props,g=t.type,m=0;if("svg"===g&&(i=!0),null!=s)for(;m<s.length;m++)if((u=s[m])&&(u===e||(g?u.localName==g:3==u.nodeType))){e=u,s[m]=null;break}if(null==e){if(null===g)return document.createTextNode(f);e=i?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,f.is&&f),s=null,l=!1}if(null===g)d===f||l&&e.data===f||(e.data=f);else{if(s=s&&o.call(e.childNodes),c=(d=n.props||h).dangerouslySetInnerHTML,p=f.dangerouslySetInnerHTML,!l){if(null!=s)for(d={},m=0;m<e.attributes.length;m++)d[e.attributes[m].name]=e.attributes[m].value;(p||c)&&(p&&(c&&p.__html==c.__html||p.__html===e.innerHTML)||(e.innerHTML=p&&p.__html||""))}if(function(e,t,n,r,i){var s;for(s in n)"children"===s||"key"===s||s in t||M(e,s,null,n[s],r);for(s in t)i&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===t[s]||M(e,s,t[s],n[s],r)}(e,f,d,i,l),p)t.__k=[];else if(m=t.props.children,O(e,Array.isArray(m)?m:[m],t,n,r,i&&"foreignObject"!==g,s,a,s?s[0]:n.__k&&k(n,0),l),null!=s)for(m=s.length;m--;)null!=s[m]&&v(s[m]);l||("value"in f&&void 0!==(m=f.value)&&(m!==e.value||"progress"===g&&!m)&&M(e,"value",m,d.value,!1),"checked"in f&&void 0!==(m=f.checked)&&m!==e.checked&&M(e,"checked",m,d.checked,!1))}return e}(n.__e,t,n,r,i,s,l,c);(p=a.diffed)&&p(t)}catch(e){t.__v=null,(c||null!=s)&&(t.__e=u,t.__h=!!c,s[s.indexOf(u)]=null),a.__e(e,t,n)}}function I(e,t){a.__c&&a.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){a.__e(e,t.__v)}}))}function T(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){a.__e(e,n)}}function $(e,t,n){var r,i;if(a.unmount&&a.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||T(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){a.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&$(r[i],t,"function"!=typeof e.type);n||null==e.__e||v(e.__e),e.__e=e.__d=void 0}function D(e,t,n){return this.constructor(e,n)}function U(e,t,n){var r,i,s;a.__&&a.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,s=[],R(t,e=(!r&&n||t).__k=y(b,null,[e]),i||h,h,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?o.call(t.childNodes):null,s,!r&&n?n:i?i.__e:t.firstChild,r),I(s,e)}function F(e,t){U(e,t,F)}function z(e,t,n){var r,i,s,a=m({},e.props);for(s in t)"key"==s?r=t[s]:"ref"==s?i=t[s]:a[s]=t[s];return arguments.length>2&&(a.children=arguments.length>3?o.call(arguments,2):n),_(e.type,a,r||e.key,i||e.ref,null)}function H(e,t){var n={__c:t="__cC"+d++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(S)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}o=f.slice,a={__e:function(e,t){for(var n,r,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e}},l=0,w.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=m({},this.state),"function"==typeof e&&(e=e(m({},n),this.props)),e&&m(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),S(this))},w.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),S(this))},w.prototype.render=b,u=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,C.__r=0,d=0;const V={remove:e=>document.getElementById(e).outerHTML="",add:(e,t="alert-success",n=5e3)=>{if(!e)return;let r=document.createElement("DIV");r.id=V.hash(e),r.innerHTML=e,r.classList.add("global-alert","alert",t),document.body.appendChild(r),setTimeout((()=>V.remove(r.id)),n)},hash:e=>{let t=0;if(0==e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}};var B=V;const K={usage:()=>{let e,t=0;for(e in localStorage)Object.prototype.hasOwnProperty.call(localStorage,e)&&(t+=2*(localStorage[e].length+e.length));return t},createStorageBox:(e,t=null)=>({data:e,createdAt:Date.now(),metadata:t}),remove:e=>localStorage.removeItem(e),set:(e,t,n=null)=>(localStorage.setItem(e,JSON.stringify(K.createStorageBox(t,n))),Promise.resolve(e)),get:e=>{let t=localStorage.getItem(e);return null!=t&&(t=JSON.parse(t),Object.prototype.hasOwnProperty.call(t,"data"))?new Promise((e=>e(t.data))):new Promise((e=>e(null)))},reset:()=>localStorage.clear()&&window.dispatchEvent(new CustomEvent("resetStorage"))};var W=K,q={},G={};(G=function(e){if(Array.isArray(e))return e}).default=G,G.__esModule=!0;var J={};(J=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}).default=J,J.__esModule=!0;var Q={},Y={};(Y=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}).default=Y,Y.__esModule=!0,(Q=function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}).default=Q,Q.__esModule=!0;var Z={};(Z=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}).default=Z,Z.__esModule=!0,(q=function(e,t){return G(e)||J(e,t)||Q(e,t)||Z()}).default=q,q.__esModule=!0;var X={};(X=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}).default=X,X.__esModule=!0;var ee,te,ne,re=0,ie=[],se=a.__b,oe=a.__r,ae=a.diffed,le=a.__c,ue=a.unmount;function ce(e,t){a.__h&&a.__h(te,e,re||t),re=0;var n=te.__H||(te.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function pe(e){return re=1,de(xe,e)}function de(e,t,n){var r=ce(ee++,2);return r.t=e,r.__c||(r.__=[n?n(t):xe(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=te),r.__}function he(e,t){var n=ce(ee++,3);!a.__s&&ke(n.__H,t)&&(n.__=e,n.__H=t,te.__H.__h.push(n))}function fe(e,t){var n=ce(ee++,4);!a.__s&&ke(n.__H,t)&&(n.__=e,n.__H=t,te.__h.push(n))}function ge(e){return re=5,me((function(){return{current:e}}),[])}function me(e,t){var n=ce(ee++,7);return ke(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ve(e){var t=te.context[e.__c],n=ce(ee++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(te)),t.props.value):e.__}function ye(){ie.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(be),e.__H.__h.forEach(we),e.__H.__h=[]}catch(t){e.__H.__h=[],a.__e(t,e.__v)}})),ie=[]}a.__b=function(e){te=null,se&&se(e)},a.__r=function(e){oe&&oe(e),ee=0;var t=(te=e.__c).__H;t&&(t.__h.forEach(be),t.__h.forEach(we),t.__h=[])},a.diffed=function(e){ae&&ae(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==ie.push(t)&&ne===a.requestAnimationFrame||((ne=a.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),_e&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);_e&&(t=requestAnimationFrame(n))})(ye)),te=null},a.__c=function(e,t){t.some((function(e){try{e.__h.forEach(be),e.__h=e.__h.filter((function(e){return!e.__||we(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],a.__e(n,e.__v)}})),le&&le(e,t)},a.unmount=function(e){ue&&ue(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(be)}catch(e){a.__e(e,t.__v)}};var _e="function"==typeof requestAnimationFrame;function be(e){var t=te;"function"==typeof e.__c&&e.__c(),te=t}function we(e){var t=te;e.__c=e.__(),te=t}function ke(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function xe(e,t){return"function"==typeof t?t(e):t}function Se(e,t){for(var n in t)e[n]=t[n];return e}function Ce(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function Oe(e){this.props=e}(Oe.prototype=new w).isPureReactComponent=!0,Oe.prototype.shouldComponentUpdate=function(e,t){return Ce(this.props,e)||Ce(this.state,t)};var Ee=a.__b;a.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ee&&Ee(e)};var Pe="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ae(e){function t(t,n){var r=Se({},t);return delete r.ref,e(r,(n=t.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return t.$$typeof=Pe,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var je=function(e,t){return null==e?null:P(P(e).map(t))},Me={map:je,forEach:je,count:function(e){return e?P(e).length:0},only:function(e){var t=P(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:P},Le=a.__e;a.__e=function(e,t,n){if(e.then)for(var r,i=t;i=i.__;)if((r=i.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);Le(e,t,n)};var Ne=a.unmount;function Re(){this.__u=0,this.t=null,this.__b=null}function Ie(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function Te(){this.u=null,this.o=null}a.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Ne&&Ne(e)},(Re.prototype=new w).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=Ie(r.__v),s=!1,o=function(){s||(s=!0,n.__R=null,i?i(a):a())};n.__R=o;var a=function(){if(!--r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},l=!0===t.__h;r.__u++||l||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(o,o)},Re.prototype.componentWillUnmount=function(){this.t=[]},Re.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=Se({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__e&&y(b,null,e.fallback);return i&&(i.__h=null),[y(b,null,t.__e?null:e.children),i]};var $e=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function De(e){return this.getChildContext=function(){return e.context},e.children}function Ue(e){var t=this,n=e.i;t.componentWillUnmount=function(){U(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),U(y(De,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}(Te.prototype=new w).__e=function(e){var t=this,n=Ie(t.__v),r=t.o.get(e);return r[0]++,function(i){var s=function(){t.props.revealOrder?(r.push(i),$e(t,e,r)):i()};n?n(s):s()}},Te.prototype.render=function(e){this.u=null,this.o=new Map;var t=P(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Te.prototype.componentDidUpdate=Te.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){$e(e,n,t)}))};var Fe="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,ze=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,He="undefined"!=typeof document,Ve=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};w.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(w.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Be=a.event;function Ke(){}function We(){return this.cancelBubble}function qe(){return this.defaultPrevented}a.event=function(e){return Be&&(e=Be(e)),e.persist=Ke,e.isPropagationStopped=We,e.isDefaultPrevented=qe,e.nativeEvent=e};var Ge,Je={configurable:!0,get:function(){return this.class}},Qe=a.vnode;a.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var i=-1===t.indexOf("-");for(var s in r={},n){var o=n[s];He&&"children"===s&&"noscript"===t||"value"===s&&"defaultValue"in n&&null==o||("defaultValue"===s&&"value"in n&&null==n.value?s="value":"download"===s&&!0===o?o="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+t)&&!Ve(n.type)?s="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(s)?s=s.toLowerCase():i&&ze.test(s)?s=s.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===o&&(o=void 0),r[s]=o)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=P(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=P(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r}t&&n.class!=n.className&&(Je.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Je)),e.$$typeof=Fe,Qe&&Qe(e)};var Ye=a.__r;a.__r=function(e){Ye&&Ye(e),Ge=e.__c};function Ze(e){return!!e&&e.$$typeof===Fe}var Xe={useState:pe,useReducer:de,useEffect:he,useLayoutEffect:fe,useRef:ge,useImperativeHandle:function(e,t,n){re=6,fe((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==n?n:n.concat(e))},useMemo:me,useCallback:function(e,t){return re=8,me((function(){return e}),t)},useContext:ve,useDebugValue:function(e,t){a.useDebugValue&&a.useDebugValue(t?t(e):e)},version:"17.0.2",Children:Me,render:function(e,t,n){return null==t.__k&&(t.textContent=""),U(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return F(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(U(null,e),!0)},createPortal:function(e,t){return y(Ue,{__v:e,i:t})},createElement:y,createContext:H,createFactory:function(e){return y.bind(null,e)},cloneElement:function(e){return Ze(e)?z.apply(null,arguments):e},createRef:function(){return{current:null}},Fragment:b,isValidElement:Ze,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:w,PureComponent:Oe,memo:function(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:Ce(this.props,e)}function r(t){return this.shouldComponentUpdate=n,y(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r},forwardRef:Ae,flushSync:function(e,t){return e(t)},unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:b,Suspense:Re,SuspenseList:Te,lazy:function(e){var t,n,r;function i(i){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return y(n,i)}return i.displayName="Lazy",i.__f=!0,i},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:{current:{readContext:function(e){return Ge.__n[e.__c].props.value}}}}},et={};(et=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}).default=et,et.__esModule=!0;var tt={};function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?rt(Object(r),!0).forEach((function(n){t(X)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(tt=function(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}).default=tt,tt.__esModule=!0;var st,ot={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},at=Xe.createContext();function lt(){return ot}var ut=function(){function e(){t(et)(this,e),this.usedNamespaces={}}return t(tt)(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function ct(){return st}var pt={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ot=it(it({},ot),e)}(e.options.react),function(e){st=e}(e)}};function dt(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var ht={};function ft(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&ht[t[0]]||("string"==typeof t[0]&&(ht[t[0]]=new Date),dt.apply(void 0,t))}function gt(e,t,n){e.loadNamespaces(t,(function(){if(e.isInitialized)n();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),n()}))}}))}function mt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return ft("i18n.languages were undefined or empty",t.languages),!0;var r=t.languages[0],i=!!t.options&&t.options.fallbackLng,s=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||(!t.services.backendConnector.backend||!(!o(r,e)||i&&!o(s,e))))}function vt(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?yt(Object(r),!0).forEach((function(n){t(X)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.i18n,i=ve(at)||{},s=i.i18n,o=i.defaultNS,a=r||s||ct();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new ut),!a){ft("You will need to pass in an i18next instance by using initReactI18next");var l=function(e){return Array.isArray(e)?e[e.length-1]:e},u=[l,{},!1];return u.t=l,u.i18n={},u.ready=!1,u}a.options.react&&void 0!==a.options.react.wait&&ft("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var c=_t(_t(_t({},lt()),a.options.react),n),p=c.useSuspense,d=c.keyPrefix,h=e||o||a.options&&a.options.defaultNS;h="string"==typeof h?[h]:h||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(h);var f=(a.isInitialized||a.initializedStoreOnce)&&h.every((function(e){return mt(e,a,c)}));function g(){return a.getFixedT(null,"fallback"===c.nsMode?h:h[0],d)}var m=pe(g),v=t(q)(m,2),y=v[0],_=v[1],b=ge(!0);he((function(){var e=c.bindI18n,t=c.bindI18nStore;function n(){b.current&&_(g)}return b.current=!0,f||p||gt(a,h,(function(){b.current&&_(g)})),e&&a&&a.on(e,n),t&&a&&a.store.on(t,n),function(){b.current=!1,e&&a&&e.split(" ").forEach((function(e){return a.off(e,n)})),t&&a&&t.split(" ").forEach((function(e){return a.store.off(e,n)}))}}),[a,h.join()]);var w=ge(!0);he((function(){b.current&&!w.current&&_(g),w.current=!1}),[a]);var k=[y,a,f];if(k.t=y,k.i18n=a,k.ready=f,f)return k;if(!f&&!p)return k;throw new Promise((function(e){gt(a,h,(function(){e()}))}))}var wt={},kt={};(kt=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}).default=kt,kt.__esModule=!0,(wt=function(e,t){if(null==e)return{};var n,r,i=kt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}).default=wt,wt.__esModule=!0;var xt=["forwardedRef"];function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?St(Object(r),!0).forEach((function(n){t(X)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ot(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){function i(i){var s=i.forwardedRef,o=t(wt)(i,xt),a=bt(e,o),l=t(q)(a,3),u=l[0],c=l[1],p=l[2],d=Ct(Ct({},o),{},{t:u,i18n:c,tReady:p});return n.withRef&&s?d.ref=s:!n.withRef&&s&&(d.forwardedRef=s),Xe.createElement(r,d)}i.displayName="withI18nextTranslation(".concat(vt(r),")"),i.WrappedComponent=r;return n.withRef?Xe.forwardRef((function(e,t){return Xe.createElement(i,Object.assign({},e,{forwardedRef:t}))})):i}}const Et={isValidUrl:e=>{try{return new URL(e),!0}catch(e){return!1}},limitLength:(e,t=20)=>[...e.split("").slice(0,Math.floor(t/2)),e.length>t?"...":"",...e.split("").slice(Math.floor(t/2)).slice(-1*Math.floor(t/2))].join(""),escapeRegex:e=>e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),getSubpath:()=>new URL(document.baseURI).pathname.replace(/\/$/,""),toApp:e=>e&&"string"==typeof e?Et.isValidUrl(e)?e:location.origin+Et.getSubpath()+e:"",genId:e=>`z${e||""}-${Date.now().toString().slice(-5)}${Math.random().toString().slice(-5)}`,id2Int:e=>parseInt(e.replace(/[^\d]/g,""),10),urlRegExp:/(\([^()]*)?https?:\/\/[^[\]\n\r ]*[-A-Za-z0-9+&@#/%=~_()|]/i,getUrl:e=>{if(!e)return"";let t=e.match(Et.urlRegExp);if(t&&t[0].startsWith("(")){let e=t[0].match(/https?:\/\//i);t.index+=e.index,t[0]=t[0].slice(e.index),t[0].endsWith(")")&&(t[0]=t[0].slice(0,-1))}return t},limitStrSize:(e,t)=>e.length>t?`${e.slice(0,t-3)}...`:e,humanFullDate:e=>{if(!e)return"";let t=new Date(1e3*e);return t=new Date(t.getTime()+-6e4*t.getTimezoneOffset()),t.toISOString().replace("T"," ").replace(/\..*$/,"")},humanTime:e=>{const{t:t}=bt();if(!e)return null;const n=Math.abs(Math.round((Date.now()/1e3-e)/60));return n<1?t("just_now"):n<60?t("ago",{duration:`${n}mn`}):n<1440?t("ago",{duration:`${Math.floor(n/60)}h`}):Et.humanFullDate(e).split(" ")[0]},getId:e=>{switch(typeof e){case"object":return e?e.id:null;case"string":return e.split("/").pop().replace(/\?.*$/,"").replace(/\.\w+$/,"");default:throw console.error(e),"Could not extract id !"}},thumbnail:(e,t,n)=>"string"!=typeof e||e.startsWith("z")?null:Et.toApp(`/api/images/thumbnail/${t}/${n}/${e}`),crop:(e,t,n)=>"string"!=typeof e||e.startsWith("z")?null:Et.toApp(`/api/images/crop/${t}/${n}/${e}`),defaultAvatar:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMA/iyWEiMAAAMJSURBVHja7ZtBjpwwEEWxmIhFFmiURZZEyi6HCLkZHCXr2eQKHIUjoEiRSGRRiWB6klaDU/hDF4z+W6LuNz3+ZRvbkCSEEEIIIYQQQgghhBBCCCGEEEIIITvwGfy+kxoTpNJigkw6TJBLjwkK8ZiglMFYUInAAqwQRKRBBR0q8FhXEKwVR0GLCvxCjeo6oyzkoIxnEvj5661acPO3yvFqpxdcV+Pj88VeNZ7cGB4ul1QFkv399KT4KBIpmGEwF4i9oL6DIN/3FzToL2ju8AvsBeE2aNFfQMFJBCkF0/R+bkHyCgSVuaDcVaC5zyvMBTkqyHYVaBZDKSpw5oJgLcMC5doXFBSoIMNutjcQBHJULmlhQYUKlmNQbs9kqGC5P2o3FqBBOVjMWkEOdcZQKam3dyqkkgP/g35zxmEpLhbjir0ZFz2tXHgbPR5deI+EMPKmig/hhU/fIkOYL4iYDbIyqpCXajp2Zy4yhNuxqUfbMCaEIraQZ9swJgQBQ0jBQr6eYXrzQrYIYdtC9uaFbDKayJajyTkL+VijyWA+mnBajGpDeFrMzAu5BNvwKoQBDaFHQ+jQEBo0hBoMYUBD8GgIHRpCi44mcAiJRQhoITvzQs63LGQxL2SOJnEhiHUI296bwNOixb1JYr5kz8yX7Odf6XDfBC9kd6yVzq+np69QIY/8AEJ45kt0T4hIM0VONm5CiLlVhLflS+CwdTGEVa2AnfOFTogaVAAfcg1QivpqzLFHD4LnrR0q8FAhqlux3PPUu0EFLSrooL6kLeaQwKMCTY4OfUjVoY+IOvTxSFiw81NtnbmgRwXeXDAg08IxBPIKBPX5BQ0FBxC0+wtSCg4gcBT853nruwiqfQXNHQT/LDiGD9Old6sEL2umn3MtqxDks9NotVbwfaG+FDfL6fznsjV32365cTXrtqoPdJKYrbmreIDvT42DCMYoIUEu4FvIKSpwgr6JvYEAfJm8QgUl+j58gb6Rn4Nvcv/p0jUmcODr8IQQQgghhBBCCCGEEEIIIYQQQgghs/wGp6uYgtiKODIAAAAASUVORK5CYII=",hash:e=>e.split("").reduce(((e,t)=>(e<<5)-e+t.charCodeAt()|0)),colorHash:e=>["#000000","#333366","#333399","#3333CC","#339933","#339999","#33CC33","#33CC99","#663333","#663366","#666633","#666699","#66CC33","#66CCCC","#993333","#993366","#993399","#996633","#999966","#CC3333","#CC3366","#CC3399","#CC33CC","#CC6633","#CC9933","#CC99CC","#CCCC33"][Math.abs(Et.hash(e))%27],backgroundHash:e=>{if(!e)return"background-color: #aaa;";let t=Et.colorHash(e),n=Et.colorHash(e.split("").reverse().join("."));return`background-color:${t};background-image:linear-gradient(${Math.abs(Et.hash(e))%4*45}deg, ${n} 15%, transparent 15% 30%, ${n} 30% 45%, transparent 45% 60%, ${n} 60% 75%, transparent 75% 90%, ${n} 90%);`},is_it_enter:e=>13==e.keyCode||10==e.keyCode||"Enter"==e.key||"â†µ"==e.key||"Enter"==e.code};var Pt=Et;const At={sendFile:(e,t,n=null,r=null)=>W.get("apiKey").then((i=>{let s=new XMLHttpRequest;s.open("POST",`${document.baseURI}api/files`,!0),s.setRequestHeader("X-AUTH-TOKEN",i),s.addEventListener("load",(e=>{e.target.status>199&&e.target.status<300?t(JSON.parse(e.target.response)):r?r(e.target.statusText):console.error(e.target.statusText)})),n&&(s.upload.onprogress=e=>n({loaded:e.loaded,total:e.total})),r&&s.addEventListener("error",(e=>r(e))),s.send(e)})).catch((e=>B.add(e,"alert-danger"))),get:(e,t=!1)=>W.get("apiKey").then((n=>{if(!(e=Pt.toApp(e)))return;let r={};return n&&(r["X-AUTH-TOKEN"]=n),t&&(r["X-NOCACHE"]="nocache"),fetch(e,{method:"GET",headers:new Headers(r)}).then((e=>e.ok&&e.json())).catch((t=>console.warn(`ERROR for ${e}`,t)))})).catch((e=>B.add(e,"alert-danger"))),post:(e,t,n="application/json")=>At.request(e,t,"POST",n),put:(e,t,n="application/json")=>At.request(e,t,"PUT",n),delete:(e,t,n="application/json")=>At.request(e,null,"DELETE",n),request:(e,t,n,r="application/json")=>W.get("apiKey").then((i=>{if(!(e=Pt.toApp(e)))return;let s={};i&&(s["X-AUTH-TOKEN"]=i),r&&(s["Content-type"]=r);let o={method:n,headers:new Headers(s)};return t&&(o.body="object"==typeof t&&"Object"==t.constructor.name?JSON.stringify(t):t),fetch(e,o).then((e=>{try{return e.json()}catch(e){return console.warn(e.message),Promise.reject(e.message)}})).catch((t=>console.warn(`ERROR for ${e}`,t)))})).catch((e=>B.add(e,"alert-danger")))};var jt=At;const Mt={info:{},update:()=>jt.get("/api/info",!0).then((e=>{if(e)return Mt.info=Object.assign({},e),setTimeout(dispatchEvent(new CustomEvent("apiStateChange"))),e}))};var Lt=Mt;var Nt=(e=>{let t={},n={},r={dispatch(e,i){if("@dispatch"!==e&&r.dispatch("@dispatch",[e,i,t[e]]),t[e]){let s;t[e].forEach((o=>{let a=t[e].includes(o)&&o(n,i,r);a&&"function"!=typeof a.then&&(n={...n,...a},s={...s,...a})})),s&&r.dispatch("@changed",s)}},get:()=>n,on:(e,n)=>((t[e]||(t[e]=[])).push(n),()=>{t[e]=t[e].filter((e=>e!==n))})};return e.forEach((e=>{e&&e(r)})),r.dispatch("@init"),r})([e=>{e.on("@init",(()=>({me:{},notifications:[]}))),e.on("me/update",((e,t)=>({me:t}))),e.on("notification/update",((e,t)=>({notifications:t}))),e.on("notification/remove",(async(e,t)=>(await Bn.delete(`/api/notifications/${t.id}`),{notifications:e.notifications.filter((e=>e.id!=t.id))})))},e=>{e.on("@init",(()=>({route:"",id:"",action:"",backUrl:"",entityType:"",search:"",entity:{}}))),e.on("router/update",((e,t)=>({entity:t.entity,backUrl:t.backUrl})))}]);function Rt(e){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(e)}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){It(e,t,n[t])}))}return e}function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t,n){return t&&Dt(e.prototype,t),n&&Dt(e,n),e}var Ft={};function zt(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(Ft=zt=function(e){return typeof e},Ft.default=Ft,Ft.__esModule=!0):(Ft=zt=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft.default=Ft,Ft.__esModule=!0),zt(e)}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e,n){if(n&&("object"===t(Ft)(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Ht(e)}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}function Kt(e,t){return Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kt(e,t)}function Wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Ft=zt).default=Ft,Ft.__esModule=!0;var Jt={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Qt=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$t(this,e),this.init(t,n)}return Ut(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Jt,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,Tt({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),Yt=function(){function e(){$t(this,e),this.observers={}}return Ut(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var i=[].concat(this.observers[e]);i.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Zt(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Xt(e){return null==e?"":""+e}function en(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function tn(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var s="string"!=typeof t?[].concat(t):t.split(".");s.length>1;){if(i())return{};var o=r(s.shift());!e[o]&&n&&(e[o]=new n),e=Object.prototype.hasOwnProperty.call(e,o)?e[o]:{}}return i()?{}:{obj:e,k:r(s.shift())}}function nn(e,t,n){var r=tn(e,t,Object);r.obj[r.k]=n}function rn(e,t){var n=tn(e,t),r=n.obj,i=n.k;if(r)return r[i]}function sn(e,t,n){var r=rn(e,n);return void 0!==r?r:rn(t,n)}function on(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):on(e[r],t[r],n):e[r]=t[r]);return e}function an(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var ln={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function un(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return ln[e]})):e}var cn="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,pn=[" ",",","?","!",";"];function dn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,s=0;s<r.length;++s){if(!i)return;if("string"==typeof i[r[s]]&&s+1<r.length)return;if(void 0===i[r[s]]){for(var o=2,a=r.slice(s,s+o).join(n),l=i[a];void 0===l&&r.length>s+o;)o++,l=i[a=r.slice(s,s+o).join(n)];if(void 0===l)return;if("string"==typeof l)return l;if(a&&"string"==typeof l[a])return l[a];var u=r.slice(s+o).join(n);return u?dn(l,u,n):void 0}i=i[r[s]]}return i}}var hn=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return $t(this,t),n=Vt(this,Bt(t).call(this)),cn&&Yt.call(Ht(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return Wt(t,Yt),Ut(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,s=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[e,t];n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split("."));var a=rn(this.data,o);return a||!s||"string"!=typeof n?a:dn(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},s=this.options.keySeparator;void 0===s&&(s=".");var o=[e,t];n&&(o=o.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(r=t,t=(o=e.split("."))[1]),this.addNamespaces(t),nn(this.data,o,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var a=rn(this.data,o)||{};r?on(a,n,i):a=Tt({},a,n),nn(this.data,o,a),s.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Tt({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),t}(),fn={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var s=this;return e.forEach((function(e){s.processors[e]&&(t=s.processors[e].process(t,n,r,i))})),t}},gn={},mn=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $t(this,t),n=Vt(this,Bt(t).call(this)),cn&&Yt.call(Ht(n)),en(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,Ht(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=Qt.create("translator"),n}return Wt(t,Yt),Ut(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS,s=n&&e.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var r=pn.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===r.length)return!0;var i=new RegExp("(".concat(r.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),s=!i.test(e);if(!s){var o=e.indexOf(n);o>0&&!i.test(e.substring(0,o))&&(s=!0)}return s}(e,n,r));if(s&&!o){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:i};var l=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(l[0])>-1)&&(i=l.shift()),e=l.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,r){var i=this;if("object"!==Rt(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,o=this.extractFromKey(e[e.length-1],n),a=o.key,l=o.namespaces,u=l[l.length-1],c=n.lng||this.language,p=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(p){var d=n.nsSeparator||this.options.nsSeparator;return u+d+a}return a}var h=this.resolve(e,n),f=h&&h.res,g=h&&h.usedKey||a,m=h&&h.exactUsedKey||a,v=Object.prototype.toString.apply(f),y=["[object Number]","[object Function]","[object RegExp]"],_=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,w="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(b&&f&&w&&y.indexOf(v)<0&&("string"!=typeof _||"[object Array]"!==v)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,f,Tt({},n,{ns:l})):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");if(s){var k="[object Array]"===v,x=k?[]:{},S=k?m:g;for(var C in f)if(Object.prototype.hasOwnProperty.call(f,C)){var O="".concat(S).concat(s).concat(C);x[C]=this.translate(O,Tt({},n,{joinArrays:!1,ns:l})),x[C]===O&&(x[C]=f[C])}f=x}}else if(b&&"string"==typeof _&&"[object Array]"===v)(f=f.join(_))&&(f=this.extendTranslation(f,e,n,r));else{var E=!1,P=!1,A=void 0!==n.count&&"string"!=typeof n.count,j=t.hasDefaultValue(n),M=A?this.pluralResolver.getSuffix(c,n.count,n):"",L=n["defaultValue".concat(M)]||n.defaultValue;!this.isValidLookup(f)&&j&&(E=!0,f=L),this.isValidLookup(f)||(P=!0,f=a);var N=n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,R=N&&P?void 0:f,I=j&&L!==f&&this.options.updateMissing;if(P||E||I){if(this.logger.log(I?"updateKey":"missingKey",c,u,a,I?L:f),s){var T=this.resolve(a,Tt({},n,{keySeparator:!1}));T&&T.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var $=[],D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&D&&D[0])for(var U=0;U<D.length;U++)$.push(D[U]);else"all"===this.options.saveMissingTo?$=this.languageUtils.toResolveHierarchy(n.lng||this.language):$.push(n.lng||this.language);var F=function(e,t,r){i.options.missingKeyHandler?i.options.missingKeyHandler(e,u,t,I?r:R,I,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,u,t,I?r:R,I,n),i.emit("missingKey",e,u,t,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&A?$.forEach((function(e){i.pluralResolver.getSuffixes(e).forEach((function(t){F([e],a+t,n["defaultValue".concat(t)]||L)}))})):F($,a,L))}f=this.extendTranslation(f,e,n,h,r),P&&f===a&&this.options.appendNamespaceToMissingKey&&(f="".concat(u,":").concat(a)),(P||E)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,n,r,i){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Tt({},n,{interpolation:Tt({},this.options.interpolation,n.interpolation)}));var o,a=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(a){var l=e.match(this.interpolator.nestingRegexp);o=l&&l.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=Tt({},this.options.interpolation.defaultVariables,u)),e=this.interpolator.interpolate(e,u,n.lng||this.language,n),a){var c=e.match(this.interpolator.nestingRegexp);o<(c&&c.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i&&i[0]===r[0]&&!n.context?(s.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):s.translate.apply(s,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var p=n.postProcess||this.options.postProcess,d="string"==typeof p?[p]:p;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=fn.handle(d,e,t,this.options&&this.options.postProcessPassResolved?Tt({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,s,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!o.isValidLookup(t)){var l=o.extractFromKey(e,a),u=l.key;n=u;var c=l.namespaces;o.options.fallbackNS&&(c=c.concat(o.options.fallbackNS));var p=void 0!==a.count&&"string"!=typeof a.count,d=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,h=a.lngs?a.lngs:o.languageUtils.toResolveHierarchy(a.lng||o.language,a.fallbackLng);c.forEach((function(e){o.isValidLookup(t)||(s=e,!gn["".concat(h[0],"-").concat(e)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(s)&&(gn["".concat(h[0],"-").concat(e)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!o.isValidLookup(t)){i=n;var s,l,c=u,h=[c];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(h,u,n,e,a);else p&&(s=o.pluralResolver.getSuffix(n,a.count,a)),p&&d&&h.push(c+s),d&&h.push(c+="".concat(o.options.contextSeparator).concat(a.context)),p&&h.push(c+=s);for(;l=h.pop();)o.isValidLookup(t)||(r=l,t=o.getResource(n,e,l,a))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:s}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}();function vn(e){return e.charAt(0).toUpperCase()+e.slice(1)}var yn=function(){function e(t){$t(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Qt.create("languageUtils")}return Ut(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=vn(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=vn(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=vn(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):"string"==typeof e&&s(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&s(n.formatLanguageCode(e))})),i}}]),e}(),_n=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],bn={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},wn=["v1","v2","v3"],kn={zero:0,one:1,two:2,few:3,many:4,other:5};function xn(){var e={};return _n.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:bn[t.fc]}}))})),e}var Sn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$t(this,e),this.languageUtils=t,this.options=n,this.logger=Qt.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=xn()}return Ut(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(e,t){return kn[e]-kn[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):r.numbers.map((function(r){return t.getSuffix(e,r,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),i=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var s=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!wn.includes(this.options.compatibilityJSON)}}]),e}(),Cn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$t(this,e),this.logger=Qt.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return Ut(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:un,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?an(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?an(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?an(t.nestingPrefix):t.nestingPrefixEscaped||an("$t("),this.nestingSuffix=t.nestingSuffix?an(t.nestingSuffix):t.nestingSuffixEscaped||an(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,s,o,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var c=function(e){if(e.indexOf(a.formatSeparator)<0){var i=sn(t,l,e);return a.alwaysFormat?a.format(i,void 0,n,Tt({},r,t,{interpolationkey:e})):i}var s=e.split(a.formatSeparator),o=s.shift().trim(),u=s.join(a.formatSeparator).trim();return a.format(sn(t,l,o),u,n,Tt({},r,t,{interpolationkey:o}))};this.resetRegExp();var p=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?u(a.escape(e)):u(e)}}].forEach((function(t){for(o=0;i=t.regex.exec(e);){if(void 0===(s=c(i[1].trim())))if("function"==typeof p){var n=p(e,i,r);s="string"==typeof n?n:""}else{if(d){s=i[0];continue}a.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),s=""}else"string"==typeof s||a.useRawValueToEscape||(s=Xt(s));var l=t.safeValue(s);if(e=e.replace(i[0],l),d?(t.regex.lastIndex+=l.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++o>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Tt({},s);function a(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,o)).replace(/'/g,'"');try{o=JSON.parse(i),t&&(o=Tt({},t,o))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(i)}return delete o.defaultValue,e}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=c.shift(),l=c,u=!0}if((r=t(a.call(this,n[1].trim(),o),o))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Xt(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),u&&(r=l.reduce((function(e,t){return i.format(e,t,s.lng,Tt({},s,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var On=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$t(this,e),this.logger=Qt.create("formatter"),this.options=t,this.formats={number:function(e,t,n){return new Intl.NumberFormat(t,n).format(e)},currency:function(e,t,n){return new Intl.NumberFormat(t,Tt({},n,{style:"currency"})).format(e)},datetime:function(e,t,n){return new Intl.DateTimeFormat(t,Tt({},n)).format(e)},relativetime:function(e,t,n){return new Intl.RelativeTimeFormat(t,Tt({},n)).format(e,n.range||"day")},list:function(e,t,n){return new Intl.ListFormat(t,Tt({},n)).format(e)}},this.init(t)}return Ut(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=t.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e]=t}},{key:"format",value:function(e,t,n,r){var i=this;return t.split(this.formatSeparator).reduce((function(e,t){var s=function(e){var t=e.toLowerCase(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase();var i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((function(e){if(e){var t=Gt(e.split(":"),2),r=t[0],i=t[1];"false"===i.trim()&&(n[r.trim()]=!1),"true"===i.trim()&&(n[r.trim()]=!0),isNaN(i.trim())||(n[r.trim()]=parseInt(i.trim(),10)),n[r.trim()]||(n[r.trim()]=i.trim())}}))}return{formatName:t,formatOptions:n}}(t),o=s.formatName,a=s.formatOptions;if(i.formats[o]){var l=e;try{var u=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},c=u.locale||u.lng||r.locale||r.lng||n;l=i.formats[o](e,c,Tt({},a,r,u))}catch(e){i.logger.warn(e)}return l}return i.logger.warn("there was no format function for ".concat(o)),e}),e)}}]),e}();var En=function(e){function t(e,n,r){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return $t(this,t),i=Vt(this,Bt(t).call(this)),cn&&Yt.call(Ht(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=s,i.logger=Qt.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,s.backend,s),i}return Wt(t,Yt),Ut(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,s=[],o=[],a=[],l=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[a]=2:i.state[a]<0||(1===i.state[a]?o.indexOf(a)<0&&o.push(a):(i.state[a]=1,r=!1,o.indexOf(a)<0&&o.push(a),s.indexOf(a)<0&&s.push(a),l.indexOf(t)<0&&l.push(t)))})),r||a.push(e)})),(s.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:r}),{toLoad:s,pending:o,toLoadLanguages:a,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],s=r[1];t&&this.emit("failedLoading",i,s,t),n&&this.store.addResourceBundle(i,s,n),this.state[e]=t?-1:2;var o={};this.queue.forEach((function(n){var r,a,l,u,c,p;r=n.loaded,a=s,u=tn(r,[i],Object),c=u.obj,p=u.k,c[p]=c[p]||[],l&&(c[p]=c[p].concat(a)),l||c[p].push(a),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){o[e]||(o[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){o[e].indexOf(t)<0&&o[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(a,l){a&&l&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*s,o)}),s):o(a,l)})):o(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(function(r,o){r&&t.logger.warn("".concat(n,"loading namespace ").concat(s," for language ").concat(i," failed"),r),!r&&o&&t.logger.log("".concat(n,"loaded namespace ").concat(s," for language ").concat(i),o),t.loaded(e,r,o)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,Tt({},s,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}();function Pn(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===Rt(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===Rt(e[2])||"object"===Rt(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function An(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function jn(){}var Mn=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if($t(this,t),e=Vt(this,Bt(t).call(this)),cn&&Yt.call(Ht(e)),e.options=An(n),e.services={},e.logger=Qt,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),Vt(e,Ht(e));setTimeout((function(){e.init(n,r)}),0)}return e}return Wt(t,Yt),Ut(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var r=Pn();function i(e){return e?"function"==typeof e?new e:e:null}if(this.options=Tt({},r,this.options,An(t)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var s;this.modules.logger?Qt.init(i(this.modules.logger),this.options):Qt.init(null,this.options),this.modules.formatter?s=this.modules.formatter:"undefined"!=typeof Intl&&(s=On);var o=new yn(this.options);this.store=new hn(this.options.resources,this.options);var a=this.services;a.logger=Qt,a.resourceStore=this.store,a.languageUtils=o,a.pluralResolver=new Sn(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!s||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(a.formatter=i(s),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new Cn(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new En(i(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(a.languageDetector=i(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=i(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new mn(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=jn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var u=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];u.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var c=["addResource","addResources","addResourceBundle","removeResourceBundle"];c.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var p=Zt(),d=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),p.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),p}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jn,r=n,i="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var s=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){s.indexOf(e)<0&&s.push(e)}))};if(i)o(i);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(e){return o(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(s,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=Zt();return e||(e=this.languages),t||(t=this.options.ns),n||(n=jn),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&fn.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Zt();this.emit("languageChanging",e);var i=function(e){if(n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<n.languages.length;t++){var r=n.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&n.store.hasLanguageSomeTranslations(r)){n.resolvedLanguage=r;break}}},s=function(s){e||s||!n.services.languageDetector||(s=[]);var o="string"==typeof s?s:n.services.languageUtils.getBestMatchFromCodes(s);o&&(n.language||i(o),n.translator.language||n.translator.changeLanguage(o),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(o)),n.loadResources(o,(function(e){!function(e,s){s?(i(s),n.translator.changeLanguage(s),n.isLanguageChangingTo=void 0,n.emit("languageChanged",s),n.logger.log("languageChanged",s)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,o)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var r=this,i=function e(t,i){var s;if("object"!==Rt(i)){for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];s=r.options.overloadTranslationOptionHandler([t,i].concat(a))}else s=Tt({},i);s.lng=s.lng||e.lng,s.lngs=s.lngs||e.lngs,s.ns=s.ns||e.ns;var u=r.options.keySeparator||".",c=n?"".concat(n).concat(u).concat(t):t;return r.t(c,s)};return"string"==typeof e?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var a=n.precheck(this,o);if(void 0!==a)return a}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!o(r,e)||i&&!o(s,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Zt();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Zt();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jn,i=Tt({},this.options,n,{isClone:!0}),s=new t(i),o=["store","services","language"];return o.forEach((function(t){s[t]=e[t]})),s.services=Tt({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s.translator=new mn(s.services,s.options),s.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s.emit.apply(s,[e].concat(n))})),s.init(i,r),s.translator.options=s.options,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}());const Ln={get(){var e;return null===(e=Nt.get())||void 0===e?void 0:e.me},get data(){var e,t;return null===(e=Nt.get())||void 0===e||null===(t=e.me)||void 0===t?void 0:t.data},get lang(){var e,t,n;return null===(e=Nt.get())||void 0===e||null===(t=e.me)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.lang},get groups(){var e,t;return null===(e=Nt.get())||void 0===e||null===(t=e.me)||void 0===t?void 0:t.groups},get id(){var e,t;return null===(e=Nt.get())||void 0===e||null===(t=e.me)||void 0===t?void 0:t.id},get avatar(){var e,t;return null===(e=Nt.get())||void 0===e||null===(t=e.me)||void 0===t?void 0:t.avatar},get notifications(){var e;return(null===(e=Nt.get())||void 0===e?void 0:e.notifications)||[]},getGroupName(e){var t;let n=null===(t=Nt.get().groups)||void 0===t?void 0:t.find((t=>t.id==e));return n?n.name:""},update:()=>jt.get("/api/me",!0).then((e=>{var t;if(e&&(null==e?void 0:e.id))return Promise.all(e.groups.map((e=>jt.get(`/api/groups/${e.id}`).then((e=>e))))).then((t=>{e.groups=t,Nt.dispatch("me/update",Object.assign({loaded:!0},e))})),jt.get(`/api/users/${e.id}/notifications`).then((e=>{Nt.dispatch("notifications/update",e)})),Mn.changeLanguage(null==e||null===(t=e.data)||void 0===t?void 0:t.lang),e;Nt.dispatch("update",{})})),fetch:()=>Nt.get().loaded?new Promise((e=>e(Nt.get()))):Ln.update(),isNew(e){let t=Nt.get();return!!Array.isArray(t.notifications)&&t.notifications.some((t=>Ln.matchNotification(t,e)||"new_comment"==t.type&&t.fromMessage.id===e))},hasBookmark(e){var t,n;let r=null===(t=Nt.get())||void 0===t?void 0:t.me;return!!Array.isArray(null==r||null===(n=r.data)||void 0===n?void 0:n.bookmarks)&&r.data.bookmarks.some((t=>t===e))},removeBookmark(e){Nt.dispatch("bookmark/remove",e)},addBookmark(e){Nt.dispatch("bookmark/add",e)},removeAllNotifications(){Nt.get().notifications.map((e=>Nt.dispatch("notification/remove",e)))},removeMatchingNotifications(e){Nt.get().notifications.filter((t=>Ln.matchNotification(t,e))).forEach((e=>Nt.dispatch("notification/remove",e)))},matchNotification:(e,t)=>e.id===t||e.target===t,reset(){Nt.dispatch("@init")},logout(){W.reset(),window.location.href=window.location.origin}};var Nn=Ln;const Rn={get:()=>Nt.get(),get route(){try{return Rn.removeSubpath(location.pathname).slice(1).split("/")[0]}catch{return""}},get id(){try{return Rn.removeSubpath(location.pathname).slice(1).split("/")[1]}catch{return""}},get action(){try{return Rn.removeSubpath(location.pathname).slice(1).split("/")[2]}catch{return""}},get backUrl(){var e;return console.err("don't use backUrl"),null===(e=Nt.get())||void 0===e?void 0:e.backUrl},get search(){return location.search.slice(1)},getEntity:()=>Rn.isEntity(Rn.route)?jt.get(`/api/${Rn.route}/${Rn.id}`):Promise.resolve(null),get entity(){var e;return console.err("don't use entity"),null===(e=Nt.get())||void 0===e?void 0:e.entity},removeSubpath:e=>e?e.replace(new RegExp(`^${Pt.getSubpath()}`),""):"",getParam:(e,t=window.location.search.substring(1))=>{let n=t.split("&").find((t=>t.split("=")[0]===e));return n?decodeURIComponent(n.split("=")[1]):""},getSegments:()=>Rn.removeSubpath(window.location.pathname).slice(1).split("?")[0].split("/"),isOutside:()=>["login","password-reset","signup","invitation","stop-notification-emails","public"].includes(Rn.route||Rn.getSegments()[0]),isEntity:()=>["messages","groups","users","links","files"].includes(Rn.getSegments()[0]),getUrlComponents:e=>{let t={};return e&&(t.url=new URL(e),t.path=t.url.pathname,t.search=t.url.search.slice(1),[t.route,t.id,t.action]=Rn.removeSubpath(t.path).slice(1).split("/")),t.entityType="",t.backUrl="",t}};var In,Tn=Rn;In=JSON.parse('{"previous_coms":"See previous comments","next_coms":"See next comments","ago":"{{duration}} ago","groups":"Groups","login_placeholder":"email","password_placeholder":"password","new_password_placeholder":"new password","confirm_password_placeholder":"confirm password","connect":"Connection","submit":"Submit","title_placeholder":"Title of your message (optional)","text_placeholder":"Write your message here","upload_image":"Add photos","upload_video":"Add videos","upload_music":"Add musics","upload_pdf":"Add pdf","add_date":"Add a date","logout":"Logout","settings":"Settings","name":"Name","name_input":"Choose a name","login":"Login","login_input":"Choose a login","email":"Email","email_input":"Fill in your email here","save_changes":"Save changes","password":"Password","password_input":"Write a new password here","Invalid login/password":"Invalid login and/or password","edit":"Edit","delete":"Delete","ask_delete_message":"Are you sure to delete this message?","account":"Account","forgot_password":"Did you forget your password?","password_reset_mail_sent":"The password reset email was sent !","User not found":"User not found","reset_password_title":"Reset your password","error":"An error occurred","passwords_dont_match":"Passwords don\'t match","invitation_link":"Invitation link","reset_invitation_link":"Reset invitation link","invitation_welcome":"Welcome on Zusam ! Please sign up before joining the group.","signup":"Sign up","create_a_group":"Create a group","create_the_group":"Create the group","quit_group":"Leave the group","settings_updated":"Your settings were updated","group_updated":"The group was updated !","group_left":"You left the group !","multiple_photos_upload":"An error ocurred. Try uploading images one by one (this can happen in some browsers)","error_new_message":"An error occurred while sending your message","error_upload":"An error occurred during the upload","cancel_write":"Do you really want to cancel writing a new message?","empty_message":"The message is empty and cannot be sent !","cancel":"Cancel","just_now":"Just now","notification_emails":"Email notifications","none":"None","hourly":"Hourly","daily":"Daily","weekly":"Weekly","monthly":"Monthly","notification_emails_stopped":"Email notifications stopped !","group_share_choice":"To which group do you want to send this message?","public_link":"public link","default_group":"Default group","destroy_account":"Delete your account","destroy_account_explain":"Once you delete your account, there is no going back. Please be certain.","are_you_sure":"Are you sure?","share_message":"share the message","users":"users","has_posted_in":"has posted in","has_commented_on":"has commented on","has_joined":"has joined","has_left":"has left","the_message_from":"the message from","in":"in","lang":"language","reply":"reply","replies_one":"{{count}} reply","replies_other":"{{count}} replies","publish_in_group":"publish in the group","search_in_group":"search in this group","changed_group_name":"changed the group\'s name","to":"to","notifications":"notifications","mark_all_as_read":"mark all as read","search_without_result":"Your search did not match any message.","add_bookmark":"Bookmark message","remove_bookmark":"Unbookmark message","bookmarks":"bookmarks","api_key":"API key","reset_api_key":"Reset the API key (you will be disconnected)","video_not_ready":"Video is not ready yet.","bookmark_added":"Message added to bookmarks !","bookmark_removed":"Message removed from bookmarks !","parent_message":"Parent message"}');var $n;$n=JSON.parse('{"previous_coms":"Voir les commentaires prÃ©cÃ©dents","next_coms":"Voir les commentaires suivants","ago":"Il y a {{duration}}","groups":"Groupes","login_placeholder":"email","password_placeholder":"mot de passe","new_password_placeholder":"nouveau mot de passe","confirm_password_placeholder":"confirmez le mot de passe","connect":"Connexion","submit":"Envoyer","title_placeholder":"Titre de votre message (optionnel)","text_placeholder":"Ecrivez votre message ici","upload_image":"Ajouter des photos","upload_video":"Ajouter des vidÃ©os","upload_music":"Ajouter des musiques","upload_pdf":"Ajouter un pdf","add_date":"PrÃ©ciser une date","logout":"Se dÃ©connecter","settings":"ParamÃ¨tres","name":"Nom","name_input":"Choisissez un nom","login":"Identifiant","login_input":"Choisissez un identifiant","email":"Email","email_input":"Renseignez votre adresse mail ici","save_changes":"Sauvegarder les changements","password":"Mot de passe","password_input":"Entrez un nouveau mot de passe","Invalid login/password":"Identifiant et/ou mot de passe invalide","edit":"Editer","delete":"Supprimer","ask_delete_message":"ÃŠtes-vous sÃ»r de vouloir supprimer ce message ?","account":"Compte","forgot_password":"Mot de passe oubliÃ© ?","password_reset_mail_sent":"Le mail de rÃ©initialisation a bien Ã©tÃ© envoyÃ© !","User not found":"Utilisateur inexistant","reset_password_title":"RÃ©initialisation de votre mot de passe","error":"Une erreur est survenue. Veuillez rÃ©essayer.","passwords_dont_match":"Les mots de passe ne sont pas identiques !","invitation_link":"Lien d\'invitation","reset_invitation_link":"RÃ©initialiser le lien d\'invitation","invitation_welcome":"Bienvenue sur Zusam ! Veuillez vous inscrire avant de rejoindre le groupe.","signup":"S\'inscrire","create_a_group":"CrÃ©er un groupe","create_the_group":"CrÃ©er le groupe","quit_group":"Quitter le groupe","settings_updated":"Vos prÃ©fÃ©rences ont Ã©tÃ© mises Ã  jour !","group_updated":"Le groupe a Ã©tÃ© mis Ã  jour !","group_left":"Vous avez quittÃ© le groupe !","multiple_photos_upload":"Une erreur est survenue. Veuillez essayer avec une seule photo (certains navigateurs bloquent l\'ajout de plusieurs photos en simultanÃ©).","error_new_message":"Une erreur inconnue est survenue pendant l\'envoi de votre message.","error_upload":"Une erreur s\'est produite pendant l\'envoi.","cancel_write":"Voulez-vous annuler l\'Ã©criture d\'un nouveau message ?","empty_message":"Le message est vide !","cancel":"Annuler","just_now":"A l\'instant","notification_emails":"Mail de notification","none":"Aucun","hourly":"Une fois par heure","daily":"Journalier","weekly":"Hebdomadaire","monthly":"Mensuel","notification_emails_stopped":"Notifications par email dÃ©sactivÃ©es !","group_share_choice":"A quel groupe voulez-vous envoyer ce message ?","public_link":"lien public","default_group":"Groupe par dÃ©faut","destroy_account":"Supprimer votre compte","destroy_account_explain":"Une fois votre compte supprimÃ©, il sera impossible d\'annuler l\'opÃ©ration.","are_you_sure":"Etes-vous sÃ»r ?","share_message":"partager le message","users":"utilisateurs","has_posted_in":"a postÃ© dans","has_commented_on":"a commentÃ©","has_joined":"a rejoint","has_left":"a quittÃ©","the_message_from":"le message de","in":"dans","lang":"langue","reply":"rÃ©pondre","replies_one":"{{count}} rÃ©ponse","replies_other":"{{count}} rÃ©ponses","publish_in_group":"promouvoir le message","search_in_group":"rechercher dans le groupe","changed_group_name":"a changÃ© le nom du groupe","to":"en","notifications":"notifications","mark_all_as_read":"tout marquer comme lu","search_without_result":"Votre recherche ne correspond Ã  aucun message.","add_bookmark":"Ajouter aux marque-pages","remove_bookmark":"Supprimer des marque-pages","bookmarks":"marque-pages","api_key":"Clef d\'API","reset_api_key":"Changer votre clef d\'API (vous allez Ãªtre dÃ©connectÃ©)","video_not_ready":"La vidÃ©o n\'est pas encore prÃªte.","bookmark_added":"Message ajoutÃ© aux marque-pages !","bookmark_removed":"Message supprimÃ© des marque-pages !","parent_message":"Message parent"}');var Dn;Dn=JSON.parse('{"previous_coms":"Ver los comentarios anteriores","next_coms":"Ver los siguientes comentarios","ago":"Hace {{duration}}","groups":"Grupos","login_placeholder":"correo","password_placeholder":"contraseÃ±a","new_password_placeholder":"nueva contraseÃ±a","confirm_password_placeholder":"confirmar contraseÃ±a","connect":"Conectarse","submit":"Enviar","title_placeholder":"Asunto (opcional)","text_placeholder":"Escribe tu mensaje aquÃ­","upload_image":"AÃ±adir fotos","upload_video":"AÃ±adir videos","upload_music":"AÃ±adir mÃºsica","upload_pdf":"AÃ±adir pdf","add_date":"AÃ±adir una fecha","logout":"Desconectarse","settings":"ParÃ¡metros","name":"Nombre","name_input":"Elige un nombre","login":"Usuario","login_input":"Elige un usuario","email":"Correo","email_input":"Indicar correo electrÃ³nico","save_changes":"Guardar los cambios","password":"ContraseÃ±a","password_input":"Indicar una nueva contraseÃ±a","Invalid login/password":"Usuario o contraseÃ±a incorrecto","edit":"Editar","delete":"Borrar","ask_delete_message":"Â¿Quieres borrar este mensaje?","account":"Cuenta","forgot_password":"Â¿Olvidaste tu contraseÃ±a?","password_reset_mail_sent":"El correo ha sido enviado!","User not found":"El usuario no existe","reset_password_title":"Cambia tu contraseÃ±a","error":"Un error ocurriÃ³. Vuelve a intentar.","passwords_dont_match":"Las contraseÃ±as no coinciden","invitation_link":"Enlace de invitaciÃ³n","reset_invitation_link":"Cambiar el enlace de invitaciÃ³n","invitation_welcome":"Bienvenido a Zusam ! Inscribete para conectarte con un grupo.","signup":"Inscribirse","create_a_group":"Crear un grupo","create_the_group":"Crear el grupo","quit_group":"Dejar el grupo","settings_updated":"Tus preferencias han sido actualizadas!","group_updated":"El grupo ha sido actualizado!","group_left":"Has abandonado el grupo","multiple_photos_upload":"Un error ocurriÃ³. Vuelve a intentar con solo una foto (algunos navegadores impiden aÃ±adir varias fotos al mismo tiempo).","error_new_message":"Un error desconocido ocurriÃ³ durante el envÃ­o del mensaje.","error_upload":"Un error ocurriÃ³ durante el envÃ­o.","cancel_write":"Â¿Quieres cancelar este nuevo mensaje?","empty_message":"No hay mensaje!","cancel":"Cancelar","just_now":"Ahora","notification_emails":"Correo de notificaciÃ³n","none":"Ninguno","hourly":"Cada hora","daily":"Diario","weekly":"Semanal","monthly":"Mensual","notification_emails_stopped":"Notificaciones de correo electrÃ³nico detenidas!","group_share_choice":"Â¿A quÃ© grupo desea enviar este mensaje?","public_link":"enlace pÃºblico","default_group":"Grupo predeterminado","destroy_account":"Borrar la cuenta","destroy_account_explain":"Una vez que elimines tu cuenta, no hay vuelta atrÃ¡s.","are_you_sure":"EstÃ¡s seguro ?","share_message":"comparte el mensaje","users":"usuarios","has_posted_in":"ha publicado en","has_commented_on":"ha comentado","has_joined":"se has unido","has_left":"ha dejado","the_message_from":"el mensaje de","in":"en","lang":"idioma","reply":"responder","replies_one":"{{count}} respuesta","replies_other":"{{count}} respuestas","publish_in_group":"publicar en el grupo","search_in_group":"buscar en este grupo","changed_group_name":"cambiÃ³ el nombre del grupo","to":"a","notifications":"notificaciones","mark_all_as_read":"marcar todo como leido","search_without_result":"Su bÃºsqueda no coincide con ningÃºn mensaje.","add_bookmark":"Marcar este mensaje","remove_bookmark":"Desmarcar este mensaje","bookmarks":"marcadores","api_key":"Clave API","reset_api_key":"Restablecer la clave API (se desconectarÃ¡)","video_not_ready":"El video aÃºn no estÃ¡ listo","bookmark_added":"Mensaje agregado a marcadores !","bookmark_removed":"Mensaje eliminado de los marcadores !","parent_message":"Mensaje para padres"}');var Un;Un=JSON.parse('{"previous_coms":"Pozri predchÃ¡dzajÃºce komentÃ¡re","next_coms":"Pozri nasledujÃºce komentÃ¡re","ago":"{{duration}} spÃ¤Å¥","groups":"Skupiny","login_placeholder":"email","password_placeholder":"heslo","new_password_placeholder":"novÃ© heslo","confirm_password_placeholder":"potvrdiÅ¥ heslo","connect":"Connection","submit":"OdoslaÅ¥","title_placeholder":"Nadpis vÃ¡Å¡ho prÃ­spevku (nie je povinnÃ©)","text_placeholder":"Tu napÃ­Å¡ prÃ­spevok","upload_image":"PridaÅ¥ fotografie","upload_video":"PridaÅ¥ videÃ¡","upload_music":"PridaÅ¥ hudbu","upload_pdf":"PridaÅ¥ pdf","add_date":"PridaÅ¥ dÃ¡tum","logout":"OdhlÃ¡siÅ¥","settings":"Nastavenia","name":"Meno","name_input":"ZvoÄ¾ si nejakÃ© meno","login":"Login","login_input":"ZvoÄ¾ si nejakÃ© prihlasovacie meno","email":"Email","email_input":"NapÃ­Å¡ tvoj email sem","save_changes":"UloÅ¾iÅ¥ zmeny","password":"Heslo","password_input":"Tu napÃ­Å¡ heslo","Invalid login/password":"NesprÃ¡vny login alebo heslo","edit":"UpraviÅ¥","delete":"ZmazaÅ¥","ask_delete_message":"Si si istÃ½, Å¾e chceÅ¡ zmazaÅ¥ tento prÃ­spevok?","account":"ÃšÄet","forgot_password":"Zabudol si svoje heslo?","password_reset_mail_sent":"Email s informÃ¡ciami o nastavenÃ­ novÃ©ho hesla bol odoslanÃ½!","User not found":"NeexistujÃºci uÅ¾Ã­vateÄ¾","reset_password_title":"Zmena hesla","error":"Chyba","passwords_dont_match":"HeslÃ¡ sa nezhodujÃº","invitation_link":"PozÃ½vacÃ­ odkaz","reset_invitation_link":"Reset invitation link","invitation_welcome":"Vitajte v Zusam ! Zaregistrujte sa pred pripojenÃ­m sa ku skupine.","signup":"PrihlÃ¡siÅ¥","create_a_group":"VytvoriÅ¥ skupinu","create_the_group":"VytvoriÅ¥ skupinu","quit_group":"OpustiÅ¥ skupinu","settings_updated":"VaÅ¡e nastavenia boli zmenenÃ©","group_updated":"Nastavenia skupiny boli zmenenÃ©","group_left":"Opustili ste skupinu","multiple_photos_upload":"Objavila sa chyba. SkÃºste priloÅ¾iÅ¥ obrÃ¡zky po jednom (tÃ¡to chyba sa mÃ´Å¾e objavovaÅ¥ v niektorÃ½ch prehliadaÄoch)","error_new_message":"Pri odosielanÃ­ prÃ­spevku sa objavila chyba","error_upload":"Objavila sa chyba poÄas odosielania","cancel_write":"Chcete naozaj zruÅ¡iÅ¥ vytvÃ¡ranie novÃ©ho prÃ­spevku?","empty_message":"PrÃ¡zdna sprÃ¡va nemÃ´Å¾e byÅ¥ odoslanÃ¡","cancel":"ZruÅ¡iÅ¥","just_now":"PrÃ¡ve teraz","notification_emails":"NotifikaÄnÃ½ email","none":"Å½iadne","hourly":"KaÅ¾dÃº hodinu","daily":"Denne","weekly":"TÃ½Å¾denne","monthly":"MesaÄne","notification_emails_stopped":"E-mailovÃ© upozornenia sa zastavili!","group_share_choice":"Do ktorej skupiny chcete odoslaÅ¥ tÃºto sprÃ¡vu ?","public_link":"verejnÃ© spojenie","default_group":"PredvolenÃº skupinu","destroy_account":"OdstrÃ¡Åˆte svoj ÃºÄet","destroy_account_explain":"Po odstrÃ¡nenÃ­ ÃºÄtu sa uÅ¾ nevrÃ¡ti","are_you_sure":"Si si istÃ½ ?","share_message":"zdieÄ¾ajte sprÃ¡vu","users":"uÅ¾Ã­vatelia","has_posted_in":"zverejnila v","has_commented_on":"komentoval","has_joined":"sa pripojil k","has_left":"opustil","the_message_from":"sprÃ¡va od","in":"v","lang":"jazyk","reply":"odpoveÄ","replies_one":"{{count}} odpoveÄ","replies_other":"{{count}} odpovedÃ­","publish_in_group":"publikovaÅ¥ v skupine","search_in_group":"hÄ¾adaÅ¥ v tejto skupine","changed_group_name":"zmenil nÃ¡zov skupiny","to":"na","notifications":"oznÃ¡menia","mark_all_as_read":"oznaÄiÅ¥ vÅ¡etko ako preÄÃ­tanÃ©","search_without_result":"VÃ¡Å¡mu vyhÄ¾adÃ¡vaniu nezodpovedÃ¡ Å¾iadna sprÃ¡va","add_bookmark":"TÃºto sprÃ¡vu uloÅ¾iÅ¥ medzi zÃ¡loÅ¾ky","remove_bookmark":"ZruÅ¡te oznaÄenie tejto sprÃ¡vy","bookmarks":"zÃ¡loÅ¾ky","api_key":"KÄ¾ÃºÄ API","reset_api_key":"Obnovte kÄ¾ÃºÄ rozhrania API (budete odpojenÃ­)","video_not_ready":"Video eÅ¡te nie je pripravenÃ©","bookmark_added":"SprÃ¡va pridanÃ¡ do zÃ¡loÅ¾iek !","bookmark_removed":"SprÃ¡va bola odstrÃ¡nenÃ¡ zo zÃ¡loÅ¾iek !","parent_message":"SprÃ¡va rodiÄa"}');const Fn={possibleLang:{en:"English",es:"EspaÃ±ol",fr:"FranÃ§ais",sk:"SlovenskÃ½"},init:()=>{Mn.use(pt).init({resources:{en:{translation:t(In)},fr:{translation:t($n)},sk:{translation:t(Un)},es:{translation:t(Dn)}},lng:Fn.getCurrentLang(),fallbackLng:Fn.getDefaultLang(),interpolation:{escapeValue:!1}})},getDefaultLang:()=>(document.querySelector("meta[name='zusam:default-lang']")||{}).content||"en",getCurrentLang:()=>Nn.lang||Fn.getDefaultLang()};const zn=Lt,Hn=B,Vn=W,Bn=jt,Kn=Nn,Wn=Tn,qn=Pt,Gn=Fn;function Jn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Kt(e,t)}var Qn;function Yn(){return Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yn.apply(this,arguments)}function Zn(e){return"/"===e.charAt(0)}function Xn(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}s.register("8P5VD",(function(e,t){var n=s("CnHb6");function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,r,i,s,o){if(o!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var s={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return s.PropTypes=s,s}})),s.register("CnHb6",(function(e,t){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"})),Qn=s("8P5VD")();var er=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&Zn(e),o=t&&Zn(t),a=s||o;if(e&&Zn(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var u=0,c=i.length;c>=0;c--){var p=i[c];"."===p?Xn(i,c):".."===p?(Xn(i,c),u++):u&&(Xn(i,c),u--)}if(!a)for(;u--;)i.unshift("..");!a||""===i[0]||i[0]&&Zn(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};function tr(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var nr=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"==typeof t||"object"==typeof n){var r=tr(t),i=tr(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1};var rr=function(e,t){if(!e)throw new Error("Invariant failed")};function ir(e){return"/"===e.charAt(0)?e:"/"+e}function sr(e){return"/"===e.charAt(0)?e.substr(1):e}function or(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function ar(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function lr(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function ur(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=Yn({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=er(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function cr(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"==typeof e?e(t,n):e;"string"==typeof s?"function"==typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var pr=!("undefined"==typeof window||!window.document||!window.document.createElement);function dr(e,t){t(window.confirm(e))}function hr(){try{return window.history.state||{}}catch(e){return{}}}function fr(e){void 0===e&&(e={}),!pr&&rr(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),s=e,o=s.forceRefresh,a=void 0!==o&&o,l=s.getUserConfirmation,u=void 0===l?dr:l,c=s.keyLength,p=void 0===c?6:c,d=e.basename?ar(ir(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return d&&(s=or(s,d)),ur(s,r,n)}function f(){return Math.random().toString(36).substr(2,p)}var g=cr();function m(e){Yn(P,e),P.length=n.length,g.notifyListeners(P.location,P.action)}function v(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||b(h(e.state))}function y(){b(h(hr()))}var _=!1;function b(e){if(_)_=!1,m();else{g.confirmTransitionTo(e,"POP",u,(function(t){t?m({action:"POP",location:e}):function(e){var t=P.location,n=k.indexOf(t.key);-1===n&&(n=0);var r=k.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(_=!0,S(i))}(e)}))}}var w=h(hr()),k=[w.key];function x(e){return d+lr(e)}function S(e){n.go(e)}var C=0;function O(e){1===(C+=e)&&1===e?(window.addEventListener("popstate",v),i&&window.addEventListener("hashchange",y)):0===C&&(window.removeEventListener("popstate",v),i&&window.removeEventListener("hashchange",y))}var E=!1;var P={length:n.length,action:"POP",location:w,createHref:x,push:function(e,t){var i="PUSH",s=ur(e,t,f(),P.location);g.confirmTransitionTo(s,i,u,(function(e){if(e){var t=x(s),o=s.key,l=s.state;if(r)if(n.pushState({key:o,state:l},null,t),a)window.location.href=t;else{var u=k.indexOf(P.location.key),c=k.slice(0,u+1);c.push(s.key),k=c,m({action:i,location:s})}else window.location.href=t}}))},replace:function(e,t){var i="REPLACE",s=ur(e,t,f(),P.location);g.confirmTransitionTo(s,i,u,(function(e){if(e){var t=x(s),o=s.key,l=s.state;if(r)if(n.replaceState({key:o,state:l},null,t),a)window.location.replace(t);else{var u=k.indexOf(P.location.key);-1!==u&&(k[u]=s.key),m({action:i,location:s})}else window.location.replace(t)}}))},go:S,goBack:function(){S(-1)},goForward:function(){S(1)},block:function(e){void 0===e&&(e=!1);var t=g.setPrompt(e);return E||(O(1),E=!0),function(){return E&&(E=!1,O(-1)),t()}},listen:function(e){var t=g.appendListener(e);return O(1),function(){O(-1),t()}}};return P}var gr={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+sr(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:sr,decodePath:ir},slash:{encodePath:ir,decodePath:ir}};function mr(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function vr(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function yr(e){window.location.replace(mr(window.location.href)+"#"+e)}function _r(e){void 0===e&&(e={}),!pr&&rr(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?dr:r,s=n.hashType,o=void 0===s?"slash":s,a=e.basename?ar(ir(e.basename)):"",l=gr[o],u=l.encodePath,c=l.decodePath;function p(){var e=c(vr());return a&&(e=or(e,a)),ur(e)}var d=cr();function h(e){Yn(C,e),C.length=t.length,d.notifyListeners(C.location,C.action)}var f=!1,g=null;function m(){var e,t,n=vr(),r=u(n);if(n!==r)yr(r);else{var s=p(),o=C.location;if(!f&&(t=s,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(g===lr(s))return;g=null,function(e){if(f)f=!1,h();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?h({action:t,location:e}):function(e){var t=C.location,n=b.lastIndexOf(lr(t));-1===n&&(n=0);var r=b.lastIndexOf(lr(e));-1===r&&(r=0);var i=n-r;i&&(f=!0,w(i))}(e)}))}}(s)}}var v=vr(),y=u(v);v!==y&&yr(y);var _=p(),b=[lr(_)];function w(e){t.go(e)}var k=0;function x(e){1===(k+=e)&&1===e?window.addEventListener("hashchange",m):0===k&&window.removeEventListener("hashchange",m)}var S=!1;var C={length:t.length,action:"POP",location:_,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=mr(window.location.href)),n+"#"+u(a+lr(e))},push:function(e,t){var n="PUSH",r=ur(e,void 0,void 0,C.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=lr(r),i=u(a+t);if(vr()!==i){g=t,function(e){window.location.hash=e}(i);var s=b.lastIndexOf(lr(C.location)),o=b.slice(0,s+1);o.push(t),b=o,h({action:n,location:r})}else h()}}))},replace:function(e,t){var n="REPLACE",r=ur(e,void 0,void 0,C.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=lr(r),i=u(a+t);vr()!==i&&(g=t,yr(i));var s=b.indexOf(lr(C.location));-1!==s&&(b[s]=t),h({action:n,location:r})}}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return S||(x(1),S=!0),function(){return S&&(S=!1,x(-1)),t()}},listen:function(e){var t=d.appendListener(e);return x(1),function(){x(-1),t()}}};return C}function br(e,t,n){return Math.min(Math.max(e,t),n)}function wr(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,s=t.initialIndex,o=void 0===s?0:s,a=t.keyLength,l=void 0===a?6:a,u=cr();function c(e){Yn(m,e),m.length=m.entries.length,u.notifyListeners(m.location,m.action)}function p(){return Math.random().toString(36).substr(2,l)}var d=br(o,0,i.length-1),h=i.map((function(e){return ur(e,void 0,"string"==typeof e?p():e.key||p())})),f=lr;function g(e){var t=br(m.index+e,0,m.entries.length-1),r=m.entries[t];u.confirmTransitionTo(r,"POP",n,(function(e){e?c({action:"POP",location:r,index:t}):c()}))}var m={length:h.length,action:"POP",location:h[d],index:d,entries:h,createHref:f,push:function(e,t){var r="PUSH",i=ur(e,t,p(),m.location);u.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),c({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=ur(e,t,p(),m.location);u.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,c({action:r,location:i}))}))},go:g,goBack:function(){g(-1)},goForward:function(){g(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return m}var kr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n?n:{};function xr(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var Sr=Xe.createContext||function(e,n){var r,i,s,o="__create-react-context-"+((kr[s="__global_unique_id__"]=(kr[s]||0)+1)+"__"),a=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=xr(t.props.value),t}Jn(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;((s=r)===(o=i)?0!==s||1/s==1/o:s!=s&&o!=o)?t=0:(t="function"==typeof n?n(r,i):1073741823,0!==(t|=0)&&this.emitter.set(e.value,t))}var s,o},r.render=function(){return this.props.children},t}(w);a.childContextTypes=((r={})[o]=t(Qn).object.isRequired,r);var l=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Jn(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?1073741823:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?1073741823:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(w);return l.contextTypes=((i={})[o]=t(Qn).object,i),{Provider:a,Consumer:l}},Cr={},Or={};Or=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},(Cr=Tr).parse=Pr,Cr.compile=function(e,t){return jr(Pr(e,t),t)},Cr.tokensToFunction=jr,Cr.tokensToRegExp=Ir;var Er=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Pr(e,t){for(var n,r=[],i=0,s=0,o="",a=t&&t.delimiter||"/";null!=(n=Er.exec(e));){var l=n[0],u=n[1],c=n.index;if(o+=e.slice(s,c),s=c+l.length,u)o+=u[1];else{var p=e[s],d=n[2],h=n[3],f=n[4],g=n[5],m=n[6],v=n[7];o&&(r.push(o),o="");var y=null!=d&&null!=p&&p!==d,_="+"===m||"*"===m,b="?"===m||"*"===m,w=n[2]||a,k=f||g;r.push({name:h||i++,prefix:d||"",delimiter:w,optional:b,repeat:_,partial:y,asterisk:!!v,pattern:k?Lr(k):v?".*":"[^"+Mr(w)+"]+?"})}}return s<e.length&&(o+=e.substr(s)),o&&r.push(o),r}function Ar(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function jr(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",Rr(t)));return function(t,r){for(var i="",s=t||{},o=(r||{}).pretty?Ar:encodeURIComponent,a=0;a<e.length;a++){var l=e[a];if("string"!=typeof l){var u,c=s[l.name];if(null==c){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Or(c)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var p=0;p<c.length;p++){if(u=o(c[p]),!n[a].test(u))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(u)+"`");i+=(0===p?l.prefix:l.delimiter)+u}}else{if(u=l.asterisk?encodeURI(c).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):o(c),!n[a].test(u))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+u+'"');i+=l.prefix+u}}else i+=l}return i}}function Mr(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Lr(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Nr(e,t){return e.keys=t,e}function Rr(e){return e&&e.sensitive?"":"i"}function Ir(e,t,n){Or(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,s="",o=0;o<e.length;o++){var a=e[o];if("string"==typeof a)s+=Mr(a);else{var l=Mr(a.prefix),u="(?:"+a.pattern+")";t.push(a),a.repeat&&(u+="(?:"+l+u+")*"),s+=u=a.optional?a.partial?l+"("+u+")?":"(?:"+l+"("+u+"))?":l+"("+u+")"}}var c=Mr(n.delimiter||"/"),p=s.slice(-c.length)===c;return r||(s=(p?s.slice(0,-c.length):s)+"(?:"+c+"(?=$))?"),s+=i?"$":r&&p?"":"(?="+c+"|$)",Nr(new RegExp("^"+s,Rr(n)),t)}function Tr(e,t,n){return Or(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Nr(e,t)}(e,t):Or(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(Tr(e[i],t,n).source);return Nr(new RegExp("(?:"+r.join("|")+")",Rr(n)),t)}(e,t,n):function(e,t,n){return Ir(Pr(e,n),t,n)}(e,t,n)}var $r={};function Dr(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}s.register("64Dgw",(function(t,n){var r,i,s,o,a,l,u,c,p,d,h,f,g,m,v,y,_,b,w,k,x,S,C,O,E,P,A,j;e(t.exports,"AsyncMode",(function(){return r}),(function(e){return r=e})),e(t.exports,"ConcurrentMode",(function(){return i}),(function(e){return i=e})),e(t.exports,"ContextConsumer",(function(){return s}),(function(e){return s=e})),e(t.exports,"ContextProvider",(function(){return o}),(function(e){return o=e})),e(t.exports,"Element",(function(){return a}),(function(e){return a=e})),e(t.exports,"ForwardRef",(function(){return l}),(function(e){return l=e})),e(t.exports,"Fragment",(function(){return u}),(function(e){return u=e})),e(t.exports,"Lazy",(function(){return c}),(function(e){return c=e})),e(t.exports,"Memo",(function(){return p}),(function(e){return p=e})),e(t.exports,"Portal",(function(){return d}),(function(e){return d=e})),e(t.exports,"Profiler",(function(){return h}),(function(e){return h=e})),e(t.exports,"StrictMode",(function(){return f}),(function(e){return f=e})),e(t.exports,"Suspense",(function(){return g}),(function(e){return g=e})),e(t.exports,"isAsyncMode",(function(){return m}),(function(e){return m=e})),e(t.exports,"isConcurrentMode",(function(){return v}),(function(e){return v=e})),e(t.exports,"isContextConsumer",(function(){return y}),(function(e){return y=e})),e(t.exports,"isContextProvider",(function(){return _}),(function(e){return _=e})),e(t.exports,"isElement",(function(){return b}),(function(e){return b=e})),e(t.exports,"isForwardRef",(function(){return w}),(function(e){return w=e})),e(t.exports,"isFragment",(function(){return k}),(function(e){return k=e})),e(t.exports,"isLazy",(function(){return x}),(function(e){return x=e})),e(t.exports,"isMemo",(function(){return S}),(function(e){return S=e})),e(t.exports,"isPortal",(function(){return C}),(function(e){return C=e})),e(t.exports,"isProfiler",(function(){return O}),(function(e){return O=e})),e(t.exports,"isStrictMode",(function(){return E}),(function(e){return E=e})),e(t.exports,"isSuspense",(function(){return P}),(function(e){return P=e})),e(t.exports,"isValidElementType",(function(){return A}),(function(e){return A=e})),e(t.exports,"typeOf",(function(){return j}),(function(e){return j=e}));var M="function"==typeof Symbol&&Symbol.for,L=M?Symbol.for("react.element"):60103,N=M?Symbol.for("react.portal"):60106,R=M?Symbol.for("react.fragment"):60107,I=M?Symbol.for("react.strict_mode"):60108,T=M?Symbol.for("react.profiler"):60114,$=M?Symbol.for("react.provider"):60109,D=M?Symbol.for("react.context"):60110,U=M?Symbol.for("react.async_mode"):60111,F=M?Symbol.for("react.concurrent_mode"):60111,z=M?Symbol.for("react.forward_ref"):60112,H=M?Symbol.for("react.suspense"):60113,V=M?Symbol.for("react.suspense_list"):60120,B=M?Symbol.for("react.memo"):60115,K=M?Symbol.for("react.lazy"):60116,W=M?Symbol.for("react.block"):60121,q=M?Symbol.for("react.fundamental"):60117,G=M?Symbol.for("react.responder"):60118,J=M?Symbol.for("react.scope"):60119;function Q(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case L:switch(e=e.type){case U:case F:case R:case T:case I:case H:return e;default:switch(e=e&&e.$$typeof){case D:case z:case K:case B:case $:return e;default:return t}}case N:return t}}}function Y(e){return Q(e)===F}r=U,i=F,s=D,o=$,a=L,l=z,u=R,c=K,p=B,d=N,h=T,f=I,g=H,m=function(e){return Y(e)||Q(e)===U},v=Y,y=function(e){return Q(e)===D},_=function(e){return Q(e)===$},b=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===L},w=function(e){return Q(e)===z},k=function(e){return Q(e)===R},x=function(e){return Q(e)===K},S=function(e){return Q(e)===B},C=function(e){return Q(e)===N},O=function(e){return Q(e)===T},E=function(e){return Q(e)===I},P=function(e){return Q(e)===H},A=function(e){return"string"==typeof e||"function"==typeof e||e===R||e===F||e===T||e===I||e===H||e===V||"object"==typeof e&&null!==e&&(e.$$typeof===K||e.$$typeof===B||e.$$typeof===$||e.$$typeof===D||e.$$typeof===z||e.$$typeof===q||e.$$typeof===G||e.$$typeof===J||e.$$typeof===W)},j=Q})),$r=s("64Dgw");var Ur,Fr={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},zr={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Hr={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Vr={};function Br(e){return $r.isMemo(e)?Hr:Vr[e.$$typeof]||Fr}Vr[$r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Vr[$r.Memo]=Hr;var Kr=Object.defineProperty,Wr=Object.getOwnPropertyNames,qr=Object.getOwnPropertySymbols,Gr=Object.getOwnPropertyDescriptor,Jr=Object.getPrototypeOf,Qr=Object.prototype;Ur=function e(t,n,r){if("string"!=typeof n){if(Qr){var i=Jr(n);i&&i!==Qr&&e(t,i,r)}var s=Wr(n);qr&&(s=s.concat(qr(n)));for(var o=Br(t),a=Br(n),l=0;l<s.length;++l){var u=s[l];if(!(zr[u]||r&&r[u]||a&&a[u]||o&&o[u])){var c=Gr(n,u);try{Kr(t,u,c)}catch(e){}}}}return t};var Yr=function(e){var t=Sr();return t.displayName=e,t},Zr=Yr("Router-History"),Xr=Yr("Router"),ei=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Jn(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return Xe.createElement(Xr.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},Xe.createElement(Zr.Provider,{children:this.props.children||null,value:this.props.history}))},t}(Xe.Component),ti=(Xe.Component,function(e){function t(){return e.apply(this,arguments)||this}Jn(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(Xe.Component));var ni={},ri=0;function ii(e,n){return void 0===e&&(e="/"),void 0===n&&(n={}),"/"===e?e:function(e){if(ni[e])return ni[e];var n=t(Cr).compile(e);return ri<1e4&&(ni[e]=n,ri++),n}(e)(n,{pretty:!0})}function si(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return Xe.createElement(Xr.Consumer,null,(function(e){!e&&rr(!1);var r=e.history,s=e.staticContext,o=i?r.push:r.replace,a=ur(t?"string"==typeof n?ii(n,t.params):Yn({},n,{pathname:ii(n.pathname,t.params)}):n);return s?(o(a),null):Xe.createElement(ti,{onMount:function(){o(a)},onUpdate:function(e,t){var n,r,i=ur(t.to);n=i,r=Yn({},a,{key:i.key}),n.pathname===r.pathname&&n.search===r.search&&n.hash===r.hash&&n.key===r.key&&nr(n.state,r.state)||o(a)},to:n})}))}var oi={},ai=0;function li(e,n){void 0===n&&(n={}),("string"==typeof n||Array.isArray(n))&&(n={path:n});var r=n,i=r.path,s=r.exact,o=void 0!==s&&s,a=r.strict,l=void 0!==a&&a,u=r.sensitive,c=void 0!==u&&u;return[].concat(i).reduce((function(n,r){if(!r&&""!==r)return null;if(n)return n;var i=function(e,n){var r=""+n.end+n.strict+n.sensitive,i=oi[r]||(oi[r]={});if(i[e])return i[e];var s=[],o={regexp:t(Cr)(e,s,n),keys:s};return ai<1e4&&(i[e]=o,ai++),o}(r,{end:o,strict:l,sensitive:c}),s=i.regexp,a=i.keys,u=s.exec(e);if(!u)return null;var p=u[0],d=u.slice(1),h=e===p;return o&&!h?null:{path:r,url:"/"===r&&""===p?"/":p,isExact:h,params:a.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var ui=function(e){function t(){return e.apply(this,arguments)||this}return Jn(t,e),t.prototype.render=function(){var e=this;return Xe.createElement(Xr.Consumer,null,(function(t){!t&&rr(!1);var n=e.props.location||t.location,r=Yn({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?li(n.pathname,e.props):t.match}),i=e.props,s=i.children,o=i.component,a=i.render;return Array.isArray(s)&&function(e){return 0===Xe.Children.count(e)}(s)&&(s=null),Xe.createElement(Xr.Provider,{value:r},r.match?s?"function"==typeof s?s(r):s:o?Xe.createElement(o,r):a?a(r):null:"function"==typeof s?s(r):null)}))},t}(Xe.Component);function ci(e){return"/"===e.charAt(0)?e:"/"+e}function pi(e,t){if(!e)return t;var n=ci(e);return 0!==t.pathname.indexOf(n)?t:Yn({},t,{pathname:t.pathname.substr(n.length)})}function di(e){return"string"==typeof e?e:lr(e)}function hi(e){return function(){rr(!1)}}function fi(){}Xe.Component;var gi=function(e){function t(){return e.apply(this,arguments)||this}return Jn(t,e),t.prototype.render=function(){var e=this;return Xe.createElement(Xr.Consumer,null,(function(t){!t&&rr(!1);var n,r,i=e.props.location||t.location;return Xe.Children.forEach(e.props.children,(function(e){if(null==r&&Xe.isValidElement(e)){n=e;var s=e.props.path||e.props.from;r=s?li(i.pathname,Yn({},e.props,{path:s})):t.match}})),r?Xe.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(Xe.Component);function mi(e){var n="withRouter("+(e.displayName||e.name)+")",r=function(t){var n=t.wrappedComponentRef,r=Dr(t,["wrappedComponentRef"]);return Xe.createElement(Xr.Consumer,null,(function(t){return!t&&rr(!1),Xe.createElement(e,Yn({},r,t,{ref:n}))}))};return r.displayName=n,r.WrappedComponent=e,t(Ur)(r,e)}var vi=Xe.useContext;var yi=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=fr(t.props),t}return Jn(t,e),t.prototype.render=function(){return Xe.createElement(ei,{history:this.history,children:this.props.children})},t}(Xe.Component),_i=(Xe.Component,function(e,t){return"function"==typeof e?e(t):e}),bi=function(e,t){return"string"==typeof e?ur(e,null,null,t):e},wi=function(e){return e},ki=Xe.forwardRef;void 0===ki&&(ki=wi);var xi=ki((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,s=Dr(e,["innerRef","navigate","onClick"]),o=s.target,a=Yn({},s,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||o&&"_self"!==o||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return a.ref=wi!==ki&&t||n,Xe.createElement("a",a)})),Si=ki((function(e,t){var n=e.component,r=void 0===n?xi:n,i=e.replace,s=e.to,o=e.innerRef,a=Dr(e,["component","replace","to","innerRef"]);return Xe.createElement(Xr.Consumer,null,(function(e){!e&&rr(!1);var n=e.history,l=bi(_i(s,e.location),e.location),u=l?n.createHref(l):"",c=Yn({},a,{href:u,navigate:function(){var t=_i(s,e.location),r=lr(e.location)===lr(bi(t));(i||r?n.replace:n.push)(t)}});return wi!==ki?c.ref=t||o:c.innerRef=o,Xe.createElement(r,c)}))})),Ci=function(e){return e},Oi=Xe.forwardRef;void 0===Oi&&(Oi=Ci);var Ei;Oi((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,s=void 0===i?"active":i,o=e.activeStyle,a=e.className,l=e.exact,u=e.isActive,c=e.location,p=e.sensitive,d=e.strict,h=e.style,f=e.to,g=e.innerRef,m=Dr(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return Xe.createElement(Xr.Consumer,null,(function(e){!e&&rr(!1);var n=c||e.location,i=bi(_i(f,n),n),v=i.pathname,y=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),_=y?li(n.pathname,{path:y,exact:l,sensitive:p,strict:d}):null,b=!!(u?u(_,n):_),w="function"==typeof a?a(b):a,k="function"==typeof h?h(b):h;b&&(w=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(w,s),k=Yn({},k,o));var x=Yn({"aria-current":b&&r||null,className:w,style:k,to:i},m);return Ci!==Oi?x.ref=t||g:x.innerRef=g,Xe.createElement(Si,x)}))}));Ei=new URL(s("c1bOu").resolve("IA7EQ"),import.meta.url).toString();var Pi=Ot()(mi(class extends w{componentDidMount(){Vn.reset()}sendPasswordReset(e){e.preventDefault();let t=document.getElementById("login").value||"";t.toLowerCase(),this.setState({sending:!0}),Bn.post("/api/password-reset-mail",{mail:t}).then((e=>{this.setState({sending:!1}),e&&!e.message?Hn.add(this.props.t("password_reset_mail_sent")):Hn.add(this.props.t(e.message),"alert-danger")}))}sendLoginForm(e){e.preventDefault(),this.setState({showAlert:!1,sending:!0});let t=document.getElementById("login").value||"";t.toLowerCase();const n=document.getElementById("password").value;Bn.post("/api/login",{login:t,password:n}).then((e=>{this.setState({sending:!1}),e&&e.api_key?Vn.set("apiKey",e.api_key).then((()=>{console.log("login"),Kn.update().then((()=>{setTimeout((()=>this.props.history.push("/")),100)}))})):e&&e.message?Hn.add(this.props.t(e.message),"alert-danger"):Hn.add(this.props.t("error"),"alert-danger")}))}showPasswordReset(){this.setState({showResetPassword:!0})}render(){return y("div",{class:"login"},y("div",{class:"login-form"},y("img",{src:new URL(Ei)}),!this.state.showResetPassword&&y("form",null,y("div",{class:"form-group"},y("input",{type:"email",class:"form-control",required:!0,id:"login",placeholder:this.props.t("login_placeholder")})),y("div",{class:"form-group"},y("input",{type:"password",class:"form-control",required:!0,id:"password",placeholder:this.props.t("password_placeholder")})),y("div",{class:"forgot-password"},y("span",{onClick:e=>this.showPasswordReset(e)},this.props.t("forgot_password"))),y("button",{type:"submit",class:"btn btn-light",onClick:e=>this.sendLoginForm(e),disabled:this.state.sending},this.props.t("connect"))),!!this.state.showResetPassword&&y("form",null,y("div",{class:"form-group"},y("input",{type:"email",class:"form-control",required:!0,id:"login",placeholder:this.props.t("login_placeholder")})),y("button",{type:"submit",class:"btn btn-light",onClick:e=>this.sendPasswordReset(e),disabled:this.state.sending},this.props.t("submit")))))}constructor(){super(),this.state={showAlert:!1,error:""},this.sendLoginForm=this.sendLoginForm.bind(this),this.sendPasswordReset=this.sendPasswordReset.bind(this),this.showPasswordReset=this.showPasswordReset.bind(this),Vn.get("apiKey").then((e=>e&&this.props.history.push("/")))}}));var Ai=Ot()(mi(class extends w{sendNewPassword(e){e.preventDefault(),Vn.set("apiKey","");const t=document.getElementById("password").value||"",n=document.getElementById("password_confirmation").value||"",r=Wn.getParam("mail"),i=Wn.getParam("key");if(r&&t){if(t!=n)return void Hn.add(this.props.t("passwords_dont_match"));Bn.post("/api/new-password",{mail:r,key:i,password:t}).then((e=>{e.api_key?(Vn.set("apiKey",e.api_key),setTimeout((()=>this.props.history.push("/")),100)):Hn.add(this.props.t(e.message))})).catch((e=>console.warn(e)))}}render(){return y("div",{class:"login"},y("div",{class:"login-form"},y("h2",{class:"title"},this.props.t("reset_password_title")),y("form",null,y("div",{class:"form-group"},y("input",{type:"password",class:"form-control",required:!0,id:"password",placeholder:this.props.t("new_password_placeholder")})),y("div",{class:"form-group"},y("input",{type:"password",class:"form-control",required:!0,id:"password_confirmation",placeholder:this.props.t("confirm_password_placeholder")})),y("button",{type:"submit",class:"btn btn-light",onClick:e=>this.sendNewPassword(e)},this.props.t("submit")))))}constructor(){super(),this.sendNewPassword=this.sendNewPassword.bind(this)}}));var ji=Ot()(mi(class extends w{sendSignupForm(e){e.preventDefault(),this.setState({showAlert:!1});let t=document.getElementById("login").value||"";t.toLowerCase();const n=document.getElementById("password").value;Vn.set("apiKey",""),Bn.post("/api/signup",{login:t,password:n,invite_key:this.state.inviteKey}).then((e=>{e&&!e.message?(Vn.set("apiKey",e.api_key),setTimeout((()=>this.props.history.push("/")),100)):Hn.add(this.props.t(e.message))}))}render(){return y("div",{class:"signup"},y("div",{class:"signup-form"},y("img",{src:"/src/assets/zusam_logo.svg"}),y("div",{class:"welcome lead"},this.props.t("invitation_welcome")),y("form",null,y("div",{class:"form-group"},y("input",{type:"email",class:"form-control",required:!0,id:"login",placeholder:this.props.t("login_placeholder")})),y("div",{class:"form-group"},y("input",{type:"password",class:"form-control",required:!0,id:"password",placeholder:this.props.t("password_placeholder")})),y("button",{type:"submit",class:"btn btn-light",onClick:e=>this.sendSignupForm(e)},this.props.t("signup")))))}constructor(){super(),this.state={showAlert:!1,error:"",inviteKey:Wn.getParam("inviteKey")},this.sendSignupForm=this.sendSignupForm.bind(this)}}));var Mi=Ot()(class extends w{render(){return y("div",null,this.state.message||"")}constructor(){super(),Bn.get(`/api${window.location.pathname}`).then((()=>{this.setState({message:this.props.t("notification_emails_stopped")})})).catch((e=>{console.warn(e),this.setState({message:this.props.t("error")})}))}});class Li extends w{render(){const e=`${this.props.url}/size=large/bgcol=f5f5f5/linkcol=0687f5/minimal=true/tracklist=false/`;return this.state.revealed?y("div",{class:"bandcamp-embed embed-responsive embed-responsive-1by1"},y("iframe",{class:"embed-responsive-item",src:e})):y("div",{class:"embed-preview",onClick:()=>this.setState({revealed:!0})},y("div",{class:"bandcamp"}),y("img",{src:this.props.preview}))}}class Ni extends w{render(){return this.state.revealed?y("div",{class:"embed-responsive embed-responsive-16by9"},y("iframe",{allowfullscreen:!0,class:"embed-responsive-item",src:this.props.url})):y("div",{class:"embed-preview",onClick:()=>this.setState({revealed:!0})},y("div",{className:this.props.playBtnClass}),y("img",{src:this.props.preview}))}}class Ri extends w{getPreview(){var e,t;if((null===(e=this.props)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.exception)&&console.warn(this.props.data),this.props.data.providerName){if("peertube"==this.props.data.providerName.toLowerCase()&&this.props.data.code)return y("div",{class:"embed-container",dangerouslySetInnerHTML:{__html:this.props.data.code}});if("soundcloud"==this.props.data.providerName.toLowerCase()&&this.props.data.code)return y(Ni,{preview:qn.crop(this.props.preview.id,1024,270),url:`${this.props.data.code.match(/https:\/\/[^"\s]+/)[0]}&auto_play=true`,playBtnClass:"soundcloud"});if("bandcamp"==this.props.data.providerName.toLowerCase()&&this.props.data.code){let e=this.props.data.code.match(/https:\/\/.*album=\d+/);if(e||(e=this.props.data.code.match(/https:\/\/.*track=\d+/)),e)return y(Li,{preview:qn.crop(this.props.preview.id,1024,270),url:e[0]})}if("lichess.org"==this.props.data.providerName.toLowerCase()){var n,r,i;let e=(null===(c=this.props)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.url)&&"string"==typeof(null===(r=this.props)||void 0===r?void 0:r.data.url)?null===(i=this.props.data)||void 0===i?void 0:i.url:this.props.url;if(qn.isValidUrl(e)&&!e.match(/embed/)&&!e.match(/study/)&&!e.match(/blog/)){let t;e=new URL(e.replace("lichess.org/","lichess.org/embed/"));try{t=e.pathname.split("/").slice(-1)[0]}catch(e){t=""}if(e=new URL(e.href.replace(t,t.slice(0,8))),t)return y(Ni,{preview:qn.crop(this.props.preview.id,270,270),url:e,playBtnClass:"lichess"})}}if("youtube"==this.props.data.providerName.toLowerCase()){var s,o,a,l,u;let e=(null===(c=this.props)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.url)&&"string"==typeof(null===(o=this.props)||void 0===o?void 0:o.data.url)?null===(a=this.props.data)||void 0===a?void 0:a.url:this.props.url;if((null===(l=this.props)||void 0===l||null===(u=l.preview)||void 0===u?void 0:u.id)&&e)return y(Ni,{preview:qn.crop(this.props.preview.id,1024,270),url:`${e.replace("watch?v=","embed/")}?autoplay=1&controls=2&wmode=opaque`,playBtnClass:"youtube"})}if("invidious"==this.props.data.providerName.toLowerCase()){var c,p,d,h,f,g;let e=(null===(c=this.props)||void 0===c||null===(p=c.data)||void 0===p?void 0:p.url)&&"string"==typeof(null===(d=this.props)||void 0===d?void 0:d.data.url)?null===(h=this.props.data)||void 0===h?void 0:h.url:this.props.url;if((null===(f=this.props)||void 0===f||null===(g=f.preview)||void 0===g?void 0:g.id)&&e)return y(Ni,{preview:qn.crop(this.props.preview.id,1024,270),url:`${e.replace("watch?v=","embed/")}`,playBtnClass:"youtube"})}}return/image/.test(this.props.data["content-type"])?y("div",{class:"container d-flex justify-content-center flex-wrap align-items-center"},y("img",{"data-nlg":!this.props.inWriter,href:qn.toApp(this.props.url),class:"img-fluid cursor-pointer","data-origin":this.props.url,"data-src":this.props.preview&&!/gif/.test(this.props.data["content-type"])?qn.thumbnail(this.props.preview.id,1366,768):this.props.url,src:this.props.preview&&!/gif/.test(this.props.data["content-type"])?qn.thumbnail(this.props.preview.id,1366,99999):this.props.url})):/video/.test(this.props.data["content-type"])||"application/ogg"==this.props.data["content-type"]?y("div",{class:"container d-flex justify-content-center flex-wrap align-items-center"},y("video",{class:"img-fluid",controls:!0,src:this.props.url})):/audio/.test(this.props.data["content-type"])?y("div",{class:"container d-flex justify-content-center flex-wrap align-items-center"},y("audio",{class:"w-100",controls:!0},y("source",{src:this.props.url}))):this.props.data.title&&(this.props.preview||this.props.data.description)?y("a",{class:"preview-card seamless-link d-inline-block",target:"_blank",rel:"noreferrer",href:qn.toApp(this.props.url)},y("div",{class:"card",style:"max-width: 480px"},this.props.preview&&y("img",{class:"card-img-top",src:qn.crop(this.props.preview.id,320,180)}),y("div",{class:"card-body p-1"},y("h5",null,this.props.data.title),this.props.data.description&&y("p",null,y("small",null,this.props.data.description.slice(0,500)))))):null}render(){if(!this.props.url||!this.props.data)return null;let e=this.getPreview();return e?y("p",{class:"text-center card-text"},e):null}}const Ii=class extends w{render(){const e=this.state[this.props.family][this.props.icon];return e&&y("svg",{style:this.props.rotation?`transform: rotate(${this.props.rotation})`:null,className:`fa-icon ${this.props.family} ${this.props.icon} ${this.props.rotation}`,viewBox:`0 0 ${e[0]} ${e[1]}`},y("path",{fill:"currentColor",d:e[4]}))}constructor(e){super(e),this.state={regular:{comment:[512,512,[],"f075","M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z"],bookmark:[384,512,[],"f02e","M336 0H48C21.49 0 0 21.49 0 48v464l192-112 192 112V48c0-26.51-21.49-48-48-48zm0 428.43l-144-84-144 84V54a6 6 0 0 1 6-6h276c3.314 0 6 2.683 6 5.996V428.43z"],images:[576,512,[],"f302","M480 416v16c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V176c0-26.51 21.49-48 48-48h16v48H54a6 6 0 0 0-6 6v244a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6v-10h48zm42-336H150a6 6 0 0 0-6 6v244a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6V86a6 6 0 0 0-6-6zm6-48c26.51 0 48 21.49 48 48v256c0 26.51-21.49 48-48 48H144c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h384zM264 144c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.909-40 40-40 40 17.909 40 40zm-72 96l39.515-39.515c4.686-4.686 12.284-4.686 16.971 0L288 240l103.515-103.515c4.686-4.686 12.284-4.686 16.971 0L480 208v80H192v-48z"],"check-circle":[512,512,[],"f058","M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"],"file-pdf":[384,512,[],"f1c1","M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm250.2-143.7c-12.2-12-47-8.7-64.4-6.5-17.2-10.5-28.7-25-36.8-46.3 3.9-16.1 10.1-40.6 5.4-56-4.2-26.2-37.8-23.6-42.6-5.9-4.4 16.1-.4 38.5 7 67.1-10 23.9-24.9 56-35.4 74.4-20 10.3-47 26.2-51 46.2-3.3 15.8 26 55.2 76.1-31.2 22.4-7.4 46.8-16.5 68.4-20.1 18.9 10.2 41 17 55.8 17 25.5 0 28-28.2 17.5-38.7zm-198.1 77.8c5.1-13.7 24.5-29.5 30.4-35-19 30.3-30.4 35.7-30.4 35zm81.6-190.6c7.4 0 6.7 32.1 1.8 40.8-4.4-13.9-4.3-40.8-1.8-40.8zm-24.4 136.6c9.7-16.9 18-37 24.7-54.7 8.3 15.1 18.9 27.2 30.1 35.5-20.8 4.3-38.9 13.1-54.8 19.2zm131.6-5s-5 6-37.3-7.8c35.1-2.6 40.9 5.4 37.3 7.8z"],bell:[448,512,[],"f0f3","M439.39 362.29c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71zM67.53 368c21.22-27.97 44.42-74.33 44.53-159.42 0-.2-.06-.38-.06-.58 0-61.86 50.14-112 112-112s112 50.14 112 112c0 .2-.06.38-.06.58.11 85.1 23.31 131.46 44.53 159.42H67.53zM224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64z"],"level-down-alt":[320,512,[],"f3be","M313.553 392.331L209.587 504.334c-9.485 10.214-25.676 10.229-35.174 0L70.438 392.331C56.232 377.031 67.062 352 88.025 352H152V80H68.024a11.996 11.996 0 0 1-8.485-3.515l-56-56C-4.021 12.926 1.333 0 12.024 0H208c13.255 0 24 10.745 24 24v328h63.966c20.878 0 31.851 24.969 17.587 40.331z"]},solid:{bookmark:[384,512,[],"f02e","M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z"],comment:[512,512,[],"f075","M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"],"pencil-alt":[512,512,[],"f303","M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"],"arrow-left":[448,512,[],"f060","M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"],"caret-down":[320,512,[],"f0d7","M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"],film:[512,512,[],"f008","M488 64h-8v20c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V64H96v20c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12V64h-8C10.7 64 0 74.7 0 88v336c0 13.3 10.7 24 24 24h8v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h320v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h8c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24zM96 372c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm272 208c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm0-168c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm112 152c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z"],times:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"],bell:[448,512,[],"f0f3","M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"],"ellipsis-h":[512,512,[],"f141","M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]}}}};s.register("igYK6",(function(e,t){e.exports=import("./"+s("c1bOu").resolve("1UwEQ")).then((()=>s("lOUEZ")))}));var Ti=Ot()(class extends w{toggleFile(e){e.stopPropagation(),e.preventDefault(),"function"==typeof this.props.toggleFile&&this.props.toggleFile(e.currentTarget.getAttribute("fileIndex"))}renderMiniatureFile(e){let t=e.contentUrl?`/files/${e.contentUrl}`:null,n=t;switch(/image/.test(e.type)&&"image/gif"!=e.type&&(n=qn.thumbnail(e.id,1366,999999)),e.status){case"raw":return y("a",{class:"rounded"},y("div",{class:"miniature"},y(Ii,{family:"regular",icon:"check-circle"})));case"initial":return y("a",{class:"rounded"},y("div",{class:"miniature video-raw",style:`background-image:url('${qn.crop(e.id,160,160)}')`}),y("div",{class:"spinner orange-spinner"},y("div",null),y("div",null),y("div",null),y("div",null),y("div",null)),e&&e.progress>0&&y("div",{class:"progress-bar"},y("div",{style:{width:`${e.progress}%`}})));default:if(/pdf/.test(e.type)||/video/.test(e.type)||"image/gif"==e.type)return y("a",{"data-nlg":!this.props.inWriter,"data-origin":qn.toApp(t),href:this.props.inWriter?void 0:qn.toApp(n),className:"rounded image"+(e.removed?" removed":"")},y("div",{className:"miniature"+(e.removed?" removed":""),style:`background-image:url('${qn.crop(e.id,160,160)}')`}),y("div",{class:"remove-button",style:e.removed?"color:red":"",fileIndex:e.fileIndex,onClick:e=>this.toggleFile(e)},y(Ii,{family:"solid",icon:"times"})));if(/image/.test(e.type)&&"image/gif"!=e.type)return y("a",{"data-nlg":!this.props.inWriter,"data-origin":qn.toApp(t),"data-src":qn.thumbnail(e.id,1366,768),href:this.props.inWriter?void 0:qn.toApp(n),class:"rounded"},y("div",{className:"miniature"+(e.removed?" removed":""),style:`background-image:url('${qn.crop(e.id,160,160)}')`}),y("div",{class:"remove-button",style:e.removed?"color:red":"",fileIndex:e.fileIndex,onClick:e=>this.toggleFile(e)},y(Ii,{family:"solid",icon:"times"})))}}renderBigFile(e){let t=e.contentUrl?`/files/${e.contentUrl}`:null,n=t;if(/image/.test(e.type)&&"image/gif"!=e.type&&(n=qn.thumbnail(e.id,1366,999999)),e.contentUrl){if(/video/.test(e.type))return"ready"==e.status?y("video",{poster:qn.thumbnail(e.id,1280,720),class:"img-fluid contained-height video",controls:"true",src:n}):y("a",{class:"image video-uploaded"},y("img",{class:"img-fluid video-raw",src:qn.crop(e.id,320,180)}),y("div",{class:"video-not-ready"},this.props.t("video_not_ready")));if(/pdf/.test(e.type))return y("a",{"data-nlg":!this.props.inWriter,"data-origin":qn.toApp(t),href:this.props.inWriter?void 0:qn.toApp(n),className:"pdf-outline image"+(e.removed?" removed":"")},y("img",{class:"img-fluid",src:qn.thumbnail(e.id,420,994)}),y("div",{class:"remove-button",style:e.removed?"color:red":"",fileIndex:e.fileIndex,onClick:e=>this.toggleFile(e)},y(Ii,{family:"solid",icon:"times"})));if(/image/.test(e.type))return y("a",{"data-nlg":!this.props.inWriter,"data-origin":qn.toApp(t),href:this.props.inWriter?void 0:qn.toApp(n),className:"image"+(e.removed?" removed":"")},y("img",{class:"img-fluid",src:n}),y("div",{class:"remove-button",style:e.removed?"color:red":"",fileIndex:e.fileIndex,onClick:e=>this.toggleFile(e)},y(Ii,{family:"solid",icon:"times"})))}return y("div",{class:"file-placeholder"},e.error?y("div",{class:"orange-error"},"Ã—"):y("div",{class:"spinner orange-spinner"},y("div",null),y("div",null),y("div",null),y("div",null),y("div",null)),y("div",{class:"progress-bar"},y("div",{style:{width:`${e.progress}%`}})))}render(){return this.props.files&&0!==this.props.files.length?this.props.files&&this.props.files.length>3?y("div",{class:"file-grid"},this.props.files.sort(((e,t)=>e.fileIndex>t.fileIndex?1:-1)).map((e=>this.renderMiniatureFile(e)))):y("div",{class:"d-flex justify-content-center flex-wrap"},this.props.files.sort(((e,t)=>e.fileIndex>t.fileIndex?1:-1)).map((e=>this.renderBigFile(e)))):null}componentDidMount(){s("igYK6").then((e=>e.default.start()))}componentDidUpdate(){s("igYK6").then((e=>e.default.start()))}constructor(e){super(e),this.toggleFile=this.toggleFile.bind(this);let t=[];Array.isArray(e.files)&&e.files.forEach(((e,n)=>{null==e.fileIndex&&(e.fileIndex=n),t.splice(e.fileIndex,0,e)})),this.state={files:t}}});class $i extends w{displayMessageText(){if(!this.props.message.data)return"";let e=this.props.message.data.text.replace(/</g,"&lt;").replace(/>/g,"&gt;").trim(),t=0,n=null;for(;n=qn.getUrl(e.slice(t));){let r=n[0];r.length>=50&&(r=`${r.slice(0,25)}...${r.slice(-24)}`);let i=`<a href="${n[0]}" target="_blank">${r}</a>`;e=e.slice(0,n.index+t)+i+e.slice(n.index+t+n[0].length),t+=n.index+i.length}return e=e.replace(/\n/g,"<br/>"),{__html:e}}componentDidMount(){this.componentWillUpdate()}componentWillUpdate(){if(!this.state.gotPreview&&this.props.message&&this.props.message.data){let e=qn.getUrl(this.props.message.data.text);e?Bn.get(`/api/links/by_url?url=${encodeURIComponent(e[0])}`).then((e=>{this.setState({preview:e,gotPreview:!0})})):this.setState({gotPreview:!0})}}render(){return y("div",{class:"message-body"},this.props.message.data&&this.props.message.data.title&&y("div",{class:"title"},y("span",null,this.props.message.data.title)),this.props.message.data&&this.props.message.data.text&&this.props.message.data.text.trim()&&y("p",{class:"card-text",dangerouslySetInnerHTML:this.displayMessageText()}),this.state.preview&&(!this.props.message.data||!this.props.message.data.no_embed)&&y(Ri,{key:this.state.preview.url,url:this.state.preview.url,preview:this.state.preview.preview,data:this.state.preview.data}),this.props.files&&y(Ti,{files:this.props.files}))}constructor(e){super(e),this.state={preview:null}}}var Di=Ot()(class extends w{onNewChild(e){const t=e.detail;t.parent&&qn.getId(t.parent)==this.props.id&&this.setState((e=>({lastDisplayedChild:e.lastDisplayedChild+1})))}loadMessage(){let e=0,t=0;if(this.props.childMessages.length){let n=Wn.action?this.props.childMessages.findIndex((e=>e&&e.id===Wn.action)):-1;-1!=n?(e=Math.max(0,n-1),t=Math.min(this.props.childMessages.length,n+1)):(e=this.props.childMessages&&this.props.childMessages.length-5,t=this.props.childMessages&&this.props.childMessages.length)}this.setState({firstDisplayedChild:e,lastDisplayedChild:t})}displayPreviousChildren(){this.setState((e=>({firstDisplayedChild:Math.max(0,e.firstDisplayedChild-10)})))}displayNextChildren(){this.setState((e=>({lastDisplayedChild:Math.min(this.props.childMessages.length,e.lastDisplayedChild+10)})))}componentDidMount(){this.loadMessage()}render(){return this.state.lastDisplayedChild-this.state.firstDisplayedChild<1||!this.props.childMessages?null:y("div",{class:"children"},this.state.firstDisplayedChild>0&&y("div",{class:"d-flex"},y("a",{class:"more-coms unselectable",onClick:()=>this.displayPreviousChildren()},this.props.t("previous_coms"))),this.props.childMessages.map(((e,t)=>t<this.state.firstDisplayedChild||t>this.state.lastDisplayedChild?null:y(Qi,{id:e.id,key:e.id,isPublic:this.props.isPublic}))),this.state.lastDisplayedChild+1<this.props.childMessages.length&&y("div",{class:"d-flex"},y("span",{class:"more-coms unselectable",onClick:()=>this.displayNextChildren()},this.props.t("next_coms"))))}constructor(e){super(e),this.onNewChild=this.onNewChild.bind(this),this.loadMessage=this.loadMessage.bind(this),this.displayPreviousChildren=this.displayPreviousChildren.bind(this),this.displayNextChildren=this.displayNextChildren.bind(this),this.state={firstDisplayedChild:0,lastDisplayedChild:0},window.addEventListener("newChild",this.onNewChild)}});function Ui(){return y("div",{class:"message-head d-flex"},y("div",null,y("img",{className:"rounded-circle material-shadow avatar"+(this.props.author&&this.props.author.name?"":" removed-user"),style:qn.backgroundHash(this.props.author&&this.props.author.name?this.props.author&&this.props.author.id:""),src:this.props.author&&this.props.author.avatar?qn.crop(this.props.author.avatar.id,100,100):qn.defaultAvatar,title:this.props.author&&this.props.author.name?this.props.author.name:""})),!this.props.isChild&&y("div",{class:"infos"},y("span",{class:"capitalize author"},this.props.author&&this.props.author.name?this.props.author.name:"")))}function Fi(){var e,t,n;const{t:r}=bt();return y("div",{class:"message-footer"},y("div",{class:"infos"},!this.props.isPublic&&this.props.author&&this.props.author.id==Kn.id&&y(b,null,y("a",{class:"action seamless-link font-size-90 capitalize d-none d-sm-block",onClick:e=>this.props.editMessage(e)},r("edit")),y("div",{class:"dot d-none d-sm-block"},"â€¢")),!this.props.isPublic&&this.props.isChild&&y(b,null,y(Si,{class:"action seamless-link font-size-90 capitalize",to:`/messages/${this.props.message.id}${this.props.message.children.length?"":"?focus=reply"}`},(null===(e=this.props)||void 0===e||null===(t=e.message)||void 0===t?void 0:t.children.length)?this.props.message.children.some((e=>Kn.isNew(e.id)))?y("b",null,r("replies",{count:this.props.message.children.length})):r("replies",{count:this.props.message.children.length}):r("reply")),y("div",{class:"dot"},"â€¢")),y("div",{class:"date font-size-90",title:qn.humanFullDate(this.props.message.createdAt)},qn.humanTime(this.props.message.createdAt)),y(b,null,y("div",{class:"dot"},"â€¢"),y("div",{class:"font-size-90"},this.props.author&&this.props.author.name?this.props.author.name:"--"))),y("div",null,!this.props.isPublic&&y("div",{class:"options dropdown",onClick:e=>{var t,n;return null===(n=null==e||null===(t=e.target)||void 0===t?void 0:t.closest(".dropdown"))||void 0===n?void 0:n.classList.toggle("active")}},y("div",{class:"none-if-follows-empty"},y(Ii,{family:"solid",icon:"ellipsis-h"})),y("div",{class:"dropdown-menu dropdown-options"},this.props.author&&this.props.author.id==Kn.id&&y(Si,{class:"seamless-link capitalize",onClick:e=>this.props.deleteMessage(e)},r("delete")),y("a",{class:"seamless-link capitalize",onClick:e=>this.props.openPublicLink(e)},r("public_link")),(null===(n=Kn.groups)||void 0===n?void 0:n.length)>1&&y("a",{class:"seamless-link capitalize",onClick:e=>this.props.shareMessage(e)},r("share_message")),!this.props.message.isInFront&&this.props.author&&this.props.author.id==Kn.id&&y("a",{class:"seamless-link capitalize",onClick:e=>this.props.publishInGroup(e)},r("publish_in_group")),!Kn.hasBookmark(this.props.message.id)&&y("a",{class:"seamless-link capitalize",onClick:()=>Kn.addBookmark(this.props.message.id)},r("add_bookmark")),Kn.hasBookmark(this.props.message.id)&&y("a",{class:"seamless-link capitalize",onClick:()=>Kn.removeBookmark(this.props.message.id)},r("remove_bookmark")),this.props.author&&this.props.author.id==Kn.id&&y("a",{class:"seamless-link capitalize",onClick:e=>this.props.editMessage(e)},r("edit"))))))}var zi=mi(class extends w{buildStack(e,t=[]){Bn.get(`/api/messages/${e.id}`).then((e=>{let n=qn.getUrl(e.data.text);n?Bn.get(`/api/links/by_url?url=${encodeURIComponent(n[0])}`).then((n=>{e.preview=n,t.push(e),(null==e?void 0:e.parent)?this.buildStack(e.parent,t):Bn.get(`/api/groups/${e.group.id}`).then((e=>{t.push(e),t=t.reverse(),this.setState({stack:t})}))})):(t.push(e),(null==e?void 0:e.parent)?this.buildStack(e.parent,t):Bn.get(`/api/groups/${e.group.id}`).then((e=>{t.push(e),t=t.reverse(),this.setState({stack:t})})))}))}componentDidMount(){this.buildStack({id:this.props.id})}getTitle(e){if(e){if(e.data&&e.data.title)return e.data.title;if(e.preview&&e.preview.data)return e.preview.data.title;if(e.data&&e.data.text){let t=qn.getUrl(e.data.text);return t&&t.length>0&&(t=t[0]),t||e.data.text}}return""}render(){var e;return(null===(e=this.state)||void 0===e?void 0:e.stack)?y("div",{class:"message-breadcrumbs"},y("nav",{style:"--bs-breadcrumb-divider: '>';"},y("ol",{class:"breadcrumb"},[this.state.stack[0],...this.state.stack.slice(-1*Math.min(3,this.state.stack.length)).slice(1)].map(((e,t)=>e&&e.id&&y(b,null,y(b,null,1==t&&this.state.stack.length>3&&y("li",{class:"breadcrumb-item"},"...")),y("li",{class:"breadcrumb-item"},y(Si,{key:e.id,to:`/${e.entityType}s/${e.id}`,class:"no-decoration"},qn.limitLength(("message"==e.entityType?this.getTitle(e):null==e?void 0:e.name)||e.id,40))))))))):null}});function Hi(){return Hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hi.apply(this,arguments)}s.register("cuyO9",(function(e,t){e.exports=import("./"+s("c1bOu").resolve("jrHYO")).then((()=>s("bIXtj")))}));var Vi=Ot()(mi(class extends w{componentWillMount(){this.setState({files:this.props.files||[],link:null,preview:null})}componentDidMount(){document.getElementById("title")&&(document.getElementById("title").value=this.props.title||""),document.getElementById("text")&&(document.getElementById("text").value=this.props.text||"")}componentWillUnmount(){clearInterval(this.state.workerManager)}onKeyPress(e,t=!1){e.ctrlKey&&qn.is_it_enter(e)?this.sendMessage():[" ","Enter","v"].includes(e.key)&&t&&this.genPreview(e.currentTarget)}genPreview(e){e.style.height="1px",e.style.height=`${25+e.scrollHeight}px`,setTimeout((()=>{let t=e.value.match(/(https?:\/\/[^\s]+)/gi);t&&t[0]!=this.state.link&&Bn.get(`/api/links/by_url?url=${encodeURIComponent(t[0])}`).then((n=>{n&&e.value.indexOf(t[0])>=0&&this.setState({link:t[0],preview:n})}))}),0)}toggleFile(e){let t=this.state.files,n=t.find((t=>t.fileIndex==e));n.removed=!n.removed,this.setState({files:t})}sendMessage(){this.props.messageId?this.putMessage():this.postMessage()}putMessage(){let e={files:this.state.files.filter((e=>!e.removed)).filter((e=>"ready"==e.status)).map((e=>e.id)).filter((e=>!!e)),data:{text:document.getElementById("text").value}};document.getElementById("title")&&(e.data.title=document.getElementById("title").value||""),Bn.put(`/api/messages/${this.props.messageId}`,e).then((e=>{this.setState({sending:!1}),e?window.dispatchEvent(new CustomEvent("editMessage",{detail:e})):Hn.add(this.props.t("error_new_message"),"alert-danger")})),this.setState({sending:!0})}postMessage(){let e={createdAt:Math.floor(Date.now()/1e3),author:Kn.id,group:qn.getId(this.props.group),children:[],files:this.state.files.filter((e=>!e.removed)).filter((e=>"ready"==e.status)).map((e=>e.id)).filter((e=>!!e)),data:{text:(document.getElementById("text").value||"").substring(0,5e4)},lastActivityDate:Math.floor(Date.now()/1e3)};this.props.parent&&(e.parent=qn.getId(this.props.parent)),document.getElementById("title")&&(e.data.title=document.getElementById("title").value||""),e.files.length||e.data.text||e.data.title?(Bn.post("/api/messages",e).then((e=>{if(!e)return this.setState({sending:!1}),void Hn.add(this.props.t("error_new_message"),"alert-danger");this.props.isChild?(this.setState({sending:!1}),window.dispatchEvent(new CustomEvent("newChild",{detail:e}))):setTimeout((()=>{window.dispatchEvent(new CustomEvent("newParent",{detail:e})),this.props.history.push(qn.toApp(`/messages/${e.id}`))}),500),this.setState({files:[],link:null,preview:null,writerId:qn.genId()}),document.getElementById("text")&&(document.getElementById("text").value="")})),this.setState({sending:!0})):Hn.add(this.props.t("empty_message"),"alert-danger")}inputGenericFile(e){const t=document.createElement("input");document.body.appendChild(t),t.style.display="none",t.type="file",t.accept=e,t.addEventListener("change",(t=>{this.addFile(t.target.files[0],e)})),t.click()}inputVideo(){const e=document.createElement("input");document.body.appendChild(e),e.style.display="none",e.type="file",e.accept="video/*",e.addEventListener("change",(e=>{this.addFile(e.target.files[0],"video")})),e.click()}inputImages(){const e=document.createElement("input");document.body.appendChild(e),e.style.display="none",e.type="file",e.multiple="multiple",e.accept="image/*",e.addEventListener("change",(e=>{Array.from(e.target.files).map((e=>this.addFile(e,"image")))})),e.click()}addFile(e,t){this.setState((n=>({files:[...n.files,{inputFile:e,type:t,id:qn.genId(),progress:0,status:"initial"}]})))}updateFile(e,t,n=null){this.setState((n=>({files:n.files.map((n=>n.id===e?Object.assign(n,t):n))})),n)}removeFile(e){this.setState((t=>({files:t.files.filter((t=>t.id!=e))})))}manageWorkers(){if(this.state.workers.length>=navigator.hardwareConcurrency)return;let e=this.state.files.find((e=>!this.state.workers.map((e=>e.target&&e.target.id)).includes(e.id)&&"initial"==e.status));if(e){let t={target:e,id:qn.genId()};this.setState((e=>({workers:[...e.workers,t]})),(()=>this.addWorker(t.id)))}}removeWorker(e){this.setState((t=>({workers:t.workers.filter((t=>t.id!=e))})))}addWorker(e){let t=this.state.workers.find((t=>t.id==e));switch(t.target.type){case"image":s("cuyO9").then((n=>{n.default.handleImage(t.target.inputFile,(n=>{this.updateFile(t.target.id,{inputFile:n},this.uploadFile(t.target.id,(()=>this.removeWorker(e))))}))}));break;case"video":case"application/pdf":this.uploadFile(t.target.id,(()=>this.removeWorker(e)));break;default:console.warn(t.target),console.warn("unknown file type for worker")}}uploadFile(e,t=null){const n=new FormData;let r=this.state.files.find((t=>t.id==e));if(!r||!r.inputFile)throw console.error(this.state,r,e),"error";n.append("file",r.inputFile),n.append("fileIndex",this.state.files.findIndex((e=>e.id==r.id)));let i=this.state.writerId;Bn.sendFile(n,(n=>{i==this.state.writerId&&(n.status="ready",this.updateFile(e,n,t))}),(t=>{this.updateFile(e,{progress:Math.floor(t.loaded/t.total*100)})}),(t=>{console.warn(t),Hn.add(this.props.t("error_upload"),"alert-danger"),this.removeFile(e)}))}render(){return this.state.sending?y("div",{class:"message-placeholder"},y("div",{class:"spinner orange-spinner"},y("div",null),y("div",null),y("div",null),y("div",null),y("div",null))):y("div",{class:"writer"},!this.props.isChild&&y("input",{type:"text",id:"title",onKeyPress:e=>this.onKeyPress(e),placeholder:this.props.t("title_placeholder")}),y("textarea",{onKeyPress:e=>this.onKeyPress(e,!0),id:"text",rows:"5",autocomplete:"off",autofocus:this.props.focus,placeholder:this.props.t("text_placeholder"),maxlength:"50000"}),this.state.preview&&y(Ri,Hi({inWriter:!0},this.state.preview)),!!this.state.files.length&&y(Ti,{key:this.state.files.reduce(((e,t)=>e+t.id+t.fileIndex+t.error),""),files:this.state.files,toggleFile:this.toggleFile,inWriter:!0}),y("div",{class:"options"},zn&&zn.info&&zn.info.upload&&zn.info.upload.image&&y("button",{class:"option",onClick:()=>this.inputImages(),title:this.props.t("upload_image")},y(Ii,{family:"regular",icon:"images"})),zn&&zn.info&&zn.info.upload&&zn.info.upload.video&&y("button",{class:"option",onClick:()=>this.inputVideo(),title:this.props.t("upload_video")},y(Ii,{family:"solid",icon:"film"})),zn&&zn.info&&zn.info.upload&&zn.info.upload.pdf&&y("button",{class:"option",onClick:()=>this.inputGenericFile("application/pdf"),title:this.props.t("upload_pdf")},y(Ii,{family:"regular",icon:"file-pdf"})),y("div",{class:"actions"},this.props.cancel&&y("button",{class:"cancel",onClick:e=>this.props.cancel(e)},this.props.t("cancel")),y("button",{disabled:!this.props.group,type:"submit",class:"submit",onClick:e=>this.sendMessage(e)},this.props.t("submit")))))}constructor(e){super(e),this.sendMessage=this.sendMessage.bind(this),this.genPreview=this.genPreview.bind(this),this.postMessage=this.postMessage.bind(this),this.putMessage=this.putMessage.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.toggleFile=this.toggleFile.bind(this),this.inputImages=this.inputImages.bind(this),this.inputVideo=this.inputVideo.bind(this),this.uploadFile=this.uploadFile.bind(this),this.addFile=this.addFile.bind(this),this.removeFile=this.removeFile.bind(this),this.updateFile=this.updateFile.bind(this),this.manageWorkers=this.manageWorkers.bind(this),this.removeWorker=this.removeWorker.bind(this),this.addWorker=this.addWorker.bind(this),this.state={files:[],writerId:qn.genId(),workers:[],workerManager:setInterval(this.manageWorkers,1e3)}}}));let Bi=H(),Ki="undefined"!=typeof window?fe:he,Wi=(qi=Bi,(...e)=>{let t=ve(qi),n=pe({});return Ki((()=>t.on("@changed",((t,r)=>{e.some((e=>e in r))&&n[1]({})}))),[]),me((()=>{let n=t.get(),r={};return e.forEach((e=>{r[e]=n[e]})),r.dispatch=t.dispatch,r}),[n[0]])});var qi;let Gi=(...e)=>{let t=e.pop();return Ae(((n,r)=>{let i={...n,...Wi(...e),ref:r};return y(t,i)}))};var Ji=Gi("me",Ot()(mi(class extends w{hydrateMessage(e){var t;Bn.get(`/api/users/${e.author.id}`).then((e=>{this.setState({author:e})})),(null==e||null===(t=e.parent)||void 0===t?void 0:t.id)&&Bn.get(`/api/messages/${e.parent.id}`).then((e=>{this.setState({parent:e})})),(null==e?void 0:e.files.length)&&Promise.all(e.files.map((e=>Bn.get(`/api/files/${e.id}`).then((e=>e))))).then((e=>this.setState({files:e}))),this.setState({message:e})}loadMessage(){Bn.get(`/api/messages/${this.props.id}`).then((e=>{this.hydrateMessage(e)}))}componentDidMount(){this.loadMessage(),Kn.removeMatchingNotifications(this.props.id),this.props.isChild||setTimeout((()=>window.scrollTo(0,0))),setTimeout((()=>{if(this.props.id==Wn.action){const e=document.getElementById(this.props.id);e&&(e.scrollIntoView({block:"start",behavior:"smooth"}),setTimeout((()=>e.classList.remove("highlight")),1e3))}}),1e3)}onNewChild(e){const t=e.detail;let n=this.state.message;t.parent&&qn.getId(t.parent)==n.id&&(t.author=Kn.get(),n.children=[...n.children,t],this.setState({message:n}))}async openPublicLink(e){e.preventDefault();let t=window.open("about:blank","_blank");const n=await Bn.get(`/api/messages/${this.props.id}/get-public-link`);t.location=`${document.baseURI}public/${n.token}`}onEditMessage(e){e.detail.id==this.props.id&&(this.setState({edit:!1}),this.hydrateMessage(e.detail),this.props.key=+Date.now())}getComponentClass(){let e="message";return this.props.isChild&&(e+=" child"),this.props.id==Wn.action&&(e+=" highlight"),e}deleteMessage(e){e.preventDefault(),confirm(this.props.t("ask_delete_message"))&&Bn.delete(`/api/messages/${this.props.id}`).then((()=>{this.props.isChild?this.setState({isRemoved:!0}):this.props.history.push(`/groups/${this.state.message.group.id}`,{data:{resetGroupDisplay:!0}})}))}shareMessage(e){e.preventDefault(),this.props.history.push(`/share?message=${this.props.id}`)}editMessage(e){e.preventDefault(),this.setState({edit:!0})}publishInGroup(){Bn.put(`/api/messages/${this.props.id}`,{lastActivityDate:Math.floor(Date.now()/1e3),isInFront:!0}).then((e=>{e?this.props.history.push(`/groups/${this.state.message.group.id}`):alert.add(this.props.t("error"),"alert-danger")}))}cancelEdit(e){e.preventDefault(),this.setState({edit:!1})}displayWriter(e,t){var n,r;return y(Vi,{cancel:this.state.edit?this.cancelEdit:null,files:this.state.edit?this.state.files:[],focus:t||!!this.state.edit,group:this.state.message.group,messageId:this.state.edit?this.props.id:null,parent:this.state.edit?null===(n=this.state)||void 0===n||null===(r=n.parent)||void 0===r?void 0:r.id:this.props.id,text:this.state.edit?this.state.message.data.text:"",title:this.state.edit?this.state.message.data.title:"",isChild:e})}render(){var e,t,n,r,i,s,o,a;return(null===(e=this.state)||void 0===e?void 0:e.isRemoved)||!(null===(t=this.state)||void 0===t?void 0:t.message)?y("div",{id:this.props.id,className:"message"}):y(b,null,!this.props.isChild&&y(zi,{id:this.props.id}),y("div",{id:this.props.id,className:this.getComponentClass()},this.state.edit&&this.displayWriter(this.props.isChild),!this.state.edit&&y(b,null,this.props.isChild&&this.state.edit&&y("div",{class:"message-head d-none d-md-block"},y("img",{class:"rounded-circle w-3 material-shadow avatar",style:qn.backgroundHash(Kn.id),src:Kn.avatar?qn.crop(null===(n=Kn.avatar)||void 0===n?void 0:n.id,100,100):qn.defaultAvatar})),y(Ui,{author:null===(r=this.state)||void 0===r?void 0:r.author,message:null===(i=this.state)||void 0===i?void 0:i.message,isPublic:this.props.isPublic,isChild:this.props.isChild}),y("div",{class:"main"},y($i,{message:this.state.message,files:(null===(s=this.state)||void 0===s?void 0:s.files)||[],isPublic:this.props.isPublic,isChild:this.props.isChild}),y(Fi,{author:null===(o=this.state)||void 0===o?void 0:o.author,message:null===(a=this.state)||void 0===a?void 0:a.message,editMessage:this.editMessage,deleteMessage:this.deleteMessage,shareMessage:this.shareMessage,publishInGroup:this.publishInGroup,openPublicLink:this.openPublicLink,isPublic:this.props.isPublic,isChild:this.props.isChild})))),this.props.postMessageComponent,!this.props.isChild&&y(Di,{childMessages:this.state.message.children,isPublic:this.props.isPublic,key:this.props.id,id:this.props.id}),!this.state.edit&&!this.props.isPublic&&!this.props.isChild&&y("div",{class:"message child mt-2"},Kn.id&&y("div",{class:"message-head d-none d-md-block"},y("img",{class:"rounded-circle w-3 material-shadow avatar",style:qn.backgroundHash(Kn.id),src:Kn.avatar?qn.crop(Kn.avatar.id,100,100):qn.defaultAvatar})),this.displayWriter(!0,this.props.focus)))}constructor(e){super(e),this.getComponentClass=this.getComponentClass.bind(this),this.editMessage=this.editMessage.bind(this),this.deleteMessage=this.deleteMessage.bind(this),this.shareMessage=this.shareMessage.bind(this),this.publishInGroup=this.publishInGroup.bind(this),this.cancelEdit=this.cancelEdit.bind(this),this.onEditMessage=this.onEditMessage.bind(this),this.openPublicLink=this.openPublicLink.bind(this),this.onNewChild=this.onNewChild.bind(this),this.loadMessage=this.loadMessage.bind(this),this.hydrateMessage=this.hydrateMessage.bind(this),window.addEventListener("newChild",this.onNewChild),window.addEventListener("editMessage",this.onEditMessage)}})));function Qi(){return y(Ji,{id:this.props.id,isPublic:this.props.isPublic,isChild:!0})}var Yi=Ot()(class extends w{getGroupName(){if(this.props.me.groups&&"group"==Wn.entity.entityType){let e=this.props.me.groups.find((e=>e.id==qn.getId(Wn.entity)));return e?e.name:""}return""}componentWillUnmount(){window.removeEventListener("routerStateChange",this.loadMessages)}componentDidMount(){this.loadMessages(),window.addEventListener("routerStateChange",this.loadMessages)}loadMessages(){const e=Wn.getParam("search"),t=Wn.getParam("hashtags");this.setState({search:e,hashtags:t}),Bn.post("/api/messages/search",{group:this.state.groupId,search:e,hashtags:t}).then((t=>{t&&Array.isArray(t.messages)&&this.setState({search:e,messages:t.messages,totalMessages:t.totalItems,loaded:!0})}))}render(){return Array.isArray(this.state.messages)&&y("div",null,y("article",{id:"group",class:"justify-content-center d-flex"},y("div",{class:"search-results-container container-fluid d-flex justify-content-center flex-wrap"},0==this.state.messages.length&&!this.state.loaded&&y("p",null,y("div",{class:"mt-5 spinner orange-spinner"},y("div",null),y("div",null),y("div",null),y("div",null),y("div",null))),0==this.state.messages.length&&this.state.loaded&&y("p",null,this.props.t("search_without_result")),this.state.messages.map(((e,t)=>y(ys,{tabindex:t+1,key:e.id,message:e,groupId:this.state.groupId,search:this.state.search,hashtags:this.state.hashtags}))))))}constructor(e){super(e),this.state={groupId:e.id,loaded:!1,messages:[],totalMessages:0,search:"",hashtags:""},this.loadMessages=this.loadMessages.bind(this)}});var Zi=Ot()(class extends w{postNewGroup(e){e.preventDefault();const t=document.querySelector("#create_group_form input[name='name']").value;let n={};if(!t)return!1;n.name=t,n.createdAt=Math.floor(Date.now()/1e3),Bn.post("/api/groups",n).then((e=>{Bn.post(`/api/groups/invitation/${e.secretKey}`,{}).then((e=>{window.location=Wn.toApp(`/groups/${e.id}`)}))}))}render(){return y("div",{class:"container mt-2"},y("div",{class:"group-settings"},y("div",{class:"card"},y("div",{class:"card-body"},y("div",{class:"container-fluid p-1"},y("div",{class:"row"},y("div",{class:"col-12 col-md-10"},y("form",{id:"create_group_form",class:"mb-1"},y("div",{class:"form-group"},y("label",{for:"name"},this.props.t("name"),": "),y("input",{type:"text",name:"name",minlength:"1",maxlength:"128",placeholder:this.props.t("name_input"),class:"form-control",required:!0})),y("button",{onClick:e=>this.postNewGroup(e),class:"btn btn-primary"},this.props.t("create_the_group"))))))))))}constructor(){super(),this.postNewGroup=this.postNewGroup.bind(this)}});var Xi=Gi("me",(function(){var e,t,n;if(Array.isArray(null===(e=Kn.data)||void 0===e?void 0:e.bookmarks)&&!((null===(t=Kn.data)||void 0===t?void 0:t.bookmarks.length)<1))return y("div",null,y("article",{id:"group",class:"justify-content-center d-flex"},y("div",{class:"message-container container-fluid d-flex justify-content-center flex-wrap"},null===(n=Kn.data)||void 0===n?void 0:n.bookmarks.map(((e,t)=>y(vs,{tabindex:t+1,key:e,id:e}))))))}));var es=Ot()(class extends w{componentDidMount(){Bn.get(`/api/notifications/${this.props.id}`).then((e=>{Promise.all([`/api/groups/${e.fromGroup.id}`,`/api/users/${e.fromUser.id}`,`/api/messages/${e.fromMessage.id}`].map((e=>Bn.get(e).then((e=>e))))).then((t=>{this.setState({target:this.getTarget(e,t[0],t[2]),action:this.getAction(e),title:this.getTitle(e,t[2]),notification:e,group:t[0],user:t[1],message:t[2]})}))}))}getMiniature(e,t){let n=qn.defaultAvatar;return t&&t.avatar&&"global_notification"!=e.type&&(n=qn.crop(t.avatar.id,80,80)),y("img",{style:qn.backgroundHash(t?t.id:""),src:n,onError:e=>this.setMiniatureOnError(e)})}setMiniatureOnError(e){e.currentTarget.src=qn.defaultAvatar}getAction(e){switch(null==e?void 0:e.type){case"new_message":return this.props.t("has_posted_in");case"new_comment":return this.props.t("has_commented_on");case"user_joined_group":return this.props.t("has_joined");case"user_left_group":return this.props.t("has_left");case"group_name_change":return this.props.t("changed_group_name");default:return""}}getTitle(e,t){switch(null==e?void 0:e.type){case"new_message":case"new_comment":if(t&&t.data){if(t.data.title)return t.data.title;if(t.data.text){let e=qn.getUrl(t.data.text);return e&&e.length>0&&(e=e[0]),e?(Bn.get(`/api/links/by_url?url=${encodeURIComponent(e)}`).then((e=>{var t,n,r;this.setState({title:(null==e||null===(t=e.data)||void 0===t?void 0:t.title)||(null==e||null===(n=e.data)||void 0===n?void 0:n.description)||(null==e||null===(r=e.data)||void 0===r?void 0:r.url)})})),e):t.data.text}}return"";default:return""}}getObject(e){switch(null==e?void 0:e.type){case"new_message":var t;return y(b,null,y("strong",null,null===(t=this.state)||void 0===t?void 0:t.group.name),this.state.title&&y(b,null,y("br",null),y("small",null,y("em",null,qn.limitStrSize(this.state.title,52)))));case"new_comment":return y("span",null,`${this.props.t("the_message_from")} `,y("strong",null,this.state.message&&this.state.message.author?this.state.message.author.name:""),this.state.title&&y(b,null,y("br",null),y("small",null,y("em",null,qn.limitStrSize(this.state.title,52)))));case"user_joined_group":case"user_left_group":var n;return y("strong",null,null===(n=this.state)||void 0===n?void 0:n.group.name);case"group_name_change":return y("span",null,y("strong",null,this.state.notification.data.previousGroupName),` ${this.props.t("to")} `,y("strong",null,this.state.notification.data.newGroupName));case"global_notification":return this.state.notification.data.text;default:return""}}getTarget(e,t,n){switch(null==e?void 0:e.type){case"user_joined_group":case"user_left_group":case"group_name_change":return`/groups/${t.id}`;case"new_message":return`/messages/${e.target}`;case"new_comment":return`/messages/${n.id}/${e.target}`;case"global_notification":return e.target;default:return""}}render(){var e;return(null===(e=this.state)||void 0===e?void 0:e.notification)?y(Si,{class:"notification seamless-link unselectable",to:this.state.target,title:this.state.title},y("div",{class:"miniature unselectable"},this.getMiniature(this.state.notification,this.state.user)),y("div",{class:"infos"},y("div",{class:"description"},"global_notification"!=this.state.notification.type&&y(b,null,y("strong",null,this.state.user.name||"--"),y("span",null,` ${this.state.action} `)),this.getObject(this.state.notification)),y("div",{class:"date"},qn.humanTime(this.state.notification.createdAt)))):null}constructor(e){super(e),this.state={target:null,action:null,title:null,notification:null,group:null,user:null,message:null}}});var ts=mi(Gi("entity",(function(){const{t:e}=bt();let t=vi(Zr);return y("form",{class:"navbar-block search-block",onSubmit:e=>(e.preventDefault(),void Wn.getEntity().then((e=>{let n=null;switch(e.entityType){case"group":n=e.id;break;case"message":n=e.group.id}let r=document.getElementById("search").value.normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" ");t.push(`/groups/${n}?search=${r.join("+")}`)})))},y("div",{class:"input-group"},y("input",{class:"form-control",type:"text",id:"search",placeholder:e("search_in_group"),value:Wn.getParam("search")}),y("div",{class:"input-group-append"},y("button",{class:"btn btn-secondary",type:"submit"},y(Ii,{family:"solid",icon:"search"})))))})));var ns=Ot()(Gi("me",class extends w{componentDidMount(){const e=Kn.on("@changed",(()=>t()));let t=()=>{if(1==this.state.loaded)return void e();let t=Kn.get();1==t.loaded&&(t.data.default_group?(this.setState({group:t.data.default_group}),Wn.backUrl=`/groups/${t.data.default_group}`):1==t.groups.length&&(this.setState({group:t.groups[0].id}),Wn.backUrl=`/groups/${t.groups[0]}`),this.state.currentUrl.searchParams.get("message")?Bn.get(`/api/messages/${this.state.currentUrl.searchParams.get("message")}`).then((e=>{this.setState({loaded:!0,title:e&&e.data.title||"",text:e&&e.data.text||"",url:"",files:e&&e.files||null})})):this.setState({loaded:!0}),e())}}groupSelect(e){this.setState({group:e.target.value}),Wn.backUrl=`/groups/${e.target.value}`}render(){if(this.props.me.loaded)return y("article",{class:"mt-2"},y("div",{class:"container"},this.state.parent&&this.props.me&&this.props.me.groups.length>1&&y("div",{class:"mb-1"},y("label",{class:"px-1",for:"group_share_choice"},this.props.t("group_share_choice")),y("select",{value:this.state.group,class:"form-control",name:"group_share_choice",onChange:e=>this.groupSelect(e),required:!0},this.props.me.groups.map((e=>y("option",{value:e.id},e.name))))),this.state.parent&&y("div",{class:"form-group"},y("label",{for:"apiKey"},this.props.t("parent_message"),":"," "),y("input",{type:"text",name:"parent_message",value:this.state.parent,class:"form-control font-size-80",readonly:"readonly"})),y(Vi,{focus:!0,group:this.state.group,title:this.state.title,parent:this.state.parent,text:this.state.text||this.state.url?`${this.state.text}\n${this.state.url}`:"",files:this.state.files})))}constructor(){super();let e=new URL(window.location);this.state={loaded:!1,group:null,currentUrl:e,title:e.searchParams.get("title")||"",text:e.searchParams.get("text")||"",url:e.searchParams.get("url")||"",parent:e.searchParams.get("parent")||"",files:null},this.groupSelect=this.groupSelect.bind(this)}}));const rs=Zi,is=class extends w{onNewParent(){this.loadMessages(0)}componentDidMount(){this.loadMessages(0),window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){window.removeEventListener("scroll",this.onScroll)}loadMessages(e){Bn.get(`/api/groups/${this.props.id}`).then((e=>{this.setState({group:e})})),Bn.get(`/api/groups/${this.props.id}/page/${e}`).then((t=>{if(t&&Array.isArray(t.messages)){let n=Math.max(this.state.loaded,30*e),r=this.state.messages;t.messages.map((e=>!r.find((t=>t.id==e.id))&&r.push(e))),this.setState({messages:r,totalMessages:t.totalItems,page:e,loaded:n}),30*(e+1)<n&&setTimeout((()=>this.loadMessages(e+1)))}}))}onScroll(){"none"!=window.getComputedStyle(document.getElementById("group").parentNode).display&&this.scroll_cooldown+100<Date.now()&&(this.scroll_cooldown=Date.now(),this.setState({pageYOffset:window.pageYOffset}),Array.isArray(this.state.messages)&&document.body.scrollHeight-window.screen.height-500<window.pageYOffset&&this.state.loaded<this.state.totalMessages&&(this.setState((e=>({loaded:e.loaded+10}))),this.state.loaded+30>this.state.messages.length&&(this.loadMessages(this.state.page+1),this.setState((e=>({page:e.page+1}))))))}render(){if(this.props.id)return y("main",null,y(fs,null),y("div",{class:"content"},y("div",null,y("div",null,y("article",{id:"group",class:"justify-content-center d-flex"},y("div",{class:"message-container container-fluid d-flex justify-content-center flex-wrap"},Array.isArray(this.state.messages)&&this.state.messages.slice(0,this.state.loaded).map(((e,t)=>y(vs,{tabindex:t+1,key:e.id,id:e.id})))))),y(Si,{class:"write-button material-shadow seamless-link",to:`/groups/${this.props.id}/write`},y(Ii,{family:"solid",icon:"pencil-alt"})))))}constructor(e){super(e);let t=1+Math.floor(window.screen.width*window.screen.height/68800);this.state={loaded:t,messages:[],scrollTop:0,totalMessages:0,pageYOffset:0,page:0},this.scroll_cooldown=Date.now(),this.onScroll=this.onScroll.bind(this),this.loadMessages=this.loadMessages.bind(this),this.onNewParent=this.onNewParent.bind(this),window.addEventListener("newParent",this.onNewParent)}},ss=Xi,os=es,as=ts,ls=ns,us=class extends w{componentDidMount(){Kn.fetch().then((e=>{let t=!1,n="/login";var r;e&&(t=!0,n="/create-group",(null===(r=e.data)||void 0===r?void 0:r.default_group)?n=`/groups/${null==e?void 0:e.data.default_group}`:(null==e?void 0:e.groups[0])&&(n=`/groups/${null==e?void 0:e.groups[0].id}`));this.setState({loaded:!0,connected:t,redirect:n})}))}render(){return this.state.loaded?y(si,{to:this.state.redirect}):null}constructor(e){super(e),this.state={connected:!1,loaded:!1,redirect:""}}};var cs=Gi("me",mi((function(){var e,t;const{t:n}=bt();return y("div",{class:"main-nav nav align-items-center z-index-100"},y("div",{class:"navbar-block"},y("div",{class:"menu dropdown cursor-pointer",tabindex:"-1",onClick:e=>e.currentTarget.classList.toggle("active")},y("div",{class:"rounded-circle avatar unselectable"},y("img",{class:"rounded-circle",style:qn.backgroundHash(this.props.me.id),src:this.props.me.avatar?qn.crop(this.props.me.avatar.id,80,80):qn.defaultAvatar,onError:e=>e.currentTarget.src=qn.defaultAvatar})),y("div",{class:"dropdown-menu dropdown-right"},(null===(e=this.props.me.data)||void 0===e||null===(t=e.bookmarks)||void 0===t?void 0:t.length)&&y(Si,{class:"d-block seamless-link capitalize",to:"/bookmarks"},n("bookmarks")),y(Si,{class:"d-block seamless-link capitalize",to:`/users/${this.props.me.id}/settings`},n("settings")),y(Si,{class:"d-block seamless-link capitalize",to:"/logout"},n("logout")))),y(gs,null)),["messages","groups"].includes(Wn.route)&&y(as,null),y("div",{class:"navbar-block"},y(hs,{groups:this.props.me.groups})))})));function ps(){return ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ps.apply(this,arguments)}const ds=Yi,hs=function(){const{t:e}=bt();return y(b,null,this.props.groups&&y("div",{class:"nav-link dropdown groups unselectable",tabindex:"-1",onClick:e=>e.currentTarget.classList.toggle("active")},y("div",{class:"unselectable pr-1"},e("groups")," ",y(Ii,{family:"solid",icon:"caret-down"})),y("div",{class:"dropdown-menu dropdown-left"},this.props.groups.map((e=>y(Si,{key:e.id,to:`/groups/${e.id}`,class:"d-block seamless-link unselectable"},e.name))),y(Si,{to:"/create-group",class:"seamless-link unselectable"},`+ ${e("create_a_group")}`))))},fs=cs,gs=function(){const{dispatch:e,notifications:t}=Wi("notifications");if(!t)return null;const{t:n}=bt();return y("div",{className:"menu dropdown"+(t.length?" cursor-pointer":""),title:n("notifications"),tabindex:"-1",onClick:e=>t.length&&e.currentTarget.classList.toggle("active")},y("div",{class:"unselectable button-with-count"},y(Ii,{family:t.length?"solid":"regular",icon:"bell"}),!!t.length&&y("span",{class:"badge-count"},Math.min(t.length,99)+(t.length>99?"+":""))),y("div",{class:"dropdown-menu dropdown-right notifications-menu"},y("div",{class:"notification-header"},y("strong",{class:"capitalize"},n("notifications")),y("div",{class:"action capitalize",onClick:()=>Kn.removeAllNotifications()},n("mark_all_as_read"))),(null==t?void 0:t.length)&&t.sort(((e,t)=>t.createdAt-e.createdAt)).slice(0,99).map((e=>y(os,ps({key:e.id},e))))))};const ms=function(){return y("main",null,y(fs,null),y("div",{class:"content"},y("article",{class:"mb-3 justify-content-center d-flex"},y("div",{class:"container pb-3"},y(Ji,{focus:!!Wn.getParam("focus",Wn.search),isPublic:this.props.isPublic,isChild:!1,id:this.props.id})))))},vs=class extends w{componentDidMount(){Bn.get(`/api/messages/${this.props.id}/preview`).then((e=>{this.setState({...e})}))}render(){var e,t,n,r,i,s,o,a,l,u,c,p,d;return(null===(e=this.state)||void 0===e?void 0:e.id)?y(Si,{to:`/messages/${this.state.id}`,class:"d-inline-block seamless-link message-preview unselectable",title:null===(t=this.state)||void 0===t?void 0:t.data.title},y("div",{tabindex:this.props.tabindex,class:"card material-shadow-with-hover"},y("img",{title:(d=this.state.author)?d.name:"--",className:"avatar material-shadow"+(d?"":" removed-user"),style:qn.backgroundHash(d?d.id:""),src:(null==d?void 0:d.avatar)?qn.crop(d.avatar.id,100,100):qn.defaultAvatar,onError:e=>e.currentTarget.src=qn.defaultAvatar}),(null===(n=this.state)||void 0===n?void 0:n.preview)?y("div",{class:"card-miniature",style:`background-image: url('${qn.crop(qn.getId(null===(r=this.state)||void 0===r?void 0:r.preview),320,180)}')`}):y("div",{class:"text-preview"},null===(i=this.state)||void 0===i?void 0:i.data.text),y("div",{class:"card-body border-top d-flex justify-content-between"},y("span",{class:"left-buffer"}),y("span",{class:"title",title:(null===(s=this.state)||void 0===s?void 0:s.data.title)||qn.humanFullDate(null===(o=this.state)||void 0===o?void 0:o.lastActivityDate)},(null===(a=this.state)||void 0===a?void 0:a.data.title)||qn.humanTime(null===(l=this.state)||void 0===l?void 0:l.lastActivityDate)),y("span",{class:"children"},!!(null===(u=this.state)||void 0===u?void 0:u.children)&&y("span",null,`${null===(c=this.state)||void 0===c?void 0:c.children} `,y(Ii,{family:Kn.isNew(null===(p=this.state)||void 0===p?void 0:p.id)?"solid":"regular",icon:"comment"})))))):null}constructor(e){super(e),this.state={author:null,preview:null,id:null,data:null,lastActivityDate:null}}},ys=class extends w{componentDidMount(){this.props.message.author&&Bn.get(`/api/users/${this.props.message.author}`).then((e=>e&&this.setState({author:e})))}displayAuthorName(){if(!this.state.author)return{__html:"--"};let e=this.state.author.name,t=e.split(" ");for(let e=0;e<t.length;e++)if(!t[e].match(qn.urlRegExp)){let n=this.props.search.split(" ");for(let r=0;r<n.length;r++)t[e]=t[e].replace(new RegExp(qn.escapeRegex(n[r]),"gi"),"<b>$&</b>")}return e=t.join(" "),{__html:e}}displayMessageTitle(){var e,t,n,r,i;if(!(null===(e=this.props)||void 0===e||null===(t=e.message)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.title))return{__html:qn.humanTime(null===(r=this.props)||void 0===r||null===(i=r.message)||void 0===i?void 0:i.lastActivityDate)};let s=this.props.message.data.title.replace(/</g,"&lt;").replace(/>/g,"&gt;").trim(),o=s.split(" ");console.log(s);let a=this.props.search.split(" ");for(let e=0;e<o.length;e++)if(!o[e].match(qn.urlRegExp))for(let t=0;t<a.length;t++)o[e]=o[e].replace(new RegExp(qn.escapeRegex(a[t]),"gi"),"<b>$&</b>");return s=o.join(" "),{__html:s}}displayMessageText(){if(!this.props.message.data||!this.props.message.data.text)return"";let e=this.props.message.data.text.replace(/</g,"&lt;").replace(/>/g,"&gt;").trim(),t=e.split("\n");for(let e=0;e<t.length;e++){let n=t[e].split(" ");for(let e=0;e<n.length;e++)if(!n[e].match(qn.urlRegExp)){let t=this.props.search.split(" ");for(let r=0;r<t.length;r++)t[r]&&(n[e]=n[e].replace(new RegExp(qn.escapeRegex(t[r]),"gi"),"<b>$&</b>"));let r=this.props.hashtags.split(" ");for(let t=0;t<r.length;t++)r[t]&&(n[e]=n[e].replace(new RegExp(`#${r[t]}`,"gi"),"<b>$&</b>"))}t[e]=n.join(" ")}e=t.join("\n");let n=0,r=null;for(;r=qn.getUrl(e.slice(n));){let t=r[0];t.length>=50&&(t=`${t.slice(0,25)}...${t.slice(-24)}`);let i=this.props.search.split(" ");for(let e=0;e<i.length;e++)t=t.replace(new RegExp(qn.escapeRegex(i[e]),"gi"),"<b>$&</b>");let s=`<a href="${r[0]}" target="_blank">${t}</a>`;e=e.slice(0,r.index+n)+s+e.slice(r.index+n+r[0].length),n+=r.index+s.length}return e=e.replace(/\n/g,"<br/>"),{__html:e}}getMiniature(){if(this.state.preview)return y("div",{class:"card-miniature",style:`background-image: url('${qn.crop(this.state.preview,100,100)}')`});let e=qn.defaultAvatar;return this.state.author&&this.state.author.avatar&&this.state.author.avatar.id&&(e=qn.crop(this.state.author.avatar.id,100,100)),y("div",{class:"card-miniature",style:`background-image: url('${e}')`})}getLink(){return this.state.message.parent&&0==this.state.message.children?`/messages/${this.state.message.parent}/${this.state.message.id}`:`/messages/${this.state.message.id}`}render(){return y(Si,{class:"d-inline-block seamless-link message-preview unselectable",to:this.getLink(),title:this.state.title},y("div",{tabindex:this.props.tabindex,class:"card material-shadow-with-hover"},y("div",{class:"card-body border-top"},this.getMiniature(),y("div",{class:"infos"},y("div",{class:"title",dangerouslySetInnerHTML:this.displayAuthorName()}),y("div",{class:"dot"},"â€¢"),y("div",{class:"title",title:this.state.title||qn.humanFullDate(this.state.message.lastActivityDate),dangerouslySetInnerHTML:this.displayMessageTitle()})),y("div",{class:"text"},this.state.text.trim()&&y("p",{class:"card-text",dangerouslySetInnerHTML:this.displayMessageText()})),y("div",{class:"children"},!!this.state.message.children&&y("span",null,`${this.state.message.children} `,y(Ii,{family:Kn.isNew(this.state.message.id)?"solid":"regular",icon:"comment"}))))))}constructor(e){super(e),this.state={message:e.message,title:e.message.data.title||"",text:e.message.data.text||"",preview:e.message.preview||null},this.getMiniature=this.getMiniature.bind(this),this.getLink=this.getLink.bind(this),this.displayMessageTitle=this.displayMessageTitle.bind(this),this.displayMessageText=this.displayMessageText.bind(this)}};const _s=Pi,bs=Ai,ws=ji,ks=Mi,xs=class extends w{componentDidMount(){this.props.token&&Bn.get(`/api/public/${this.props.token}`).then((e=>this.setState({message:e})))}render(){if(this.state.message)return y("article",{class:"justify-content-center d-flex mt-2"},y("div",{class:"container"},y(ms,{isPublic:!0,key:this.state.message.id,message:this.state.message})))}constructor(e){super(e),this.state={}}};var Ss=Ot()(mi(class extends w{componentDidMount(){Promise.all(this.props.users.map((e=>Bn.get(`/api/users/${e.id}`).then((e=>e))))).then((e=>this.setState({users:e})))}resetSecretKey(e){e.preventDefault(),Bn.post(`/api/groups/${this.state.id}/reset-invite-key`,{}).then((e=>{Hn.add(this.props.t("group_updated")),this.setState({secretKey:e.inviteKey})}))}updateSettings(e){e.preventDefault();const t=document.querySelector("#settings_form input[name='name']").value;let n={};t&&(n.name=t),Bn.put(`/api/groups/${this.state.id}`,n).then((e=>{Hn.add(this.props.t("group_updated")),this.setState((t=>Object.assign(t,e)))}))}leaveGroup(e){var t;if(e.preventDefault(),(null===(t=Kn.data)||void 0===t?void 0:t.default_group)==this.state.id){let e={};e.data={default_group:Kn.groups[0].id},Bn.put(`/api/users/${Kn.id}`,e).then((()=>{this.props.dispatch("me/fetch"),this.leave()}))}else this.leave()}leave(){Bn.post(`/api/groups/${this.state.id}/leave`,{}).then((e=>{e&&e.entityType?(this.props.dispatch("me/fetch"),Hn.add(this.props.t("group_left")),this.props.history.push("/")):Hn.add(this.props.t("error"),"alert-danger")}))}render(){return y("div",null,y("div",{class:"group-settings mb-3"},y("div",{class:"card"},y("div",{class:"card-body"},y("div",{class:"container-fluid p-1"},y("div",{class:"row"},y("div",{class:"col-12 col-md-10"},y("form",{id:"settings_form",class:"mb-1 border-bottom pb-1"},y("div",{class:"form-group"},y("label",{for:"name"},this.props.t("name"),": "),y("input",{type:"text",name:"name",minlength:"1",maxlength:"128",placeholder:this.props.t("name_input"),value:this.state.name,class:"form-control",required:!0})),y("button",{onClick:this.updateSettings,class:"btn btn-outline-secondary"},this.props.t("save_changes"))),y("form",{class:"mb-1 border-bottom pb-1"},y("div",{class:"form-group"},y("label",{for:"inviteKey"},this.props.t("invitation_link"),":"," "),y("input",{type:"text",name:"inviteKey",value:`${location.protocol}//${location.host}/invitation/${this.state.secretKey}`,class:"form-control font-size-80",readonly:"readonly"})),y("button",{class:"btn btn-outline-secondary",onClick:this.resetSecretKey},this.props.t("reset_invitation_link"))),y("form",null,y("button",{onClick:e=>this.leaveGroup(e),class:"btn btn-outline-danger"},this.props.t("quit_group"))))))))),y("div",{class:"user-list mb-3"},y("h3",null,this.props.t("users")),this.state.users.map((e=>e&&y("div",{class:"user-card"},y("img",{class:"avatar material-shadow-with-hover",style:qn.backgroundHash(e.id),src:e.avatar?qn.crop(e.avatar.id,200,200):qn.defaultAvatar,onError:e=>e.currentTarget.src=qn.defaultAvatar}),y("span",null,e.name))))))}constructor(e){super(e),this.updateSettings=this.updateSettings.bind(this),this.leaveGroup=this.leaveGroup.bind(this),this.leave=this.leave.bind(this),this.resetSecretKey=this.resetSecretKey.bind(this),this.state=Object.assign({hydratedUsers:[]},e)}}));var Cs=Ot()(class extends w{componentDidMount(){Vn.get("apiKey").then((e=>this.setState({apiKey:e})))}resetApiKey(e){e.preventDefault(),Bn.post(`/api/users/${this.state.id}/reset-api-key`,{}).then((()=>Wn.logout()))}inputAvatar(){const e=document.createElement("input");e.type="file",e.accept="image/*",e.addEventListener("change",(e=>{s("cuyO9").then((t=>{t.default.handleImage(e.target.files[0],(e=>{const t=new FormData;t.append("file",e),Bn.post("/api/files",t,!1).then((e=>{Bn.put(`/api/users/${this.state.id}`,{avatar:e.id}).then((()=>{this.setState({avatar:e}),Hn.add(this.props.t("settings_updated"))}))}))}))}))})),e.click()}destroyAccount(e){e.preventDefault(),confirm(this.props.t("are_you_sure"))&&Bn.delete(`/api/users/${this.state.id}`).then((()=>{this.props.history.push("/logout")}))}updateSettings(e){e.preventDefault();const t=document.querySelector("#settings_form input[name='name']").value,n=document.querySelector("#settings_form input[name='email']").value,r=document.querySelector("#settings_form input[name='password']").value,i=document.querySelector("#settings_form select[name='notification_emails']").value,s=document.querySelector("#settings_form select[name='default_group']").value,o=document.querySelector("#settings_form select[name='lang']").value;let a={};t&&(a.name=t),n&&(a.login=n),r&&(a.password=r),a.data={notification_emails:i,default_group:s,lang:o},Bn.put(`/api/users/${this.state.id}`,a).then((e=>{e.error?Hn.add(e.error,"alert-danger"):(this.setState((t=>Object.assign(t,e))),location.href=qn.toApp(`${location.pathname}?alert=settings_updated`))}))}render(){var e;return y("div",{class:"user-settings"},y("div",{class:"card"},y("div",{class:"identite card-body"},y("div",{class:"container-fluid p-1"},y("div",{class:"row"},y("div",{class:"col-12 col-md-2"},y("img",{class:"img-fluid rounded-circle material-shadow avatar",src:this.state.avatar?qn.crop(this.state.avatar.id,100,100):qn.defaultAvatar,style:qn.backgroundHash(this.state.id||""),onError:e=>e.currentTarget.src=qn.defaultAvatar,onClick:e=>this.inputAvatar(e)})),y("div",{class:"col-12 col-md-10"},y("form",{id:"settings_form",class:"mb-3"},y("div",{class:"form-group"},y("label",{for:"name"},this.props.t("name"),": "),y("input",{type:"text",name:"name",minlength:"1",maxlength:"128",placeholder:this.props.t("name_input"),value:this.state.name,class:"form-control"})),y("div",{class:"form-group"},y("label",{for:"email"},this.props.t("email"),": "),y("input",{type:"email",name:"email",placeholder:this.props.t("email_input"),value:this.state.login,class:"form-control"})),y("div",{class:"form-group"},y("label",{for:"password"},this.props.t("password"),": "),y("input",{type:"password",name:"password",autocomplete:"off",minlength:"8",maxlength:"128",placeholder:this.props.t("password_input"),class:"form-control"})),y("div",{class:"form-group"},y("label",{for:"notification_emails"},this.props.t("notification_emails"),":"),y("select",{name:"notification_emails",class:"form-control",value:this.state.data.notification_emails},y("option",{value:"none"},this.props.t("none")),y("option",{value:"hourly"},this.props.t("hourly")),y("option",{value:"daily"},this.props.t("daily")),y("option",{value:"weekly"},this.props.t("weekly")),y("option",{value:"monthly"},this.props.t("monthly")))),y("div",{class:"form-group"},y("label",{for:"default_group"},this.props.t("default_group"),":"),y("select",{name:"default_group",class:"form-control",value:this.state.data.default_group},null===(e=Kn.groups)||void 0===e?void 0:e.map((e=>y("option",{key:e.id,value:e.id},e.name))))),y("div",{class:"form-group"},y("label",{class:"capitalize",for:"lang"},this.props.t("lang"),":"),y("select",{name:"lang",class:"form-control",value:Gn.getCurrentLang()},Object.keys(Gn.possibleLang).map((e=>y("option",{key:e,value:e},Gn.possibleLang[e]))))),y("button",{onClick:e=>this.updateSettings(e),class:"btn btn-primary"},this.props.t("save_changes"))),y("form",{id:"api_key_form"},y("div",{class:"form-group"},y("label",{for:"apiKey"},this.props.t("api_key"),":"," "),y("input",{type:"text",name:"apiKey",value:this.state.apiKey,class:"form-control font-size-80",readonly:"readonly"})),y("button",{class:"btn btn-outline-secondary",onClick:this.resetApiKey},this.props.t("reset_api_key"))),y("form",{id:"destroy_form"},y("label",{class:"d-block",for:"destroy_account"},this.props.t("destroy_account_explain")),y("button",{onClick:e=>this.destroyAccount(e),name:"destroy_account",class:"btn btn-danger"},this.props.t("destroy_account")))))))),this.state.alert&&y("div",{class:"global-alert alert alert-success"},this.state.alert))}constructor(e){super(e),this.destroyAccount=this.destroyAccount.bind(this),this.inputAvatar=this.inputAvatar.bind(this),this.updateSettings=this.updateSettings.bind(this),this.resetApiKey=this.resetApiKey.bind(this),this.state=Object.assign({apiKey:""},e)}});var Os=Ot()(Gi("me",class extends w{componentDidMount(){Bn.get(`/api/${this.props.type}/${this.props.id}`).then((e=>{this.setState({entity:e})}))}render(){var e,t;if(this.state.entity&&this.props.me.id)return y("main",null,y(fs,null),y("div",{class:"content"},y("article",{class:"mt-2 justify-content-center d-flex"},y("div",{class:"container pb-3"},y("div",{class:"settings"},y("ul",{class:"nav nav-tabs"},y("li",{class:"nav-item"},y(Si,{class:"nav-link"+("user"==this.state.entity.entityType?" active":""),to:`/users/${this.props.me.id}/settings`},this.props.t("account"))),(null===(e=this.props.me.groups)||void 0===e?void 0:e.length)>0&&y("li",{class:"nav-item dropdown group-list",tabindex:"-1",onClick:e=>e.currentTarget.classList.toggle("active")},y("div",{class:"nav-link"+("group"==this.state.entity.entityType?" active":"")},this.props.t("groups")),y("div",{class:"dropdown-menu"},null===(t=this.props.me.groups)||void 0===t?void 0:t.map((e=>y(Si,{class:"seamless-link",to:`/groups/${e.id}/settings`},e.name)))))),"user"===this.state.entity.entityType&&y(Cs,this.state.entity),"group"===this.state.entity.entityType&&y(Ss,this.state.entity))))))}constructor(e){super(e),this.state={}}}));const Es=Os;var Ps=mi(class extends w{render(){return y(yi,null,y(gi,null,y(ui,{path:"/",exact:!0,render:()=>y(us,null)}),y(ui,{path:"/signup",render:()=>y(ws,null)}),y(ui,{path:"/stop-notification-emails",render:()=>y(ks,null)}),y(ui,{path:"/public/:token",render:e=>y(xs,{token:e.match.params.token,key:e.match.params.token})}),y(ui,{path:"/reset-password",render:()=>y(bs,null)}),y(ui,{path:"/login",render:()=>y(_s,null)}),y(ui,{path:"/logout",render:()=>Kn.logout()}),y(ui,{path:"/:type/:id/settings",render:e=>y(Es,{type:e.match.params.type,id:e.match.params.id,key:e.match.params.id})}),y(ui,{path:"/create-group",render:()=>y("main",null,y(fs,null),y("div",{class:"content"},y(rs,null),";"))}),y(ui,{path:"/share",render:()=>y("main",null,y(fs,null),y("div",{class:"content"},y(ls,null),";"))}),y(ui,{path:"/messages/:id",render:e=>y(ms,{key:e.match.params.id,id:e.match.params.id,isPublic:!1})}),y(ui,{path:"/bookmarks",render:()=>y("main",null,y(fs,null),y("div",{class:"content"},y("div",null,y(ss,null))))}),y(ui,{path:"/groups/:id/write",render:e=>y("main",null,y(fs,null),y("div",{class:"content"},y("article",{class:"mb-3"},y("div",{class:"container pb-3"},y(Vi,{focus:!0,group:e.match.params.id})))))}),y(ui,{path:"/groups/:id",render:e=>Wn.getParam("search",e.location.search.substring(1))||Wn.getParam("hashtags",e.location.search.substring(1))?y("main",null,y(fs,null),y("div",{class:"content"},y("article",{class:"mb-3"},y("div",{class:"container pb-3"},y(ds,{key:e.match.params.id,id:e.match.params.id}))))):y(is,{key:e.match.params.id,id:e.match.params.id})})))}constructor(e){super(e),zn.update(),Kn.update(),Gn.init(),window.addEventListener("fetchedNewDict",(()=>{setTimeout((()=>this.setState({lang:"up"})),10)})),window.addEventListener("click",(e=>{e.target.closest(".dropdown")?document.querySelectorAll(".dropdown").forEach((t=>{t!=e.target.closest(".dropdown")&&t.classList.remove("active")})):document.querySelectorAll(".dropdown").forEach((e=>e.classList.remove("active")))})),Vn.get("apiKey").then((e=>{"invitation"==Wn.route?e?Bn.post(`/api/groups/invitation/${Wn.id}`,{}).then((()=>{this.props.history.push("/")})):this.props.history.push(`/signup?inviteKey=${Wn.id}`):Wn.isOutside()||e||this.props.history.push("/login")}))}});function As(){return y(Bi.Provider,{value:Nt},y(Ps,null))}U(y((function(){return y(yi,null,y(As,null))}),null),document.body);var js;js=new URL(s("c1bOu").resolve("fGyc1"),import.meta.url).toString(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{location.search.includes("service-workers=unregister")&&(navigator.serviceWorker.getRegistrations().then((e=>{for(let t of e)t.unregister()})),console.log("Service workers unregistered")),navigator.serviceWorker.register(js).then((e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)}),(e=>{console.warn("ServiceWorker registration failed: ",e)}))}));
//# sourceMappingURL=index.0d5e845f.js.map
