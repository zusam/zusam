{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-b99d228c574da984.js","node_modules/@parcel/runtime-js/lib/runtime-f95af6cbdb95ef25.js","node_modules/preact/src/constants.js","node_modules/preact/src/util.js","node_modules/preact/src/options.js","node_modules/preact/src/create-element.js","node_modules/preact/src/component.js","node_modules/preact/src/create-context.js","node_modules/preact/src/diff/children.js","node_modules/preact/src/diff/props.js","node_modules/preact/src/diff/index.js","node_modules/preact/src/render.js","node_modules/preact/src/diff/catch-error.js","src/core/alert.js","src/core/storage.js","src/store/index.js","node_modules/storeon/index.js","src/store/api.js","src/store/me.js","src/store/router.js","src/store/notifications.js","src/store/bookmarks.js","node_modules/@babel/runtime/helpers/esm/typeof.js","node_modules/@babel/runtime/helpers/esm/classCallCheck.js","node_modules/@babel/runtime/helpers/esm/createClass.js","node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","node_modules/@babel/runtime/helpers/esm/inherits.js","node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","node_modules/@babel/runtime/helpers/esm/defineProperty.js","node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","node_modules/@babel/runtime/helpers/esm/iterableToArray.js","node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","node_modules/@babel/runtime/helpers/esm/toArray.js","node_modules/i18next/dist/esm/i18next.js","src/core/me.js","node_modules/@babel/runtime/helpers/arrayWithHoles.js","node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","node_modules/@babel/runtime/helpers/arrayLikeToArray.js","node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","node_modules/@babel/runtime/helpers/nonIterableRest.js","node_modules/@babel/runtime/helpers/slicedToArray.js","node_modules/@babel/runtime/helpers/defineProperty.js","node_modules/preact/hooks/src/index.js","node_modules/preact/compat/src/util.js","node_modules/preact/compat/src/PureComponent.js","node_modules/preact/compat/src/forwardRef.js","node_modules/preact/compat/src/Children.js","node_modules/preact/compat/src/suspense.js","node_modules/preact/compat/src/suspense-list.js","node_modules/preact/compat/src/render.js","node_modules/preact/compat/src/index.js","node_modules/@babel/runtime/helpers/classCallCheck.js","node_modules/@babel/runtime/helpers/createClass.js","node_modules/react-i18next/dist/es/unescape.js","node_modules/react-i18next/dist/es/context.js","node_modules/react-i18next/dist/es/utils.js","node_modules/react-i18next/dist/es/useTranslation.js","node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","node_modules/@babel/runtime/helpers/objectWithoutProperties.js","node_modules/react-i18next/dist/es/withTranslation.js","src/lang/en.json","src/lang/fr.json","src/lang/es.json","src/lang/sk.json","src/core/lang.js","src/core/util.js","src/core/http.js","src/core/notifications.js","src/core/bookmarks.js","src/core/router.js","src/core/index.js","src/core/api.js","node_modules/@babel/runtime/helpers/esm/extends.js","../packages/react-router/lib/context.ts","../packages/react-router/lib/router.ts","../packages/react-router/lib/hooks.tsx","../packages/react-router/lib/components.tsx","../packages/react-router-dom/index.tsx","node_modules/@parcel/runtime-js/lib/runtime-0c96886bbd7192d4.js","src/outside/stop-notification-emails.component.js","src/message/message-child.component.js","src/message/message-children.component.js","src/message/message-head.component.js","src/misc/index.js","src/misc/fa-icon.component.js","node_modules/storeon/preact/index.js","src/navbar/index.js","src/navbar/group-search.component.js","src/navbar/group-search-wrapper.component.js","src/navbar/groups-dropdown-navbar.component.js","src/navbar/navbar.component.js","src/navbar/notifications-dropdown-navbar.component.js","src/pages/create-group.component.js","src/embed/bandcamp-embed.component.js","src/embed/instagram-embed.component.js","src/embed/generic-embed.component.js","src/embed/index.js","src/embed/embed-block.component.js","src/embed/file-grid.component.js","src/embed/big-file.component.js","src/embed/mini-file.component.js","src/writer/index.js","src/writer/group-writer.component.js","src/writer/writer.component.js","src/writer/writing-widget.component.js","src/pages/index.js","src/pages/bookmark-board.component.js","src/pages/group-board.component.js","src/pages/human-time.component.js","src/pages/notification.component.js","src/pages/search.component.js","src/pages/share.component.js","src/message/message-footer.component.js","src/message/message-body.component.js","src/message/message-breadcrumbs.component.js","src/message/message.component.js","src/message/index.js","src/message/message-list.component.js","src/message/message-parent.component.js","src/message/message-preview.component.js","src/message/message-search-result.component.js","src/outside/index.js","src/outside/login.component.js","src/outside/password-reset.component.js","src/outside/signup.component.js","src/outside/public.component.js","src/settings/group-settings.component.js","src/settings/user-settings.component.js","src/settings/index.js","src/settings/settings.component.js","src/app.js","src/index.js","node_modules/@parcel/runtime-js/lib/runtime-ce545fb209d5fe84.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"1UwEQ\"))).then(() => parcelRequire('lOUEZ'));","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bXkwM\\\":\\\"index.23b84aff.js\\\",\\\"IA7EQ\\\":\\\"zusam_logo.1eebfd28.svg\\\",\\\"1UwEQ\\\":\\\"nlg.41672c04.js\\\",\\\"fGyc1\\\":\\\"service-workers.js\\\"}\"));","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { EMPTY_ARR } from \"./constants\";\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-ignore We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = vnode._original + 1;\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tvnode._hydrating != null ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom,\n\t\t\tvnode._hydrating\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (vnode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet queue;\n\twhile ((process._rerenderCount = rerenderQueue.length)) {\n\t\tqueue = rerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t\trerenderQueue = [];\n\t\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t\t// process() calls from getting scheduled while `queue` is still being consumed.\n\t\tqueue.some(c => {\n\t\t\tif (c._dirty) renderComponent(c);\n\t\t});\n\t}\n}\nprocess._rerenderCount = 0;\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tlet subs = [];\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.shouldComponentUpdate = function(_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\t// I think the forced value propagation here was only needed when `options.debounceRendering` was being bypassed:\n\t\t\t\t\t\t// https://github.com/preactjs/preact/commit/4d339fb803bea09e9f198abf38ca1bf8ea4b7771#diff-54682ce380935a717e41b8bfc54737f6R358\n\t\t\t\t\t\t// In those cases though, even with the value corrected, we're double-rendering all nodes.\n\t\t\t\t\t\t// It might be better to just tell folks not to use force-sync mode.\n\t\t\t\t\t\t// Currently, using `useContext()` in a class component will overwrite its `this.context` value.\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context[contextId] = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tsubs.some(enqueueRender);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType = context);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').ComponentChildren[]} renderResult\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, childVNode, newDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < renderResult.length; i++) {\n\t\tchildVNode = renderResult[i];\n\n\t\tif (childVNode == null || typeof childVNode == 'boolean') {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (Array.isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tnull,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Terser removes the `continue` here and wraps the loop body\n\t\t// in a `if (childVNode) { ... } condition\n\t\tif (childVNode == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Check if we find a corresponding element in oldChildren.\n\t\t// If found, delete the array item by setting to `undefined`.\n\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t// (holes).\n\t\toldVNode = oldChildren[i];\n\n\t\tif (\n\t\t\toldVNode === null ||\n\t\t\t(oldVNode &&\n\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t) {\n\t\t\toldChildren[i] = undefined;\n\t\t} else {\n\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t// We always match by type (in either case).\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toldVNode = null;\n\t\t\t}\n\t\t}\n\n\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating\n\t\t);\n\n\t\tnewDom = childVNode._dom;\n\n\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\tif (!refs) refs = [];\n\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t}\n\n\t\tif (newDom != null) {\n\t\t\tif (firstChildDom == null) {\n\t\t\t\tfirstChildDom = newDom;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\t\tchildVNode._children === oldVNode._children\n\t\t\t) {\n\t\t\t\tchildVNode._nextDom = oldDom = reorderChildren(\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldDom,\n\t\t\t\t\tparentDom\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\toldChildren,\n\t\t\t\t\tnewDom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t//\n\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t// node's nextSibling.\n\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t}\n\t\t} else if (\n\t\t\toldDom &&\n\t\t\toldVNode._dom == oldDom &&\n\t\t\toldDom.parentNode != parentDom\n\t\t) {\n\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\toldDom = getDomSibling(oldVNode);\n\t\t}\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) {\n\t\t\tif (\n\t\t\t\ttypeof newParentVNode.type == 'function' &&\n\t\t\t\toldChildren[i]._dom != null &&\n\t\t\t\toldChildren[i]._dom == newParentVNode._nextDom\n\t\t\t) {\n\t\t\t\t// If the newParentVNode.__nextDom points to a dom node that is about to\n\t\t\t\t// be unmounted, then get the next sibling of that vnode and set\n\t\t\t\t// _nextDom to it\n\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldParentVNode, i + 1);\n\t\t\t}\n\n\t\t\tunmount(oldChildren[i], oldChildren[i]);\n\t\t}\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\nfunction reorderChildren(childVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\tlet c = childVNode._children;\n\tlet tmp = 0;\n\tfor (; c && tmp < c.length; tmp++) {\n\t\tlet vnode = c[tmp];\n\t\tif (vnode) {\n\t\t\t// We typically enter this code path on sCU bailout, where we copy\n\t\t\t// oldVNode._children to newVNode._children. If that is the case, we need\n\t\t\t// to update the old children's _parent pointer to point to the newVNode\n\t\t\t// (childVNode here).\n\t\t\tvnode._parent = childVNode;\n\n\t\t\tif (typeof vnode.type == 'function') {\n\t\t\t\toldDom = reorderChildren(vnode, oldDom, parentDom);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tvnode,\n\t\t\t\t\tvnode,\n\t\t\t\t\tc,\n\t\t\t\t\tvnode._dom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (Array.isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\nfunction placeChild(\n\tparentDom,\n\tchildVNode,\n\toldVNode,\n\toldChildren,\n\tnewDom,\n\toldDom\n) {\n\tlet nextDom;\n\tif (childVNode._nextDom !== undefined) {\n\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t// of last DOM child of this child VNode\n\t\tnextDom = childVNode._nextDom;\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t// can clean up the property\n\t\tchildVNode._nextDom = undefined;\n\t} else if (\n\t\toldVNode == null ||\n\t\tnewDom != oldDom ||\n\t\tnewDom.parentNode == null\n\t) {\n\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\tparentDom.appendChild(newDom);\n\t\t\tnextDom = null;\n\t\t} else {\n\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\tfor (\n\t\t\t\tlet sibDom = oldDom, j = 0;\n\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildren.length;\n\t\t\t\tj += 2\n\t\t\t) {\n\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\tnextDom = oldDom;\n\t\t}\n\t}\n\n\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t// See more detail in create-element.js:createVNode\n\tif (nextDom !== undefined) {\n\t\toldDom = nextDom;\n\t} else {\n\t\toldDom = newDom.nextSibling;\n\t}\n\n\treturn oldDom;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (name.toLowerCase() in dom) name = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\t\tdom.addEventListener(name, handler, useCapture);\n\t\t\t}\n\t\t} else {\n\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\tdom.removeEventListener(name, handler, useCapture);\n\t\t}\n\t} else if (name !== 'dangerouslySetInnerHTML') {\n\t\tif (isSvg) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname !== 'href' &&\n\t\t\tname !== 'list' &&\n\t\t\tname !== 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname !== 'tabIndex' &&\n\t\t\tname !== 'download' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t// The value `false` is different from the attribute not\n\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t// that other VDOM frameworks also always stringify `false`.\n\n\t\tif (typeof value === 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (\n\t\t\tvalue != null &&\n\t\t\t(value !== false || (name[0] === 'a' && name[1] === 'r'))\n\t\t) {\n\t\t\tdom.setAttribute(name, value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type + false](options.event ? options.event(e) : e);\n}\n\nfunction eventProxyCapture(e) {\n\tthis._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ } from '../constants';\nimport { Component, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._hydrating != null) {\n\t\tisHydrating = oldVNode._hydrating;\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\t// if we resume, we want the tree to be \"unlocked\"\n\t\tnewVNode._hydrating = null;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-ignore The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original === oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) c._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tArray.isArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._hydrating = null;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\tnewVNode._dom = oldDom;\n\t\t\tnewVNode._hydrating = !!isHydrating;\n\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t// ^ could possibly be simplified to:\n\t\t\t// excessDomChildren.length = 0;\n\t\t}\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-ignore Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-ignore See above ts-ignore on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = newVNode.type;\n\tlet i = 0;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tif (nodeType === 'svg') isSvg = true;\n\n\tif (excessDomChildren != null) {\n\t\tfor (; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild &&\n\t\t\t\t'setAttribute' in child === !!nodeType &&\n\t\t\t\t(nodeType ? child.localName === nodeType : child.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\t// @ts-ignore createTextNode returns Text, we expect PreactElement\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS(\n\t\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType\n\t\t\t);\n\t\t} else {\n\t\t\tdom = document.createElement(\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType,\n\t\t\t\tnewProps.is && newProps\n\t\t\t);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\t// But, if we are in a situation where we are using existing DOM (e.g. replaceNode)\n\t\t\t// we should read the existing DOM attributes to diff them\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (\n\t\t\t\t\t!newHtml ||\n\t\t\t\t\t((!oldHtml || newHtml.__html != oldHtml.__html) &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML)\n\t\t\t\t) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\ti = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tArray.isArray(i) ? i : [i],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg && nodeType !== 'foreignObject',\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(i !== dom.value ||\n\t\t\t\t\t(nodeType === 'progress' && !i) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && i !== oldProps.value))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) applyRef(r, null, parentVNode);\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(r[i], parentVNode, typeof vnode.type != 'function');\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove && vnode._dom != null) removeNode(vnode._dom);\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode === 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = (\n\t\t(!isHydrating && replaceNode) ||\n\t\tparentDom\n\t)._children = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.firstChild\n\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t? oldVNode._dom\n\t\t\t: parentDom.firstChild,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n","/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component, ctor, handled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","const alert = {\n  remove: id => (document.getElementById(id).outerHTML = \"\"),\n  add: (text, alertStyle = \"alert-success\", countdown = 5000) => {\n    if (!text) {\n      return;\n    }\n    let alertNode = document.createElement(\"DIV\");\n    alertNode.id = alert.hash(text);\n    alertNode.innerHTML = text;\n    alertNode.classList.add(\"global-alert\", \"alert\", alertStyle);\n    document.body.appendChild(alertNode);\n    setTimeout(() => alert.remove(alertNode.id), countdown);\n  },\n  hash: str => {\n    let hash = 0;\n    if (str.length == 0) {\n      return hash;\n    }\n    for (let i = 0; i < str.length; i++) {\n      let char = str.charCodeAt(i);\n      hash = (hash << 5) - hash + char;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n  }\n};\nexport default alert;\n","const storage = {\n  usage: () => {\n    let total = 0;\n    let k;\n    for (k in localStorage) {\n      if (Object.prototype.hasOwnProperty.call(localStorage, k)) {\n        total += (localStorage[k].length + k.length) * 2;\n      }\n    }\n    return total;\n  },\n  createStorageBox: (data, metadata = null) => ({\n    data,\n    createdAt: Date.now(),\n    metadata\n  }),\n  remove: id => localStorage.removeItem(id),\n  set: (id, data, metadata = null) => {\n    localStorage.setItem(\n      id,\n      JSON.stringify(storage.createStorageBox(data, metadata))\n    );\n    return Promise.resolve(id);\n  },\n  get: id => {\n    let data = localStorage.getItem(id);\n    if (data != null) {\n      data = JSON.parse(data);\n      if (Object.prototype.hasOwnProperty.call(data, \"data\")) {\n        return new Promise(r => r(data.data));\n      }\n    }\n    return new Promise(r => r(null));\n  },\n  reset: () =>\n    localStorage.clear() &&\n    window.dispatchEvent(new CustomEvent(\"resetStorage\"))\n};\nexport default storage;\n","import { createStoreon } from \"storeon\";\n//import { crossTab } from '@storeon/crosstab';\n\nimport { meStore } from \"./me.js\";\nimport { apiStore } from \"./api.js\";\nimport { routerStore } from \"./router.js\";\nimport { notificationsStore } from \"./notifications.js\";\nimport { bookmarksStore } from \"./bookmarks.js\";\n\nconst store = createStoreon([apiStore, meStore, routerStore, notificationsStore, bookmarksStore]);\nexport default store;\n","let createStoreon = modules => {\n  let events = {}\n  let state = {}\n\n  let store = {\n    dispatch(event, data) {\n      if (event !== '@dispatch') {\n        store.dispatch('@dispatch', [event, data, events[event]])\n      }\n\n      if (events[event]) {\n        let changes\n        events[event].forEach(i => {\n          let diff = events[event].includes(i) && i(state, data, store)\n          if (diff && typeof diff.then !== 'function') {\n            state = { ...state, ...diff }\n            changes = { ...changes, ...diff }\n          }\n        })\n        if (changes) store.dispatch('@changed', changes)\n      }\n    },\n\n    get: () => state,\n\n    on(event, cb) {\n      ;(events[event] || (events[event] = [])).push(cb)\n\n      return () => {\n        events[event] = events[event].filter(i => i !== cb)\n      }\n    }\n  }\n\n  modules.forEach(i => {\n    if (i) i(store)\n  })\n  store.dispatch('@init')\n\n  return store\n}\n\nexport { createStoreon }\n","export const apiStore = store => {\n  store.on(\"@init\", () => ({api: {}}));\n\n  store.on(\"api/update\", (state, api) => {\n    return {api};\n  });\n};\n","//import { http } from \"/src/core\";\n\nexport const meStore = store => {\n  store.on(\"@init\", () => ({me: {}}));\n\n  store.on(\"me/update\", (state, me) => {\n    return {me};\n  });\n};\n","export const routerStore = store => {\n  store.on(\"@init\", () => ({\n    route: \"\",\n    id: \"\",\n    action: \"\",\n    backUrl: \"\",\n    entityType: \"\",\n    search: \"\",\n    entity: {},\n  }));\n\n  store.on(\"router/update\", (_, newState) => {\n    return {\n      entity: newState.entity,\n      backUrl: newState.backUrl,\n    };\n  });\n};\n","export const notificationsStore = store => {\n  store.on(\"@init\", () => ({notifications:[]}));\n\n  store.on(\"notifications/update\", (state, notifications = []) => {\n    return {notifications};\n  });\n\n  store.on(\"notifications/remove\", (state, notification) => {\n    return {\n      notifications: state.notifications.filter(n => n.id != notification.id)\n    };\n  });\n};\n","import { http } from \"/src/core\";\n\nexport const bookmarksStore = store => {\n  store.on(\"@init\", () => ({bookmarks:[]}));\n\n  store.on(\"bookmarks/update\", (state, bookmarks = []) => {\n    return {bookmarks};\n  });\n\n  store.on(\"bookmarks/remove\", (state, bookmark) => {\n    http.delete(`/api/bookmarks/${bookmark.id}`);\n    return {\n      bookmarks: state.bookmarks.filter(b => b.id != bookmark.id)\n    };\n  });\n\n  store.on(\"bookmark/add\", (state, message_id) => {\n    http.post(\"/api/bookmarks\", {message:message_id}).then(bookmark => {\n      store.dispatch(\"bookmarks/update\", [...state.bookmarks, bookmark]);\n    });\n  });\n};\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _toArray from '@babel/runtime/helpers/esm/toArray';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\n\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Logger);\n\n    this.init(concreteLogger, options);\n  }\n\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread(_objectSpread({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }), this.options));\n    }\n  }]);\n\n  return Logger;\n}();\n\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n\n    this.observers = {};\n  }\n\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\n\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\n\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath.obj,\n      k = _getLastOfPath.k;\n\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath2.obj,\n      k = _getLastOfPath2.k;\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n      obj = _getLastOfPath3.obj,\n      k = _getLastOfPath3.k;\n\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n\n  if (value !== undefined) {\n    return value;\n  }\n\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && typeof window.navigator.userAgentData === 'undefined' && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\nvar chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  var possibleChars = chars.filter(function (c) {\n    return nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0;\n  });\n  if (possibleChars.length === 0) return true;\n  var r = new RegExp(\"(\".concat(possibleChars.map(function (c) {\n    return c === '?' ? '\\\\?' : c;\n  }).join('|'), \")\"));\n  var matched = !r.test(key);\n\n  if (!matched) {\n    var ki = key.indexOf(keySeparator);\n\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n\n  return matched;\n}\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n\n    current = current[paths[i]];\n  }\n\n  return current;\n}\n\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n\n  var _super = _createSuper(ResourceStore);\n\n  function ResourceStore(data) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n\n    _classCallCheck(this, ResourceStore);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.data = data || {};\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n\n    return _this;\n  }\n\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread$1(_objectSpread$1({}, pack), resources);\n      }\n\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread$1(_objectSpread$1({}, {}), this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"hasLanguageSomeTranslations\",\n    value: function hasLanguageSomeTranslations(lng) {\n      var data = this.getDataByLanguage(lng);\n      var n = data && Object.keys(data) || [];\n      return !!n.find(function (v) {\n        return data[v] && Object.keys(data[v]).length > 0;\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar checkedLoadedFor = {};\n\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n\n  var _super = _createSuper$1(Translator);\n\n  function Translator(services) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Translator);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n\n      if (key === undefined || key === null) {\n        return false;\n      }\n\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS || [];\n      var wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n      var seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n\n      if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n        var m = key.match(this.interpolator.nestingRegexp);\n\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n          key = _this$extractFromKey.key,\n          namespaces = _this$extractFromKey.namespaces;\n\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n\n          if (returnDetails) {\n            resolved.res = \"\".concat(namespace).concat(nsSeparator).concat(key);\n            return resolved;\n          }\n\n          return \"\".concat(namespace).concat(nsSeparator).concat(key);\n        }\n\n        if (returnDetails) {\n          resolved.res = key;\n          return resolved;\n        }\n\n        return key;\n      }\n\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n\n          var r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread$2(_objectSpread$2({}, options), {}, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n\n          if (returnDetails) {\n            resolved.res = r;\n            return resolved;\n          }\n\n          return r;\n        }\n\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread$2(_objectSpread$2({}, options), {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread$2(_objectSpread$2({}, options), {}, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n\n          var send = function send(l, k, specificDefaultValue) {\n            var defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n            }\n\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language, options).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n          if (this.options.compatibilityAPI !== 'v1') {\n            res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? \"\".concat(namespace, \":\").concat(key) : key, usedDefault ? res : undefined);\n          } else {\n            res = this.options.parseMissingKeyHandler(res);\n          }\n        }\n      }\n\n      if (returnDetails) {\n        resolved.res = res;\n        return resolved;\n      }\n\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, _objectSpread$2(_objectSpread$2({}, this.options.interpolation.defaultVariables), options), resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread$2(_objectSpread$2({}, options), {\n          interpolation: _objectSpread$2(_objectSpread$2({}, this.options.interpolation), options.interpolation)\n        }));\n        var skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n        var nestBef;\n\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread$2(_objectSpread$2({}, this.options.interpolation.defaultVariables), data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n\n            return null;\n          }\n\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread$2({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n\n        var extracted = _this4.extractFromKey(k, options);\n\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n\n        var needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && _this4.pluralResolver.shouldUseIntlApi();\n\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKeys = [key];\n\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count, options);\n              var zeroSuffix = \"\".concat(_this4.options.pluralSeparator, \"zero\");\n\n              if (needsPluralHandling) {\n                finalKeys.push(key + pluralSuffix);\n\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(key + zeroSuffix);\n                }\n              }\n\n              if (needsContextHandling) {\n                var contextKey = \"\".concat(key).concat(_this4.options.contextSeparator).concat(options.context);\n                finalKeys.push(contextKey);\n\n                if (needsPluralHandling) {\n                  finalKeys.push(contextKey + pluralSuffix);\n\n                  if (needsZeroSuffixLookup) {\n                    finalKeys.push(contextKey + zeroSuffix);\n                  }\n                }\n              }\n            }\n\n            var possibleKey;\n\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n\n        return p.join('-');\n      }\n\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n\n        var cleanedLng = _this.formatLanguageCode(code);\n\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n\n          var lngOnly = _this.getLanguagePartFromCode(code);\n\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n\n      var addCode = function addCode(c) {\n        if (!c) return;\n\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nvar deprecatedJsonVersions = ['v1', 'v2', 'v3'];\nvar suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\n\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\n\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PluralResolver);\n\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n\n    if ((!this.options.compatibilityJSON || this.options.compatibilityJSON === 'v4') && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n\n    this.rules = createRules();\n  }\n\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.shouldUseIntlApi()) {\n        try {\n          return new Intl.PluralRules(code, {\n            type: options.ordinal ? 'ordinal' : 'cardinal'\n          });\n        } catch (_unused) {\n          return;\n        }\n      }\n\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n\n      if (this.shouldUseIntlApi()) {\n        return rule && rule.resolvedOptions().pluralCategories.length > 1;\n      }\n\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.getSuffixes(code, options).map(function (suffix) {\n        return \"\".concat(key).concat(suffix);\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n\n      if (!rule) {\n        return [];\n      }\n\n      if (this.shouldUseIntlApi()) {\n        return rule.resolvedOptions().pluralCategories.sort(function (pluralCategory1, pluralCategory2) {\n          return suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2];\n        }).map(function (pluralCategory) {\n          return \"\".concat(_this.options.prepend).concat(pluralCategory);\n        });\n      }\n\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number, options);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var rule = this.getRule(code, options);\n\n      if (rule) {\n        if (this.shouldUseIntlApi()) {\n          return \"\".concat(this.options.prepend).concat(rule.select(count));\n        }\n\n        return this.getSuffixRetroCompatible(rule, count);\n      }\n\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }, {\n    key: \"getSuffixRetroCompatible\",\n    value: function getSuffixRetroCompatible(rule, count) {\n      var _this2 = this;\n\n      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n      var suffix = rule.numbers[idx];\n\n      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        if (suffix === 2) {\n          suffix = 'plural';\n        } else if (suffix === 1) {\n          suffix = '';\n        }\n      }\n\n      var returnSuffix = function returnSuffix() {\n        return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n      };\n\n      if (this.options.compatibilityJSON === 'v1') {\n        if (suffix === 1) return '';\n        if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n        return returnSuffix();\n      } else if (this.options.compatibilityJSON === 'v2') {\n        return returnSuffix();\n      } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        return returnSuffix();\n      }\n\n      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n    }\n  }, {\n    key: \"shouldUseIntlApi\",\n    value: function shouldUseIntlApi() {\n      return !deprecatedJsonVersions.includes(this.options.compatibilityJSON);\n    }\n  }]);\n\n  return PluralResolver;\n}();\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$3(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Interpolator);\n\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n\n    this.init(options);\n  }\n\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = getPathWithDefaults(data, defaultData, key);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n            interpolationkey: key\n          })) : path;\n        }\n\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(getPathWithDefaults(data, defaultData, k), f, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n          interpolationkey: k\n        }));\n      };\n\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n\n        while (match = todo.regex.exec(str)) {\n          var matchedVar = match[1].trim();\n          value = handleFormat(matchedVar);\n\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (options && options.hasOwnProperty(matchedVar)) {\n              value = '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(matchedVar, \" for interpolating \").concat(str));\n\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n\n          if (skipOnVariables) {\n            todo.regex.lastIndex += value.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n\n          replaces++;\n\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n\n      var clonedOptions = _objectSpread$3({}, options);\n\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        optionsString = optionsString.replace(/'/g, '\"');\n\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread$3(_objectSpread$3({}, inheritedOptions), clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        var doReduce = false;\n\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread$3(_objectSpread$3({}, options), {}, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n\n      return str;\n    }\n  }]);\n\n  return Interpolator;\n}();\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$4(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction parseFormatStr(formatStr) {\n  var formatName = formatStr.toLowerCase().trim();\n  var formatOptions = {};\n\n  if (formatStr.indexOf('(') > -1) {\n    var p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    var optStr = p[1].substring(0, p[1].length - 1);\n\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      var opts = optStr.split(';');\n      opts.forEach(function (opt) {\n        if (!opt) return;\n\n        var _opt$split = opt.split(':'),\n            _opt$split2 = _toArray(_opt$split),\n            key = _opt$split2[0],\n            rest = _opt$split2.slice(1);\n\n        var val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n\n  return {\n    formatName: formatName,\n    formatOptions: formatOptions\n  };\n}\n\nvar Formatter = function () {\n  function Formatter() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Formatter);\n\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: function number(val, lng, options) {\n        return new Intl.NumberFormat(lng, options).format(val);\n      },\n      currency: function currency(val, lng, options) {\n        return new Intl.NumberFormat(lng, _objectSpread$4(_objectSpread$4({}, options), {}, {\n          style: 'currency'\n        })).format(val);\n      },\n      datetime: function datetime(val, lng, options) {\n        return new Intl.DateTimeFormat(lng, _objectSpread$4({}, options)).format(val);\n      },\n      relativetime: function relativetime(val, lng, options) {\n        return new Intl.RelativeTimeFormat(lng, _objectSpread$4({}, options)).format(val, options.range || 'day');\n      },\n      list: function list(val, lng, options) {\n        return new Intl.ListFormat(lng, _objectSpread$4({}, options)).format(val);\n      }\n    };\n    this.init(options);\n  }\n\n  _createClass(Formatter, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var iOpts = options.interpolation;\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    }\n  }, {\n    key: \"add\",\n    value: function add(name, fc) {\n      this.formats[name.toLowerCase().trim()] = fc;\n    }\n  }, {\n    key: \"format\",\n    value: function format(value, _format, lng, options) {\n      var _this = this;\n\n      var formats = _format.split(this.formatSeparator);\n\n      var result = formats.reduce(function (mem, f) {\n        var _parseFormatStr = parseFormatStr(f),\n            formatName = _parseFormatStr.formatName,\n            formatOptions = _parseFormatStr.formatOptions;\n\n        if (_this.formats[formatName]) {\n          var formatted = mem;\n\n          try {\n            var valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n            var l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n            formatted = _this.formats[formatName](mem, l, _objectSpread$4(_objectSpread$4(_objectSpread$4({}, formatOptions), options), valOptions));\n          } catch (error) {\n            _this.logger.warn(error);\n          }\n\n          return formatted;\n        } else {\n          _this.logger.warn(\"there was no format function for \".concat(formatName));\n        }\n\n        return mem;\n      }, value);\n      return result;\n    }\n  }]);\n\n  return Formatter;\n}();\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$5(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\n\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n\n  var _super = _createSuper$2(Connector);\n\n  function Connector(backend, store, services) {\n    var _this;\n\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Connector);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.waitingReads = [];\n    _this.maxParallelReads = options.maxParallelReads || 10;\n    _this.readingCalls = 0;\n    _this.state = {};\n    _this.queue = [];\n\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n\n      var toLoad = {};\n      var pending = {};\n      var toLoadLanguages = {};\n      var toLoadNamespaces = {};\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending[name] === undefined) pending[name] = true;\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending[name] === undefined) pending[name] = true;\n            if (toLoad[name] === undefined) toLoad[name] = true;\n            if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n      });\n\n      if (Object.keys(toLoad).length || Object.keys(pending).length) {\n        this.queue.push({\n          pending: pending,\n          pendingCount: Object.keys(pending).length,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n\n      return {\n        toLoad: Object.keys(toLoad),\n        pending: Object.keys(pending),\n        toLoadLanguages: Object.keys(toLoadLanguages),\n        toLoadNamespaces: Object.keys(toLoadNamespaces)\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        removePending(q, name);\n        if (err) q.errors.push(err);\n\n        if (q.pendingCount === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = {};\n            var loadedKeys = q.loaded[l];\n\n            if (loadedKeys.length) {\n              loadedKeys.forEach(function (ns) {\n                if (loaded[l][ns] === undefined) loaded[l][ns] = true;\n              });\n            }\n          });\n          q.done = true;\n\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 350;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n\n      if (this.readingCalls >= this.maxParallelReads) {\n        this.waitingReads.push({\n          lng: lng,\n          ns: ns,\n          fcName: fcName,\n          tried: tried,\n          wait: wait,\n          callback: callback\n        });\n        return;\n      }\n\n      this.readingCalls++;\n      return this.backend[fcName](lng, ns, function (err, data) {\n        if (err && data && tried < 5) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n\n        _this3.readingCalls--;\n\n        if (_this3.waitingReads.length > 0) {\n          var next = _this3.waitingReads.shift();\n\n          _this3.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n        }\n\n        callback(err, data);\n      });\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n\n      if (key === undefined || key === null || key === '') return;\n\n      if (this.backend && this.backend.create) {\n        this.backend.create(languages, namespace, key, fallbackValue, null, _objectSpread$5(_objectSpread$5({}, options), {}, {\n          isUpdate: isUpdate\n        }));\n      }\n\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n\n  return options;\n}\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$6(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction noop() {}\n\nfunction bindMemberFunctions(inst) {\n  var mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(function (mem) {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\n\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  var _super = _createSuper$3(I18n);\n\n  function I18n() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, I18n);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n    bindMemberFunctions(_assertThisInitialized(_this));\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n\n    return _this;\n  }\n\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      if (!options.defaultNS && options.ns) {\n        if (typeof options.ns === 'string') {\n          options.defaultNS = options.ns;\n        } else if (options.ns.indexOf('translation') < 0) {\n          options.defaultNS = options.ns[0];\n        }\n      }\n\n      var defOpts = get();\n      this.options = _objectSpread$6(_objectSpread$6(_objectSpread$6({}, defOpts), this.options), transformOptions(options));\n\n      if (this.options.compatibilityAPI !== 'v1') {\n        this.options.interpolation = _objectSpread$6(_objectSpread$6({}, defOpts.interpolation), this.options.interpolation);\n      }\n\n      if (options.keySeparator !== undefined) {\n        this.options.userDefinedKeySeparator = options.keySeparator;\n      }\n\n      if (options.nsSeparator !== undefined) {\n        this.options.userDefinedNsSeparator = options.nsSeparator;\n      }\n\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n\n        var formatter;\n\n        if (this.modules.formatter) {\n          formatter = this.modules.formatter;\n        } else if (typeof Intl !== 'undefined') {\n          formatter = Formatter;\n        }\n\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n\n        if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n          s.formatter = createClassOnDemand(formatter);\n          s.formatter.init(s, this.options);\n          this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n        }\n\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          s.languageDetector.init(s, this.options.detection, this.options);\n        }\n\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n\n          return _this2;\n        };\n      });\n      var deferred = defer();\n\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n\n          _this2.emit('initialized', _this2.options);\n\n          deferred.resolve(t);\n          callback(err, t);\n        };\n\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n\n        var append = function append(lng) {\n          if (!lng) return;\n\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n\n        this.services.backendConnector.load(toLoad, this.options.ns, function (e) {\n          if (!e && !_this3.resolvedLanguage && _this3.language) _this3.setResolvedLanguage(_this3.language);\n          usedCallback(e);\n        });\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n\n      if (module.type === 'formatter') {\n        this.modules.formatter = module;\n      }\n\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setResolvedLanguage\",\n    value: function setResolvedLanguage(l) {\n      if (!l || !this.languages) return;\n      if (['cimode', 'dev'].indexOf(l) > -1) return;\n\n      for (var li = 0; li < this.languages.length; li++) {\n        var lngInLngs = this.languages[li];\n        if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n\n        if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n          this.resolvedLanguage = lngInLngs;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n\n      var setLngProps = function setLngProps(l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        _this4.resolvedLanguage = undefined;\n\n        _this4.setResolvedLanguage(l);\n      };\n\n      var done = function done(err, l) {\n        if (l) {\n          setLngProps(l);\n\n          _this4.translator.changeLanguage(l);\n\n          _this4.isLanguageChangingTo = undefined;\n\n          _this4.emit('languageChanged', l);\n\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n\n        if (l) {\n          if (!_this4.language) {\n            setLngProps(l);\n          }\n\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        this.services.languageDetector.detect(setLng);\n      } else {\n        setLng(lng);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n\n      var fixedT = function fixedT(key, opts) {\n        var options;\n\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread$6({}, opts);\n        }\n\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey = keyPrefix ? \"\".concat(keyPrefix).concat(keySeparator).concat(key) : key;\n        return _this5.t(resultKey, options);\n      };\n\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n\n      var lng = this.resolvedLanguage || this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n\n        return loadState === -1 || loadState === 2;\n      };\n\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n\n      var deferred = defer();\n\n      if (!this.options.ns) {\n        callback && callback();\n        return Promise.resolve();\n      }\n\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n      return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      var mergedOptions = _objectSpread$6(_objectSpread$6(_objectSpread$6({}, this.options), options), {\n        isClone: true\n      });\n\n      var clone = new I18n(mergedOptions);\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread$6({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages,\n        resolvedLanguage: this.resolvedLanguage\n      };\n    }\n  }]);\n\n  return I18n;\n}(EventEmitter);\n\n_defineProperty(I18n, \"createInstance\", function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var callback = arguments.length > 1 ? arguments[1] : undefined;\n  return new I18n(options, callback);\n});\n\nvar instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nvar createInstance = instance.createInstance;\nvar init = instance.init;\nvar loadResources = instance.loadResources;\nvar reloadResources = instance.reloadResources;\nvar use = instance.use;\nvar changeLanguage = instance.changeLanguage;\nvar getFixedT = instance.getFixedT;\nvar t = instance.t;\nvar exists = instance.exists;\nvar setDefaultNamespace = instance.setDefaultNamespace;\nvar hasLoadedNamespace = instance.hasLoadedNamespace;\nvar loadNamespaces = instance.loadNamespaces;\nvar loadLanguages = instance.loadLanguages;\n\nexport default instance;\nexport { changeLanguage, createInstance, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","import http from \"./http.js\";\nimport storage from \"./storage.js\";\nimport store from \"/src/store\";\nimport i18n from \"i18next\";\n\nconst me = {\n\n  get() {\n    return store.get()?.me;\n  },\n\n  get data() {\n    return store.get()?.me?.data;\n  },\n\n  get lang() {\n    return store.get()?.me?.data?.lang;\n  },\n\n  get groups() {\n    return store.get()?.me?.groups;\n  },\n\n  get id() {\n    return store.get()?.me?.id;\n  },\n\n  get avatar() {\n    return store.get()?.me?.avatar;\n  },\n\n  getGroupName(id) {\n    let group = store.get()[\"groups\"]?.find(g => g[\"id\"] == id);\n    return group ? group[\"name\"] : \"\";\n  },\n\n  update() {\n    return http.get(\"/api/me\", true).then(r => {\n      if (!r || !r?.id) {\n        store.dispatch(\"update\", {});\n        return;\n      }\n      Promise.all(r.groups.map(g => http.get(`/api/groups/${g.id}`).then(group => group))).then(\n        groups => {\n          r.groups = groups;\n          store.dispatch(\"me/update\", Object.assign({loaded: true}, r));\n        }\n      );\n      i18n.changeLanguage(r?.data?.lang);\n      return r;\n    });\n  },\n\n  fetch() {\n    if (store.get()[\"loaded\"]) {\n      return new Promise(r => r(store.get()));\n    }\n    return me.update();\n  },\n\n  reset() {\n    store.dispatch(\"@init\");\n  },\n\n  logout() {\n    storage.reset();\n  }\n};\n\nexport default me;\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet EMPTY = [];\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\thookItem._pendingValue = EMPTY;\n\t\t\t\thookItem._pendingArgs = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\tif (hookItem._pendingValue !== EMPTY) {\n\t\t\t\thookItem._value = hookItem._pendingValue;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t\thookItem._pendingValue = EMPTY;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({ _pendingValue: EMPTY });\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} [initialState]\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = hookState._reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\t}\n\n\treturn hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._pendingValue = factory();\n\t\tstate._pendingArgs = args;\n\t\tstate._factory = factory;\n\t\treturn state._pendingValue;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * @param {(error: any) => void} cb\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = err => {\n\t\t\tif (state._value) state._value(err);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport function PureComponent(p) {\n\tthis.props = p;\n}\nPureComponent.prototype = new Component();\n// Some third-party libraries check if this property is present\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function(props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\nexport const REACT_FORWARD_SYMBOL =\n\t(typeof Symbol != 'undefined' &&\n\t\tSymbol.for &&\n\t\tSymbol.for('react.forward_ref')) ||\n\t0xf47;\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref || null);\n\t}\n\n\t// mobx-react checks for this being present\n\tForwarded.$$typeof = REACT_FORWARD_SYMBOL;\n\t// mobx-react heavily relies on implementation details.\n\t// It expects an object here with a `render` property,\n\t// and prototype.render will fail. Without this\n\t// mobx-react throws.\n\tForwarded.render = Forwarded;\n\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (children == null) return null;\n\treturn toChildArray(toChildArray(children).map(fn));\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tconst normalized = toChildArray(children);\n\t\tif (normalized.length !== 1) throw 'Children.only';\n\t\treturn normalized[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { Component, createElement, options, Fragment } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function(error, newVNode, oldVNode, errorInfo) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\tif (newVNode._dom == null) {\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t}\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode, errorInfo);\n};\n\nconst oldUnmount = options.unmount;\noptions.unmount = function(vnode) {\n\t/** @type {import('./internal').Component} */\n\tconst component = vnode._component;\n\tif (component && component._onResolve) {\n\t\tcomponent._onResolve();\n\t}\n\n\t// if the component is still hydrating\n\t// most likely it is because the component is suspended\n\t// we set the vnode.type as `null` so that it is not a typeof function\n\t// so the unmount will remove the vnode._dom\n\tif (component && vnode._hydrating === true) {\n\t\tvnode.type = null;\n\t}\n\n\tif (oldUnmount) oldUnmount(vnode);\n};\n\nfunction detachedClone(vnode, detachedParent, parentDom) {\n\tif (vnode) {\n\t\tif (vnode._component && vnode._component.__hooks) {\n\t\t\tvnode._component.__hooks._list.forEach(effect => {\n\t\t\t\tif (typeof effect._cleanup == 'function') effect._cleanup();\n\t\t\t});\n\n\t\t\tvnode._component.__hooks = null;\n\t\t}\n\n\t\tvnode = assign({}, vnode);\n\t\tif (vnode._component != null) {\n\t\t\tif (vnode._component._parentDom === parentDom) {\n\t\t\t\tvnode._component._parentDom = detachedParent;\n\t\t\t}\n\t\t\tvnode._component = null;\n\t\t}\n\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tdetachedClone(child, detachedParent, parentDom)\n\t\t\t);\n\t}\n\n\treturn vnode;\n}\n\nfunction removeOriginal(vnode, detachedParent, originalParent) {\n\tif (vnode) {\n\t\tvnode._original = null;\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tremoveOriginal(child, detachedParent, originalParent)\n\t\t\t);\n\n\t\tif (vnode._component) {\n\t\t\tif (vnode._component._parentDom === detachedParent) {\n\t\t\t\tif (vnode._dom) {\n\t\t\t\t\toriginalParent.insertBefore(vnode._dom, vnode._nextDom);\n\t\t\t\t}\n\t\t\t\tvnode._component._force = true;\n\t\t\t\tvnode._component._parentDom = originalParent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {Promise} promise The thrown promise\n * @param {import('./internal').VNode<any, any>} suspendingVNode The suspending component\n */\nSuspense.prototype._childDidSuspend = function(promise, suspendingVNode) {\n\tconst suspendingComponent = suspendingVNode._component;\n\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\t\tsuspendingComponent._onResolve = null;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._onResolve = onResolved;\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\t// If the suspension was during hydration we don't need to restore the\n\t\t\t// suspended children into the _children array\n\t\t\tif (c.state._suspended) {\n\t\t\t\tconst suspendedVNode = c.state._suspended;\n\t\t\t\tc._vnode._children[0] = removeOriginal(\n\t\t\t\t\tsuspendedVNode,\n\t\t\t\t\tsuspendedVNode._component._parentDom,\n\t\t\t\t\tsuspendedVNode._component._originalParentDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * We do not set `suspended: true` during hydration because we want the actual markup\n\t * to remain on screen and hydrate it when the suspense actually gets resolved.\n\t * While in non-hydration cases the usual fallback -> component flow would occour.\n\t */\n\tconst wasHydrating = suspendingVNode._hydrating === true;\n\tif (!c._pendingSuspensionCount++ && !wasHydrating) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.componentWillUnmount = function() {\n\tthis._suspenders = [];\n};\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {import('./internal').SuspenseComponent[\"props\"]} props\n * @param {import('./internal').SuspenseState} state\n */\nSuspense.prototype.render = function(props, state) {\n\tif (this._detachOnNextRender) {\n\t\t// When the Suspense's _vnode was created by a call to createVNode\n\t\t// (i.e. due to a setState further up in the tree)\n\t\t// it's _children prop is null, in this case we \"forget\" about the parked vnodes to detach\n\t\tif (this._vnode._children) {\n\t\t\tconst detachedParent = document.createElement('div');\n\t\t\tconst detachedComponent = this._vnode._children[0]._component;\n\t\t\tthis._vnode._children[0] = detachedClone(\n\t\t\t\tthis._detachOnNextRender,\n\t\t\t\tdetachedParent,\n\t\t\t\t(detachedComponent._originalParentDom = detachedComponent._parentDom)\n\t\t\t);\n\t\t}\n\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\t// Wrap fallback tree in a VNode that prevents itself from being marked as aborting mid-hydration:\n\t/** @type {import('./internal').VNode} */\n\tconst fallback =\n\t\tstate._suspended && createElement(Fragment, null, props.fallback);\n\tif (fallback) fallback._hydrating = null;\n\n\treturn [\n\t\tcreateElement(Fragment, null, state._suspended ? null : props.children),\n\t\tfallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('./internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\t/** @type {import('./internal').Component} */\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function(child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function(props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate = SuspenseList.prototype.componentDidMount = function() {\n\t// Iterate through all children after mounting for two reasons:\n\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t//    The nodes can now be completely consumed from the linked list.\n\t// 2. Handle nodes that might have gotten resolved between render and\n\t//    componentDidMount.\n\tthis._map.forEach((node, child) => {\n\t\tresolve(this, child, node);\n\t});\n};\n","import {\n\trender as preactRender,\n\thydrate as preactHydrate,\n\toptions,\n\ttoChildArray,\n\tComponent\n} from 'preact';\n\nexport const REACT_ELEMENT_TYPE =\n\t(typeof Symbol != 'undefined' && Symbol.for && Symbol.for('react.element')) ||\n\t0xeac7;\n\nconst CAMEL_PROPS = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|shape|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\n\nconst IS_DOM = typeof document !== 'undefined';\n\n// Input types for which onchange should not be converted to oninput.\n// type=\"file|checkbox|radio\", plus \"range\" in IE11.\n// (IE11 doesn't support Symbol, which we use here to turn `rad` into `ra` which matches \"range\")\nconst onChangeInputType = type =>\n\t(typeof Symbol != 'undefined' && typeof Symbol() == 'symbol'\n\t\t? /fil|che|rad/i\n\t\t: /fil|che|ra/i\n\t).test(type);\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\n// `UNSAFE_*` lifecycle hooks\n// Preact only ever invokes the unprefixed methods.\n// Here we provide a base \"fallback\" implementation that calls any defined UNSAFE_ prefixed method.\n// - If a component defines its own `componentDidMount()` (including via defineProperty), use that.\n// - If a component defines `UNSAFE_componentDidMount()`, `componentDidMount` is the alias getter/setter.\n// - If anything assigns to an `UNSAFE_*` property, the assignment is forwarded to the unprefixed property.\n// See https://github.com/preactjs/preact/issues/1941\n[\n\t'componentWillMount',\n\t'componentWillReceiveProps',\n\t'componentWillUpdate'\n].forEach(key => {\n\tObject.defineProperty(Component.prototype, key, {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn this['UNSAFE_' + key];\n\t\t},\n\t\tset(v) {\n\t\t\tObject.defineProperty(this, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: v\n\t\t\t});\n\t\t}\n\t});\n});\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nexport function render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children == null) {\n\t\tparent.textContent = '';\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nexport function hydrate(vnode, parent, callback) {\n\tpreactHydrate(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\tif (oldEventHook) e = oldEventHook(e);\n\te.persist = empty;\n\te.isPropagationStopped = isPropagationStopped;\n\te.isDefaultPrevented = isDefaultPrevented;\n\treturn (e.nativeEvent = e);\n};\n\nfunction empty() {}\n\nfunction isPropagationStopped() {\n\treturn this.cancelBubble;\n}\n\nfunction isDefaultPrevented() {\n\treturn this.defaultPrevented;\n}\n\nlet classNameDescriptor = {\n\tconfigurable: true,\n\tget() {\n\t\treturn this.class;\n\t}\n};\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\tlet type = vnode.type;\n\tlet props = vnode.props;\n\tlet normalizedProps = props;\n\n\t// only normalize props on Element nodes\n\tif (typeof type === 'string') {\n\t\tconst nonCustomElement = type.indexOf('-') === -1;\n\t\tnormalizedProps = {};\n\n\t\tfor (let i in props) {\n\t\t\tlet value = props[i];\n\n\t\t\tif (IS_DOM && i === 'children' && type === 'noscript') {\n\t\t\t\t// Emulate React's behavior of not rendering the contents of noscript tags on the client.\n\t\t\t\tcontinue;\n\t\t\t} else if (i === 'value' && 'defaultValue' in props && value == null) {\n\t\t\t\t// Skip applying value if it is null/undefined and we already set\n\t\t\t\t// a default value\n\t\t\t\tcontinue;\n\t\t\t} else if (\n\t\t\t\ti === 'defaultValue' &&\n\t\t\t\t'value' in props &&\n\t\t\t\tprops.value == null\n\t\t\t) {\n\t\t\t\t// `defaultValue` is treated as a fallback `value` when a value prop is present but null/undefined.\n\t\t\t\t// `defaultValue` for Elements with no value prop is the same as the DOM defaultValue property.\n\t\t\t\ti = 'value';\n\t\t\t} else if (i === 'download' && value === true) {\n\t\t\t\t// Calling `setAttribute` with a truthy value will lead to it being\n\t\t\t\t// passed as a stringified value, e.g. `download=\"true\"`. React\n\t\t\t\t// converts it to an empty string instead, otherwise the attribute\n\t\t\t\t// value will be used as the file name and the file will be called\n\t\t\t\t// \"true\" upon downloading it.\n\t\t\t\tvalue = '';\n\t\t\t} else if (/ondoubleclick/i.test(i)) {\n\t\t\t\ti = 'ondblclick';\n\t\t\t} else if (\n\t\t\t\t/^onchange(textarea|input)/i.test(i + type) &&\n\t\t\t\t!onChangeInputType(props.type)\n\t\t\t) {\n\t\t\t\ti = 'oninput';\n\t\t\t} else if (/^onfocus$/i.test(i)) {\n\t\t\t\ti = 'onfocusin';\n\t\t\t} else if (/^onblur$/i.test(i)) {\n\t\t\t\ti = 'onfocusout';\n\t\t\t} else if (/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)) {\n\t\t\t\ti = i.toLowerCase();\n\t\t\t} else if (nonCustomElement && CAMEL_PROPS.test(i)) {\n\t\t\t\ti = i.replace(/[A-Z0-9]/, '-$&').toLowerCase();\n\t\t\t} else if (value === null) {\n\t\t\t\tvalue = undefined;\n\t\t\t}\n\n\t\t\t// Add support for onInput and onChange, see #3561\n\t\t\t// if we have an oninput prop already change it to oninputCapture\n\t\t\tif (/^oninput$/i.test(i)) {\n\t\t\t\ti = i.toLowerCase();\n\t\t\t\tif (normalizedProps[i]) {\n\t\t\t\t\ti = 'oninputCapture';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnormalizedProps[i] = value;\n\t\t}\n\n\t\t// Add support for array select values: <select multiple value={[]} />\n\t\tif (\n\t\t\ttype == 'select' &&\n\t\t\tnormalizedProps.multiple &&\n\t\t\tArray.isArray(normalizedProps.value)\n\t\t) {\n\t\t\t// forEach() always returns undefined, which we abuse here to unset the value prop.\n\t\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.value.indexOf(child.props.value) != -1;\n\t\t\t});\n\t\t}\n\n\t\t// Adding support for defaultValue in select tag\n\t\tif (type == 'select' && normalizedProps.defaultValue != null) {\n\t\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\t\tif (normalizedProps.multiple) {\n\t\t\t\t\tchild.props.selected =\n\t\t\t\t\t\tnormalizedProps.defaultValue.indexOf(child.props.value) != -1;\n\t\t\t\t} else {\n\t\t\t\t\tchild.props.selected =\n\t\t\t\t\t\tnormalizedProps.defaultValue == child.props.value;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvnode.props = normalizedProps;\n\n\t\tif (props.class != props.className) {\n\t\t\tclassNameDescriptor.enumerable = 'className' in props;\n\t\t\tif (props.className != null) normalizedProps.class = props.className;\n\t\t\tObject.defineProperty(normalizedProps, 'className', classNameDescriptor);\n\t\t}\n\t}\n\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n// Only needed for react-relay\nlet currentComponent;\nconst oldBeforeRender = options._render;\noptions._render = function(vnode) {\n\tif (oldBeforeRender) {\n\t\toldBeforeRender(vnode);\n\t}\n\tcurrentComponent = vnode._component;\n};\n\n// This is a very very private internal function for React it\n// is used to sort-of do runtime dependency injection. So far\n// only `react-relay` makes use of it. It uses it to read the\n// context value.\nexport const __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = {\n\tReactCurrentDispatcher: {\n\t\tcurrent: {\n\t\t\treadContext(context) {\n\t\t\t\treturn currentComponent._globalContext[context._id].props.value;\n\t\t\t}\n\t\t}\n\t}\n};\n","import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport {\n\thydrate,\n\trender,\n\tREACT_ELEMENT_TYPE,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n} from './render';\n\nconst version = '17.0.2'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\n/**\n * In React, `flushSync` flushes the entire tree and forces a rerender. It's\n * implmented here as a no-op.\n * @template Arg\n * @template Result\n * @param {(arg: Arg) => Result} callback function that runs before the flush\n * @param {Arg} [arg] Optional arugment that can be passed to the callback\n * @returns\n */\nconst flushSync = (callback, arg) => callback(arg);\n\n/**\n * Strict Mode is not implemented in Preact, so we provide a stand-in for it\n * that just renders its children without imposing any restrictions.\n */\nconst StrictMode = Fragment;\n\nexport function startTransition(cb) {\n\tcb();\n}\n\nexport function useDeferredValue(val) {\n\treturn val;\n}\n\nexport function useTransition() {\n\treturn [false, startTransition];\n}\n\n// TODO: in theory this should be done after a VNode is diffed as we want to insert\n// styles/... before it attaches\nexport const useInsertionEffect = useLayoutEffect;\n\nexport function useSyncExternalStore(subscribe, getSnapshot) {\n\tconst [state, setState] = useState(getSnapshot);\n\n\t// TODO: in suspense for data we could have a discrepancy here because Preact won't re-init the \"useState\"\n\t// when this unsuspends which could lead to stale state as the subscription is torn down.\n\n\tuseEffect(() => {\n\t\treturn subscribe(() => {\n\t\t\tsetState(getSnapshot());\n\t\t});\n\t}, [subscribe, getSnapshot]);\n\n\treturn state;\n}\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseInsertionEffect,\n\tuseTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tstartTransition,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var matchHtmlEntity = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g;\nvar htmlEntities = {\n  '&amp;': '&',\n  '&#38;': '&',\n  '&lt;': '<',\n  '&#60;': '<',\n  '&gt;': '>',\n  '&#62;': '>',\n  '&apos;': \"'\",\n  '&#39;': \"'\",\n  '&quot;': '\"',\n  '&#34;': '\"'\n};\n\nvar unescapeHtmlEntity = function unescapeHtmlEntity(m) {\n  return htmlEntities[m];\n};\n\nexport var unescape = function unescape(text) {\n  return text.replace(matchHtmlEntity, unescapeHtmlEntity);\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createContext } from 'react';\nimport { unescape } from './unescape';\nvar defaultOptions = {\n  bindI18n: 'languageChanged',\n  bindI18nStore: '',\n  transEmptyNodeValue: '',\n  transSupportBasicHtmlNodes: true,\n  transWrapTextNodes: '',\n  transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'p'],\n  useSuspense: true,\n  unescape: unescape\n};\nvar i18nInstance;\nexport var I18nContext = createContext();\nexport function setDefaults() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  defaultOptions = _objectSpread(_objectSpread({}, defaultOptions), options);\n}\nexport function getDefaults() {\n  return defaultOptions;\n}\nexport var ReportNamespaces = function () {\n  function ReportNamespaces() {\n    _classCallCheck(this, ReportNamespaces);\n\n    this.usedNamespaces = {};\n  }\n\n  _createClass(ReportNamespaces, [{\n    key: \"addUsedNamespaces\",\n    value: function addUsedNamespaces(namespaces) {\n      var _this = this;\n\n      namespaces.forEach(function (ns) {\n        if (!_this.usedNamespaces[ns]) _this.usedNamespaces[ns] = true;\n      });\n    }\n  }, {\n    key: \"getUsedNamespaces\",\n    value: function getUsedNamespaces() {\n      return Object.keys(this.usedNamespaces);\n    }\n  }]);\n\n  return ReportNamespaces;\n}();\nexport function setI18n(instance) {\n  i18nInstance = instance;\n}\nexport function getI18n() {\n  return i18nInstance;\n}\nexport var initReactI18next = {\n  type: '3rdParty',\n  init: function init(instance) {\n    setDefaults(instance.options.react);\n    setI18n(instance);\n  }\n};\nexport function composeInitialProps(ForComponent) {\n  return function (ctx) {\n    return new Promise(function (resolve) {\n      var i18nInitialProps = getInitialProps();\n\n      if (ForComponent.getInitialProps) {\n        ForComponent.getInitialProps(ctx).then(function (componentsInitialProps) {\n          resolve(_objectSpread(_objectSpread({}, componentsInitialProps), i18nInitialProps));\n        });\n      } else {\n        resolve(i18nInitialProps);\n      }\n    });\n  };\n}\nexport function getInitialProps() {\n  var i18n = getI18n();\n  var namespaces = i18n.reportNamespaces ? i18n.reportNamespaces.getUsedNamespaces() : [];\n  var ret = {};\n  var initialI18nStore = {};\n  i18n.languages.forEach(function (l) {\n    initialI18nStore[l] = {};\n    namespaces.forEach(function (ns) {\n      initialI18nStore[l][ns] = i18n.getResourceBundle(l, ns) || {};\n    });\n  });\n  ret.initialI18nStore = initialI18nStore;\n  ret.initialLanguage = i18n.language;\n  return ret;\n}","export function warn() {\n  if (console && console.warn) {\n    var _console;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (typeof args[0] === 'string') args[0] = \"react-i18next:: \".concat(args[0]);\n\n    (_console = console).warn.apply(_console, args);\n  }\n}\nvar alreadyWarned = {};\nexport function warnOnce() {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  if (typeof args[0] === 'string' && alreadyWarned[args[0]]) return;\n  if (typeof args[0] === 'string') alreadyWarned[args[0]] = new Date();\n  warn.apply(void 0, args);\n}\nexport function loadNamespaces(i18n, ns, cb) {\n  i18n.loadNamespaces(ns, function () {\n    if (i18n.isInitialized) {\n      cb();\n    } else {\n      var initialized = function initialized() {\n        setTimeout(function () {\n          i18n.off('initialized', initialized);\n        }, 0);\n        cb();\n      };\n\n      i18n.on('initialized', initialized);\n    }\n  });\n}\n\nfunction oldI18nextHasLoadedNamespace(ns, i18n) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var lng = i18n.languages[0];\n  var fallbackLng = i18n.options ? i18n.options.fallbackLng : false;\n  var lastLng = i18n.languages[i18n.languages.length - 1];\n  if (lng.toLowerCase() === 'cimode') return true;\n\n  var loadNotPending = function loadNotPending(l, n) {\n    var loadState = i18n.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n    return loadState === -1 || loadState === 2;\n  };\n\n  if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18n.services.backendConnector.backend && i18n.isLanguageChangingTo && !loadNotPending(i18n.isLanguageChangingTo, ns)) return false;\n  if (i18n.hasResourceBundle(lng, ns)) return true;\n  if (!i18n.services.backendConnector.backend || i18n.options.resources && !i18n.options.partialBundledLanguages) return true;\n  if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n  return false;\n}\n\nexport function hasLoadedNamespace(ns, i18n) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (!i18n.languages || !i18n.languages.length) {\n    warnOnce('i18n.languages were undefined or empty', i18n.languages);\n    return true;\n  }\n\n  var isNewerI18next = i18n.options.ignoreJSONStructure !== undefined;\n\n  if (!isNewerI18next) {\n    return oldI18nextHasLoadedNamespace(ns, i18n, options);\n  }\n\n  return i18n.hasLoadedNamespace(ns, {\n    precheck: function precheck(i18nInstance, loadNotPending) {\n      if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18nInstance.services.backendConnector.backend && i18nInstance.isLanguageChangingTo && !loadNotPending(i18nInstance.isLanguageChangingTo, ns)) return false;\n    }\n  });\n}\nexport function getDisplayName(Component) {\n  return Component.displayName || Component.name || (typeof Component === 'string' && Component.length > 0 ? Component : 'Unknown');\n}","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useContext, useRef } from 'react';\nimport { getI18n, getDefaults, ReportNamespaces, I18nContext } from './context';\nimport { warnOnce, loadNamespaces, hasLoadedNamespace } from './utils';\n\nvar usePrevious = function usePrevious(value, ignore) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = ignore ? ref.current : value;\n  }, [value, ignore]);\n  return ref.current;\n};\n\nexport function useTranslation(ns) {\n  var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var i18nFromProps = props.i18n;\n\n  var _ref = useContext(I18nContext) || {},\n      i18nFromContext = _ref.i18n,\n      defaultNSFromContext = _ref.defaultNS;\n\n  var i18n = i18nFromProps || i18nFromContext || getI18n();\n  if (i18n && !i18n.reportNamespaces) i18n.reportNamespaces = new ReportNamespaces();\n\n  if (!i18n) {\n    warnOnce('You will need to pass in an i18next instance by using initReactI18next');\n\n    var notReadyT = function notReadyT(k) {\n      return Array.isArray(k) ? k[k.length - 1] : k;\n    };\n\n    var retNotReady = [notReadyT, {}, false];\n    retNotReady.t = notReadyT;\n    retNotReady.i18n = {};\n    retNotReady.ready = false;\n    return retNotReady;\n  }\n\n  if (i18n.options.react && i18n.options.react.wait !== undefined) warnOnce('It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.');\n\n  var i18nOptions = _objectSpread(_objectSpread(_objectSpread({}, getDefaults()), i18n.options.react), props);\n\n  var useSuspense = i18nOptions.useSuspense,\n      keyPrefix = i18nOptions.keyPrefix;\n  var namespaces = ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;\n  namespaces = typeof namespaces === 'string' ? [namespaces] : namespaces || ['translation'];\n  if (i18n.reportNamespaces.addUsedNamespaces) i18n.reportNamespaces.addUsedNamespaces(namespaces);\n  var ready = (i18n.isInitialized || i18n.initializedStoreOnce) && namespaces.every(function (n) {\n    return hasLoadedNamespace(n, i18n, i18nOptions);\n  });\n\n  function getT() {\n    return i18n.getFixedT(null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);\n  }\n\n  var _useState = useState(getT),\n      _useState2 = _slicedToArray(_useState, 2),\n      t = _useState2[0],\n      setT = _useState2[1];\n\n  var joinedNS = namespaces.join();\n  var previousJoinedNS = usePrevious(joinedNS);\n  var isMounted = useRef(true);\n  useEffect(function () {\n    var bindI18n = i18nOptions.bindI18n,\n        bindI18nStore = i18nOptions.bindI18nStore;\n    isMounted.current = true;\n\n    if (!ready && !useSuspense) {\n      loadNamespaces(i18n, namespaces, function () {\n        if (isMounted.current) setT(getT);\n      });\n    }\n\n    if (ready && previousJoinedNS && previousJoinedNS !== joinedNS && isMounted.current) {\n      setT(getT);\n    }\n\n    function boundReset() {\n      if (isMounted.current) setT(getT);\n    }\n\n    if (bindI18n && i18n) i18n.on(bindI18n, boundReset);\n    if (bindI18nStore && i18n) i18n.store.on(bindI18nStore, boundReset);\n    return function () {\n      isMounted.current = false;\n      if (bindI18n && i18n) bindI18n.split(' ').forEach(function (e) {\n        return i18n.off(e, boundReset);\n      });\n      if (bindI18nStore && i18n) bindI18nStore.split(' ').forEach(function (e) {\n        return i18n.store.off(e, boundReset);\n      });\n    };\n  }, [i18n, joinedNS]);\n  var isInitial = useRef(true);\n  useEffect(function () {\n    if (isMounted.current && !isInitial.current) {\n      setT(getT);\n    }\n\n    isInitial.current = false;\n  }, [i18n]);\n  var ret = [t, i18n, ready];\n  ret.t = t;\n  ret.i18n = i18n;\n  ret.ready = ready;\n  if (ready) return ret;\n  if (!ready && !useSuspense) return ret;\n  throw new Promise(function (resolve) {\n    loadNamespaces(i18n, namespaces, function () {\n      resolve();\n    });\n  });\n}","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"forwardedRef\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createElement, forwardRef as forwardRefReact } from 'react';\nimport { useTranslation } from './useTranslation';\nimport { getDisplayName } from './utils';\nexport function withTranslation(ns) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function Extend(WrappedComponent) {\n    function I18nextWithTranslation(_ref) {\n      var forwardedRef = _ref.forwardedRef,\n          rest = _objectWithoutProperties(_ref, _excluded);\n\n      var _useTranslation = useTranslation(ns, _objectSpread(_objectSpread({}, rest), {}, {\n        keyPrefix: options.keyPrefix\n      })),\n          _useTranslation2 = _slicedToArray(_useTranslation, 3),\n          t = _useTranslation2[0],\n          i18n = _useTranslation2[1],\n          ready = _useTranslation2[2];\n\n      var passDownProps = _objectSpread(_objectSpread({}, rest), {}, {\n        t: t,\n        i18n: i18n,\n        tReady: ready\n      });\n\n      if (options.withRef && forwardedRef) {\n        passDownProps.ref = forwardedRef;\n      } else if (!options.withRef && forwardedRef) {\n        passDownProps.forwardedRef = forwardedRef;\n      }\n\n      return createElement(WrappedComponent, passDownProps);\n    }\n\n    I18nextWithTranslation.displayName = \"withI18nextTranslation(\".concat(getDisplayName(WrappedComponent), \")\");\n    I18nextWithTranslation.WrappedComponent = WrappedComponent;\n\n    var forwardRef = function forwardRef(props, ref) {\n      return createElement(I18nextWithTranslation, Object.assign({}, props, {\n        forwardedRef: ref\n      }));\n    };\n\n    return options.withRef ? forwardRefReact(forwardRef) : I18nextWithTranslation;\n  };\n}","{\n    \"previous_coms\": \"See previous comments\",\n    \"next_coms\": \"See next comments\",\n    \"ago\": \"{{duration}} ago\",\n    \"groups\": \"Groups\",\n    \"login_placeholder\": \"email\",\n    \"password_placeholder\": \"password\",\n    \"new_password_placeholder\": \"new password\",\n    \"confirm_password_placeholder\": \"confirm password\",\n    \"connect\": \"Connection\",\n    \"submit\": \"Submit\",\n    \"title_placeholder\": \"Title of your message (optional)\",\n    \"text_placeholder\": \"Write your message here\",\n    \"upload_image\": \"Add photos\",\n    \"upload_video\": \"Add videos\",\n    \"upload_music\": \"Add musics\",\n    \"upload_pdf\": \"Add pdf\",\n    \"add_date\": \"Add a date\",\n    \"logout\": \"Logout\",\n    \"settings\": \"Settings\",\n    \"name\": \"Name\",\n    \"name_input\": \"Choose a name\",\n    \"login\": \"Login\",\n    \"login_input\": \"Choose a login\",\n    \"email\": \"Email\",\n    \"email_input\": \"Fill in your email here\",\n    \"save_changes\": \"Save changes\",\n    \"password\": \"Password\",\n    \"password_input\": \"Write a new password here\",\n    \"Invalid login/password\": \"Invalid login and/or password\",\n    \"edit\": \"Edit\",\n    \"delete\": \"Delete\",\n    \"ask_delete_message\": \"Are you sure to delete this message?\",\n    \"account\": \"Account\",\n    \"groups\": \"Groups\",\n    \"forgot_password\": \"Did you forget your password?\",\n    \"password_reset_mail_sent\": \"The password reset email was sent !\",\n    \"User not found\": \"User not found\",\n    \"reset_password_title\": \"Reset your password\",\n    \"error\": \"An error occurred\",\n    \"passwords_dont_match\": \"Passwords don't match\",\n    \"invitation_link\": \"Invitation link\",\n    \"reset_invitation_link\": \"Reset invitation link\",\n    \"invitation_welcome\": \"Welcome on Zusam ! Please sign up before joining the group.\",\n    \"signup\": \"Sign up\",\n    \"create_a_group\": \"Create a group\",\n    \"create_the_group\": \"Create the group\",\n    \"quit_group\": \"Leave the group\",\n    \"settings_updated\": \"Your settings were updated\",\n    \"group_updated\": \"The group was updated !\",\n    \"group_left\": \"You left the group !\",\n    \"multiple_photos_upload\": \"An error ocurred. Try uploading images one by one (this can happen in some browsers)\",\n    \"error_new_message\": \"An error occurred while sending your message\",\n    \"error_upload\": \"An error occurred during the upload\",\n    \"cancel_write\": \"Do you really want to cancel writing a new message?\",\n    \"empty_message\": \"The message is empty and cannot be sent !\",\n    \"cancel\": \"Cancel\",\n    \"just_now\": \"Just now\",\n    \"notification_emails\": \"Email notifications\",\n    \"none\": \"None\",\n    \"hourly\": \"Hourly\",\n    \"daily\": \"Daily\",\n    \"weekly\": \"Weekly\",\n    \"monthly\": \"Monthly\",\n    \"notification_emails_stopped\": \"Email notifications stopped !\",\n    \"group_share_choice\": \"To which group do you want to send this message?\",\n    \"public_link\": \"public link\",\n    \"default_group\": \"Default group\",\n    \"destroy_account\": \"Delete your account\",\n    \"destroy_account_explain\": \"Once you delete your account, there is no going back. Please be certain.\",\n    \"are_you_sure\": \"Are you sure?\",\n    \"share_message\": \"share the message\",\n    \"users\": \"users\",\n    \"has_posted_in\": \"has posted in\",\n    \"has_commented_on\": \"has commented on\",\n    \"has_joined\": \"has joined\",\n    \"has_left\": \"has left\",\n    \"the_message_from\": \"the message from\",\n    \"in\": \"in\",\n    \"lang\": \"language\",\n    \"reply\": \"reply\",\n    \"replies_one\": \"{{count}} reply\",\n    \"replies_other\":\"{{count}} replies\",\n    \"publish_in_group\": \"publish in the group\",\n    \"search_in_group\": \"search in this group\",\n    \"changed_group_name\": \"changed the group's name\",\n    \"to\": \"to\",\n    \"notifications\": \"notifications\",\n    \"mark_all_as_read\": \"mark all as read\",\n    \"search_without_result\": \"Your search did not match any message.\",\n    \"add_bookmark\": \"Bookmark message\",\n    \"remove_bookmark\": \"Unbookmark message\",\n    \"bookmarks\": \"bookmarks\",\n    \"api_key\": \"API key\",\n    \"reset_api_key\": \"Reset the API key (you will be disconnected)\",\n    \"video_not_ready\": \"Video is not ready yet.\",\n    \"bookmark_added\": \"Message added to bookmarks !\",\n    \"bookmark_removed\": \"Message removed from bookmarks !\",\n    \"parent_message\": \"Parent message\"\n}\n","{\n    \"previous_coms\": \"Voir les commentaires prcdents\",\n    \"next_coms\": \"Voir les commentaires suivants\",\n    \"ago\": \"Il y a {{duration}}\",\n    \"groups\": \"Groupes\",\n    \"login_placeholder\": \"email\",\n    \"password_placeholder\": \"mot de passe\",\n    \"new_password_placeholder\": \"nouveau mot de passe\",\n    \"confirm_password_placeholder\": \"confirmez le mot de passe\",\n    \"connect\": \"Connexion\",\n    \"submit\": \"Envoyer\",\n    \"title_placeholder\": \"Titre de votre message (optionnel)\",\n    \"text_placeholder\": \"Ecrivez votre message ici\",\n    \"upload_image\": \"Ajouter des photos\",\n    \"upload_video\": \"Ajouter des vidos\",\n    \"upload_music\": \"Ajouter des musiques\",\n    \"upload_pdf\": \"Ajouter un pdf\",\n    \"add_date\": \"Prciser une date\",\n    \"logout\": \"Se dconnecter\",\n    \"settings\": \"Paramtres\",\n    \"name\": \"Nom\",\n    \"name_input\": \"Choisissez un nom\",\n    \"login\": \"Identifiant\",\n    \"login_input\": \"Choisissez un identifiant\",\n    \"email\": \"Email\",\n    \"email_input\": \"Renseignez votre adresse mail ici\",\n    \"save_changes\": \"Sauvegarder les changements\",\n    \"password\": \"Mot de passe\",\n    \"password_input\": \"Entrez un nouveau mot de passe\",\n    \"Invalid login/password\": \"Identifiant et/ou mot de passe invalide\",\n    \"edit\": \"Editer\",\n    \"delete\": \"Supprimer\",\n    \"ask_delete_message\": \"tes-vous sr de vouloir supprimer ce message ?\",\n    \"account\": \"Compte\",\n    \"groups\": \"Groupes\",\n    \"forgot_password\": \"Mot de passe oubli ?\",\n    \"password_reset_mail_sent\": \"Le mail de rinitialisation a bien t envoy !\",\n    \"User not found\": \"Utilisateur inexistant\",\n    \"reset_password_title\": \"Rinitialisation de votre mot de passe\",\n    \"error\": \"Une erreur est survenue. Veuillez ressayer.\",\n    \"passwords_dont_match\": \"Les mots de passe ne sont pas identiques !\",\n    \"invitation_link\": \"Lien d'invitation\",\n    \"reset_invitation_link\": \"Rinitialiser le lien d'invitation\",\n    \"invitation_welcome\": \"Bienvenue sur Zusam ! Veuillez vous inscrire avant de rejoindre le groupe.\",\n    \"signup\": \"S'inscrire\",\n    \"create_a_group\": \"Crer un groupe\",\n    \"create_the_group\": \"Crer le groupe\",\n    \"quit_group\": \"Quitter le groupe\",\n    \"settings_updated\": \"Vos prfrences ont t mises  jour !\",\n    \"group_updated\": \"Le groupe a t mis  jour !\",\n    \"group_left\": \"Vous avez quitt le groupe !\",\n    \"multiple_photos_upload\": \"Une erreur est survenue. Veuillez essayer avec une seule photo (certains navigateurs bloquent l'ajout de plusieurs photos en simultan).\",\n    \"error_new_message\": \"Une erreur inconnue est survenue pendant l'envoi de votre message.\",\n    \"error_upload\": \"Une erreur s'est produite pendant l'envoi.\",\n    \"cancel_write\": \"Voulez-vous annuler l'criture d'un nouveau message ?\",\n    \"empty_message\": \"Le message est vide !\",\n    \"cancel\": \"Annuler\",\n    \"just_now\": \"A l'instant\",\n    \"notification_emails\": \"Mail de notification\",\n    \"none\": \"Aucun\",\n    \"hourly\": \"Une fois par heure\",\n    \"daily\": \"Journalier\",\n    \"weekly\": \"Hebdomadaire\",\n    \"monthly\": \"Mensuel\",\n    \"notification_emails_stopped\": \"Notifications par email dsactives !\",\n    \"group_share_choice\": \"A quel groupe voulez-vous envoyer ce message ?\",\n    \"public_link\": \"lien public\",\n    \"default_group\": \"Groupe par dfaut\",\n    \"destroy_account\": \"Supprimer votre compte\",\n    \"destroy_account_explain\": \"Une fois votre compte supprim, il sera impossible d'annuler l'opration.\",\n    \"are_you_sure\": \"Etes-vous sr ?\",\n    \"share_message\": \"partager le message\",\n    \"users\": \"utilisateurs\",\n    \"has_posted_in\": \"a post dans\",\n    \"has_commented_on\": \"a comment\",\n    \"has_joined\": \"a rejoint\",\n    \"has_left\": \"a quitt\",\n    \"the_message_from\": \"le message de\",\n    \"in\": \"dans\",\n    \"lang\": \"langue\",\n    \"reply\": \"rpondre\",\n    \"replies_one\": \"{{count}} rponse\",\n    \"replies_other\": \"{{count}} rponses\",\n    \"publish_in_group\": \"promouvoir le message\",\n    \"search_in_group\": \"rechercher dans le groupe\",\n    \"changed_group_name\": \"a chang le nom du groupe\",\n    \"to\": \"en\",\n    \"notifications\": \"notifications\",\n    \"mark_all_as_read\": \"tout marquer comme lu\",\n    \"search_without_result\": \"Votre recherche ne correspond  aucun message.\",\n    \"add_bookmark\": \"Ajouter aux marque-pages\",\n    \"remove_bookmark\": \"Supprimer des marque-pages\",\n    \"bookmarks\": \"marque-pages\",\n    \"api_key\": \"Clef d'API\",\n    \"reset_api_key\": \"Changer votre clef d'API (vous allez tre dconnect)\",\n    \"video_not_ready\": \"La vido n'est pas encore prte.\",\n    \"bookmark_added\": \"Message ajout aux marque-pages !\",\n    \"bookmark_removed\": \"Message supprim des marque-pages !\",\n    \"parent_message\": \"Message parent\"\n}\n","{\n    \"previous_coms\": \"Ver los comentarios anteriores\",\n    \"next_coms\": \"Ver los siguientes comentarios\",\n    \"ago\": \"Hace {{duration}}\",\n    \"groups\": \"Grupos\",\n    \"login_placeholder\": \"correo\",\n    \"password_placeholder\": \"contrasea\",\n    \"new_password_placeholder\": \"nueva contrasea\",\n    \"confirm_password_placeholder\": \"confirmar contrasea\",\n    \"connect\": \"Conectarse\",\n    \"submit\": \"Enviar\",\n    \"title_placeholder\": \"Asunto (opcional)\",\n    \"text_placeholder\": \"Escribe tu mensaje aqu\",\n    \"upload_image\": \"Aadir fotos\",\n    \"upload_video\": \"Aadir videos\",\n    \"upload_music\": \"Aadir msica\",\n    \"upload_pdf\": \"Aadir pdf\",\n    \"add_date\": \"Aadir una fecha\",\n    \"logout\": \"Desconectarse\",\n    \"settings\": \"Parmetros\",\n    \"name\": \"Nombre\",\n    \"name_input\": \"Elige un nombre\",\n    \"login\": \"Usuario\",\n    \"login_input\": \"Elige un usuario\",\n    \"email\": \"Correo\",\n    \"email_input\": \"Indicar correo electrnico\",\n    \"save_changes\": \"Guardar los cambios\",\n    \"password\": \"Contrasea\",\n    \"password_input\": \"Indicar una nueva contrasea\",\n    \"Invalid login/password\": \"Usuario o contrasea incorrecto\",\n    \"edit\": \"Editar\",\n    \"delete\": \"Borrar\",\n    \"ask_delete_message\": \"Quieres borrar este mensaje?\",\n    \"account\": \"Cuenta\",\n    \"groups\": \"Grupos\",\n    \"forgot_password\": \"Olvidaste tu contrasea?\",\n    \"password_reset_mail_sent\": \"El correo ha sido enviado!\",\n    \"User not found\": \"El usuario no existe\",\n    \"reset_password_title\": \"Cambia tu contrasea\",\n    \"error\": \"Un error ocurri. Vuelve a intentar.\",\n    \"passwords_dont_match\": \"Las contraseas no coinciden\",\n    \"invitation_link\": \"Enlace de invitacin\",\n    \"reset_invitation_link\": \"Cambiar el enlace de invitacin\",\n    \"invitation_welcome\": \"Bienvenido a Zusam ! Inscribete para conectarte con un grupo.\",\n    \"signup\": \"Inscribirse\",\n    \"create_a_group\": \"Crear un grupo\",\n    \"create_the_group\": \"Crear el grupo\",\n    \"quit_group\": \"Dejar el grupo\",\n    \"settings_updated\": \"Tus preferencias han sido actualizadas!\",\n    \"group_updated\": \"El grupo ha sido actualizado!\",\n    \"group_left\": \"Has abandonado el grupo\",\n    \"multiple_photos_upload\": \"Un error ocurri. Vuelve a intentar con solo una foto (algunos navegadores impiden aadir varias fotos al mismo tiempo).\",\n    \"error_new_message\": \"Un error desconocido ocurri durante el envo del mensaje.\",\n    \"error_upload\": \"Un error ocurri durante el envo.\",\n    \"cancel_write\": \"Quieres cancelar este nuevo mensaje?\",\n    \"empty_message\": \"No hay mensaje!\",\n    \"cancel\": \"Cancelar\",\n    \"just_now\": \"Ahora\",\n    \"notification_emails\": \"Correo de notificacin\",\n    \"none\": \"Ninguno\",\n    \"hourly\": \"Cada hora\",\n    \"daily\": \"Diario\",\n    \"weekly\": \"Semanal\",\n    \"monthly\": \"Mensual\",\n    \"notification_emails_stopped\": \"Notificaciones de correo electrnico detenidas!\",\n    \"group_share_choice\": \"A qu grupo desea enviar este mensaje?\",\n    \"public_link\": \"enlace pblico\",\n    \"default_group\": \"Grupo predeterminado\",\n    \"destroy_account\": \"Borrar la cuenta\",\n    \"destroy_account_explain\": \"Una vez que elimines tu cuenta, no hay vuelta atrs.\",\n    \"are_you_sure\": \"Ests seguro ?\",\n    \"share_message\": \"comparte el mensaje\",\n    \"users\": \"usuarios\",\n    \"has_posted_in\": \"ha publicado en\",\n    \"has_commented_on\": \"ha comentado\",\n    \"has_joined\": \"se has unido\",\n    \"has_left\": \"ha dejado\",\n    \"the_message_from\": \"el mensaje de\",\n    \"in\": \"en\",\n    \"lang\": \"idioma\",\n    \"reply\": \"responder\",\n    \"replies_one\": \"{{count}} respuesta\",\n    \"replies_other\":\"{{count}} respuestas\",\n    \"publish_in_group\": \"publicar en el grupo\",\n    \"search_in_group\": \"buscar en este grupo\",\n    \"changed_group_name\": \"cambi el nombre del grupo\",\n    \"to\": \"a\",\n    \"notifications\": \"notificaciones\",\n    \"mark_all_as_read\": \"marcar todo como leido\",\n    \"search_without_result\": \"Su bsqueda no coincide con ningn mensaje.\",\n    \"add_bookmark\": \"Marcar este mensaje\",\n    \"remove_bookmark\": \"Desmarcar este mensaje\",\n    \"bookmarks\": \"marcadores\",\n    \"api_key\": \"Clave API\",\n    \"reset_api_key\": \"Restablecer la clave API (se desconectar)\",\n    \"video_not_ready\": \"El video an no est listo\",\n    \"bookmark_added\": \"Mensaje agregado a marcadores !\",\n    \"bookmark_removed\": \"Mensaje eliminado de los marcadores !\",\n    \"parent_message\": \"Mensaje para padres\"\n\n}\n","{\n    \"previous_coms\": \"Pozri predchdzajce komentre\",\n    \"next_coms\": \"Pozri nasledujce komentre\",\n    \"ago\": \"{{duration}} sp\",\n    \"groups\": \"Skupiny\",\n    \"login_placeholder\": \"email\",\n    \"password_placeholder\": \"heslo\",\n    \"new_password_placeholder\": \"nov heslo\",\n    \"confirm_password_placeholder\": \"potvrdi heslo\",\n    \"connect\": \"Connection\",\n    \"submit\": \"Odosla\",\n    \"title_placeholder\": \"Nadpis vho prspevku (nie je povinn)\",\n    \"text_placeholder\": \"Tu nap prspevok\",\n    \"upload_image\": \"Prida fotografie\",\n    \"upload_video\": \"Prida vide\",\n    \"upload_music\": \"Prida hudbu\",\n    \"upload_pdf\": \"Prida pdf\",\n    \"add_date\": \"Prida dtum\",\n    \"logout\": \"Odhlsi\",\n    \"settings\": \"Nastavenia\",\n    \"name\": \"Meno\",\n    \"name_input\": \"Zvo si nejak meno\",\n    \"login\": \"Login\",\n    \"login_input\": \"Zvo si nejak prihlasovacie meno\",\n    \"email\": \"Email\",\n    \"email_input\": \"Nap tvoj email sem\",\n    \"save_changes\": \"Uloi zmeny\",\n    \"password\": \"Heslo\",\n    \"password_input\": \"Tu nap heslo\",\n    \"Invalid login/password\": \"Nesprvny login alebo heslo\",\n    \"edit\": \"Upravi\",\n    \"delete\": \"Zmaza\",\n    \"ask_delete_message\": \"Si si ist, e chce zmaza tento prspevok?\",\n    \"account\": \"et\",\n    \"groups\": \"Skupiny\",\n    \"forgot_password\": \"Zabudol si svoje heslo?\",\n    \"password_reset_mail_sent\": \"Email s informciami o nastaven novho hesla bol odoslan!\",\n    \"User not found\": \"Neexistujci uvate\",\n    \"reset_password_title\": \"Zmena hesla\",\n    \"error\": \"Chyba\",\n    \"passwords_dont_match\": \"Hesl sa nezhoduj\",\n    \"invitation_link\": \"Pozvac odkaz\",\n    \"reset_invitation_link\": \"Reset invitation link\",\n    \"invitation_welcome\": \"Vitajte v Zusam ! Zaregistrujte sa pred pripojenm sa ku skupine.\",\n    \"signup\": \"Prihlsi\",\n    \"create_a_group\": \"Vytvori skupinu\",\n    \"create_the_group\": \"Vytvori skupinu\",\n    \"quit_group\": \"Opusti skupinu\",\n    \"settings_updated\": \"Vae nastavenia boli zmenen\",\n    \"group_updated\": \"Nastavenia skupiny boli zmenen\",\n    \"group_left\": \"Opustili ste skupinu\",\n    \"multiple_photos_upload\": \"Objavila sa chyba. Skste priloi obrzky po jednom (tto chyba sa me objavova v niektorch prehliadaoch)\",\n    \"error_new_message\": \"Pri odosielan prspevku sa objavila chyba\",\n    \"error_upload\": \"Objavila sa chyba poas odosielania\",\n    \"cancel_write\": \"Chcete naozaj zrui vytvranie novho prspevku?\",\n    \"empty_message\": \"Przdna sprva neme by odoslan\",\n    \"cancel\": \"Zrui\",\n    \"just_now\": \"Prve teraz\",\n    \"notification_emails\": \"Notifikan email\",\n    \"none\": \"iadne\",\n    \"hourly\": \"Kad hodinu\",\n    \"daily\": \"Denne\",\n    \"weekly\": \"Tdenne\",\n    \"monthly\": \"Mesane\",\n    \"notification_emails_stopped\": \"E-mailov upozornenia sa zastavili!\",\n    \"group_share_choice\": \"Do ktorej skupiny chcete odosla tto sprvu ?\",\n    \"public_link\": \"verejn spojenie\",\n    \"default_group\": \"Predvolen skupinu\",\n    \"destroy_account\": \"Odstrte svoj et\",\n    \"destroy_account_explain\": \"Po odstrnen tu sa u nevrti\",\n    \"are_you_sure\": \"Si si ist ?\",\n    \"share_message\": \"zdieajte sprvu\",\n    \"users\": \"uvatelia\",\n    \"has_posted_in\": \"zverejnila v\",\n    \"has_commented_on\": \"komentoval\",\n    \"has_joined\": \"sa pripojil k\",\n    \"has_left\": \"opustil\",\n    \"the_message_from\": \"sprva od\",\n    \"in\": \"v\",\n    \"lang\": \"jazyk\",\n    \"reply\": \"odpove\",\n    \"replies_one\": \"{{count}} odpove\",\n    \"replies_other\":\"{{count}} odpoved\",\n    \"publish_in_group\": \"publikova v skupine\",\n    \"search_in_group\": \"hada v tejto skupine\",\n    \"changed_group_name\": \"zmenil nzov skupiny\",\n    \"to\": \"na\",\n    \"notifications\": \"oznmenia\",\n    \"mark_all_as_read\": \"oznai vetko ako pretan\",\n    \"search_without_result\": \"Vmu vyhadvaniu nezodpoved iadna sprva\",\n    \"add_bookmark\": \"Tto sprvu uloi medzi zloky\",\n    \"remove_bookmark\": \"Zrute oznaenie tejto sprvy\",\n    \"bookmarks\": \"zloky\",\n    \"api_key\": \"K API\",\n    \"reset_api_key\": \"Obnovte k rozhrania API (budete odpojen)\",\n    \"video_not_ready\": \"Video ete nie je pripraven\",\n    \"bookmark_added\": \"Sprva pridan do zloiek !\",\n    \"bookmark_removed\": \"Sprva bola odstrnen zo zloiek !\",\n    \"parent_message\": \"Sprva rodia\"\n\n}\n","import me from \"./me.js\";\nimport i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\n\nimport en from \"/src/lang/en.json\";\nimport fr from \"/src/lang/fr.json\";\nimport es from \"/src/lang/es.json\";\nimport sk from \"/src/lang/sk.json\";\n\nconst lang = {\n  possibleLang: {\n    en: \"English\",\n    es: \"Espaol\",\n    fr: \"Franais\",\n    sk: \"Slovensk\"\n  }, // possible dicts names to load\n  getDefaultLang: () =>\n    (document.querySelector(\"meta[name='zusam:default-lang']\") || {}).content ||\n    \"en\",\n  getCurrentLang: () => me.lang || lang.getDefaultLang(),\n};\n\ni18n.use(initReactI18next).init({\n  resources: {\n    en: {\n      translation: en\n    },\n    fr: {\n      translation: fr\n    },\n    sk: {\n      translation: sk\n    },\n    es: {\n      translation: es\n    },\n  },\n  lng: lang.getCurrentLang(), // if you're using a language detector, do not define the lng option\n  fallbackLng: lang.getDefaultLang(),\n  interpolation: {\n    escapeValue: false // react already safes from xss => https://www.i18next.com/translation-function/interpolation#unescape\n  }\n});\n\nexport { lang, i18n };\n","import { i18n } from \"./lang.js\";\n// Stateless utilities\n// Should be agnostic of other components of zusam if possible\n\nconst util = {\n  // check if the input is a valid URL\n  isValidUrl: url => {\n    try {\n      new URL(url);\n      return true;\n    } catch (_) {\n      return false;\n    }\n  },\n  limitLength: (string, size = 20) => {\n    return [\n      ...string.split(\"\").slice(0, Math.floor(size/2)),\n      string.length > size ? \"...\" : \"\",\n      ...string.split(\"\").slice(Math.floor(size/2)).slice(Math.floor(size/2) * -1)].join(\"\");\n  },\n  escapeRegex: string => {\n    return string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n  },\n  getSubpath: () => new URL(document.baseURI).pathname.replace(/\\/$/, \"\"),\n  // toApp transforms an api url into an \"app\" url that the user can naviate to\n  toApp: url => {\n    if (!url || typeof url != \"string\") {\n      return \"\";\n    }\n    if (util.isValidUrl(url)) {\n      return url;\n    }\n    return location.origin + util.getSubpath() + url;\n  },\n  // genId starts with a letter to be DOM friendly\n  // seed can be used to order ids\n  // TODO improve using ideas from ai/nanoid\n  genId: seed => `z${seed || \"\"}-${Date.now().toString().slice(-5)}${Math.random().toString().slice(-5)}`,\n  // transform an id into int for the API (TODO: revisit this on 0.5)\n  id2Int: id => parseInt(id.replace(/[^\\d]/g,\"\"), 10),\n  urlRegExp: /(\\([^()]*)?https?:\\/\\/[^[\\]\\n\\r ]*[-A-Za-z0-9+&@#/%=~_()|]/i,\n  getUrl: txt => {\n    if (!txt) {\n      return \"\";\n    }\n    let url = txt.match(util.urlRegExp);\n    if (url && url[0].startsWith(\"(\")) {\n      let link = url[0].match(/https?:\\/\\//i);\n      url[\"index\"] += link[\"index\"];\n      url[0] = url[0].slice(link[\"index\"]);\n      if (url[0].endsWith(\")\")) {\n        url[0] = url[0].slice(0, -1);\n      }\n    }\n    return url;\n  },\n  limitStrSize: (str, limit) => str.length > limit ? `${str.slice(0, limit-3)}...` : str,\n  // full datetime as a string adapted to the users timezone\n  humanFullDate: timestamp => {\n    if (!timestamp) {\n      return \"\";\n    }\n    let d = new Date(timestamp * 1000);\n    d = new Date(d.getTime() + d.getTimezoneOffset() * 60000 * -1);\n    return d.toISOString().replace(\"T\", \" \").replace(/\\..*$/, \"\");\n  },\n  // duration relative to event\n  humanTime: timestamp => {\n    if (!timestamp) {\n      return null;\n    }\n    const duration = Math.abs(Math.round((Date.now() / 1000 - timestamp) / 60));\n    if (duration < 1) {\n      return i18n.t(\"just_now\");\n    }\n    if (duration < 60) {\n      return i18n.t(\"ago\", { duration: `${duration  }mn` });\n    }\n    if (duration < 60 * 24) {\n      return i18n.t(\"ago\", { duration: `${Math.floor(duration / 60)  }h` });\n    }\n    return util.humanFullDate(timestamp).split(\" \")[0];\n  },\n  // get the id of an object from an url\n  getId: e => {\n    switch (typeof e) {\n    case \"object\":\n      return e ? e.id : null;\n    case \"string\":\n      return e\n        .split(\"/\")\n        .pop()\n        .replace(/\\?.*$/, \"\")\n        .replace(/\\.\\w+$/, \"\");\n    default:\n      console.error(e);\n      throw \"Could not extract id !\";\n    }\n  },\n  // get the url to a thubmnail\n  thumbnail: (id, width, height) =>\n    typeof(id) == \"string\" && !id.startsWith(\"z\")\n      ? util.toApp(`/api/images/thumbnail/${width}/${height}/${id}`)\n      : null,\n  // same as http.thumbnail but for a crop\n  crop: (id, width, height) =>\n    typeof(id) == \"string\" && !id.startsWith(\"z\")\n      ? util.toApp(`/api/images/crop/${width}/${height}/${id}`)\n      : null,\n  // default avatar in base64\n  defaultAvatar:\n    \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMA/iyWEiMAAAMJSURBVHja7ZtBjpwwEEWxmIhFFmiURZZEyi6HCLkZHCXr2eQKHIUjoEiRSGRRiWB6klaDU/hDF4z+W6LuNz3+ZRvbkCSEEEIIIYQQQgghhBBCCCGEEEIIITvwGfy+kxoTpNJigkw6TJBLjwkK8ZiglMFYUInAAqwQRKRBBR0q8FhXEKwVR0GLCvxCjeo6oyzkoIxnEvj5661acPO3yvFqpxdcV+Pj88VeNZ7cGB4ul1QFkv399KT4KBIpmGEwF4i9oL6DIN/3FzToL2ju8AvsBeE2aNFfQMFJBCkF0/R+bkHyCgSVuaDcVaC5zyvMBTkqyHYVaBZDKSpw5oJgLcMC5doXFBSoIMNutjcQBHJULmlhQYUKlmNQbs9kqGC5P2o3FqBBOVjMWkEOdcZQKam3dyqkkgP/g35zxmEpLhbjir0ZFz2tXHgbPR5deI+EMPKmig/hhU/fIkOYL4iYDbIyqpCXajp2Zy4yhNuxqUfbMCaEIraQZ9swJgQBQ0jBQr6eYXrzQrYIYdtC9uaFbDKayJajyTkL+VijyWA+mnBajGpDeFrMzAu5BNvwKoQBDaFHQ+jQEBo0hBoMYUBD8GgIHRpCi44mcAiJRQhoITvzQs63LGQxL2SOJnEhiHUI296bwNOixb1JYr5kz8yX7Odf6XDfBC9kd6yVzq+np69QIY/8AEJ45kt0T4hIM0VONm5CiLlVhLflS+CwdTGEVa2AnfOFTogaVAAfcg1QivpqzLFHD4LnrR0q8FAhqlux3PPUu0EFLSrooL6kLeaQwKMCTY4OfUjVoY+IOvTxSFiw81NtnbmgRwXeXDAg08IxBPIKBPX5BQ0FBxC0+wtSCg4gcBT853nruwiqfQXNHQT/LDiGD9Old6sEL2umn3MtqxDks9NotVbwfaG+FDfL6fznsjV32365cTXrtqoPdJKYrbmreIDvT42DCMYoIUEu4FvIKSpwgr6JvYEAfJm8QgUl+j58gb6Rn4Nvcv/p0jUmcODr8IQQQgghhBBCCCGEEEIIIYQQQgghs/wGp6uYgtiKODIAAAAASUVORK5CYII=\",\n  hash: str =>\n    str.split(\"\").reduce((a, c) => ((a << 5) - a + c.charCodeAt()) | 0),\n  colorHash: str =>\n    [\n      \"#000000\",\n      \"#333366\",\n      \"#333399\",\n      \"#3333CC\",\n      \"#339933\",\n      \"#339999\",\n      \"#33CC33\",\n      \"#33CC99\",\n      \"#663333\",\n      \"#663366\",\n      \"#666633\",\n      \"#666699\",\n      \"#66CC33\",\n      \"#66CCCC\",\n      \"#993333\",\n      \"#993366\",\n      \"#993399\",\n      \"#996633\",\n      \"#999966\",\n      \"#CC3333\",\n      \"#CC3366\",\n      \"#CC3399\",\n      \"#CC33CC\",\n      \"#CC6633\",\n      \"#CC9933\",\n      \"#CC99CC\",\n      \"#CCCC33\"\n    ][Math.abs(util.hash(str)) % 27],\n  backgroundHash: str => {\n    if (!str) {\n      return \"background-color: #aaa;\";\n    }\n    let c1 = util.colorHash(str);\n    let c2 = util.colorHash(\n      str\n        .split(\"\")\n        .reverse()\n        .join(\".\")\n    );\n    let deg = 45 * (Math.abs(util.hash(str)) % 4);\n    return (\n      `background-color:${c1};background-image:linear-gradient(${deg}deg, ${c2} 15%, transparent 15% 30%, ${c2} 30% 45%, transparent 45% 60%, ${c2} 60% 75%, transparent 75% 90%, ${c2} 90%);`\n    );\n  },\n  // Accepts a keydown event and checks if it's enter. Compatibility between browsers\n  // We do it the permissive way\n  is_it_enter: e => {\n    return e.keyCode == 13 || e.keyCode == 10 || e.key == \"Enter\" || e.key == \"\" || e.code == \"Enter\";\n  },\n  getVersion: () => (document.querySelector(\"meta[name='zusam:version']\") || {}).content || \"unknown\",\n};\nexport default util;\n","import alert from \"./alert.js\";\nimport storage from \"./storage.js\";\nimport util from \"./util.js\";\n\nconst http = {\n  sendFile: (formData, loadFn, progressFn = null, errorFn = null) => {\n    return storage\n      .get(\"apiKey\")\n      .then(apiKey => {\n        let xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", `${document.baseURI}api/files`, true);\n        xhr.setRequestHeader(\"X-AUTH-TOKEN\", apiKey);\n        xhr.addEventListener(\"load\", e => {\n          if (e.target.status > 199 && e.target.status < 300) {\n            loadFn(JSON.parse(e.target.response));\n          } else if (errorFn) {\n            errorFn(e.target.statusText);\n          } else {\n            console.error(e.target.statusText);\n          }\n        });\n        if (progressFn) {\n          xhr.upload.onprogress = e =>\n            progressFn({ loaded: e.loaded, total: e.total });\n        }\n        if (errorFn) {\n          xhr.addEventListener(\"error\", e => errorFn(e));\n        }\n        xhr.send(formData);\n      })\n      .catch(error => alert.add(error, \"alert-danger\"));\n  },\n  get: (url, nocache = false, delay = 0) => {\n    return storage\n      .get(\"apiKey\")\n      .then(x => new Promise(resolve => setTimeout(() => resolve(x), delay)))\n      .then(apiKey => {\n        url = util.toApp(url);\n        if (!url) {\n          return;\n        }\n        let h = {};\n        if (apiKey) {\n          h[\"X-AUTH-TOKEN\"] = apiKey;\n        }\n        if (nocache) {\n          h[\"X-NOCACHE\"] = \"nocache\";\n        }\n        return fetch(url, {\n          method: \"GET\",\n          headers: new Headers(h)\n        })\n          .then(res => res.ok && res.json())\n          .catch(err => console.warn(`ERROR for ${url}`, err));\n      })\n      .catch(error => alert.add(error, \"alert-danger\"));\n  },\n  post: (url, data, delay = 0, contentType = \"application/json\") =>\n    http.request(url, data, \"POST\", delay, contentType),\n  put: (url, data, delay = 0, contentType = \"application/json\") =>\n    http.request(url, data, \"PUT\", delay, contentType),\n  delete: (url, data, delay = 0, contentType = \"application/json\") =>\n    http.request(url, null, \"DELETE\", delay, contentType),\n  request: (url, data, method, delay = 0, contentType = \"application/json\") => {\n    return storage\n      .get(\"apiKey\")\n      .then(x => new Promise(resolve => setTimeout(() => resolve(x), delay)))\n      .then(apiKey => {\n        url = util.toApp(url);\n        if (!url) {\n          return;\n        }\n        let h = {};\n        if (apiKey) {\n          h[\"X-AUTH-TOKEN\"] = apiKey;\n        }\n        if (contentType) {\n          h[\"Content-type\"] = contentType;\n        }\n        let fetchOptions = {\n          method,\n          headers: new Headers(h)\n        };\n        if (data) {\n          fetchOptions.body =\n            typeof data == \"object\" && data.constructor.name == \"Object\"\n              ? JSON.stringify(data)\n              : data;\n        }\n        return fetch(url, fetchOptions)\n          .then(res => {\n            try {\n              if (method != \"DELETE\") {\n                return res.json();\n              }\n              return {};\n            } catch (exception) {\n              console.warn(exception.message);\n              return Promise.reject(exception.message);\n            }\n          })\n          .catch(err => console.warn(`ERROR for ${url}`, err));\n      })\n      .catch(error => alert.add(error, \"alert-danger\"));\n  }\n};\nexport default http;\n","import http from \"./http.js\";\nimport store from \"/src/store\";\n\nconst notifications = {\n\n  LIMIT: 20,\n\n  get() {\n    return store.get()?.notifications || [];\n  },\n\n  update() {\n    return http.get(`/api/me/notifications/${notifications.LIMIT + 1}`).then(r => {\n      store.dispatch(\"notifications/update\", r);\n    });\n  },\n\n  isNew(id) {\n    let state = store.get();\n    if (Array.isArray(state[\"notifications\"])) {\n      return state.notifications.some(\n        n =>\n          notifications.matchNotification(n, id) ||\n          (n.type == \"new_comment\" && n.fromMessage.id === id)\n      );\n    }\n    return false;\n  },\n\n  removeAllNotifications() {\n    let state = store.get();\n    if (Array.isArray(state[\"notifications\"])) {\n      state.notifications.forEach(n => store.dispatch(\"notifications/remove\", n));\n    }\n  },\n\n  removeMatchingNotifications(id) {\n    return Promise.all(\n      store.get().notifications\n        .filter(n => notifications.matchNotification(n, id))\n        .map(n => {\n          http.delete(`/api/notifications/${n.id}`).then(() => {\n            store.dispatch(\"notifications/remove\", n);\n          });\n        })\n    );\n  },\n\n  matchNotification(notif, id) {\n    if (notif.id === id) {\n      return true;\n    }\n    if (notif.target === id) {\n      return true;\n    }\n    return false;\n  },\n};\n\nexport default notifications;\n","import http from \"./http.js\";\nimport store from \"/src/store\";\n\nconst bookmarks = {\n\n  LIMIT: 1000,\n\n  get() {\n    return store.get()?.bookmarks || [];\n  },\n\n  update() {\n    return http.get(`/api/me/bookmarks/${bookmarks.LIMIT + 1}`).then(r => {\n      store.dispatch(\"bookmarks/update\", r);\n    });\n  },\n\n  matchBookmark(b, id) {\n    if (b.id === id) {\n      return true;\n    }\n    if (b.message.id === id) {\n      return true;\n    }\n    return false;\n  },\n\n  removeAllBookmarks() {\n    let state = store.get();\n    if (Array.isArray(state[\"bookmarks\"])) {\n      state.bookmarks.forEach(n => store.dispatch(\"bookmarks/remove\", n));\n    }\n  },\n\n  removeMatchingBookmarks(id) {\n    let state = store.get();\n    if (Array.isArray(state[\"bookmarks\"])) {\n      state.bookmarks\n        .filter(b => bookmarks.matchBookmark(b, id))\n        .forEach(b => store.dispatch(\"bookmarks/remove\", b));\n    }\n  },\n\n  hasBookmark(id) {\n    let state = store.get();\n    if (Array.isArray(state.bookmarks)) {\n      return state.bookmarks.some(b => bookmarks.matchBookmark(b, id));\n    }\n    return false;\n  },\n\n  addBookmark(message_id) {\n    if (!bookmarks.hasBookmark(message_id)) {\n      store.dispatch(\"bookmark/add\", message_id);\n    }\n  },\n};\n\nexport default bookmarks;\n","import util from \"./util.js\";\nimport http from \"./http.js\";\nimport store from \"/src/store\";\n\nconst router = {\n\n  get() {\n    return store.get();\n  },\n\n  get route() {\n    try {\n      return router.removeSubpath(location.pathname).slice(1).split(\"/\")[0];\n    } catch {\n      return \"\";\n    }\n  },\n\n  get id() {\n    try {\n      return router.removeSubpath(location.pathname).slice(1).split(\"/\")[1];\n    } catch {\n      return \"\";\n    }\n  },\n\n  get action() {\n    try {\n      return router.removeSubpath(location.pathname).slice(1).split(\"/\")[2];\n    } catch {\n      return \"\";\n    }\n  },\n\n  get backUrl() {\n    console.err(\"don't use backUrl\");\n    return store.get()?.backUrl;\n  },\n\n  get search() {\n    return location.search.slice(1);\n  },\n\n  getEntity() {\n    if (router.isEntity(router.route)) {\n      return http.get(`/api/${router.route}/${router.id}`);\n    }\n    return Promise.resolve(null);\n  },\n\n  get entity() {\n    console.err(\"don't use entity\");\n    return store.get()?.entity;\n  },\n\n  removeSubpath: path =>\n    path ? path.replace(new RegExp(`^${util.getSubpath()}`), \"\") : \"\",\n\n  getParam: (param, searchParams = window.location.search.substring(1)) => {\n    let res = searchParams.split(\"&\").find(e => e.split(\"=\")[0] === param);\n    return res ? decodeURIComponent(res.split(\"=\")[1]) : \"\";\n  },\n\n  getSegments: () =>\n    router\n      .removeSubpath(window.location.pathname)\n      .slice(1)\n      .split(\"?\")[0]\n      .split(\"/\"),\n\n  // check if route is \"outside\": accessible to non connected user\n  isOutside: () =>\n    [\n      \"login\",\n      \"password-reset\",\n      \"signup\",\n      \"invitation\",\n      \"stop-notification-emails\",\n      \"public\"\n    ].includes(router.route || router.getSegments()[0]),\n\n  isEntity: () => [\"messages\", \"groups\", \"users\", \"links\", \"files\"].includes(router.getSegments()[0]),\n\n  getUrlComponents: url => {\n    let components = {};\n    if (url) {\n      components.url = new URL(url);\n      components.path = components.url.pathname;\n      components.search = components.url.search.slice(1);\n      [components.route, components.id, components.action] = router\n        .removeSubpath(components.path)\n        .slice(1)\n        .split(\"/\");\n    }\n    components.entityType = \"\";\n    components.backUrl = \"\";\n    return components;\n  },\n};\nexport default router;\n","import _alert from \"./alert.js\";\nimport _api from \"./api.js\";\nimport _http from \"./http.js\";\nimport { lang as _lang, i18n as _i18n } from \"./lang.js\";\nimport _me from \"./me.js\";\nimport _notifications from \"./notifications.js\";\nimport _bookmarks from \"./bookmarks.js\";\nimport _router from \"./router.js\";\nimport _storage from \"./storage.js\";\nimport _util from \"./util.js\";\n\nexport const alert = _alert;\nexport const api = _api;\nexport const http = _http;\nexport const lang = _lang;\nexport const i18n = _i18n;\nexport const me = _me;\nexport const notifications = _notifications;\nexport const bookmarks = _bookmarks;\nexport const router = _router;\nexport const storage = _storage;\nexport const util = _util;\n","import http from \"./http.js\";\nimport store from \"/src/store\";\n\nconst api = {\n  get info() {\n    return store.get()?.api;\n  },\n  update: () =>\n    http.get(\"/api/info\", true).then(r => {\n      if (!r) {\n        return;\n      }\n      store.dispatch(\"api/update\", Object.assign({}, r));\n      setTimeout(dispatchEvent(new CustomEvent(\"apiStateChange\")));\n      return r;\n    }),\n};\nexport default api;\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import * as React from \"react\";\nimport type { History, Location } from \"history\";\nimport { Action as NavigationType } from \"history\";\n\nimport type { RouteMatch } from \"./router\";\n\n/**\n * A Navigator is a \"location changer\"; it's how you get to different locations.\n *\n * Every history instance conforms to the Navigator interface, but the\n * distinction is useful primarily when it comes to the low-level <Router> API\n * where both the location and a navigator must be provided separately in order\n * to avoid \"tearing\" that may occur in a suspense-enabled app if the action\n * and/or location were to be read directly from the history instance.\n */\nexport type Navigator = Pick<History, \"go\" | \"push\" | \"replace\" | \"createHref\">;\n\ninterface NavigationContextObject {\n  basename: string;\n  navigator: Navigator;\n  static: boolean;\n}\n\nexport const NavigationContext = React.createContext<NavigationContextObject>(\n  null!\n);\n\nif (__DEV__) {\n  NavigationContext.displayName = \"Navigation\";\n}\n\ninterface LocationContextObject {\n  location: Location;\n  navigationType: NavigationType;\n}\n\nexport const LocationContext = React.createContext<LocationContextObject>(\n  null!\n);\n\nif (__DEV__) {\n  LocationContext.displayName = \"Location\";\n}\n\ninterface RouteContextObject {\n  outlet: React.ReactElement | null;\n  matches: RouteMatch[];\n}\n\nexport const RouteContext = React.createContext<RouteContextObject>({\n  outlet: null,\n  matches: [],\n});\n\nif (__DEV__) {\n  RouteContext.displayName = \"Route\";\n}\n","import type { Location, Path, To } from \"history\";\nimport { parsePath } from \"history\";\n\nexport function invariant(cond: any, message: string): asserts cond {\n  if (!cond) throw new Error(message);\n}\n\nexport function warning(cond: any, message: string): void {\n  if (!cond) {\n    // eslint-disable-next-line no-console\n    if (typeof console !== \"undefined\") console.warn(message);\n\n    try {\n      // Welcome to debugging React Router!\n      //\n      // This error is thrown as a convenience so you can more easily\n      // find the source for a warning that appears in the console by\n      // enabling \"pause on exceptions\" in your JavaScript debugger.\n      throw new Error(message);\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n}\n\nconst alreadyWarned: Record<string, boolean> = {};\nexport function warningOnce(key: string, cond: boolean, message: string) {\n  if (!cond && !alreadyWarned[key]) {\n    alreadyWarned[key] = true;\n    warning(false, message);\n  }\n}\n\ntype ParamParseFailed = { failed: true };\n\ntype ParamParseSegment<Segment extends string> =\n  // Check here if there exists a forward slash in the string.\n  Segment extends `${infer LeftSegment}/${infer RightSegment}`\n    ? // If there is a forward slash, then attempt to parse each side of the\n      // forward slash.\n      ParamParseSegment<LeftSegment> extends infer LeftResult\n      ? ParamParseSegment<RightSegment> extends infer RightResult\n        ? LeftResult extends string\n          ? // If the left side is successfully parsed as a param, then check if\n            // the right side can be successfully parsed as well. If both sides\n            // can be parsed, then the result is a union of the two sides\n            // (read: \"foo\" | \"bar\").\n            RightResult extends string\n            ? LeftResult | RightResult\n            : LeftResult\n          : // If the left side is not successfully parsed as a param, then check\n          // if only the right side can be successfully parse as a param. If it\n          // can, then the result is just right, else it's a failure.\n          RightResult extends string\n          ? RightResult\n          : ParamParseFailed\n        : ParamParseFailed\n      : // If the left side didn't parse into a param, then just check the right\n      // side.\n      ParamParseSegment<RightSegment> extends infer RightResult\n      ? RightResult extends string\n        ? RightResult\n        : ParamParseFailed\n      : ParamParseFailed\n    : // If there's no forward slash, then check if this segment starts with a\n    // colon. If it does, then this is a dynamic segment, so the result is\n    // just the remainder of the string. Otherwise, it's a failure.\n    Segment extends `:${infer Remaining}`\n    ? Remaining\n    : ParamParseFailed;\n\n// Attempt to parse the given string segment. If it fails, then just return the\n// plain string type as a default fallback. Otherwise return the union of the\n// parsed string literals that were referenced as dynamic segments in the route.\nexport type ParamParseKey<Segment extends string> =\n  ParamParseSegment<Segment> extends string\n    ? ParamParseSegment<Segment>\n    : string;\n\n/**\n * The parameters that were parsed from the URL path.\n */\nexport type Params<Key extends string = string> = {\n  readonly [key in Key]: string | undefined;\n};\n\n/**\n * A route object represents a logical route, with (optionally) its child\n * routes organized in a tree-like structure.\n */\nexport interface RouteObject {\n  caseSensitive?: boolean;\n  children?: RouteObject[];\n  element?: React.ReactNode;\n  index?: boolean;\n  path?: string;\n}\n\n/**\n * Returns a path with params interpolated.\n *\n * @see https://reactrouter.com/docs/en/v6/api#generatepath\n */\nexport function generatePath(path: string, params: Params = {}): string {\n  return path\n    .replace(/:(\\w+)/g, (_, key) => {\n      invariant(params[key] != null, `Missing \":${key}\" param`);\n      return params[key]!;\n    })\n    .replace(/\\/*\\*$/, (_) =>\n      params[\"*\"] == null ? \"\" : params[\"*\"].replace(/^\\/*/, \"/\")\n    );\n}\n\n/**\n * A RouteMatch contains info about how a route matched a URL.\n */\nexport interface RouteMatch<ParamKey extends string = string> {\n  /**\n   * The names and values of dynamic parameters in the URL.\n   */\n  params: Params<ParamKey>;\n  /**\n   * The portion of the URL pathname that was matched.\n   */\n  pathname: string;\n  /**\n   * The portion of the URL pathname that was matched before child routes.\n   */\n  pathnameBase: string;\n  /**\n   * The route object that was used to match.\n   */\n  route: RouteObject;\n}\n\n/**\n * Matches the given routes to a location and returns the match data.\n *\n * @see https://reactrouter.com/docs/en/v6/api#matchroutes\n */\nexport function matchRoutes(\n  routes: RouteObject[],\n  locationArg: Partial<Location> | string,\n  basename = \"/\"\n): RouteMatch[] | null {\n  let location =\n    typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n\n  let pathname = stripBasename(location.pathname || \"/\", basename);\n\n  if (pathname == null) {\n    return null;\n  }\n\n  let branches = flattenRoutes(routes);\n  rankRouteBranches(branches);\n\n  let matches = null;\n  for (let i = 0; matches == null && i < branches.length; ++i) {\n    matches = matchRouteBranch(branches[i], pathname);\n  }\n\n  return matches;\n}\n\ninterface RouteMeta {\n  relativePath: string;\n  caseSensitive: boolean;\n  childrenIndex: number;\n  route: RouteObject;\n}\n\ninterface RouteBranch {\n  path: string;\n  score: number;\n  routesMeta: RouteMeta[];\n}\n\nfunction flattenRoutes(\n  routes: RouteObject[],\n  branches: RouteBranch[] = [],\n  parentsMeta: RouteMeta[] = [],\n  parentPath = \"\"\n): RouteBranch[] {\n  routes.forEach((route, index) => {\n    let meta: RouteMeta = {\n      relativePath: route.path || \"\",\n      caseSensitive: route.caseSensitive === true,\n      childrenIndex: index,\n      route,\n    };\n\n    if (meta.relativePath.startsWith(\"/\")) {\n      invariant(\n        meta.relativePath.startsWith(parentPath),\n        `Absolute route path \"${meta.relativePath}\" nested under path ` +\n          `\"${parentPath}\" is not valid. An absolute child route path ` +\n          `must start with the combined path of all its parent routes.`\n      );\n\n      meta.relativePath = meta.relativePath.slice(parentPath.length);\n    }\n\n    let path = joinPaths([parentPath, meta.relativePath]);\n    let routesMeta = parentsMeta.concat(meta);\n\n    // Add the children before adding this route to the array so we traverse the\n    // route tree depth-first and child routes appear before their parents in\n    // the \"flattened\" version.\n    if (route.children && route.children.length > 0) {\n      invariant(\n        route.index !== true,\n        `Index routes must not have child routes. Please remove ` +\n          `all child routes from route path \"${path}\".`\n      );\n\n      flattenRoutes(route.children, branches, routesMeta, path);\n    }\n\n    // Routes without a path shouldn't ever match by themselves unless they are\n    // index routes, so don't add them to the list of possible branches.\n    if (route.path == null && !route.index) {\n      return;\n    }\n\n    branches.push({ path, score: computeScore(path, route.index), routesMeta });\n  });\n\n  return branches;\n}\n\nfunction rankRouteBranches(branches: RouteBranch[]): void {\n  branches.sort((a, b) =>\n    a.score !== b.score\n      ? b.score - a.score // Higher score first\n      : compareIndexes(\n          a.routesMeta.map((meta) => meta.childrenIndex),\n          b.routesMeta.map((meta) => meta.childrenIndex)\n        )\n  );\n}\n\nconst paramRe = /^:\\w+$/;\nconst dynamicSegmentValue = 3;\nconst indexRouteValue = 2;\nconst emptySegmentValue = 1;\nconst staticSegmentValue = 10;\nconst splatPenalty = -2;\nconst isSplat = (s: string) => s === \"*\";\n\nfunction computeScore(path: string, index: boolean | undefined): number {\n  let segments = path.split(\"/\");\n  let initialScore = segments.length;\n  if (segments.some(isSplat)) {\n    initialScore += splatPenalty;\n  }\n\n  if (index) {\n    initialScore += indexRouteValue;\n  }\n\n  return segments\n    .filter((s) => !isSplat(s))\n    .reduce(\n      (score, segment) =>\n        score +\n        (paramRe.test(segment)\n          ? dynamicSegmentValue\n          : segment === \"\"\n          ? emptySegmentValue\n          : staticSegmentValue),\n      initialScore\n    );\n}\n\nfunction compareIndexes(a: number[], b: number[]): number {\n  let siblings =\n    a.length === b.length && a.slice(0, -1).every((n, i) => n === b[i]);\n\n  return siblings\n    ? // If two routes are siblings, we should try to match the earlier sibling\n      // first. This allows people to have fine-grained control over the matching\n      // behavior by simply putting routes with identical paths in the order they\n      // want them tried.\n      a[a.length - 1] - b[b.length - 1]\n    : // Otherwise, it doesn't really make sense to rank non-siblings by index,\n      // so they sort equally.\n      0;\n}\n\nfunction matchRouteBranch<ParamKey extends string = string>(\n  branch: RouteBranch,\n  pathname: string\n): RouteMatch<ParamKey>[] | null {\n  let { routesMeta } = branch;\n\n  let matchedParams = {};\n  let matchedPathname = \"/\";\n  let matches: RouteMatch[] = [];\n  for (let i = 0; i < routesMeta.length; ++i) {\n    let meta = routesMeta[i];\n    let end = i === routesMeta.length - 1;\n    let remainingPathname =\n      matchedPathname === \"/\"\n        ? pathname\n        : pathname.slice(matchedPathname.length) || \"/\";\n    let match = matchPath(\n      { path: meta.relativePath, caseSensitive: meta.caseSensitive, end },\n      remainingPathname\n    );\n\n    if (!match) return null;\n\n    Object.assign(matchedParams, match.params);\n\n    let route = meta.route;\n\n    matches.push({\n      params: matchedParams,\n      pathname: joinPaths([matchedPathname, match.pathname]),\n      pathnameBase: normalizePathname(\n        joinPaths([matchedPathname, match.pathnameBase])\n      ),\n      route,\n    });\n\n    if (match.pathnameBase !== \"/\") {\n      matchedPathname = joinPaths([matchedPathname, match.pathnameBase]);\n    }\n  }\n\n  return matches;\n}\n\n/**\n * A PathPattern is used to match on some portion of a URL pathname.\n */\nexport interface PathPattern<Path extends string = string> {\n  /**\n   * A string to match against a URL pathname. May contain `:id`-style segments\n   * to indicate placeholders for dynamic parameters. May also end with `/*` to\n   * indicate matching the rest of the URL pathname.\n   */\n  path: Path;\n  /**\n   * Should be `true` if the static portions of the `path` should be matched in\n   * the same case.\n   */\n  caseSensitive?: boolean;\n  /**\n   * Should be `true` if this pattern should match the entire URL pathname.\n   */\n  end?: boolean;\n}\n\n/**\n * A PathMatch contains info about how a PathPattern matched on a URL pathname.\n */\nexport interface PathMatch<ParamKey extends string = string> {\n  /**\n   * The names and values of dynamic parameters in the URL.\n   */\n  params: Params<ParamKey>;\n  /**\n   * The portion of the URL pathname that was matched.\n   */\n  pathname: string;\n  /**\n   * The portion of the URL pathname that was matched before child routes.\n   */\n  pathnameBase: string;\n  /**\n   * The pattern that was used to match.\n   */\n  pattern: PathPattern;\n}\n\ntype Mutable<T> = {\n  -readonly [P in keyof T]: T[P];\n};\n\n/**\n * Performs pattern matching on a URL pathname and returns information about\n * the match.\n *\n * @see https://reactrouter.com/docs/en/v6/api#matchpath\n */\nexport function matchPath<\n  ParamKey extends ParamParseKey<Path>,\n  Path extends string\n>(\n  pattern: PathPattern<Path> | Path,\n  pathname: string\n): PathMatch<ParamKey> | null {\n  if (typeof pattern === \"string\") {\n    pattern = { path: pattern, caseSensitive: false, end: true };\n  }\n\n  let [matcher, paramNames] = compilePath(\n    pattern.path,\n    pattern.caseSensitive,\n    pattern.end\n  );\n\n  let match = pathname.match(matcher);\n  if (!match) return null;\n\n  let matchedPathname = match[0];\n  let pathnameBase = matchedPathname.replace(/(.)\\/+$/, \"$1\");\n  let captureGroups = match.slice(1);\n  let params: Params = paramNames.reduce<Mutable<Params>>(\n    (memo, paramName, index) => {\n      // We need to compute the pathnameBase here using the raw splat value\n      // instead of using params[\"*\"] later because it will be decoded then\n      if (paramName === \"*\") {\n        let splatValue = captureGroups[index] || \"\";\n        pathnameBase = matchedPathname\n          .slice(0, matchedPathname.length - splatValue.length)\n          .replace(/(.)\\/+$/, \"$1\");\n      }\n\n      memo[paramName] = safelyDecodeURIComponent(\n        captureGroups[index] || \"\",\n        paramName\n      );\n      return memo;\n    },\n    {}\n  );\n\n  return {\n    params,\n    pathname: matchedPathname,\n    pathnameBase,\n    pattern,\n  };\n}\n\nfunction compilePath(\n  path: string,\n  caseSensitive = false,\n  end = true\n): [RegExp, string[]] {\n  warning(\n    path === \"*\" || !path.endsWith(\"*\") || path.endsWith(\"/*\"),\n    `Route path \"${path}\" will be treated as if it were ` +\n      `\"${path.replace(/\\*$/, \"/*\")}\" because the \\`*\\` character must ` +\n      `always follow a \\`/\\` in the pattern. To get rid of this warning, ` +\n      `please change the route path to \"${path.replace(/\\*$/, \"/*\")}\".`\n  );\n\n  let paramNames: string[] = [];\n  let regexpSource =\n    \"^\" +\n    path\n      .replace(/\\/*\\*?$/, \"\") // Ignore trailing / and /*, we'll handle it below\n      .replace(/^\\/*/, \"/\") // Make sure it has a leading /\n      .replace(/[\\\\.*+^$?{}|()[\\]]/g, \"\\\\$&\") // Escape special regex chars\n      .replace(/:(\\w+)/g, (_: string, paramName: string) => {\n        paramNames.push(paramName);\n        return \"([^\\\\/]+)\";\n      });\n\n  if (path.endsWith(\"*\")) {\n    paramNames.push(\"*\");\n    regexpSource +=\n      path === \"*\" || path === \"/*\"\n        ? \"(.*)$\" // Already matched the initial /, just match the rest\n        : \"(?:\\\\/(.+)|\\\\/*)$\"; // Don't include the / in params[\"*\"]\n  } else {\n    regexpSource += end\n      ? \"\\\\/*$\" // When matching to the end, ignore trailing slashes\n      : // Otherwise, match a word boundary or a proceeding /. The word boundary restricts\n        // parent routes to matching only their own words and nothing more, e.g. parent\n        // route \"/home\" should not match \"/home2\".\n        // Additionally, allow paths starting with `.`, `-`, `~`, and url-encoded entities,\n        // but do not consume the character in the matched path so they can match against\n        // nested paths.\n        \"(?:(?=[.~-]|%[0-9A-F]{2})|\\\\b|\\\\/|$)\";\n  }\n\n  let matcher = new RegExp(regexpSource, caseSensitive ? undefined : \"i\");\n\n  return [matcher, paramNames];\n}\n\nfunction safelyDecodeURIComponent(value: string, paramName: string) {\n  try {\n    return decodeURIComponent(value);\n  } catch (error) {\n    warning(\n      false,\n      `The value for the URL param \"${paramName}\" will not be decoded because` +\n        ` the string \"${value}\" is a malformed URL segment. This is probably` +\n        ` due to a bad percent encoding (${error}).`\n    );\n\n    return value;\n  }\n}\n\n/**\n * Returns a resolved path object relative to the given pathname.\n *\n * @see https://reactrouter.com/docs/en/v6/api#resolvepath\n */\nexport function resolvePath(to: To, fromPathname = \"/\"): Path {\n  let {\n    pathname: toPathname,\n    search = \"\",\n    hash = \"\",\n  } = typeof to === \"string\" ? parsePath(to) : to;\n\n  let pathname = toPathname\n    ? toPathname.startsWith(\"/\")\n      ? toPathname\n      : resolvePathname(toPathname, fromPathname)\n    : fromPathname;\n\n  return {\n    pathname,\n    search: normalizeSearch(search),\n    hash: normalizeHash(hash),\n  };\n}\n\nfunction resolvePathname(relativePath: string, fromPathname: string): string {\n  let segments = fromPathname.replace(/\\/+$/, \"\").split(\"/\");\n  let relativeSegments = relativePath.split(\"/\");\n\n  relativeSegments.forEach((segment) => {\n    if (segment === \"..\") {\n      // Keep the root \"\" segment so the pathname starts at /\n      if (segments.length > 1) segments.pop();\n    } else if (segment !== \".\") {\n      segments.push(segment);\n    }\n  });\n\n  return segments.length > 1 ? segments.join(\"/\") : \"/\";\n}\n\nexport function resolveTo(\n  toArg: To,\n  routePathnames: string[],\n  locationPathname: string\n): Path {\n  let to = typeof toArg === \"string\" ? parsePath(toArg) : toArg;\n  let toPathname = toArg === \"\" || to.pathname === \"\" ? \"/\" : to.pathname;\n\n  // If a pathname is explicitly provided in `to`, it should be relative to the\n  // route context. This is explained in `Note on `<Link to>` values` in our\n  // migration guide from v5 as a means of disambiguation between `to` values\n  // that begin with `/` and those that do not. However, this is problematic for\n  // `to` values that do not provide a pathname. `to` can simply be a search or\n  // hash string, in which case we should assume that the navigation is relative\n  // to the current location's pathname and *not* the route pathname.\n  let from: string;\n  if (toPathname == null) {\n    from = locationPathname;\n  } else {\n    let routePathnameIndex = routePathnames.length - 1;\n\n    if (toPathname.startsWith(\"..\")) {\n      let toSegments = toPathname.split(\"/\");\n\n      // Each leading .. segment means \"go up one route\" instead of \"go up one\n      // URL segment\".  This is a key difference from how <a href> works and a\n      // major reason we call this a \"to\" value instead of a \"href\".\n      while (toSegments[0] === \"..\") {\n        toSegments.shift();\n        routePathnameIndex -= 1;\n      }\n\n      to.pathname = toSegments.join(\"/\");\n    }\n\n    // If there are more \"..\" segments than parent routes, resolve relative to\n    // the root / URL.\n    from = routePathnameIndex >= 0 ? routePathnames[routePathnameIndex] : \"/\";\n  }\n\n  let path = resolvePath(to, from);\n\n  // Ensure the pathname has a trailing slash if the original to value had one.\n  if (\n    toPathname &&\n    toPathname !== \"/\" &&\n    toPathname.endsWith(\"/\") &&\n    !path.pathname.endsWith(\"/\")\n  ) {\n    path.pathname += \"/\";\n  }\n\n  return path;\n}\n\nexport function getToPathname(to: To): string | undefined {\n  // Empty strings should be treated the same as / paths\n  return to === \"\" || (to as Path).pathname === \"\"\n    ? \"/\"\n    : typeof to === \"string\"\n    ? parsePath(to).pathname\n    : to.pathname;\n}\n\nexport function stripBasename(\n  pathname: string,\n  basename: string\n): string | null {\n  if (basename === \"/\") return pathname;\n\n  if (!pathname.toLowerCase().startsWith(basename.toLowerCase())) {\n    return null;\n  }\n\n  let nextChar = pathname.charAt(basename.length);\n  if (nextChar && nextChar !== \"/\") {\n    // pathname does not start with basename/\n    return null;\n  }\n\n  return pathname.slice(basename.length) || \"/\";\n}\n\nexport const joinPaths = (paths: string[]): string =>\n  paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n\nexport const normalizePathname = (pathname: string): string =>\n  pathname.replace(/\\/+$/, \"\").replace(/^\\/*/, \"/\");\n\nconst normalizeSearch = (search: string): string =>\n  !search || search === \"?\"\n    ? \"\"\n    : search.startsWith(\"?\")\n    ? search\n    : \"?\" + search;\n\nconst normalizeHash = (hash: string): string =>\n  !hash || hash === \"#\" ? \"\" : hash.startsWith(\"#\") ? hash : \"#\" + hash;\n","import * as React from \"react\";\nimport type { Location, Path, To } from \"history\";\nimport { Action as NavigationType, parsePath } from \"history\";\n\nimport { LocationContext, NavigationContext, RouteContext } from \"./context\";\nimport type {\n  ParamParseKey,\n  Params,\n  PathMatch,\n  PathPattern,\n  RouteMatch,\n  RouteObject,\n} from \"./router\";\nimport {\n  getToPathname,\n  invariant,\n  joinPaths,\n  matchPath,\n  matchRoutes,\n  resolveTo,\n  warning,\n  warningOnce,\n} from \"./router\";\n\n/**\n * Returns the full href for the given \"to\" value. This is useful for building\n * custom links that are also accessible and preserve right-click behavior.\n *\n * @see https://reactrouter.com/docs/en/v6/api#usehref\n */\nexport function useHref(to: To): string {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useHref() may be used only in the context of a <Router> component.`\n  );\n\n  let { basename, navigator } = React.useContext(NavigationContext);\n  let { hash, pathname, search } = useResolvedPath(to);\n\n  let joinedPathname = pathname;\n  if (basename !== \"/\") {\n    let toPathname = getToPathname(to);\n    let endsWithSlash = toPathname != null && toPathname.endsWith(\"/\");\n    joinedPathname =\n      pathname === \"/\"\n        ? basename + (endsWithSlash ? \"/\" : \"\")\n        : joinPaths([basename, pathname]);\n  }\n\n  return navigator.createHref({ pathname: joinedPathname, search, hash });\n}\n\n/**\n * Returns true if this component is a descendant of a <Router>.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useinroutercontext\n */\nexport function useInRouterContext(): boolean {\n  return React.useContext(LocationContext) != null;\n}\n\n/**\n * Returns the current location object, which represents the current URL in web\n * browsers.\n *\n * Note: If you're using this it may mean you're doing some of your own\n * \"routing\" in your app, and we'd like to know what your use case is. We may\n * be able to provide something higher-level to better suit your needs.\n *\n * @see https://reactrouter.com/docs/en/v6/api#uselocation\n */\nexport function useLocation(): Location {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useLocation() may be used only in the context of a <Router> component.`\n  );\n\n  return React.useContext(LocationContext).location;\n}\n\n/**\n * Returns the current navigation action which describes how the router came to\n * the current location, either by a pop, push, or replace on the history stack.\n *\n * @see https://reactrouter.com/docs/en/v6/api#usenavigationtype\n */\nexport function useNavigationType(): NavigationType {\n  return React.useContext(LocationContext).navigationType;\n}\n\n/**\n * Returns true if the URL for the given \"to\" value matches the current URL.\n * This is useful for components that need to know \"active\" state, e.g.\n * <NavLink>.\n *\n * @see https://reactrouter.com/docs/en/v6/api#usematch\n */\nexport function useMatch<\n  ParamKey extends ParamParseKey<Path>,\n  Path extends string\n>(pattern: PathPattern<Path> | Path): PathMatch<ParamKey> | null {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useMatch() may be used only in the context of a <Router> component.`\n  );\n\n  let { pathname } = useLocation();\n  return React.useMemo(\n    () => matchPath<ParamKey, Path>(pattern, pathname),\n    [pathname, pattern]\n  );\n}\n\n/**\n * The interface for the navigate() function returned from useNavigate().\n */\nexport interface NavigateFunction {\n  (to: To, options?: NavigateOptions): void;\n  (delta: number): void;\n}\n\nexport interface NavigateOptions {\n  replace?: boolean;\n  state?: any;\n}\n\n/**\n * Returns an imperative method for changing the location. Used by <Link>s, but\n * may also be used by other elements to change the location.\n *\n * @see https://reactrouter.com/docs/en/v6/api#usenavigate\n */\nexport function useNavigate(): NavigateFunction {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useNavigate() may be used only in the context of a <Router> component.`\n  );\n\n  let { basename, navigator } = React.useContext(NavigationContext);\n  let { matches } = React.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n\n  let routePathnamesJson = JSON.stringify(\n    matches.map((match) => match.pathnameBase)\n  );\n\n  let activeRef = React.useRef(false);\n  React.useEffect(() => {\n    activeRef.current = true;\n  });\n\n  let navigate: NavigateFunction = React.useCallback(\n    (to: To | number, options: NavigateOptions = {}) => {\n      warning(\n        activeRef.current,\n        `You should call navigate() in a React.useEffect(), not when ` +\n          `your component is first rendered.`\n      );\n\n      if (!activeRef.current) return;\n\n      if (typeof to === \"number\") {\n        navigator.go(to);\n        return;\n      }\n\n      let path = resolveTo(\n        to,\n        JSON.parse(routePathnamesJson),\n        locationPathname\n      );\n\n      if (basename !== \"/\") {\n        path.pathname = joinPaths([basename, path.pathname]);\n      }\n\n      (!!options.replace ? navigator.replace : navigator.push)(\n        path,\n        options.state\n      );\n    },\n    [basename, navigator, routePathnamesJson, locationPathname]\n  );\n\n  return navigate;\n}\n\nconst OutletContext = React.createContext<unknown>(null);\n\n/**\n * Returns the context (if provided) for the child route at this level of the route\n * hierarchy.\n * @see https://reactrouter.com/docs/en/v6/api#useoutletcontext\n */\nexport function useOutletContext<Context = unknown>(): Context {\n  return React.useContext(OutletContext) as Context;\n}\n\n/**\n * Returns the element for the child route at this level of the route\n * hierarchy. Used internally by <Outlet> to render child routes.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useoutlet\n */\nexport function useOutlet(context?: unknown): React.ReactElement | null {\n  let outlet = React.useContext(RouteContext).outlet;\n  if (outlet) {\n    return (\n      <OutletContext.Provider value={context}>{outlet}</OutletContext.Provider>\n    );\n  }\n  return outlet;\n}\n\n/**\n * Returns an object of key/value pairs of the dynamic params from the current\n * URL that were matched by the route path.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useparams\n */\nexport function useParams<\n  ParamsOrKey extends string | Record<string, string | undefined> = string\n>(): Readonly<\n  [ParamsOrKey] extends [string] ? Params<ParamsOrKey> : Partial<ParamsOrKey>\n> {\n  let { matches } = React.useContext(RouteContext);\n  let routeMatch = matches[matches.length - 1];\n  return routeMatch ? (routeMatch.params as any) : {};\n}\n\n/**\n * Resolves the pathname of the given `to` value against the current location.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useresolvedpath\n */\nexport function useResolvedPath(to: To): Path {\n  let { matches } = React.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n\n  let routePathnamesJson = JSON.stringify(\n    matches.map((match) => match.pathnameBase)\n  );\n\n  return React.useMemo(\n    () => resolveTo(to, JSON.parse(routePathnamesJson), locationPathname),\n    [to, routePathnamesJson, locationPathname]\n  );\n}\n\n/**\n * Returns the element of the route that matched the current location, prepared\n * with the correct context to render the remainder of the route tree. Route\n * elements in the tree must render an <Outlet> to render their child route's\n * element.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useroutes\n */\nexport function useRoutes(\n  routes: RouteObject[],\n  locationArg?: Partial<Location> | string\n): React.ReactElement | null {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useRoutes() may be used only in the context of a <Router> component.`\n  );\n\n  let { matches: parentMatches } = React.useContext(RouteContext);\n  let routeMatch = parentMatches[parentMatches.length - 1];\n  let parentParams = routeMatch ? routeMatch.params : {};\n  let parentPathname = routeMatch ? routeMatch.pathname : \"/\";\n  let parentPathnameBase = routeMatch ? routeMatch.pathnameBase : \"/\";\n  let parentRoute = routeMatch && routeMatch.route;\n\n  if (__DEV__) {\n    // You won't get a warning about 2 different <Routes> under a <Route>\n    // without a trailing *, but this is a best-effort warning anyway since we\n    // cannot even give the warning unless they land at the parent route.\n    //\n    // Example:\n    //\n    // <Routes>\n    //   {/* This route path MUST end with /* because otherwise\n    //       it will never match /blog/post/123 */}\n    //   <Route path=\"blog\" element={<Blog />} />\n    //   <Route path=\"blog/feed\" element={<BlogFeed />} />\n    // </Routes>\n    //\n    // function Blog() {\n    //   return (\n    //     <Routes>\n    //       <Route path=\"post/:id\" element={<Post />} />\n    //     </Routes>\n    //   );\n    // }\n    let parentPath = (parentRoute && parentRoute.path) || \"\";\n    warningOnce(\n      parentPathname,\n      !parentRoute || parentPath.endsWith(\"*\"),\n      `You rendered descendant <Routes> (or called \\`useRoutes()\\`) at ` +\n        `\"${parentPathname}\" (under <Route path=\"${parentPath}\">) but the ` +\n        `parent route path has no trailing \"*\". This means if you navigate ` +\n        `deeper, the parent won't match anymore and therefore the child ` +\n        `routes will never render.\\n\\n` +\n        `Please change the parent <Route path=\"${parentPath}\"> to <Route ` +\n        `path=\"${parentPath === \"/\" ? \"*\" : `${parentPath}/*`}\">.`\n    );\n  }\n\n  let locationFromContext = useLocation();\n\n  let location;\n  if (locationArg) {\n    let parsedLocationArg =\n      typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n\n    invariant(\n      parentPathnameBase === \"/\" ||\n        parsedLocationArg.pathname?.startsWith(parentPathnameBase),\n      `When overriding the location using \\`<Routes location>\\` or \\`useRoutes(routes, location)\\`, ` +\n        `the location pathname must begin with the portion of the URL pathname that was ` +\n        `matched by all parent routes. The current pathname base is \"${parentPathnameBase}\" ` +\n        `but pathname \"${parsedLocationArg.pathname}\" was given in the \\`location\\` prop.`\n    );\n\n    location = parsedLocationArg;\n  } else {\n    location = locationFromContext;\n  }\n\n  let pathname = location.pathname || \"/\";\n  let remainingPathname =\n    parentPathnameBase === \"/\"\n      ? pathname\n      : pathname.slice(parentPathnameBase.length) || \"/\";\n  let matches = matchRoutes(routes, { pathname: remainingPathname });\n\n  if (__DEV__) {\n    warning(\n      parentRoute || matches != null,\n      `No routes matched location \"${location.pathname}${location.search}${location.hash}\" `\n    );\n\n    warning(\n      matches == null ||\n        matches[matches.length - 1].route.element !== undefined,\n      `Matched leaf route at location \"${location.pathname}${location.search}${location.hash}\" does not have an element. ` +\n        `This means it will render an <Outlet /> with a null value by default resulting in an \"empty\" page.`\n    );\n  }\n\n  return _renderMatches(\n    matches &&\n      matches.map((match) =>\n        Object.assign({}, match, {\n          params: Object.assign({}, parentParams, match.params),\n          pathname: joinPaths([parentPathnameBase, match.pathname]),\n          pathnameBase:\n            match.pathnameBase === \"/\"\n              ? parentPathnameBase\n              : joinPaths([parentPathnameBase, match.pathnameBase]),\n        })\n      ),\n    parentMatches\n  );\n}\n\nexport function _renderMatches(\n  matches: RouteMatch[] | null,\n  parentMatches: RouteMatch[] = []\n): React.ReactElement | null {\n  if (matches == null) return null;\n\n  return matches.reduceRight((outlet, match, index) => {\n    return (\n      <RouteContext.Provider\n        children={\n          match.route.element !== undefined ? match.route.element : outlet\n        }\n        value={{\n          outlet,\n          matches: parentMatches.concat(matches.slice(0, index + 1)),\n        }}\n      />\n    );\n  }, null as React.ReactElement | null);\n}\n","import * as React from \"react\";\nimport type { InitialEntry, Location, MemoryHistory, To } from \"history\";\nimport {\n  Action as NavigationType,\n  createMemoryHistory,\n  parsePath,\n} from \"history\";\n\nimport { LocationContext, NavigationContext, Navigator } from \"./context\";\nimport {\n  useInRouterContext,\n  useNavigate,\n  useOutlet,\n  useRoutes,\n  _renderMatches,\n} from \"./hooks\";\nimport type { RouteMatch, RouteObject } from \"./router\";\nimport { invariant, normalizePathname, stripBasename, warning } from \"./router\";\n\nexport interface MemoryRouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  initialEntries?: InitialEntry[];\n  initialIndex?: number;\n}\n\n/**\n * A <Router> that stores all entries in memory.\n *\n * @see https://reactrouter.com/docs/en/v6/api#memoryrouter\n */\nexport function MemoryRouter({\n  basename,\n  children,\n  initialEntries,\n  initialIndex,\n}: MemoryRouterProps): React.ReactElement {\n  let historyRef = React.useRef<MemoryHistory>();\n  if (historyRef.current == null) {\n    historyRef.current = createMemoryHistory({ initialEntries, initialIndex });\n  }\n\n  let history = historyRef.current;\n  let [state, setState] = React.useState({\n    action: history.action,\n    location: history.location,\n  });\n\n  React.useLayoutEffect(() => history.listen(setState), [history]);\n\n  return (\n    <Router\n      basename={basename}\n      children={children}\n      location={state.location}\n      navigationType={state.action}\n      navigator={history}\n    />\n  );\n}\n\nexport interface NavigateProps {\n  to: To;\n  replace?: boolean;\n  state?: any;\n}\n\n/**\n * Changes the current location.\n *\n * Note: This API is mostly useful in React.Component subclasses that are not\n * able to use hooks. In functional components, we recommend you use the\n * `useNavigate` hook instead.\n *\n * @see https://reactrouter.com/docs/en/v6/api#navigate\n */\nexport function Navigate({ to, replace, state }: NavigateProps): null {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of\n    // the router loaded. We can help them understand how to avoid that.\n    `<Navigate> may be used only in the context of a <Router> component.`\n  );\n\n  warning(\n    !React.useContext(NavigationContext).static,\n    `<Navigate> must not be used on the initial render in a <StaticRouter>. ` +\n      `This is a no-op, but you should modify your code so the <Navigate> is ` +\n      `only ever rendered in response to some user interaction or state change.`\n  );\n\n  let navigate = useNavigate();\n  React.useEffect(() => {\n    navigate(to, { replace, state });\n  });\n\n  return null;\n}\n\nexport interface OutletProps {\n  context?: unknown;\n}\n\n/**\n * Renders the child route's element, if there is one.\n *\n * @see https://reactrouter.com/docs/en/v6/api#outlet\n */\nexport function Outlet(props: OutletProps): React.ReactElement | null {\n  return useOutlet(props.context);\n}\n\nexport interface RouteProps {\n  caseSensitive?: boolean;\n  children?: React.ReactNode;\n  element?: React.ReactNode | null;\n  index?: boolean;\n  path?: string;\n}\n\nexport interface PathRouteProps {\n  caseSensitive?: boolean;\n  children?: React.ReactNode;\n  element?: React.ReactNode | null;\n  index?: false;\n  path: string;\n}\n\nexport interface LayoutRouteProps {\n  children?: React.ReactNode;\n  element?: React.ReactNode | null;\n}\n\nexport interface IndexRouteProps {\n  element?: React.ReactNode | null;\n  index: true;\n}\n\n/**\n * Declares an element that should be rendered at a certain URL path.\n *\n * @see https://reactrouter.com/docs/en/v6/api#route\n */\nexport function Route(\n  _props: PathRouteProps | LayoutRouteProps | IndexRouteProps\n): React.ReactElement | null {\n  invariant(\n    false,\n    `A <Route> is only ever to be used as the child of <Routes> element, ` +\n      `never rendered directly. Please wrap your <Route> in a <Routes>.`\n  );\n}\n\nexport interface RouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  location: Partial<Location> | string;\n  navigationType?: NavigationType;\n  navigator: Navigator;\n  static?: boolean;\n}\n\n/**\n * Provides location context for the rest of the app.\n *\n * Note: You usually won't render a <Router> directly. Instead, you'll render a\n * router that is more specific to your environment such as a <BrowserRouter>\n * in web browsers or a <StaticRouter> for server rendering.\n *\n * @see https://reactrouter.com/docs/en/v6/api#router\n */\nexport function Router({\n  basename: basenameProp = \"/\",\n  children = null,\n  location: locationProp,\n  navigationType = NavigationType.Pop,\n  navigator,\n  static: staticProp = false,\n}: RouterProps): React.ReactElement | null {\n  invariant(\n    !useInRouterContext(),\n    `You cannot render a <Router> inside another <Router>.` +\n      ` You should never have more than one in your app.`\n  );\n\n  let basename = normalizePathname(basenameProp);\n  let navigationContext = React.useMemo(\n    () => ({ basename, navigator, static: staticProp }),\n    [basename, navigator, staticProp]\n  );\n\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\",\n    state = null,\n    key = \"default\",\n  } = locationProp;\n\n  let location = React.useMemo(() => {\n    let trailingPathname = stripBasename(pathname, basename);\n\n    if (trailingPathname == null) {\n      return null;\n    }\n\n    return {\n      pathname: trailingPathname,\n      search,\n      hash,\n      state,\n      key,\n    };\n  }, [basename, pathname, search, hash, state, key]);\n\n  warning(\n    location != null,\n    `<Router basename=\"${basename}\"> is not able to match the URL ` +\n      `\"${pathname}${search}${hash}\" because it does not start with the ` +\n      `basename, so the <Router> won't render anything.`\n  );\n\n  if (location == null) {\n    return null;\n  }\n\n  return (\n    <NavigationContext.Provider value={navigationContext}>\n      <LocationContext.Provider\n        children={children}\n        value={{ location, navigationType }}\n      />\n    </NavigationContext.Provider>\n  );\n}\n\nexport interface RoutesProps {\n  children?: React.ReactNode;\n  location?: Partial<Location> | string;\n}\n\n/**\n * A container for a nested tree of <Route> elements that renders the branch\n * that best matches the current location.\n *\n * @see https://reactrouter.com/docs/en/v6/api#routes\n */\nexport function Routes({\n  children,\n  location,\n}: RoutesProps): React.ReactElement | null {\n  return useRoutes(createRoutesFromChildren(children), location);\n}\n\n///////////////////////////////////////////////////////////////////////////////\n// UTILS\n///////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a route config from a React \"children\" object, which is usually\n * either a `<Route>` element or an array of them. Used internally by\n * `<Routes>` to create a route config from its children.\n *\n * @see https://reactrouter.com/docs/en/v6/api#createroutesfromchildren\n */\nexport function createRoutesFromChildren(\n  children: React.ReactNode\n): RouteObject[] {\n  let routes: RouteObject[] = [];\n\n  React.Children.forEach(children, (element) => {\n    if (!React.isValidElement(element)) {\n      // Ignore non-elements. This allows people to more easily inline\n      // conditionals in their route config.\n      return;\n    }\n\n    if (element.type === React.Fragment) {\n      // Transparently support React.Fragment and its children.\n      routes.push.apply(\n        routes,\n        createRoutesFromChildren(element.props.children)\n      );\n      return;\n    }\n\n    invariant(\n      element.type === Route,\n      `[${\n        typeof element.type === \"string\" ? element.type : element.type.name\n      }] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`\n    );\n\n    let route: RouteObject = {\n      caseSensitive: element.props.caseSensitive,\n      element: element.props.element,\n      index: element.props.index,\n      path: element.props.path,\n    };\n\n    if (element.props.children) {\n      route.children = createRoutesFromChildren(element.props.children);\n    }\n\n    routes.push(route);\n  });\n\n  return routes;\n}\n\n/**\n * Renders the result of `matchRoutes()` into a React element.\n */\nexport function renderMatches(\n  matches: RouteMatch[] | null\n): React.ReactElement | null {\n  return _renderMatches(matches);\n}\n","/**\n * NOTE: If you refactor this to split up the modules into separate files,\n * you'll need to update the rollup config for react-router-dom-v5-compat.\n */\nimport * as React from \"react\";\nimport type { BrowserHistory, HashHistory, History } from \"history\";\nimport { createBrowserHistory, createHashHistory } from \"history\";\nimport {\n  MemoryRouter,\n  Navigate,\n  Outlet,\n  Route,\n  Router,\n  Routes,\n  createRoutesFromChildren,\n  generatePath,\n  matchRoutes,\n  matchPath,\n  createPath,\n  parsePath,\n  resolvePath,\n  renderMatches,\n  useHref,\n  useInRouterContext,\n  useLocation,\n  useMatch,\n  useNavigate,\n  useNavigationType,\n  useOutlet,\n  useParams,\n  useResolvedPath,\n  useRoutes,\n  useOutletContext,\n} from \"react-router\";\nimport type { To } from \"react-router\";\n\nfunction warning(cond: boolean, message: string): void {\n  if (!cond) {\n    // eslint-disable-next-line no-console\n    if (typeof console !== \"undefined\") console.warn(message);\n\n    try {\n      // Welcome to debugging React Router!\n      //\n      // This error is thrown as a convenience so you can more easily\n      // find the source for a warning that appears in the console by\n      // enabling \"pause on exceptions\" in your JavaScript debugger.\n      throw new Error(message);\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// RE-EXPORTS\n////////////////////////////////////////////////////////////////////////////////\n\n// Note: Keep in sync with react-router exports!\nexport {\n  MemoryRouter,\n  Navigate,\n  Outlet,\n  Route,\n  Router,\n  Routes,\n  createRoutesFromChildren,\n  generatePath,\n  matchRoutes,\n  matchPath,\n  createPath,\n  parsePath,\n  renderMatches,\n  resolvePath,\n  useHref,\n  useInRouterContext,\n  useLocation,\n  useMatch,\n  useNavigate,\n  useNavigationType,\n  useOutlet,\n  useParams,\n  useResolvedPath,\n  useRoutes,\n  useOutletContext,\n};\n\nexport { NavigationType } from \"react-router\";\nexport type {\n  Hash,\n  Location,\n  Path,\n  To,\n  MemoryRouterProps,\n  NavigateFunction,\n  NavigateOptions,\n  NavigateProps,\n  Navigator,\n  OutletProps,\n  Params,\n  PathMatch,\n  RouteMatch,\n  RouteObject,\n  RouteProps,\n  PathRouteProps,\n  LayoutRouteProps,\n  IndexRouteProps,\n  RouterProps,\n  Pathname,\n  Search,\n  RoutesProps,\n} from \"react-router\";\n\n///////////////////////////////////////////////////////////////////////////////\n// DANGER! PLEASE READ ME!\n// We provide these exports as an escape hatch in the event that you need any\n// routing data that we don't provide an explicit API for. With that said, we\n// want to cover your use case if we can, so if you feel the need to use these\n// we want to hear from you. Let us know what you're building and we'll do our\n// best to make sure we can support you!\n//\n// We consider these exports an implementation detail and do not guarantee\n// against any breaking changes, regardless of the semver release. Use with\n// extreme caution and only if you understand the consequences. Godspeed.\n///////////////////////////////////////////////////////////////////////////////\n\n/** @internal */\nexport {\n  UNSAFE_NavigationContext,\n  UNSAFE_LocationContext,\n  UNSAFE_RouteContext,\n} from \"react-router\";\n\n////////////////////////////////////////////////////////////////////////////////\n// COMPONENTS\n////////////////////////////////////////////////////////////////////////////////\n\nexport interface BrowserRouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  window?: Window;\n}\n\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nexport function BrowserRouter({\n  basename,\n  children,\n  window,\n}: BrowserRouterProps) {\n  let historyRef = React.useRef<BrowserHistory>();\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({ window });\n  }\n\n  let history = historyRef.current;\n  let [state, setState] = React.useState({\n    action: history.action,\n    location: history.location,\n  });\n\n  React.useLayoutEffect(() => history.listen(setState), [history]);\n\n  return (\n    <Router\n      basename={basename}\n      children={children}\n      location={state.location}\n      navigationType={state.action}\n      navigator={history}\n    />\n  );\n}\n\nexport interface HashRouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  window?: Window;\n}\n\n/**\n * A `<Router>` for use in web browsers. Stores the location in the hash\n * portion of the URL so it is not sent to the server.\n */\nexport function HashRouter({ basename, children, window }: HashRouterProps) {\n  let historyRef = React.useRef<HashHistory>();\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({ window });\n  }\n\n  let history = historyRef.current;\n  let [state, setState] = React.useState({\n    action: history.action,\n    location: history.location,\n  });\n\n  React.useLayoutEffect(() => history.listen(setState), [history]);\n\n  return (\n    <Router\n      basename={basename}\n      children={children}\n      location={state.location}\n      navigationType={state.action}\n      navigator={history}\n    />\n  );\n}\n\nexport interface HistoryRouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  history: History;\n}\n\n/**\n * A `<Router>` that accepts a pre-instantiated history object. It's important\n * to note that using your own history object is highly discouraged and may add\n * two versions of the history library to your bundles unless you use the same\n * version of the history library that React Router uses internally.\n */\nfunction HistoryRouter({ basename, children, history }: HistoryRouterProps) {\n  const [state, setState] = React.useState({\n    action: history.action,\n    location: history.location,\n  });\n\n  React.useLayoutEffect(() => history.listen(setState), [history]);\n\n  return (\n    <Router\n      basename={basename}\n      children={children}\n      location={state.location}\n      navigationType={state.action}\n      navigator={history}\n    />\n  );\n}\n\nif (__DEV__) {\n  HistoryRouter.displayName = \"unstable_HistoryRouter\";\n}\n\nexport { HistoryRouter as unstable_HistoryRouter };\n\nfunction isModifiedEvent(event: React.MouseEvent) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nexport interface LinkProps\n  extends Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, \"href\"> {\n  reloadDocument?: boolean;\n  replace?: boolean;\n  state?: any;\n  to: To;\n}\n\n/**\n * The public API for rendering a history-aware <a>.\n */\nexport const Link = React.forwardRef<HTMLAnchorElement, LinkProps>(\n  function LinkWithRef(\n    { onClick, reloadDocument, replace = false, state, target, to, ...rest },\n    ref\n  ) {\n    let href = useHref(to);\n    let internalOnClick = useLinkClickHandler(to, { replace, state, target });\n    function handleClick(\n      event: React.MouseEvent<HTMLAnchorElement, MouseEvent>\n    ) {\n      if (onClick) onClick(event);\n      if (!event.defaultPrevented && !reloadDocument) {\n        internalOnClick(event);\n      }\n    }\n\n    return (\n      // eslint-disable-next-line jsx-a11y/anchor-has-content\n      <a\n        {...rest}\n        href={href}\n        onClick={handleClick}\n        ref={ref}\n        target={target}\n      />\n    );\n  }\n);\n\nif (__DEV__) {\n  Link.displayName = \"Link\";\n}\n\nexport interface NavLinkProps\n  extends Omit<LinkProps, \"className\" | \"style\" | \"children\"> {\n  children?:\n    | React.ReactNode\n    | ((props: { isActive: boolean }) => React.ReactNode);\n  caseSensitive?: boolean;\n  className?: string | ((props: { isActive: boolean }) => string | undefined);\n  end?: boolean;\n  style?:\n    | React.CSSProperties\n    | ((props: { isActive: boolean }) => React.CSSProperties);\n}\n\n/**\n * A <Link> wrapper that knows if it's \"active\" or not.\n */\nexport const NavLink = React.forwardRef<HTMLAnchorElement, NavLinkProps>(\n  function NavLinkWithRef(\n    {\n      \"aria-current\": ariaCurrentProp = \"page\",\n      caseSensitive = false,\n      className: classNameProp = \"\",\n      end = false,\n      style: styleProp,\n      to,\n      children,\n      ...rest\n    },\n    ref\n  ) {\n    let location = useLocation();\n    let path = useResolvedPath(to);\n\n    let locationPathname = location.pathname;\n    let toPathname = path.pathname;\n    if (!caseSensitive) {\n      locationPathname = locationPathname.toLowerCase();\n      toPathname = toPathname.toLowerCase();\n    }\n\n    let isActive =\n      locationPathname === toPathname ||\n      (!end &&\n        locationPathname.startsWith(toPathname) &&\n        locationPathname.charAt(toPathname.length) === \"/\");\n\n    let ariaCurrent = isActive ? ariaCurrentProp : undefined;\n\n    let className: string | undefined;\n    if (typeof classNameProp === \"function\") {\n      className = classNameProp({ isActive });\n    } else {\n      // If the className prop is not a function, we use a default `active`\n      // class for <NavLink />s that are active. In v5 `active` was the default\n      // value for `activeClassName`, but we are removing that API and can still\n      // use the old default behavior for a cleaner upgrade path and keep the\n      // simple styling rules working as they currently do.\n      className = [classNameProp, isActive ? \"active\" : null]\n        .filter(Boolean)\n        .join(\" \");\n    }\n\n    let style =\n      typeof styleProp === \"function\" ? styleProp({ isActive }) : styleProp;\n\n    return (\n      <Link\n        {...rest}\n        aria-current={ariaCurrent}\n        className={className}\n        ref={ref}\n        style={style}\n        to={to}\n      >\n        {typeof children === \"function\" ? children({ isActive }) : children}\n      </Link>\n    );\n  }\n);\n\nif (__DEV__) {\n  NavLink.displayName = \"NavLink\";\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// HOOKS\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Handles the click behavior for router `<Link>` components. This is useful if\n * you need to create custom `<Link>` components with the same click behavior we\n * use in our exported `<Link>`.\n */\nexport function useLinkClickHandler<E extends Element = HTMLAnchorElement>(\n  to: To,\n  {\n    target,\n    replace: replaceProp,\n    state,\n  }: {\n    target?: React.HTMLAttributeAnchorTarget;\n    replace?: boolean;\n    state?: any;\n  } = {}\n): (event: React.MouseEvent<E, MouseEvent>) => void {\n  let navigate = useNavigate();\n  let location = useLocation();\n  let path = useResolvedPath(to);\n\n  return React.useCallback(\n    (event: React.MouseEvent<E, MouseEvent>) => {\n      if (\n        event.button === 0 && // Ignore everything but left clicks\n        (!target || target === \"_self\") && // Let browser handle \"target=_blank\" etc.\n        !isModifiedEvent(event) // Ignore clicks with modifier keys\n      ) {\n        event.preventDefault();\n\n        // If the URL hasn't changed, a regular <a> will do a replace instead of\n        // a push, so do the same here.\n        let replace =\n          !!replaceProp || createPath(location) === createPath(path);\n\n        navigate(to, { replace, state });\n      }\n    },\n    [location, navigate, path, replaceProp, state, target, to]\n  );\n}\n\n/**\n * A convenient wrapper for reading and writing search parameters via the\n * URLSearchParams interface.\n */\nexport function useSearchParams(defaultInit?: URLSearchParamsInit) {\n  warning(\n    typeof URLSearchParams !== \"undefined\",\n    `You cannot use the \\`useSearchParams\\` hook in a browser that does not ` +\n      `support the URLSearchParams API. If you need to support Internet ` +\n      `Explorer 11, we recommend you load a polyfill such as ` +\n      `https://github.com/ungap/url-search-params\\n\\n` +\n      `If you're unsure how to load polyfills, we recommend you check out ` +\n      `https://polyfill.io/v3/ which provides some recommendations about how ` +\n      `to load polyfills only for users that need them, instead of for every ` +\n      `user.`\n  );\n\n  let defaultSearchParamsRef = React.useRef(createSearchParams(defaultInit));\n\n  let location = useLocation();\n  let searchParams = React.useMemo(() => {\n    let searchParams = createSearchParams(location.search);\n\n    for (let key of defaultSearchParamsRef.current.keys()) {\n      if (!searchParams.has(key)) {\n        defaultSearchParamsRef.current.getAll(key).forEach((value) => {\n          searchParams.append(key, value);\n        });\n      }\n    }\n\n    return searchParams;\n  }, [location.search]);\n\n  let navigate = useNavigate();\n  let setSearchParams = React.useCallback(\n    (\n      nextInit: URLSearchParamsInit,\n      navigateOptions?: { replace?: boolean; state?: any }\n    ) => {\n      navigate(\"?\" + createSearchParams(nextInit), navigateOptions);\n    },\n    [navigate]\n  );\n\n  return [searchParams, setSearchParams] as const;\n}\n\nexport type ParamKeyValuePair = [string, string];\n\nexport type URLSearchParamsInit =\n  | string\n  | ParamKeyValuePair[]\n  | Record<string, string | string[]>\n  | URLSearchParams;\n\n/**\n * Creates a URLSearchParams object using the given initializer.\n *\n * This is identical to `new URLSearchParams(init)` except it also\n * supports arrays as values in the object form of the initializer\n * instead of just strings. This is convenient when you need multiple\n * values for a given key, but don't want to use an array initializer.\n *\n * For example, instead of:\n *\n *   let searchParams = new URLSearchParams([\n *     ['sort', 'name'],\n *     ['sort', 'price']\n *   ]);\n *\n * you can do:\n *\n *   let searchParams = createSearchParams({\n *     sort: ['name', 'price']\n *   });\n */\nexport function createSearchParams(\n  init: URLSearchParamsInit = \"\"\n): URLSearchParams {\n  return new URLSearchParams(\n    typeof init === \"string\" ||\n    Array.isArray(init) ||\n    init instanceof URLSearchParams\n      ? init\n      : Object.keys(init).reduce((memo, key) => {\n          let value = init[key];\n          return memo.concat(\n            Array.isArray(value) ? value.map((v) => [key, v]) : [[key, value]]\n          );\n        }, [] as ParamKeyValuePair[])\n  );\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"IA7EQ\")).toString();","import { h, Component } from \"preact\";\nimport { http } from \"/src/core\";\nimport { withTranslation } from \"react-i18next\";\n\nclass StopNotificationEmails extends Component {\n  constructor() {\n    super();\n    http\n      .get(`/api${  window.location.pathname}`)\n      .then(() => {\n        this.setState({ message: this.props.t(\"notification_emails_stopped\") });\n      })\n      .catch(err => {\n        console.warn(err);\n        this.setState({ message: this.props.t(\"error\") });\n      });\n  }\n\n  render() {\n    return <div>{this.state.message || \"\"}</div>;\n  }\n}\n\nexport default withTranslation()(StopNotificationEmails);\n","import { h } from \"preact\";\nimport Message from \"./message.component.js\";\n\nexport default function MessageChild(props) {\n  return (\n    <Message\n      id={props.id}\n      isChild={true}\n    />\n  );\n}\n","import { h } from \"preact\";\nimport { router, util } from \"/src/core\";\nimport MessageChild from \"./message-child.component.js\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function MessageChildren(props) {\n\n  const { t } = useTranslation();\n  const [firstDisplayedChild, setFirstDisplayedChild] = useState(0);\n  const [lastDisplayedChild, setLastDisplayedChild] = useState(0);\n\n  const onNewChild = event => {\n    const newMsg = event.detail;\n    if (newMsg.parent && util.getId(newMsg.parent) == props.id) {\n      // a big number to display all children until the new one. This is not elegant...\n      // The issue is that we can't simply increment lastDisplayedChild as it is not defined here\n      // Another issue is that a user could load a comment in the middle of the list and create a new one...\n      // The real answer is to make a paginated list but that is for another time\n      setLastDisplayedChild(1024);\n    }\n  };\n\n  const displayPreviousChildren = () => {\n    setFirstDisplayedChild(Math.max(0, firstDisplayedChild - 10));\n  };\n\n  const displayNextChildren = () => {\n    setLastDisplayedChild(Math.min(props.childMessages.length, lastDisplayedChild + 10));\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"newChild\", onNewChild);\n    let firstDisplayedChild = 0;\n    let lastDisplayedChild = 0;\n    if (props.childMessages.length) {\n      let msgIndex = router.action\n        ? props.childMessages.findIndex(e => e && e.id === router.action)\n        : -1;\n      if (msgIndex != -1) {\n        firstDisplayedChild = Math.max(0, msgIndex - 1);\n        lastDisplayedChild = Math.min(\n          props.childMessages.length,\n          msgIndex + 1\n        );\n      } else {\n        firstDisplayedChild = props.childMessages && props.childMessages.length - 5; // display the last 5 children\n        lastDisplayedChild = props.childMessages && props.childMessages.length;\n      }\n    }\n    setFirstDisplayedChild(firstDisplayedChild);\n    setLastDisplayedChild(lastDisplayedChild);\n  }, []);\n\n  if (\n    lastDisplayedChild - firstDisplayedChild < 1 ||\n    !props.childMessages\n  ) {\n    return null;\n  }\n  return (\n    <div class=\"children\">\n      {firstDisplayedChild > 0 && (\n        <div class=\"d-flex\">\n          <a\n            class=\"more-coms unselectable\"\n            onClick={() => displayPreviousChildren()}\n          >\n            {t(\"previous_coms\")}\n          </a>\n        </div>\n      )}\n      {props.childMessages.map((e, i) => {\n        if (\n          i < firstDisplayedChild ||\n          i > lastDisplayedChild\n        ) {\n          return null;\n        }\n\n        return (\n          <MessageChild\n            id={e.id}\n            key={e.id}\n          />\n        );\n      })}\n      {lastDisplayedChild + 1 <\n        props.childMessages.length && (\n        <div class=\"d-flex\">\n          <span\n            class=\"more-coms unselectable\"\n            onClick={() => displayNextChildren()}\n          >\n            {t(\"next_coms\")}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { util } from \"/src/core\";\n\nexport default function MessageHead(props) {\n  return (\n    <div class=\"message-head d-flex\">\n      {!props.isPublic && (\n        <div>\n          <img\n            className={\n              `rounded-circle material-shadow avatar${ \n                props.author && props.author.name ? \"\" : \" removed-user\"}`\n            }\n            style={util.backgroundHash(\n              props.author && props.author.name ? props.author && props.author.id : \"\"\n            )}\n            src={\n              props.author && props.author.avatar\n                ? util.crop(props.author.avatar.id, 100, 100)\n                : util.defaultAvatar\n            }\n            title={props.author && props.author.name ? props.author.name : \"\"}\n          />\n        </div>\n      )}\n      {!props.isChild && !props.isPublic && (\n        <div class=\"infos\">\n          <span class=\"capitalize author\">\n            {props.author && props.author.name ? props.author.name : \"\"}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n","import _FaIcon from \"./fa-icon.component.js\";\n\nexport const FaIcon = _FaIcon;\n","import { h } from \"preact\";\n\n// Fontawesome icons taken from https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/js/all.js\nfunction FaIcon() {\n  const icons = {\n    regular: {\n      comment: [512, 512, [], \"f075\", \"M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z\"],\n      bookmark: [384, 512, [], \"f02e\", \"M336 0H48C21.49 0 0 21.49 0 48v464l192-112 192 112V48c0-26.51-21.49-48-48-48zm0 428.43l-144-84-144 84V54a6 6 0 0 1 6-6h276c3.314 0 6 2.683 6 5.996V428.43z\"],\n      images: [ 576, 512, [], \"f302\", \"M480 416v16c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V176c0-26.51 21.49-48 48-48h16v48H54a6 6 0 0 0-6 6v244a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6v-10h48zm42-336H150a6 6 0 0 0-6 6v244a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6V86a6 6 0 0 0-6-6zm6-48c26.51 0 48 21.49 48 48v256c0 26.51-21.49 48-48 48H144c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h384zM264 144c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.909-40 40-40 40 17.909 40 40zm-72 96l39.515-39.515c4.686-4.686 12.284-4.686 16.971 0L288 240l103.515-103.515c4.686-4.686 12.284-4.686 16.971 0L480 208v80H192v-48z\"],\n      \"check-circle\": [512, 512, [], \"f058\", \"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z\"],\n      \"file-pdf\": [384, 512, [], \"f1c1\", \"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm250.2-143.7c-12.2-12-47-8.7-64.4-6.5-17.2-10.5-28.7-25-36.8-46.3 3.9-16.1 10.1-40.6 5.4-56-4.2-26.2-37.8-23.6-42.6-5.9-4.4 16.1-.4 38.5 7 67.1-10 23.9-24.9 56-35.4 74.4-20 10.3-47 26.2-51 46.2-3.3 15.8 26 55.2 76.1-31.2 22.4-7.4 46.8-16.5 68.4-20.1 18.9 10.2 41 17 55.8 17 25.5 0 28-28.2 17.5-38.7zm-198.1 77.8c5.1-13.7 24.5-29.5 30.4-35-19 30.3-30.4 35.7-30.4 35zm81.6-190.6c7.4 0 6.7 32.1 1.8 40.8-4.4-13.9-4.3-40.8-1.8-40.8zm-24.4 136.6c9.7-16.9 18-37 24.7-54.7 8.3 15.1 18.9 27.2 30.1 35.5-20.8 4.3-38.9 13.1-54.8 19.2zm131.6-5s-5 6-37.3-7.8c35.1-2.6 40.9 5.4 37.3 7.8z\"],\n      bell: [448, 512, [], \"f0f3\", \"M439.39 362.29c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71zM67.53 368c21.22-27.97 44.42-74.33 44.53-159.42 0-.2-.06-.38-.06-.58 0-61.86 50.14-112 112-112s112 50.14 112 112c0 .2-.06.38-.06.58.11 85.1 23.31 131.46 44.53 159.42H67.53zM224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64z\"],\n      \"level-down-alt\": [320, 512, [], \"f3be\", \"M313.553 392.331L209.587 504.334c-9.485 10.214-25.676 10.229-35.174 0L70.438 392.331C56.232 377.031 67.062 352 88.025 352H152V80H68.024a11.996 11.996 0 0 1-8.485-3.515l-56-56C-4.021 12.926 1.333 0 12.024 0H208c13.255 0 24 10.745 24 24v328h63.966c20.878 0 31.851 24.969 17.587 40.331z\"]\n    },\n    solid: {\n      bookmark: [384, 512, [], \"f02e\", \"M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z\"],\n      comment: [512, 512, [], \"f075\", \"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z\"],\n      \"pencil-alt\": [512, 512, [], \"f303\", \"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z\"],\n      \"arrow-left\": [448, 512, [], \"f060\", \"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z\"],\n      \"caret-down\": [320, 512, [], \"f0d7\", \"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\"],\n      film: [512, 512, [], \"f008\", \"M488 64h-8v20c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V64H96v20c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12V64h-8C10.7 64 0 74.7 0 88v336c0 13.3 10.7 24 24 24h8v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h320v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h8c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24zM96 372c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm272 208c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm0-168c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm112 152c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z\"],\n      times: [352, 512, [], \"f00d\", \"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\"],\n      bell: [448, 512, [], \"f0f3\", \"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z\"],\n      \"ellipsis-h\": [512, 512, [], \"f141\", \"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z\"],\n      search: [512, 512, [], \"f002\", \"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z\"]\n    }\n  };\n\n  const icon = icons[this.props.family][this.props.icon];\n\n  if (icon) {\n    return (\n      <svg\n        style={this.props.rotation ? `transform: rotate(${this.props.rotation})` : null}\n        className={`fa-icon ${this.props.family} ${this.props.icon}`}\n        viewBox={`0 0 ${icon[0]} ${icon[1]}`}\n      >\n        <path fill=\"currentColor\" d={icon[4]} />\n      </svg>\n    );\n  }\n}\n\nexport default FaIcon;\n","import {\n  useMemo,\n  useContext,\n  useState,\n  useLayoutEffect,\n  useEffect\n} from 'preact/hooks'\nimport { createContext, h } from 'preact'\nimport { forwardRef } from 'preact/compat'\n\nlet StoreContext = createContext()\n\nlet useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffect : useEffect\n\nlet customContext = context => (...keys) => {\n  let store = useContext(context)\n  if (process.env.NODE_ENV !== 'production' && !store) {\n    throw new Error(\n      'Could not find storeon context value.' +\n        'Please ensure the component is wrapped in a <StoreContext.Provider>'\n    )\n  }\n\n  let rerender = useState({})\n\n  useIsomorphicLayoutEffect(() => {\n    return store.on('@changed', (_, changed) => {\n      let changesInKeys = keys.some(key => key in changed)\n      if (changesInKeys) rerender[1]({})\n    })\n  }, [])\n\n  return useMemo(() => {\n    let state = store.get()\n    let data = {}\n    keys.forEach(key => {\n      data[key] = state[key]\n    })\n    data.dispatch = store.dispatch\n    return data\n  }, [rerender[0]])\n}\n\nlet useStoreon = customContext(StoreContext)\n\nlet connectStoreon = (...keys) => {\n  let Component = keys.pop()\n  return forwardRef((originProps, ref) => {\n    let props = { ...originProps, ...useStoreon(...keys), ref }\n    return h(Component, props)\n  })\n}\n\nexport { useStoreon, StoreContext, connectStoreon, customContext }\n","import _GroupSearch from \"./group-search.component.js\";\nimport _GroupSearchWrapper from \"./group-search-wrapper.component.js\";\nimport _GroupsDropdownNavbar from \"./groups-dropdown-navbar.component.js\";\nimport _Navbar from \"./navbar.component.js\";\nimport _NotificationsDropdownNavbar from \"./notifications-dropdown-navbar.component.js\";\n\nexport const GroupSearch = _GroupSearch;\nexport const GroupSearchWrapper = _GroupSearchWrapper;\nexport const GroupsDropdownNavbar = _GroupsDropdownNavbar;\nexport const Navbar = _Navbar;\nexport const NotificationsDropdownNavbar = _NotificationsDropdownNavbar;\n","import { h } from \"preact\";\nimport { router, http } from \"/src/core\";\nimport { MessageSearchResult } from \"/src/message\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function GroupSearch(props) {\n\n  const { t } = useTranslation();\n  const groupId = useState(props.id);\n  const [loaded, setLoaded] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [hashtags, setHashtags] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n\n  const loadMessages = () => {\n    const search = router.getParam(\"q\");\n    const hashtags = router.getParam(\"hashtags\");\n    setSearch(search);\n    setHashtags(hashtags);\n    setLoaded(false);\n    setMessages([]);\n    http.post(\"/api/messages/search\", {\n      group: groupId,\n      search,\n      hashtags\n    }).then(res => {\n      if (res && Array.isArray(res[\"messages\"])) {\n        setSearch(search);\n        setMessages(res[\"messages\"]);\n        setLoaded(true);\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadMessages();\n    window.addEventListener(\"groupSearch\", loadMessages);\n    return () => {\n      window.removeEventListener(\"groupSearch\", loadMessages);\n    };\n  }, []);\n\n  if (!Array.isArray(messages)) {\n    return;\n  }\n\n  return (\n    <div>\n      <article id=\"group\" class=\"justify-content-center d-flex\">\n        <div class=\"search-results-container container-fluid d-flex justify-content-center flex-wrap\">\n          {messages.length == 0 && !loaded && (\n            <p>\n              <div class=\"mt-5 spinner orange-spinner\">\n                <div /><div /><div /><div /><div />\n              </div>\n            </p>\n          )}\n          {messages.length == 0 && loaded && (\n            <p>{t(\"search_without_result\")}</p>\n          )}\n          {messages.map((msg, i) => {\n            return (\n              <MessageSearchResult\n                tabindex={i + 1}\n                key={msg.id}\n                message={msg}\n                groupId={groupId}\n                search={search}\n                hashtags={hashtags}\n              />\n            );\n          })}\n        </div>\n      </article>\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { Navbar, GroupSearch } from \"/src/navbar\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function GroupSearchWrapper() {\n  let params = useParams();\n  return (\n    <main>\n      <Navbar />\n      <div class=\"content\">\n        <article class=\"mb-3\">\n          <div class=\"container pb-3\">\n            <GroupSearch key={params.id} id={params.id} />\n          </div>\n        </article>\n      </div>\n    </main>\n  );\n}\n","import { h, Fragment } from \"preact\";\nimport { FaIcon } from \"/src/misc\";\nimport { Link } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function GroupsDropdownNavbar() {\n  const { t } = useTranslation();\n  return (\n    <Fragment>\n      {this.props.groups && (\n        <div\n          class=\"nav-link dropdown groups unselectable\"\n          tabindex=\"-1\"\n          onClick={e => e.currentTarget.classList.toggle(\"active\")}\n        >\n          <div class=\"unselectable pr-1\">\n            {t(\"groups\")} <FaIcon family={\"solid\"} icon={\"caret-down\"} />\n          </div>\n          <div class=\"dropdown-menu dropdown-left\">\n            {this.props.groups.map(e => (\n              <Link\n                key={e.id}\n                to={`/groups/${e.id}`}\n                class=\"d-block seamless-link unselectable\"\n              >\n                {e.name}\n              </Link>\n            ))}\n            <Link\n              to={\"/create-group\"}\n              class=\"seamless-link unselectable\"\n            >\n              {`+ ${t(\"create_a_group\")}`}\n            </Link>\n          </div>\n        </div>\n      )}\n    </Fragment>\n  );\n}\n","import { h } from \"preact\";\nimport { router, util } from \"/src/core\";\nimport { Search } from \"/src/pages\";\nimport { GroupsDropdownNavbar, NotificationsDropdownNavbar } from \"/src/navbar\";\nimport { Link } from \"react-router-dom\";\nimport { useStoreon } from \"storeon/preact\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function Navbar() {\n\n  const { t } = useTranslation();\n  const { bookmarks } = useStoreon(\"bookmarks\");\n  const { me } = useStoreon(\"me\");\n\n  return (\n    <div class=\"main-nav nav align-items-center z-index-100\">\n      <div class=\"navbar-block\">\n        <div\n          class=\"menu dropdown cursor-pointer\"\n          tabindex=\"-1\"\n          onClick={e => e.currentTarget.classList.toggle(\"active\")}\n        >\n          <div class=\"rounded-circle avatar unselectable\">\n            <img\n              class=\"rounded-circle\"\n              style={util.backgroundHash(me.id)}\n              src={\n                me.avatar\n                  ? util.crop(me.avatar[\"id\"], 80, 80)\n                  : util.defaultAvatar\n              }\n              onError={e => (e.currentTarget.src = util.defaultAvatar)}\n            />\n          </div>\n          <div class=\"dropdown-menu dropdown-right\">\n            { bookmarks?.length > 0 && (\n              <Link\n                class=\"d-block seamless-link capitalize\"\n                to={\"/bookmarks\"}\n              >\n                {t(\"bookmarks\")}\n              </Link>\n            )}\n            <Link\n              class=\"d-block seamless-link capitalize\"\n              to={`/users/${me.id}/settings`}\n            >\n              {t(\"settings\")}\n            </Link>\n            <Link\n              class=\"d-block seamless-link capitalize\"\n              to={\"/logout\"}\n            >\n              {t(\"logout\")}\n            </Link>\n          </div>\n        </div>\n        <NotificationsDropdownNavbar />\n      </div>\n      { [\"messages\", \"groups\"].includes(router.route) && (\n        <Search />\n      )}\n      <div class=\"navbar-block\">\n        <GroupsDropdownNavbar groups={me.groups} />\n      </div>\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { notifications as notifs } from \"/src/core\";\nimport { FaIcon } from \"/src/misc\";\nimport { Notification } from \"/src/pages\";\nimport { useStoreon } from \"storeon/preact\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function NotificationsDropdownNavbar() {\n\n  const { t } = useTranslation();\n  const { notifications } = useStoreon(\"notifications\");\n  if (!notifications) {\n    return null;\n  }\n\n  return (\n    <div\n      className={\n        `menu dropdown${notifications.length ? \" cursor-pointer\" : \"\"}`\n      }\n      title={t(\"notifications\")}\n      tabindex=\"-1\"\n      onClick={e =>\n        notifications.length &&\n        e.currentTarget.classList.toggle(\"active\")\n      }\n    >\n      <div class=\"unselectable button-with-count\">\n        <FaIcon\n          family={notifications.length ? \"solid\" : \"regular\"}\n          icon={\"bell\"}\n        />\n        {!!notifications.length && (\n          <span class=\"badge-count\">{Math.min(notifications.length, notifs.LIMIT) + (notifications.length > notifs.LIMIT ? \"+\" : \"\")}</span>\n        )}\n      </div>\n      <div class=\"dropdown-menu dropdown-right notifications-menu\">\n        <div class=\"notification-header\">\n          <strong class=\"capitalize\">{t(\"notifications\")}</strong>\n          <div\n            class=\"action capitalize\"\n            onClick={() => notifs.removeAllNotifications()}\n          >\n            {t(\"mark_all_as_read\")}\n          </div>\n        </div>\n        {notifications?.length && (\n          notifications.sort((a, b) => b.createdAt - a.createdAt).slice(0,notifs.LIMIT).map(e => <Notification key={e.id} {...e} />)\n        )}\n      </div>\n    </div>\n  );\n}\n","import { h, Component } from \"preact\";\nimport { http, util } from \"/src/core\";\nimport { withTranslation } from \"react-i18next\";\nimport { Navbar } from \"/src/navbar\";\n\nclass CreateGroup extends Component {\n  constructor() {\n    super();\n    this.postNewGroup = this.postNewGroup.bind(this);\n  }\n\n  postNewGroup(event) {\n    event.preventDefault();\n    const name = document.querySelector(\"#create_group_form input[name='name']\").value;\n    let group = {};\n    if (name) {\n      group.name = name;\n    } else {\n      return false;\n    }\n    group.createdAt = Math.floor(Date.now() / 1000);\n    http.post(\"/api/groups\", group).then(res => {\n      http.post(`/api/groups/invitation/${  res.secretKey}`, {}).then(res => {\n        window.location = util.toApp(`/groups/${res.id}`);\n      });\n    });\n  }\n\n  render() {\n    return (\n      <main>\n        <Navbar />\n        <div class=\"content\">\n          <div class=\"container mt-2\">\n            <div class=\"group-settings\">\n              <div class=\"card\">\n                <div class=\"card-body\">\n                  <div class=\"container-fluid p-1\">\n                    <div class=\"row\">\n                      <div class=\"col-12 col-md-10\">\n                        <form id=\"create_group_form\" class=\"mb-1\">\n                          <div class=\"form-group\">\n                            <label for=\"name\">{this.props.t(\"name\")}: </label>\n                            <input\n                              type=\"text\"\n                              name=\"name\"\n                              minlength=\"1\"\n                              maxlength=\"128\"\n                              placeholder={this.props.t(\"name_input\")}\n                              class=\"form-control\"\n                              required\n                            />\n                          </div>\n                          <button\n                            onClick={e => this.postNewGroup(e)}\n                            class=\"btn btn-primary\"\n                          >\n                            {this.props.t(\"create_the_group\")}\n                          </button>\n                        </form>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    );\n  }\n}\n\nexport default withTranslation()(CreateGroup);\n","import { h, Component } from \"preact\";\n\nexport default class BandCampEmbed extends Component {\n  render() {\n    const embedUrl =\n      `${this.props.url \n      }/size=large/bgcol=f5f5f5/linkcol=0687f5/minimal=true/tracklist=false/`;\n    if (this.state.revealed) {\n      return (\n        <div class=\"bandcamp-embed embed-responsive embed-responsive-1by1\">\n          <iframe class=\"embed-responsive-item\" src={embedUrl} />\n        </div>\n      );\n    }\n    return (\n      <div\n        class=\"embed-preview\"\n        onClick={() => this.setState({ revealed: true })}\n      >\n        <div class=\"bandcamp\" />\n        <img src={this.props.preview} />\n      </div>\n    );\n  }\n}\n","import { h } from \"preact\";\n\nexport default function InstagramEmbed(props) {\n  return (\n    <a\n      class=\"preview-card seamless-link d-inline-block\"\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      href={props.url}\n    >\n      <div class=\"card\" style=\"max-width: 480px\">\n        {props.preview && (\n          <img\n            class=\"card-img-top\"\n            src={props.preview}\n          />\n        )}\n        <div class=\"card-body p-1\">\n          <h5>{props.title}</h5>\n          {props.description && (\n            <p>\n              <small>{props.description.slice(0, 1000)}</small>\n            </p>\n          )}\n        </div>\n      </div>\n    </a>\n  );\n}\n","import { h, Component } from \"preact\";\n\nexport default class GenericEmbed extends Component {\n  render() {\n    if (this.state.revealed) {\n      return (\n        <div class=\"embed-responsive embed-responsive-16by9\">\n          <iframe\n            allowfullscreen\n            class=\"embed-responsive-item\"\n            src={this.props.url}\n          />\n        </div>\n      );\n    }\n    return (\n      <div\n        class=\"embed-preview\"\n        onClick={() => this.setState({revealed: true})}\n      >\n        <div className={this.props.playBtnClass} />\n        <img src={this.props.preview} />\n      </div>\n    );\n  }\n}\n","import _EmbedBlock from \"./embed-block.component.js\";\nimport _FileGrid from \"./file-grid.component.js\";\nimport _BigFile from \"./big-file.component.js\";\nimport _MiniFile from \"./mini-file.component.js\";\n\nexport const EmbedBlock = _EmbedBlock;\nexport const FileGrid = _FileGrid;\nexport const BigFile = _BigFile;\nexport const MiniFile = _MiniFile;\n","import { h, Component } from \"preact\";\nimport { util, router } from \"/src/core\";\nimport BandCampEmbed from \"./bandcamp-embed.component.js\";\nimport InstagramEmbed from \"./instagram-embed.component.js\";\nimport GenericEmbed from \"./generic-embed.component.js\";\n\nexport default class EmbedBlock extends Component {\n  getPreview() {\n    if (this.props?.data?.exception) {\n      console.warn(this.props.data);\n    }\n    if (this.props.data[\"providerName\"]) {\n      if (\"peertube\" == this.props.data[\"providerName\"].toLowerCase()) {\n        // default embed code\n        if (this.props.data[\"code\"]) {\n          return (\n            <div class=\"embed-container\" dangerouslySetInnerHTML={{ __html: this.props.data[\"code\"] }} />\n          );\n        }\n      }\n      if (\"soundcloud\" == this.props.data[\"providerName\"].toLowerCase()) {\n        if (this.props.data[\"code\"]) {\n          return (\n            <GenericEmbed\n              preview={util.crop(this.props.preview.id, 1024, 270)}\n              url={\n                `${this.props.data[\"code\"].match(/https:\\/\\/[^\"\\s]+/)[0] \n                }&auto_play=true`\n              }\n              playBtnClass={\"soundcloud\"}\n            />\n          );\n        }\n      }\n      if (\"instagram\" == this.props.data[\"providerName\"].toLowerCase()) {\n        return (\n          <InstagramEmbed\n            url={this.props.data[\"url\"]}\n            preview={util.crop(this.props.preview.id, 1024, 1024)}\n            title={this.props.data[\"title\"]}\n            description={this.props.data[\"description\"]}\n          />\n        );\n      }\n      if (this.props.data[\"providerUrl\"] == \"https://bandcamp.com\") {\n        if (this.props.data[\"code\"]) {\n          let id = this.props.data[\"code\"].match(/https:\\/\\/.*album=\\d+/);\n          if (!id) {\n            id = this.props.data[\"code\"].match(/https:\\/\\/.*track=\\d+/);\n          }\n          if (id) {\n            return (\n              <BandCampEmbed\n                preview={util.crop(this.props.preview.id, 1024, 270)}\n                url={id[0]}\n              />\n            );\n          }\n        }\n      }\n      if (\"lichess.org\" == this.props.data[\"providerName\"].toLowerCase()) {\n        let url = this.props?.data?.url && typeof(this.props?.data.url) == \"string\" ? this.props.data?.url : this.props.url;\n        if (util.isValidUrl(url) && !url.match(/embed/) && !url.match(/study/) && !url.match(/blog/)) {\n          url = new URL(url.replace(\"lichess.org/\", \"lichess.org/embed/\"));\n          let id;\n          try {\n            id = url.pathname.split(\"/\").slice(-1)[0];\n          } catch (e) {\n            id = \"\";\n          }\n          url = new URL(url.href.replace(id, id.slice(0, 8)));\n          if (id) {\n            return (\n              <GenericEmbed\n                preview={util.crop(this.props.preview.id, 270, 270)}\n                url={url}\n                playBtnClass={\"lichess\"}\n              />\n            );\n          }\n        }\n      }\n      if (\"youtube\" == this.props.data[\"providerName\"].toLowerCase()) {\n        let url = this.props.url;\n        if (this.props?.preview?.id && url) {\n          url = new URL(url);\n          let video_id;\n          let playlist_id;\n          if (url.host == \"www.youtube.com\" || url.host == \"m.youtube.com\" || url.host == \"youtube.com\" || url.host == \"music.youtube.com\") {\n            if(url.pathname.match(/shorts/)) {\n              video_id = [`v=${url.pathname.split(\"/\").slice(-1)[0]}`];\n              playlist_id = [];\n            } else if(url.pathname.match(/embed/)) {\n              video_id = [`v=${url.pathname.split(\"/\").slice(-1)[0]}`];\n              playlist_id = [];\n            } else {\n              video_id = url.search.substring(1).split(\"&\").filter(e => e.match(/^v=/));\n              playlist_id = url.search.substring(1).split(\"&\").filter(e => e.match(/^list=/));\n            }\n          }\n          if (url.host == \"youtu.be\") {\n            video_id = [`v=${url.pathname.slice(1)}`];\n            playlist_id = [];\n          }\n          let timecode = router.getParam(\"t\", url.search.substring(1));\n          if (playlist_id.length && video_id.length) {\n            return (\n              <GenericEmbed\n                preview={util.crop(this.props.preview.id, 1024, 270)}\n                url={\n                  `https://youtube.com/embed/${video_id[0].split(\"=\")[1]}?autoplay=1&controls=2&wmode=opaque&list=${playlist_id[0].split(\"=\")[1]}${timecode ? `&start=${timecode}` : \"\"}`\n                }\n                playBtnClass={\"youtube\"}\n              />\n            );\n          }\n          if (playlist_id.length) {\n            return (\n              <GenericEmbed\n                preview={util.crop(this.props.preview.id, 1024, 270)}\n                url={\n                  `https://youtube.com/embed/videoseries?list=${playlist_id[0].split(\"=\")[1]}&autoplay=1&controls=2&wmode=opaque${timecode ? `&start=${timecode}` : \"\"}`\n                }\n                playBtnClass={\"youtube\"}\n              />\n            );\n          }\n          return (\n            <GenericEmbed\n              preview={util.crop(this.props.preview.id, 1024, 270)}\n              url={\n                `https://youtube.com/embed/${video_id[0].split(\"=\")[1]}?autoplay=1&controls=2&wmode=opaque${timecode ? `&start=${timecode}` : \"\"}`\n              }\n              playBtnClass={\"youtube\"}\n            />\n          );\n        }\n      }\n      if (\"invidious\" == this.props.data[\"providerName\"].toLowerCase()) {\n        let url = this.props?.data?.url && typeof(this.props?.data.url) == \"string\" ? this.props.data?.url : this.props.url;\n        if (this.props?.preview?.id && url) {\n          return (\n            <GenericEmbed\n              preview={util.crop(this.props.preview.id, 1024, 270)}\n              url={\n                `${url.replace(\"watch?v=\", \"embed/\")}`\n              }\n              playBtnClass={\"youtube\"}\n            />\n          );\n        }\n      }\n    }\n    if (/image/.test(this.props.data[\"content-type\"])) {\n      return (\n        <div class=\"container d-flex justify-content-center flex-wrap align-items-center\">\n          <img\n            data-nlg={!this.props.inWriter}\n            href={util.toApp(this.props.url)}\n            class=\"img-fluid cursor-pointer\"\n            data-origin={this.props.url}\n            data-src={\n              this.props.preview && !/gif/.test(this.props.data[\"content-type\"])\n                ? util.thumbnail(this.props.preview.id, 1366, 768)\n                : this.props.url\n            }\n            src={\n              this.props.preview && !/gif/.test(this.props.data[\"content-type\"])\n                ? util.thumbnail(this.props.preview.id, 1366, 99999)\n                : this.props.url\n            }\n          />\n        </div>\n      );\n    }\n    // application/ogg: https://developer.mozilla.org/en-US/docs/Web/HTTP/Configuring_servers_for_Ogg_media\n    if (/video/.test(this.props.data[\"content-type\"]) || this.props.data[\"content-type\"] == \"application/ogg\") {\n      return (\n        <div class=\"container d-flex justify-content-center flex-wrap align-items-center\">\n          <video class=\"img-fluid\" controls src={this.props.url} />\n        </div>\n      );\n    }\n    if (/audio/.test(this.props.data[\"content-type\"])) {\n      return (\n        <div class=\"container d-flex justify-content-center flex-wrap align-items-center\">\n          <audio class=\"w-100\" controls>\n            <source src={this.props.url} />\n          </audio>\n        </div>\n      );\n    }\n    if (\n      this.props.data[\"title\"] &&\n      (this.props.preview || this.props.data[\"description\"])\n    ) {\n      return (\n        <a\n          class=\"preview-card seamless-link d-inline-block\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          href={util.toApp(this.props.url)}\n        >\n          <div class=\"card\" style=\"max-width: 480px\">\n            {this.props.preview && (\n              <img\n                class=\"card-img-top\"\n                src={util.crop(this.props.preview.id, 320, 180)}\n              />\n            )}\n            <div class=\"card-body p-1\">\n              <h5>{this.props.data[\"title\"]}</h5>\n              {this.props.data[\"description\"] && (\n                <p>\n                  <small>{this.props.data[\"description\"].slice(0, 500)}</small>\n                </p>\n              )}\n            </div>\n          </div>\n        </a>\n      );\n    }\n    return null;\n  }\n\n  render() {\n    if (!this.props.url || !this.props.data) {\n      return null;\n    }\n    let preview = this.getPreview();\n    if (preview) {\n      return <p class=\"text-center card-text\">{preview}</p>;\n    }\n    return null;\n  }\n}\n","import { h } from \"preact\";\nimport { BigFile, MiniFile } from \"/src/embed\";\nimport { useEffect } from \"preact/hooks\";\n\nexport default function FileGrid(props) {\n\n  useEffect(() => {\n    import(\"/src/lazy/nlg.js\").then(nlg => nlg.default.start());\n  });\n\n  const toggleFile = (evt) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    if (typeof props.toggleFile == \"function\") {\n      props.toggleFile(evt.target.closest(\".file-embed\").id);\n    }\n  };\n\n  if (!props.files || props.files.length === 0) {\n    return null;\n  }\n  if (props.files && props.files.length > 3) {\n    return (\n      <div class=\"file-grid\">\n        {props.files\n          .sort((a, b) => (a.fileIndex > b.fileIndex ? 1 : -1))\n          .map(e => <MiniFile key={e.id} toggleFile={toggleFile} file={e} inWriter={props.inWriter} />)}\n      </div>\n    );\n  }\n  return (\n    <div class=\"d-flex justify-content-center flex-wrap\">\n      {props.files\n        .sort((a, b) => (a.fileIndex > b.fileIndex ? 1 : -1))\n        .map(e => <BigFile key={e.id} toggleFile={toggleFile} file={e} inWriter={props.inWriter} />)}\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { util } from \"/src/core\";\nimport { FaIcon } from \"/src/misc\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function BigFile(props) {\n\n  const { t } = useTranslation();\n  const filePath = props.file.contentUrl ? `/files/${props.file.contentUrl}` : null;\n  let url = filePath;\n\n  if (/image/.test(props.file.type) && props.file.type != \"image/gif\") {\n    // no limit in height for long format images\n    url = util.thumbnail(props.file.id, 1366, 999999);\n  }\n\n  if (props.file.contentUrl) {\n    if (/video/.test(props.file.type)) {\n      if (props.file.status == \"ready\") {\n        return (\n          <video\n            poster={util.thumbnail(props.file.id, 1280, 720)}\n            class=\"file-embed img-fluid contained-height video\"\n            controls=\"true\"\n            src={url}\n            id={props.file.id}\n          />\n        );\n      }\n      return (\n        <a class=\"file-embed image video-uploaded\" id={props.file.id}>\n          <img\n            class=\"img-fluid video-raw\"\n            src={util.crop(props.file.id, 320, 180)}\n          />\n          <div class=\"video-not-ready\">\n            {t(\"video_not_ready\")}\n          </div>\n        </a>\n      );\n    }\n    if (/pdf/.test(props.file.type)) {\n      return (\n        <a\n          data-nlg={!props.inWriter}\n          data-origin={util.toApp(filePath)}\n          href={!props.inWriter ? util.toApp(url) : undefined}\n          className={`file-embed pdf-outline image${props.file.removed ? \" removed\" : \"\"}`}\n          id={props.file.id}\n        >\n          <img class=\"img-fluid\" src={util.thumbnail(props.file.id, 210*2, 497*2)} />\n          <div\n            class=\"remove-button\"\n            style={props.file.removed ? \"color:red\" : \"\"}\n            fileIndex={props.file.fileIndex}\n            onClick={e => props.toggleFile(e)}\n          >\n            <FaIcon family={\"solid\"} icon={\"times\"} />\n          </div>\n        </a>\n      );\n    }\n    if (/image/.test(props.file.type)) {\n      return (\n        <a\n          data-nlg={!props.inWriter}\n          data-origin={util.toApp(filePath)}\n          href={!props.inWriter ? util.toApp(url) : undefined}\n          className={`file-embed image${props.file.removed ? \" removed\" : \"\"}`}\n          id={props.file.id}\n        >\n          <img class=\"img-fluid\" src={url} />\n          <div\n            class=\"remove-button\"\n            style={props.file.removed ? \"color:red\" : \"\"}\n            fileIndex={props.file.fileIndex}\n            onClick={e => props.toggleFile(e)}\n          >\n            <FaIcon family={\"solid\"} icon={\"times\"} />\n          </div>\n        </a>\n      );\n    }\n  }\n  return (\n    <div class=\"file-embed file-placeholder\" id={props.file.id}>\n      {props.file[\"error\"] ? (\n        <div class=\"orange-error\">&times;</div>\n      ) : (\n        <div class=\"spinner orange-spinner\">\n          <div /><div /><div /><div /><div />\n        </div>\n      )}\n      <div class=\"progress-bar\">\n        <div style={{ width: `${props.file.progress}%` }} />\n      </div>\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { util } from \"/src/core\";\nimport { FaIcon } from \"/src/misc\";\n\nexport default function MiniFile(props) {\n\n  const filePath = props.file.contentUrl ? `/files/${props.file.contentUrl}` : null;\n  let url = filePath;\n\n  if (/image/.test(props.file.type) && props.file.type != \"image/gif\") {\n    // no limit in height for long format images\n    url = util.thumbnail(props.file.id, 1366, 999999);\n  }\n\n  switch (props.file.status) {\n  case \"raw\":\n    return (\n      <a class=\"file-embed rounded\" id={props.file.id}>\n        <div class=\"miniature\">\n          <FaIcon family={\"regular\"} icon={\"check-circle\"} />\n        </div>\n      </a>\n    );\n  case \"uploading\":\n    return (\n      <a class=\"file-embed rounded\" id={props.file.id}>\n        <div\n          class=\"miniature video-raw\"\n          style={`background-image:url('${util.crop(props.file.id, 160, 160)}')`}\n        />\n        <div class=\"spinner orange-spinner\">\n          <div /><div /><div /><div /><div />\n        </div>\n        { props.file && props.file.progress > 0 && (\n          <div class=\"progress-bar\">\n            <div style={{ width: `${props.file.progress}%` }} />\n          </div>\n        )}\n      </a>\n    );\n  case \"ready\":\n  default:\n    if (/pdf/.test(props.file.type) || /video/.test(props.file.type) || props.file.type == \"image/gif\") {\n      return (\n        <a\n          data-nlg={!props.inWriter}\n          data-origin={util.toApp(filePath)}\n          href={!props.inWriter ? util.toApp(url) : undefined}\n          className={`file-embed rounded image${props.file.removed ? \" removed\" : \"\"}`}\n          id={props.file.id}\n        >\n          <div\n            className={`miniature${props.file.removed ? \" removed\" : \"\"}`}\n            style={\n              `background-image:url('${util.crop(props.file.id, 160, 160)}')`\n            }\n          />\n          <div\n            class=\"remove-button\"\n            style={props.file.removed ? \"color:red\" : \"\"}\n            fileIndex={props.file.fileIndex}\n            onClick={e => props.toggleFile(e)}\n          >\n            <FaIcon family={\"solid\"} icon={\"times\"} />\n          </div>\n        </a>\n      );\n    }\n    if (/image/.test(props.file.type) && props.file.type != \"image/gif\") {\n      return (\n        <a\n          data-nlg={!props.inWriter}\n          data-origin={util.toApp(filePath)}\n          data-src={util.thumbnail(props.file.id, 1366, 768)}\n          href={!props.inWriter ? util.toApp(url) : undefined}\n          class=\"file-embed rounded\"\n          id={props.file.id}\n        >\n          <div\n            className={`miniature${props.file.removed ? \" removed\" : \"\"}`}\n            style={\n              `background-image:url('${util.crop(props.file.id, 160, 160)}')`\n            }\n          />\n          <div\n            class=\"remove-button\"\n            style={props.file.removed ? \"color:red\" : \"\"}\n            fileIndex={props.file.fileIndex}\n            onClick={e => props.toggleFile(e)}\n          >\n            <FaIcon family={\"solid\"} icon={\"times\"} />\n          </div>\n        </a>\n      );\n    }\n  }\n}\n","import _GroupWriter from \"./group-writer.component.js\";\nimport _Writer from \"./writer.component.js\";\nimport _WritingWidget from \"./writing-widget.component.js\";\n\nexport const GroupWriter = _GroupWriter;\nexport const Writer = _Writer;\nexport const WritingWidget = _WritingWidget;\n","import { h } from \"preact\";\nimport { Writer } from \"/src/writer\";\nimport { Navbar } from \"/src/navbar\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function GroupWriter() {\n  let params = useParams();\n\n  return (\n    <main>\n      <Navbar />\n      <div class=\"content\">\n        <article class=\"mb-3\">\n          <div class=\"container pb-3\">\n            <Writer focus={true} group={params.id} />\n          </div>\n        </article>\n      </div>\n    </main>\n  );\n}\n","import { h } from \"preact\";\nimport { alert, http, util, me } from \"/src/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { WritingWidget } from \"/src/writer\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useState, useEffect } from \"preact/hooks\";\n\nexport default function Writer(props) {\n\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const [files, setFiles] = useState(props?.files || []);\n  const [sending, setSending] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const writerId = util.genId();\n\n  const setForm = (writerForm, files = [], title = \"\", text = \"\") => {\n    setFiles(files);\n    Array.from(writerForm.current.getElementsByClassName(\"title-input\")).map(e => e.value = title);\n    Array.from(writerForm.current.getElementsByClassName(\"text-input\")).map(e => e.value = text);\n  };\n\n  const updateFile = (id, file) => {\n    setFiles(files.map(f => f.id === id ? Object.assign(f, file) : f));\n  };\n\n  const removeFile = id => {\n    setFiles(files.filter(f => f.id != id));\n  };\n\n  const uploadFile = fileId => {\n    const formData = new FormData();\n    let file = files.find(e => e.id == fileId);\n    if (!file || !file.inputFile) {\n      // TODO handle this properly\n      console.error(files, file, fileId);\n      throw \"error\";\n    }\n\n    formData.append(\"fileIndex\", file.fileIndex);\n    formData.append(\"file\", file.inputFile);\n\n    updateFile(fileId, Object.assign(file, {status: \"uploading\"}));\n    setUploading(true);\n\n    http.sendFile(\n      formData,\n      file => {\n        setUploading(false);\n        updateFile(fileId, Object.assign({status: \"ready\"}, file));\n      },\n      e => {\n        updateFile(\n          fileId,\n          {status: \"uploading\", progress: Math.floor((e.loaded / e.total) * 100)}\n        );\n      },\n      e => {\n        setUploading(false);\n        console.warn(e);\n        alert.add(t(\"error_upload\"), \"alert-danger\");\n        removeFile(fileId);\n      }\n    );\n  };\n\n  const putMessage = (msg, writerForm) => {\n    http.put(`/api/messages/${props.messageId}`, msg).then(res => {\n      setForm(writerForm, [], \"\", \"\");\n      setSending(false);\n      if (!res) {\n        alert.add(t(\"error_new_message\"), \"alert-danger\");\n        return;\n      }\n      window.dispatchEvent(new CustomEvent(\"editMessage\", { detail: res }));\n    });\n    setSending(true);\n  };\n\n  const postMessage = (msg, writerForm) => {\n    msg = Object.assign(msg, {\n      createdAt: Math.floor(Date.now() / 1000),\n      author: me.id,\n      group: util.getId(props.group),\n      children: [],\n      lastActivityDate: Math.floor(Date.now() / 1000)\n    });\n    if (props.parent) {\n      msg.parent = util.getId(props.parent);\n    }\n    // don't post if there is nothing to post\n    if (!msg.files.length && !msg.data.text && !msg.data.title) {\n      alert.add(t(\"empty_message\"), \"alert-danger\");\n      return;\n    }\n    http.post(\"/api/messages\", msg).then(res => {\n      if (!res) {\n        setSending(false);\n        alert.add(t(\"error_new_message\"), \"alert-danger\");\n        return;\n      }\n      if (props.isChild) {\n        setSending(false);\n        window.dispatchEvent(new CustomEvent(\"newChild\", { detail: res }));\n      } else {\n        navigate(`/messages/${res.id}`);\n      }\n      setForm(writerForm, [], \"\", \"\");\n    });\n    setSending(true);\n  };\n\n  const sendMessage = (writerForm, data) => {\n    let msg = {\n      files: files.filter(e => !e?.removed).filter(e => [\"ready\", \"raw\"].includes(e?.status)).map(e => e?.id).filter(e => !!e),\n      data: {\n        title: data?.title,\n        text: data?.text,\n      }\n    };\n    if (props.messageId) {\n      putMessage(msg, writerForm);\n    } else {\n      postMessage(msg, writerForm);\n    }\n  };\n\n  // toggle state (removed or not) of a file\n  const toggleFile = id => {\n    setFiles(files.map(f => {\n      if (f.id == id) {\n        f.removed = !f.removed;\n      }\n      return f;\n    }));\n  };\n\n  const addFiles = (mimetype, input_files) => {\n    let fileIndex = files.reduce((a, f) => Math.max(a, f?.fileIndex || 0), 0) + 1;\n    let list = Array.from(input_files).map(e => ({\n      inputFile: e,\n      type: mimetype,\n      id: util.genId(),\n      progress: 0,\n      status: \"initial\",\n      fileIndex: ++fileIndex,\n    }));\n    setFiles([...list, ...files]);\n  };\n\n  const inputFile = (mimetype, multiple = false) => {\n    const input = document.createElement(\"input\");\n    document.body.appendChild(input);\n    input.style.display = \"none\";\n    input.type = \"file\";\n    input.accept = mimetype;\n    if (multiple) {\n      input.multiple = \"multiple\";\n    }\n    input.addEventListener(\"change\", event => {\n      addFiles(mimetype, event.target.files);\n    });\n    input.click();\n  };\n\n  useEffect(() => {\n    if (files.filter(e => e.status === \"uploading\").length < 2) {\n      for (let i = 0; i < files.length; i++) {\n        if (files[i].status == \"initial\" && !!files[i].inputFile) {\n          uploadFile(files[i].id);\n          break;\n        }\n      }\n    }\n  });\n\n  return (\n    <WritingWidget\n      id={writerId}\n      sending={sending}\n      uploading={uploading}\n      inputFile={inputFile}\n      sendMessage={sendMessage}\n      cancel={props.cancel}\n      files={files}\n      toggleFile={toggleFile}\n      addFiles={addFiles}\n      group={props.group}\n      isChild={props.isChild}\n      text={props.text}\n      title={props.title}\n    />\n  );\n}\n","import { h } from \"preact\";\nimport { http, util, api } from \"/src/core\";\nimport { FaIcon } from \"/src/misc\";\nimport { EmbedBlock, FileGrid } from \"/src/embed\";\nimport { useTranslation } from \"react-i18next\";\nimport { useState, useRef, useEffect } from \"preact/hooks\";\n\nexport default function WritingWidget(props) {\n  const [preview, setPreview] = useState(null);\n  const [link, setLink] = useState(\"\");\n  const [text, setText] = useState(props.text || \"\");\n  const [title, setTitle] = useState(props.title || \"\");\n  const { t } = useTranslation();\n  const writerForm = useRef(null);\n\n  const cleanForm = () => {\n    setPreview(null);\n    setLink(null);\n    setText(\"\");\n    setTitle(\"\");\n  };\n\n  const sendMessage = writerForm => {\n    props.sendMessage(writerForm, {\n      // we get the raw value here because onChange() does not capture all possible inputs\n      // and then the values of text/title could not be up to date\n      title: writerForm?.current?.querySelector(\".title-input\")?.value,\n      text: writerForm?.current?.querySelector(\".text-input\")?.value,\n    });\n    cleanForm();\n  };\n\n  const genPreview = t => {\n    if (!t) {\n      return;\n    }\n    t.style.height = \"1px\";\n    t.style.height = `${25 + t.scrollHeight}px`;\n    // waiting for the dom to be updated\n    setTimeout(() => {\n      const text = t.value;\n      let links = text.match(/(https?:\\/\\/[^\\s]+)/gi);\n      if (links && links[0] != link) {\n        http\n          .get(`/api/links/by_url?url=${encodeURIComponent(links[0])}`)\n          .then(r => {\n            if (r && t.value.indexOf(links[0]) >= 0) {\n              setLink(links[0]);\n              setPreview(r);\n            }\n          });\n      }\n    }, 0);\n  };\n\n  const onKeyPress = (event, doGenPreview = false) => {\n    if (event.ctrlKey && util.is_it_enter(event)) {\n      sendMessage(writerForm);\n      return;\n    }\n    if (![\" \", \"Enter\", \"v\"].includes(event.key)) {\n      return;\n    }\n    if (doGenPreview) {\n      genPreview(event.currentTarget);\n    }\n  };\n\n  const onPaste = (event) => {\n    props.addFiles(\"image/jpeg\", event.clipboardData.files);\n  };\n\n  useEffect(() => {\n    genPreview(document?.getElementById(props.id)?.querySelector(\".text-input\"));\n  }, []);\n\n  if (props.sending) {\n    return (\n      <div class=\"message-placeholder\">\n        <div class=\"spinner orange-spinner\">\n          <div /><div /><div /><div /><div />\n        </div>\n      </div>\n    );\n  }\n  return (\n    <div id={props.id} class=\"writer\" ref={writerForm}>\n      {!props.isChild && (\n        <input\n          type=\"text\"\n          class=\"title-input\"\n          onKeyPress={e => onKeyPress(e)}\n          placeholder={t(\"title_placeholder\")}\n          value={title}\n          onChange={e => setTitle(e.target.value)}\n        />\n      )}\n      <textarea\n        onKeyPress={e => onKeyPress(e, true)}\n        onPaste={e => onPaste(e)}\n        class=\"text-input\"\n        rows=\"5\"\n        autocomplete=\"off\"\n        autofocus={props.focus}\n        placeholder={t(\"text_placeholder\")}\n        maxlength=\"50000\"\n        value={text}\n        onChange={e => setText(e.target.value)}\n      />\n      {!!preview && (\n        <EmbedBlock inWriter={true} {...preview} />\n      )}\n      {!!props.files.length && (\n        <FileGrid\n          files={props.files}\n          toggleFile={props.toggleFile}\n          inWriter={true}\n        />\n      )}\n      <div class=\"options\">\n        {api?.info?.upload?.image && (\n          <button\n            class=\"option\"\n            onClick={() => props.inputFile(\"image/*\", true)}\n            title={t(\"upload_image\")}\n          >\n            <FaIcon family={\"regular\"} icon={\"images\"} />\n          </button>\n        )}\n        {api?.info?.upload?.video && (\n          <button\n            class=\"option\"\n            onClick={() => props.inputFile(\"video/*\")}\n            title={t(\"upload_video\")}\n          >\n            <FaIcon family={\"solid\"} icon={\"film\"} />\n          </button>\n        )}\n        {api?.info?.upload?.pdf && (\n          <button\n            class=\"option\"\n            onClick={() => props.inputFile(\"application/pdf\")}\n            title={t(\"upload_pdf\")}\n          >\n            <FaIcon family={\"regular\"} icon={\"file-pdf\"} />\n          </button>\n        )}\n        <div class=\"actions\">\n          {!!props.cancel && (\n            <button class=\"cancel\" onClick={e => props.cancel(e)}>\n              {t(\"cancel\")}\n            </button>\n          )}\n          <button\n            disabled={!props.group || props.uploading}\n            type=\"submit\"\n            class=\"submit\"\n            onClick={() => sendMessage(writerForm)}\n          >\n            {t(\"submit\")}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import _BookmarkBoard from \"./bookmark-board.component.js\";\nimport _CreateGroup from \"./create-group.component.js\";\nimport _GroupBoard from \"./group-board.component.js\";\nimport _HumanTime from \"./human-time.component.js\";\nimport _Notification from \"./notification.component.js\";\nimport _Search from \"./search.component.js\";\nimport _Share from \"./share.component.js\";\n\nexport const BookmarkBoard = _BookmarkBoard;\nexport const CreateGroup = _CreateGroup;\nexport const GroupBoard = _GroupBoard;\nexport const HumanTime = _HumanTime;\nexport const Notification = _Notification;\nexport const Search = _Search;\nexport const Share = _Share;\n","import { h } from \"preact\";\nimport { MessagePreview } from \"/src/message\";\nimport { Navbar } from \"/src/navbar\";\nimport { useStoreon } from \"storeon/preact\";\n\nexport default function BookmarkBoard() {\n\n  const { bookmarks } = useStoreon(\"bookmarks\");\n  if (!bookmarks) {\n    return null;\n  }\n\n  if (!Array.isArray(bookmarks) || bookmarks.length < 1) {\n    return;\n  }\n\n  return (\n    <main>\n      <Navbar />\n      <div class=\"content\">\n        <article id=\"group\" class=\"justify-content-center d-flex\">\n          <div class=\"message-container container-fluid d-flex justify-content-center flex-wrap\">\n            {bookmarks.map((b, i) => {\n              return (\n                <MessagePreview\n                  tabindex={i + 1}\n                  key={b.message.id}\n                  id={b.message.id}\n                />\n              );\n            })}\n          </div>\n        </article>\n      </div>\n    </main>\n  );\n}\n","import { h } from \"preact\";\nimport { FaIcon } from \"/src/misc\";\nimport { Navbar } from \"/src/navbar\";\nimport { MessageList } from \"/src/message\";\nimport { Link, useParams } from \"react-router-dom\";\n\nexport default function GroupBoard() {\n  let params = useParams();\n  return (\n    <main>\n      <Navbar />\n      <div class=\"content\">\n        <div>\n          <div>\n            <article id=\"group\" class=\"justify-content-center d-flex\">\n              <div class=\"message-container container-fluid d-flex justify-content-center flex-wrap\">\n                <MessageList key={params.id} id={params.id} />\n              </div>\n            </article>\n          </div>\n          <Link\n            class=\"write-button material-shadow seamless-link\"\n            to={`/groups/${params.id}/write`}\n          >\n            <FaIcon family={\"solid\"} icon={\"pencil-alt\"} />\n          </Link>\n        </div>\n      </div>\n    </main>\n  );\n}\n","import { h, Fragment } from \"preact\";\nimport { util } from \"/src/core\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function HumanTime(props) {\n\n  const { t } = useTranslation();\n\n  // duration relative to event\n  const humanTime = timestamp => {\n    if (!timestamp) {\n      return null;\n    }\n    const duration = Math.abs(Math.round((Date.now() / 1000 - timestamp) / 60));\n    if (duration < 1) {\n      return t(\"just_now\");\n    }\n    if (duration < 60) {\n      return t(\"ago\", { duration: `${duration  }mn` });\n    }\n    if (duration < 60 * 24) {\n      return t(\"ago\", { duration: `${Math.floor(duration / 60)  }h` });\n    }\n    return util.humanFullDate(timestamp).split(\" \")[0];\n  };\n\n  return (\n    <Fragment>{humanTime(props.timestamp)}</Fragment>\n  );\n}\n","import { h, Fragment } from \"preact\";\nimport { http, util, notifications } from \"/src/core\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function Notification(props) {\n\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const [target, setTarget] = useState(null);\n  const [action, setAction] = useState(null);\n  const [title, setTitle] = useState(null);\n  const [notification, setNotification] = useState(null);\n\n  const getMiniature = (notification) => {\n    let imgSrc = util.defaultAvatar;\n    if (\n      notification?.miniature\n      && notification.type != \"global_notification\"\n    ) {\n      imgSrc = util.crop(notification?.miniature?.id, 80, 80);\n    }\n    return (\n      <img\n        style={util.backgroundHash(notification?.author?.id)}\n        src={imgSrc}\n        onError={e => setMiniatureOnError(e)}\n      />\n    );\n  };\n\n  const setMiniatureOnError = (event) => {\n    event.currentTarget.src = util.defaultAvatar;\n  };\n\n  const getAction = (notification) => {\n    switch (notification?.type) {\n    case \"new_message\":\n      return t(\"has_posted_in\");\n    case \"new_comment\":\n      return t(\"has_commented_on\");\n    case \"user_joined_group\":\n      return t(\"has_joined\");\n    case \"user_left_group\":\n      return t(\"has_left\");\n    case \"group_name_change\":\n      return t(\"changed_group_name\");\n    default:\n      return \"\";\n    }\n  };\n\n  const getObject = (notification) => {\n    switch (notification?.type) {\n    case \"new_message\":\n      return (\n        <Fragment>\n          <strong>\n            {notification?.fromGroup.name}\n          </strong>\n          {title && (\n            <Fragment>\n              <br />\n              <small><em>{util.limitStrSize(title, 52)}</em></small>\n            </Fragment>\n          )}\n        </Fragment>\n      );\n    case \"new_comment\":\n      return (\n        <span>\n          {`${t(\"the_message_from\")  } `}\n          <strong>{notification?.parentAuthorName}</strong>\n          {title && (\n            <Fragment>\n              <br />\n              <small><em>{util.limitStrSize(title, 52)}</em></small>\n            </Fragment>\n          )}\n        </span>\n      );\n    case \"user_joined_group\":\n    case \"user_left_group\":\n      return (\n        <strong>\n          {notification?.fromGroup.name}\n        </strong>\n      );\n    case \"group_name_change\":\n      return (\n        <span>\n          <strong>{notification.data[\"previousGroupName\"]}</strong>\n          {` ${t(\"to\")} `}\n          <strong>{notification.data[\"newGroupName\"]}</strong>\n        </span>\n      );\n    case \"global_notification\":\n      return notification.data[\"text\"];\n    default:\n      return \"\";\n    }\n  };\n\n  const getTarget = (notification, message_id) => {\n    switch (notification?.type) {\n    case \"user_joined_group\":\n    case \"user_left_group\":\n    case \"group_name_change\":\n      return `/groups/${notification.fromGroup.id}`;\n    case \"new_message\":\n      return `/messages/${notification.target}`;\n    case \"new_comment\":\n      return (\n        `/messages/${message_id}/${notification.target}`\n      );\n    case \"global_notification\":\n      return notification.target;\n    default:\n      return \"\";\n    }\n  };\n\n  const onClick = (event, target) => {\n    event.preventDefault();\n    notifications.removeMatchingNotifications(props.id).then(() => {\n      navigate(target);\n    });\n  };\n\n  useEffect(() => {\n    http.get(`/api/notifications/${props.id}`, false, 100).then(n => {\n      setTarget(getTarget(n, n.fromMessage?.id));\n      setAction(getAction(n));\n      setTitle(n.title);\n      setNotification(n);\n    });\n  }, []);\n\n  if (!notification) {\n    return null;\n  }\n  return (\n    <a\n      class=\"notification seamless-link unselectable\"\n      href={target}\n      title={title}\n      onClick={e => onClick(e, target)}\n    >\n      <div class=\"miniature unselectable\">{getMiniature(notification)}</div>\n      <div class=\"infos\">\n        <div class=\"description\">\n          {notification.type != \"global_notification\" && (\n            <Fragment>\n              <strong>{notification?.author?.name || \"--\"}</strong>\n              <span>{` ${action} `}</span>\n            </Fragment>\n          )}\n          {getObject(notification)}\n        </div>\n        <div class=\"date\">\n          {util.humanTime(notification.createdAt)}\n        </div>\n      </div>\n    </a>\n  );\n}\n","import { h } from \"preact\";\nimport { router } from \"/src/core\";\nimport { FaIcon } from \"/src/misc\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function Search() {\n\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n\n  function search(evt) {\n    evt.preventDefault();\n    router.getEntity().then(entity => {\n      let group_id = null;\n      switch (entity.entityType) {\n      case \"group\":\n        group_id = entity.id;\n        break;\n      case \"message\":\n        group_id = entity.group.id;\n        break;\n      default:\n      }\n      // https://stackoverflow.com/a/37511463\n      let searchTerms = document\n        .getElementById(\"search\")\n        .value.normalize(\"NFD\")\n        .replace(/[\\u0300-\\u036f]/g, \"\")\n        .split(\" \");\n      navigate(`/groups/${group_id}/search?q=${searchTerms.join(\"+\")}`);\n      window.dispatchEvent(new CustomEvent(\"groupSearch\"));\n    });\n  }\n\n  return (\n    <form class=\"navbar-block search-block\" onSubmit={e => search(e)}>\n      <div class=\"input-group\">\n        <input\n          class=\"form-control\"\n          type=\"text\"\n          id=\"search\"\n          placeholder={t(\"search_in_group\")}\n          value={router.getParam(\"q\").replace(/\\+/g, \" \")}\n        />\n        <div class=\"input-group-append\">\n          <button\n            class=\"btn btn-secondary\"\n            type=\"submit\"\n          >\n            <FaIcon family={\"solid\"} icon={\"search\"} />\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n}\n","import { h } from \"preact\";\nimport { me as meService, http } from \"/src/core\";\nimport { Writer } from \"/src/writer\";\nimport { Navbar } from \"/src/navbar\";\nimport { useStoreon } from \"storeon/preact\";\nimport { useLocation } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { useEffect, useState } from \"preact/hooks\";\n\nexport default function Share() {\n\n  const { t } = useTranslation();\n  const { me } = useStoreon(\"me\");\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n\n  const [loaded, setLoaded] = useState(false);\n  const [title, setTitle] = useState(searchParams.get(\"title\") || \"\");\n  const [text, setText] = useState(searchParams.get(\"text\") || \"\");\n  const [url, setUrl] = useState(searchParams.get(\"url\") || \"\");\n  const parent = searchParams.get(\"parent\") || \"\";\n  const [files, setFiles] = useState([]);\n  const [group, setGroup] = useState(\"\");\n\n  useEffect(() => {\n    setTimeout(() => {\n      meService.fetch().then(user => {\n        if (user.data[\"default_group\"]) {\n          setGroup(user.data[\"default_group\"]);\n        } else if (user.groups.length == 1) {\n          setGroup(user.groups[0][\"id\"]);\n        }\n        if(searchParams.get(\"message\")) {\n          http.get(`/api/messages/${searchParams.get(\"message\")}`)\n            .then(m => {\n              if (m?.files?.length) {\n                Promise.all(m.files.map(f => http.get(`/api/files/${f.id}`).then(f => f))).then(\n                  files => {\n                    setFiles(files);\n                    setTitle(m?.data?.title || \"\");\n                    setText(m?.data?.text || \"\");\n                    setUrl(\"\");\n                    setLoaded(true);\n                  }\n                );\n              } else {\n                setTitle(m?.data?.title || \"\");\n                setText(m?.data?.text || \"\");\n                setUrl(\"\");\n                setLoaded(true);\n              }\n            });\n        } else {\n          setLoaded(true);\n        }\n      });\n    }, 100);\n  }, []);\n\n  if (!loaded) {\n    return;\n  }\n\n  return (\n    <main>\n      <Navbar />\n      <div class=\"content\">\n        <article class=\"mt-2\">\n          <div class=\"container\">\n            {!parent && me?.groups?.length > 1 && (\n              <div class=\"mb-1\">\n                <label class=\"px-1\" for=\"group_share_choice\">\n                  {t(\"group_share_choice\")}\n                </label>\n                <select\n                  value={group}\n                  class=\"form-select\"\n                  name=\"group_share_choice\"\n                  onChange={e => setGroup(e.target.value)}\n                  required\n                >\n                  {me?.groups.map(e => (\n                    <option key={e[\"id\"]} value={e[\"id\"]}>{e.name}</option>\n                  ))}\n                </select>\n              </div>\n            )}\n            {!!parent && (\n              <div class=\"form-group\">\n                <label for=\"apiKey\">\n                  {t(\"parent_message\")}:{\" \"}\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"parent_message\"\n                  value={parent}\n                  class=\"form-control font-size-80\"\n                  readonly=\"readonly\"\n                />\n              </div>\n            )}\n            <Writer\n              focus={true}\n              group={group}\n              title={title}\n              parent={parent}\n              text={text || url ? `${text}\\n${url}` : \"\"}\n              files={files}\n            />\n          </div>\n        </article>\n      </div>\n    </main>\n  );\n}\n","import { h, Fragment } from \"preact\";\nimport { util, me, bookmarks, notifications } from \"/src/core\";\nimport { Link } from \"react-router-dom\";\nimport { FaIcon } from \"/src/misc\";\nimport { useTranslation } from \"react-i18next\";\nimport { HumanTime } from \"/src/pages\";\n\nexport default function MessageFooter(props) {\n  const { t } = useTranslation();\n  return (\n    <div class=\"message-footer\">\n      <div class=\"infos\">\n        {!props?.isPublic && props?.author && props?.author?.id === me.id && (\n          <Fragment>\n            <a\n              class=\"action seamless-link font-size-90 capitalize d-none d-sm-block\"\n              onClick={e => props.editMessage(e)}\n            >\n              {t(\"edit\")}\n            </a>\n            <div class=\"dot d-none d-sm-block\">&bull;</div>\n          </Fragment>\n        )}\n        {!props?.isPublic && props?.isChild && props?.message && (\n          <Fragment>\n            <Link\n              class=\"action seamless-link font-size-90 capitalize\"\n              to={\n                `/messages/${props?.message.id}${props?.message?.children.length ? \"\" : \"?focus=reply\"}`\n              }\n            >\n              {props?.message?.children.length ? (\n                props.message.children.some(e => notifications.isNew(e.id)) ? (\n                  <b>\n                    {t(\"replies\", {\n                      count: props.message.children.length\n                    })}\n                  </b>\n                ) : (\n                  t(\"replies\", {\n                    count: props.message.children.length\n                  })\n                )\n              ) : (\n                t(\"reply\")\n              )}\n            </Link>\n            <div class=\"dot\">&bull;</div>\n          </Fragment>\n        )}\n        <div\n          class=\"date font-size-90\"\n          title={util.humanFullDate(props?.message.createdAt)}\n        >\n          <HumanTime timestamp={props?.message.createdAt} />\n        </div>\n        <Fragment>\n          <div class=\"dot\">&bull;</div>\n          <div class=\"font-size-90\">\n            {\n              props?.author && props?.author?.name ? props.author.name : \"--\"\n            }\n          </div>\n        </Fragment>\n      </div>\n      <div>\n        {!props?.isPublic && (\n          <div\n            class=\"options dropdown\"\n            onClick={e =>\n              e?.target?.closest(\".dropdown\")?.classList.toggle(\"active\")\n            }\n          >\n            <div class=\"none-if-follows-empty\">\n              <FaIcon family=\"solid\" icon=\"ellipsis-h\" />\n            </div>\n            <div class=\"dropdown-menu dropdown-options\">\n              {props?.author && props?.author?.id === me.id && (\n                <a\n                  class=\"seamless-link capitalize\"\n                  onClick={e => props.deleteMessage(e)}\n                >\n                  {t(\"delete\")}\n                </a>\n              )}\n              {\n                <a\n                  class=\"seamless-link capitalize\"\n                  onClick={e => props.openPublicLink(e)}\n                >\n                  {t(\"public_link\")}\n                </a>\n              }\n              {me.groups?.length > 1 && (\n                <a\n                  class=\"seamless-link capitalize\"\n                  onClick={e => props.shareMessage(e)}\n                >\n                  {t(\"share_message\")}\n                </a>\n              )}\n              {!props?.message?.isInFront &&\n                  props?.author &&\n                  props?.author.id == me.id && (\n                <a\n                  class=\"seamless-link capitalize\"\n                  onClick={e => props.publishInGroup(e)}\n                >\n                  {t(\"publish_in_group\")}\n                </a>\n              )}\n              {!bookmarks.hasBookmark(props?.message.id) && (\n                <a\n                  class=\"seamless-link capitalize\"\n                  onClick={() => bookmarks.addBookmark(props?.message.id)}\n                >\n                  {t(\"add_bookmark\")}\n                </a>\n              )}\n              {bookmarks.hasBookmark(props?.message.id) && (\n                <a\n                  class=\"seamless-link capitalize\"\n                  onClick={() => bookmarks.removeMatchingBookmarks(props?.message.id)}\n                >\n                  {t(\"remove_bookmark\")}\n                </a>\n              )}\n              {props?.author?.id == me.id && (\n                <a\n                  class=\"seamless-link capitalize\"\n                  onClick={e => props.editMessage(e)}\n                >\n                  {t(\"edit\")}\n                </a>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { http, util } from \"/src/core\";\nimport { EmbedBlock, FileGrid } from \"/src/embed\";\nimport { useEffect, useState } from \"preact/hooks\";\n\nexport default function MessageBody(props) {\n\n  const [preview, setPreview] = useState(null);\n\n  const displayMessageText = () => {\n    if (!props.message.data) {\n      return \"\";\n    }\n    // escape html a little (just enough to avoid xss I hope)\n    let txt = props.message.data[\"text\"]\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\")\n      .trim();\n    // replace url by real links\n    let shift = 0;\n    let match = null;\n    while ((match = util.getUrl(txt.slice(shift)))) {\n      let url = match[0];\n      if (url.length >= 50) {\n        url = `${url.slice(0, 25)  }...${  url.slice(-24)}`;\n      }\n      let link = `<a href=\"${match[0]}\" target=\"_blank\">${url}</a>`;\n      txt =\n        txt.slice(0, match[\"index\"] + shift) +\n        link +\n        txt.slice(match[\"index\"] + shift + match[0].length);\n      shift += match[\"index\"] + link.length;\n    }\n    // replace line returns\n    txt = txt.replace(/\\n/g, \"<br/>\");\n    return { __html: txt };\n  };\n\n  useEffect(() => {\n    if (!preview && props.message) {\n      if (props.message.data) {\n        let previewUrl = util.getUrl(props.message.data[\"text\"]);\n        if (previewUrl) {\n          http\n            .get(`/api/links/by_url?url=${encodeURIComponent(previewUrl[0])}`)\n            .then(r => setPreview(r));\n        }\n      }\n    }\n  });\n\n  return (\n    <div class=\"message-body\">\n      {props.message.data && props.message.data.title && (\n        <div class=\"title\">\n          <span>{props.message.data.title}</span>\n        </div>\n      )}\n      {props.message.data &&\n        props.message.data.text &&\n        props.message.data.text.trim() && (\n        <p\n          class=\"card-text\"\n          dangerouslySetInnerHTML={displayMessageText()}\n        />\n      )}\n      {preview && (!props.message.data || !props.message.data[\"no_embed\"]) && (\n        <EmbedBlock\n          key={preview.url}\n          url={preview.url}\n          preview={preview.preview}\n          data={preview.data}\n        />\n      )}\n      {props.files && (\n        <FileGrid files={props.files} />\n      )}\n    </div>\n  );\n}\n","import { h, Fragment } from \"preact\";\nimport { http, util } from \"/src/core\";\nimport { Link } from \"react-router-dom\";\nimport { useEffect, useState } from \"preact/hooks\";\n\nexport default function MessageBreadcrumbs(props) {\n\n  const stack = [props.message.id, ...props.message.lineage].reverse();\n  const [breadcrumbs, setBreadcrumbs] = useState([]);\n  const [group, setGroup] = useState(null);\n\n  const getTitle = (message, previewLink) => {\n    if (message) {\n      if (message[\"data\"] && message[\"data\"][\"title\"]) {\n        return message[\"data\"][\"title\"];\n      }\n      if (previewLink && previewLink[\"data\"]) {\n        return previewLink[\"data\"][\"title\"];\n      }\n      if (message[\"data\"] && message[\"data\"][\"text\"]) {\n        let url = util.getUrl(message[\"data\"][\"text\"]);\n        if (url && url.length > 0) {\n          url = url[0];\n        }\n        if (url) {\n          return url;\n        }\n        return message[\"data\"][\"text\"];\n      }\n    }\n    // When all else fails, just say who and when\n    return `${message?.author?.name}, ${util.humanTime(message.createdAt)}`;\n  };\n\n  const loadBreadcrumbs = ids => {\n    let breadcrumbs = [];\n    Promise.all(ids.map(id => http.get(`/api/messages/${id}`))).then((messages) => {\n      Promise.all(messages.map(message => {\n        let previewUrl = util.getUrl(message?.data?.text);\n        if (previewUrl) {\n          return http.get(`/api/links/by_url?url=${encodeURIComponent(previewUrl[0])}`);\n        }\n        return Promise.resolve(null);\n      })).then((links) => {\n        for (let i = 0; i < ids.length; i++) {\n          breadcrumbs[i] = getTitle(messages[i], links[i]);\n        }\n        setBreadcrumbs(breadcrumbs);\n      });\n    });\n  };\n\n  useEffect(() => {\n    loadBreadcrumbs(stack);\n    http.get(`/api/groups/${props.message.group.id}`).then(group => {\n      setGroup(group);\n    });\n  }, []);\n\n  if (stack.length > 0) {\n    const stack_truncated = [stack[0], ...stack.slice(Math.min(3, stack.length) * -1).slice(1)];\n    const breadcrumbs_truncated = [breadcrumbs[0], ...breadcrumbs.slice(Math.min(3, breadcrumbs.length) * -1).slice(1)];\n    return (\n      <div class=\"message-breadcrumbs\">\n        <nav style=\"--bs-breadcrumb-divider: '>';\">\n          <ol class=\"breadcrumb\">\n            {group && (\n              <li class=\"breadcrumb-item\">\n                <Link\n                  key={group.id}\n                  to={`/groups/${group.id}`}\n                  class=\"no-decoration\"\n                >{util.limitLength(group.name || group.id.slice(0, 8), 30)}</Link>\n              </li>\n            )}\n            {stack_truncated.map((e, i) => (\n              <Fragment key={e}>\n                <Fragment>\n                  {i == 1 && stack.length > 3 && (\n                    <li class=\"breadcrumb-item\">...</li>\n                  )}\n                </Fragment>\n                <li class=\"breadcrumb-item\">\n                  <Link\n                    key={e}\n                    to={`/messages/${e}`}\n                    class=\"no-decoration\"\n                  >{util.limitLength(breadcrumbs_truncated[i] || e.slice(0, 8), 30)}</Link>\n                </li>\n              </Fragment>\n            ))}\n          </ol>\n        </nav>\n      </div>\n    );\n  }\n}\n","import { h, Fragment } from \"preact\";\nimport { http, router, util, notifications } from \"/src/core\";\nimport MessageChildren from \"./message-children.component.js\";\nimport MessageHead from \"./message-head.component.js\";\nimport MessageFooter from \"./message-footer.component.js\";\nimport MessageBody from \"./message-body.component.js\";\nimport MessageBreadcrumbs from \"./message-breadcrumbs.component.js\";\nimport { Writer } from \"/src/writer\";\nimport { useEffect, useState, useRef, useReducer } from \"preact/hooks\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { useStoreon } from \"storeon/preact\";\n\nexport default function Message(props) {\n\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const { me } = useStoreon(\"me\");\n  const [author, setAuthor] = useState(null);\n  const [parent, setParent] = useState(null);\n  const [files, setFiles] = useState(null);\n  const [isRemoved, setIsRemoved] = useState(false);\n  const [edit, setEdit] = useState(false);\n\n  const [message, setMessage] = useState(null);\n  const messageRef = useRef(message);\n  const setMessageRef = message => {\n    messageRef.current = message;\n    setMessage(message);\n  };\n\n  const [, forceUpdate] = useReducer(x => x + 1, 0);\n\n  useEffect(() => {\n    window.addEventListener(\"newChild\", onNewChild);\n    window.addEventListener(\"editMessage\", onEditMessage);\n    loadMessage();\n    notifications.removeMatchingNotifications(props.id);\n\n    if (!props.isChild) {\n      setTimeout(() => window.scrollTo(0, 0));\n    }\n\n    setTimeout(() => {\n      if (props.id == router.action) {\n        const msgElement = document.getElementById(props.id);\n        if (msgElement) {\n          msgElement.scrollIntoView({ block: \"start\", behavior: \"smooth\" });\n          setTimeout(() => msgElement.classList.remove(\"highlight\"), 1000);\n        }\n      }\n    }, 1000);\n  }, []);\n\n  const hydrateMessage = m => {\n    setMessageRef(m);\n    if (m?.author?.id) {\n      http.get(`/api/users/${m.author.id}`).then(u => {\n        setAuthor(u);\n      });\n    }\n    if (m?.parent?.id) {\n      http.get(`/api/messages/${m.parent.id}`).then(p => {\n        setParent(p);\n      });\n    }\n    if (m?.files?.length) {\n      Promise.all(m.files.map(f => http.get(`/api/files/${f.id}`).then(f => f))).then(\n        files => setFiles(files)\n      );\n    }\n  };\n\n  const loadMessage = () => {\n    if (props?.message) {\n      hydrateMessage(props.message);\n    } else if (props?.token) {\n      http.get(`/api/public/${props.token}`).then(m => {\n        hydrateMessage(m);\n      });\n    } else {\n      http.get(`/api/messages/${props.id}`).then(m => {\n        hydrateMessage(m);\n      });\n    }\n  };\n\n  const onNewChild = event => {\n    if (!messageRef.current?.id) {\n      return;\n    }\n    const newMsg = event.detail;\n    if (newMsg?.parent && util.getId(newMsg?.parent) == props.id) {\n      newMsg.author = me;\n      let newChildren = messageRef?.current?.children ? [...messageRef.current.children, newMsg] : [newMsg];\n      let newRef = Object.assign(\n        messageRef.current,\n        {\n          children: newChildren\n        },\n      );\n      setMessageRef(newRef);\n      forceUpdate();\n    }\n  };\n\n  const openPublicLink = async event => {\n    event.preventDefault();\n    let newTab = window.open(\"about:blank\", \"_blank\");\n    const res = await http.get(\n      `/api/messages/${props.id}/get-public-link`\n    );\n    newTab.location = `${document.baseURI}public/${res.token}`;\n  };\n\n  const onEditMessage = event => {\n    if (event.detail.id == props.id) {\n      setEdit(false);\n      hydrateMessage(event.detail);\n      props.key = +Date.now();\n    }\n  };\n\n  const getComponentClass = () => {\n    let cn = \"message\";\n    if (props.isChild) {\n      cn += \" child\";\n    }\n    if (props.id == router.action) {\n      cn += \" highlight\";\n    }\n    return cn;\n  };\n\n  const deleteMessage = event => {\n    event.preventDefault();\n    if (confirm(t(\"ask_delete_message\"))) {\n      http.delete(`/api/messages/${props.id}`).then(() => {\n        if (props.isChild) {\n          setIsRemoved(true);\n        } else {\n          navigate(`/groups/${message.group.id}`);\n        }\n      });\n    }\n  };\n\n  const shareMessage = event => {\n    event.preventDefault();\n    navigate(`/share?message=${props.id}`);\n  };\n\n  const editMessage = event => {\n    event.preventDefault();\n    setEdit(true);\n  };\n\n  const publishInGroup = () => {\n    http\n      .put(`/api/messages/${props.id}`, {\n        lastActivityDate: Math.floor(Date.now() / 1000),\n        isInFront: true\n      })\n      .then(res => {\n        if (!res) {\n          alert.add(t(\"error\"), \"alert-danger\");\n          return;\n        }\n        navigate(`/groups/${message.group.id}`);\n      });\n  };\n\n  const cancelEdit = event => {\n    event.preventDefault();\n    setEdit(false);\n  };\n\n  const displayWriter = (isChild, focus) => {\n    return (\n      <Writer\n        cancel={edit ? cancelEdit : null}\n        files={edit ? files : []}\n        focus={focus || !!edit}\n        group={message.group}\n        messageId={edit ? props.id : null}\n        parent={\n          edit ? parent?.id : props.id\n        }\n        text={edit ? message.data[\"text\"] : \"\"}\n        title={edit ? message.data[\"title\"] : \"\"}\n        isChild={isChild}\n      />\n    );\n  };\n\n  if (isRemoved || !message) {\n    // placeholder (to be able to target it)\n    return (\n      <div id={props.id} className=\"message\" />\n    );\n  }\n\n  return (\n    <Fragment>\n      {!props?.isChild && !props?.isPublic && (\n        <MessageBreadcrumbs key={message?.id} message={message} />\n      )}\n      <div id={props.id} className={getComponentClass()}>\n        {edit && displayWriter(props?.isChild)}\n        {!edit && (\n          <Fragment>\n            {props.isChild && !props.isPublic && edit && (\n              <div class=\"message-head d-none d-md-block\">\n                <img\n                  class=\"rounded-circle w-3 material-shadow avatar\"\n                  style={util.backgroundHash(me.id)}\n                  src={\n                    me.avatar\n                      ? util.crop(me.avatar?.id, 100, 100)\n                      : util.defaultAvatar\n                  }\n                />\n              </div>\n            )}\n            <MessageHead\n              author={author}\n              message={message}\n              isPublic={props?.isPublic}\n              isChild={props?.isChild}\n            />\n            <div class=\"main\">\n              <MessageBody\n                message={message}\n                files={files || []}\n                isPublic={props?.isPublic}\n                isChild={props?.isChild}\n              />\n              <MessageFooter\n                author={author}\n                message={message}\n                editMessage={editMessage}\n                deleteMessage={deleteMessage}\n                shareMessage={shareMessage}\n                publishInGroup={publishInGroup}\n                openPublicLink={openPublicLink}\n                isPublic={props?.isPublic}\n                isChild={props?.isChild}\n              />\n            </div>\n          </Fragment>\n        )}\n      </div>\n      {props?.postMessageComponent}\n      {!props?.isChild && !props?.isPublic && (\n        <MessageChildren\n          childMessages={message?.children}\n          key={props.id}\n          id={props.id}\n        />\n      )}\n      {!edit && !props?.isPublic && !props?.isChild && (\n        <div class=\"message child mt-2\">\n          {me?.id && (\n            <div class=\"message-head d-none d-md-block\">\n              <img\n                class=\"rounded-circle w-3 material-shadow avatar\"\n                style={util.backgroundHash(me.id)}\n                src={\n                  me?.avatar\n                    ? util.crop(me.avatar[\"id\"], 100, 100)\n                    : util.defaultAvatar\n                }\n              />\n            </div>\n          )}\n          {displayWriter(true, props.focus)}\n        </div>\n      )}\n    </Fragment>\n  );\n}\n","import _Message from \"./message.component.js\";\nimport _MessageBody from \"./message-body.component.js\";\nimport _MessageBreadcrumbs from \"./message-breadcrumbs.component.js\";\nimport _MessageChild from \"./message-child.component.js\";\nimport _MessageChildren from \"./message-children.component.js\";\nimport _MessageFooter from \"./message-footer.component.js\";\nimport _MessageHead from \"./message-head.component.js\";\nimport _MessageList from \"./message-list.component.js\";\nimport _MessageParent from \"./message-parent.component.js\";\nimport _MessagePreview from \"./message-preview.component.js\";\nimport _MessageSearchResult from \"./message-search-result.component.js\";\n\nexport const Message = _Message;\nexport const MessageBody = _MessageBody;\nexport const MessageBreadcrumbs = _MessageBreadcrumbs;\nexport const MessageChild = _MessageChild;\nexport const MessageChildren = _MessageChildren;\nexport const MessageFooter = _MessageFooter;\nexport const MessageHead = _MessageHead;\nexport const MessageList = _MessageList;\nexport const MessageParent = _MessageParent;\nexport const MessagePreview = _MessagePreview;\nexport const MessageSearchResult = _MessageSearchResult;\n","import { h, Component, Fragment } from \"preact\";\nimport { http } from \"/src/core\";\nimport { MessagePreview } from \"/src/message\";\n\nexport default class MessageList extends Component {\n  constructor(props) {\n    super(props);\n    let loaded = 1 + Math.floor((window.screen.width * window.screen.height) / (320 * 215));\n    this.state = {\n      loaded,\n      messages: [],\n      scrollTop: 0,\n      totalMessages: 0,\n      pageYOffset: 0,\n      page: 0\n    };\n    this.scroll_cooldown = Date.now();\n    this.onScroll = this.onScroll.bind(this);\n    this.loadMessages = this.loadMessages.bind(this);\n    this.onNewParent = this.onNewParent.bind(this);\n    window.addEventListener(\"newParent\", this.onNewParent);\n  }\n\n  onNewParent() {\n    this.loadMessages(0);\n  }\n\n  componentDidMount() {\n    this.loadMessages(0);\n    window.addEventListener(\"scroll\", this.onScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.onScroll);\n  }\n\n  loadMessages(page) {\n    http\n      .get(`/api/groups/${this.props.id}`)\n      .then(res => {\n        this.setState({\n          group: res\n        });\n      });\n\n    http\n      .get(`/api/groups/${this.props.id}/page/${page}`)\n      .then(res => {\n        if (res && Array.isArray(res[\"messages\"])) {\n          let new_loaded = Math.max(this.state.loaded, page * 30);\n          let msgList = this.state.messages;\n          // don't add already added messages\n          res[\"messages\"].map(\n            m => !msgList.find(msg => msg.id == m.id) && msgList.push(m)\n          );\n          this.setState({\n            messages: msgList,\n            totalMessages: res[\"totalItems\"],\n            page,\n            loaded: new_loaded\n          });\n          if ((page + 1) * 30 < new_loaded) {\n            setTimeout(() => this.loadMessages(page + 1));\n          }\n        }\n      });\n  }\n\n  onScroll() {\n    // prevent loading messages if we are in a post\n    if (\n      window.getComputedStyle(document.getElementById(\"group\").parentNode)\n        .display == \"none\"\n    ) {\n      return;\n    }\n    // don't load if on cooldown\n    if (this.scroll_cooldown + 100 < Date.now()) {\n      this.scroll_cooldown = Date.now();\n      this.setState({ pageYOffset: window.pageYOffset });\n      // don't load if unecessary\n      if (\n        Array.isArray(this.state.messages) &&\n        document.body.scrollHeight - window.screen.height - 500 <\n          window.pageYOffset &&\n        this.state.loaded < this.state.totalMessages\n      ) {\n        this.setState(prevState => ({ loaded: prevState.loaded + 10 }));\n        if (this.state.loaded + 30 > this.state.messages.length) {\n          this.loadMessages(this.state.page + 1);\n          // update page count right away\n          this.setState(prevState => ({ page: prevState.page + 1 }));\n        }\n      }\n    }\n  }\n\n  render() {\n    if (!this.props.id) {\n      return;\n    }\n    return (\n      <Fragment>\n        {Array.isArray(this.state.messages) && this.state.messages.slice(0, this.state.loaded).map((msg, i) => {\n          return (\n            <MessagePreview\n              tabindex={i + 1}\n              key={msg.id}\n              id={msg.id}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n}\n","import { h } from \"preact\";\nimport { router } from \"/src/core\";\nimport Message from \"./message.component.js\";\nimport { Navbar } from \"/src/navbar\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function MessageParent(props) {\n  let params = useParams();\n  return (\n    <main>\n      <Navbar />\n      <div class=\"content\">\n        <article class=\"mb-3 justify-content-center d-flex\">\n          <div class=\"container pb-3\">\n            <Message\n              focus={!!router.getParam(\"focus\", router.search)}\n              isPublic={false}\n              isChild={false}\n              message={props?.message}\n              id={params.id}\n              key={params.id}\n            />\n          </div>\n        </article>\n      </div>\n    </main>\n  );\n}\n","import { h, Fragment } from \"preact\";\nimport { util, notifications, http } from \"/src/core\";\nimport { FaIcon } from \"/src/misc\";\nimport { Link } from \"react-router-dom\";\nimport { HumanTime } from \"/src/pages\";\nimport { useEffect, useState } from \"preact/hooks\";\n\nexport default function MessagePreview(props) {\n\n  const [author, setAuthor] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [id, setId] = useState(null);\n  const [data, setData] = useState(null);\n  const [lastActivityDate, setLastActivityDate] = useState(null);\n  const [children, setChildren] = useState(0);\n  const [loaded, setLoaded] = useState(false);\n\n  const getAvatar = user => {\n    return (\n      <img\n        title={user ? user.name : \"--\"}\n        className={`avatar material-shadow${user ? \"\" : \" removed-user\"}`}\n        style={util.backgroundHash(user ? user.id : \"\")}\n        src={\n          user?.avatar\n            ? util.crop(user.avatar[\"id\"], 100, 100)\n            : util.defaultAvatar\n        }\n        onError={e => (e.currentTarget.src = util.defaultAvatar)}\n      />\n    );\n  };\n\n  useEffect(() => {\n    http.get(`/api/messages/${props.id}/preview`).then(p => {\n      setAuthor(p?.author);\n      setPreview(p?.preview);\n      setId(p?.id);\n      setChildren(p?.children);\n      setLoaded(true);\n      setLastActivityDate(p?.lastActivityDate);\n      setData(p?.data);\n    });\n  }, []);\n\n  if (!props?.id || !data) {\n    return null;\n  }\n  return (\n    <Link\n      to={`/messages/${id}`}\n      class=\"d-inline-block seamless-link message-preview unselectable\"\n      title={data?.title}\n    >\n      <div tabindex={props?.tabindex} class=\"card material-shadow-with-hover\">\n        {getAvatar(author)}\n        <div class=\"card-miniature-loading\">\n          {loaded && (\n            <Fragment>\n              {preview ? (\n                <div\n                  class=\"card-miniature\"\n                  style={\n                    `background-image: url('${util.crop(util.getId(preview), 320, 180)}')`\n                  }\n                />\n              ) : (\n                <div class=\"text-preview\">{data?.text}</div>\n              )}\n            </Fragment>\n          )}\n        </div>\n        <div class=\"card-body border-top d-flex justify-content-between\">\n          <span class=\"left-buffer\" />\n          <span\n            class=\"title\"\n            title={\n              data?.title || util.humanFullDate(lastActivityDate)\n            }\n          >\n            {data?.title || (<HumanTime timestamp={lastActivityDate} />)}\n          </span>\n          <span class=\"children\">\n            {children > 0 && (\n              <span>\n                {`${children} `}\n                <FaIcon\n                  family={\n                    notifications.isNew(id) ? \"solid\" : \"regular\"\n                  }\n                  icon={\"comment\"}\n                />\n              </span>\n            )}\n          </span>\n        </div>\n      </div>\n    </Link>\n  );\n}\n","import { h } from \"preact\";\nimport { http, util, notifications } from \"/src/core\";\nimport { FaIcon } from \"/src/misc\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport { Link } from \"react-router-dom\";\n\nexport default function MessageSearchResult(props) {\n\n  const [author, setAuthor] = useState(props?.message?.author || null);\n\n  useEffect(() => {\n    if (props?.message?.author) {\n      http.get(`/api/users/${props.message.author}`).then(author => author && setAuthor(author));\n    }\n  }, []);\n\n  const displayAuthorName = () => {\n    if (!author?.name) {\n      return { __html: \"--\" };\n    }\n    let authorName = author.name;\n\n    // make the search terms stand out\n    let words = authorName.split(\" \");\n    for (let j = 0; j < words.length; j++) {\n      if (!words[j].match(util.urlRegExp)) {\n        let searchTerms = props.search.split(\" \");\n        for (let k = 0; k < searchTerms.length; k++) {\n          words[j] = words[j].replace(\n            new RegExp(util.escapeRegex(searchTerms[k]), \"gi\"),\n            \"<b>$&</b>\"\n          );\n        }\n      }\n    }\n    authorName = words.join(\" \");\n    return { __html: authorName };\n  };\n\n  const displayMessageTitle = () => {\n    if (!props?.message?.data?.title) {\n      return { __html: util.humanTime(props?.message?.lastActivityDate) };\n    }\n    // escape html a little (just enough to avoid xss I hope)\n    let title = props?.message?.data?.title.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").trim();\n\n    // make the search terms stand out\n    let words = title.split(\" \");\n    let searchTerms = props?.search.split(\" \") || [];\n    for (let j = 0; j < words.length; j++) {\n      if (!words[j].match(util.urlRegExp)) {\n        for (let k = 0; k < searchTerms.length; k++) {\n          words[j] = words[j].replace(new RegExp(util.escapeRegex(searchTerms[k]), \"gi\"), \"<b>$&</b>\");\n        }\n      }\n    }\n    title = words.join(\" \");\n    return { __html: title };\n  };\n\n  const displayMessageText = () => {\n    if (!props?.message?.data?.text) {\n      return \"\";\n    }\n\n    // escape html a little (just enough to avoid xss I hope)\n    let txt = props?.message?.data?.text.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").trim();\n\n    // make the search terms stand out for not url words\n    let lines = txt.split(\"\\n\");\n    for (let i = 0; i < lines.length; i++) {\n      let words = lines[i].split(\" \");\n      for (let j = 0; j < words.length; j++) {\n        if (!words[j].match(util.urlRegExp)) {\n          let searchTerms = props.search.split(\" \");\n          for (let k = 0; k < searchTerms.length; k++) {\n            if (!searchTerms[k]) {\n              continue;\n            }\n            words[j] = words[j].replace(\n              new RegExp(util.escapeRegex(searchTerms[k]), \"gi\"),\n              \"<b>$&</b>\"\n            );\n          }\n          let hashtags = props?.hashtags.split(\" \") || [];\n          for (let k = 0; k < hashtags.length; k++) {\n            if (!hashtags[k]) {\n              continue;\n            }\n            words[j] = words[j].replace(\n              new RegExp(`#${  hashtags[k]}`, \"gi\"),\n              \"<b>$&</b>\"\n            );\n          }\n        }\n      }\n      lines[i] = words.join(\" \");\n    }\n    txt = lines.join(\"\\n\");\n\n    // replace url by real links\n    let shift = 0;\n    let match = null;\n    while ((match = util.getUrl(txt.slice(shift)))) {\n      let url = match[0];\n      if (url.length >= 50) {\n        url = `${url.slice(0, 25)  }...${  url.slice(-24)}`;\n      }\n      let searchTerms = props?.search.split(\" \") || [];\n      for (let i = 0; i < searchTerms.length; i++) {\n        url = url.replace(new RegExp(util.escapeRegex(searchTerms[i]), \"gi\"), \"<b>$&</b>\");\n      }\n      let link = `<a href=\"${  match[0]  }\" target=\"_blank\">${  url  }</a>`;\n      txt =\n        txt.slice(0, match[\"index\"] + shift) +\n        link +\n        txt.slice(match[\"index\"] + shift + match[0].length);\n      shift += match[\"index\"] + link.length;\n    }\n\n    // replace line returns\n    txt = txt.replace(/\\n/g, \"<br/>\");\n\n    return { __html: txt };\n  };\n\n  const getMiniature = () => {\n    if (props?.preview) {\n      return (\n        <div\n          class=\"card-miniature\"\n          style={\n            `background-image: url('${util.crop(props?.preview, 100, 100)}')`\n          }\n        />\n      );\n    }\n    let avatar = util.defaultAvatar;\n    if (author?.avatar?.id) {\n      avatar = util.crop(author.avatar[\"id\"], 100, 100);\n    }\n    return (\n      <div\n        class=\"card-miniature\"\n        style={`background-image: url('${avatar}')`}\n      />\n    );\n  };\n\n  const getLink = () => {\n    if (props.message.parent && props.message.children == 0) {\n      return (\n        `/messages/${props.message.parent}/${props.message.id}`\n      );\n    }\n    return `/messages/${props.message.id}`;\n  };\n\n  return (\n    <Link\n      class=\"d-inline-block seamless-link message-preview unselectable\"\n      to={getLink()}\n      title={props?.title}\n    >\n      <div tabindex={props.tabindex} class=\"card material-shadow-with-hover\">\n        <div class=\"card-body border-top\">\n          {getMiniature()}\n          <div class=\"infos\">\n            <div\n              class=\"title\"\n              dangerouslySetInnerHTML={displayAuthorName()}\n            />\n            <div class=\"dot\">&bull;</div>\n            <div\n              class=\"title\"\n              title={props?.title || util.humanFullDate(props.message.lastActivityDate)}\n              dangerouslySetInnerHTML={displayMessageTitle()}\n            />\n          </div>\n          <div class=\"text\">\n            {props?.message?.data?.text.trim() && (\n              <p\n                class=\"card-text\"\n                dangerouslySetInnerHTML={displayMessageText()}\n              />\n            )}\n          </div>\n          <div class=\"children\">\n            {!!props.message.children && (\n              <span>\n                {`${props.message.children} `}\n                <FaIcon\n                  family={\n                    notifications.isNew(props.message.id) ? \"solid\" : \"regular\"\n                  }\n                  icon={\"comment\"}\n                />\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n    </Link>\n  );\n}\n","import _Login from \"./login.component.js\";\nimport _PasswordReset from \"./password-reset.component.js\";\nimport _Signup from \"./signup.component.js\";\nimport _StopNotificationEmails from \"./stop-notification-emails.component.js\";\nimport _Public from \"./public.component.js\";\n\nexport const Login = _Login;\nexport const PasswordReset = _PasswordReset;\nexport const Signup = _Signup;\nexport const StopNotificationEmails = _StopNotificationEmails;\nexport const Public = _Public;\n","import { h } from \"preact\";\nimport { alert, storage, http, me } from \"/src/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Login() {\n\n  const [sending, setSending] = useState(false);\n  const [showResetPassword, setShowResetPassword] = useState(false);\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    // reroute if already logged in\n    storage.get(\"apiKey\").then(apiKey => apiKey && navigate(\"/\"));\n    storage.reset();\n  }, []);\n\n  const sendPasswordReset = e => {\n    e.preventDefault();\n    let login = document.getElementById(\"login\").value || \"\";\n    login.toLowerCase();\n    setSending(true);\n    http.post(\"/api/password-reset-mail\", { mail: login }).then(res => {\n      setSending(false);\n      if (res && !res.message) {\n        alert.add(t(\"password_reset_mail_sent\"));\n      } else {\n        alert.add(t(res.message), \"alert-danger\");\n      }\n    });\n  };\n\n  const sendLoginForm = e => {\n    e.preventDefault();\n    setSending(true);\n    let login = document.getElementById(\"login\").value || \"\";\n    login.toLowerCase();\n    const password = document.getElementById(\"password\").value;\n    http.post(\"/api/login\", {login, password}).then(res => {\n      setSending(false);\n      if (res && res.api_key) {\n        storage.set(\"apiKey\", res.api_key).then(() => {\n          me.update().then(user => {\n            let redirect = \"/create-group\";\n            if (user.data?.default_group) {\n              redirect = `/groups/${user?.data[\"default_group\"]}`;\n            } else if (user?.groups[0]) {\n              redirect = `/groups/${user?.groups[0].id}`;\n            }\n            navigate(redirect);\n          });\n        });\n      } else if (res && res.message) {\n        alert.add(t(res.message), \"alert-danger\");\n      } else {\n        alert.add(t(\"error\"), \"alert-danger\");\n      }\n    });\n  };\n\n  return (\n    <div class=\"login\">\n      <div class=\"login-form\">\n        <img src={new URL(\"/src/assets/zusam_logo.svg\", import.meta.url)} />\n        {!showResetPassword && (\n          <form>\n            <div class=\"form-group mb-3\">\n              <input\n                type=\"email\"\n                class=\"form-control\"\n                required\n                id=\"login\"\n                placeholder={t(\"login_placeholder\")}\n              />\n            </div>\n            <div class=\"form-group\">\n              <input\n                type=\"password\"\n                class=\"form-control\"\n                required\n                id=\"password\"\n                placeholder={t(\"password_placeholder\")}\n              />\n            </div>\n            <div class=\"forgot-password\">\n              <span onClick={() => setShowResetPassword(true)}>\n                {t(\"forgot_password\")}\n              </span>\n            </div>\n            <button\n              type=\"submit\"\n              class=\"btn btn-light\"\n              onClick={e => sendLoginForm(e)}\n              disabled={sending}\n            >\n              {t(\"connect\")}\n            </button>\n          </form>\n        )}\n        {!!showResetPassword && (\n          <form>\n            <div class=\"form-group mb-3\">\n              <input\n                type=\"email\"\n                class=\"form-control\"\n                required\n                id=\"login\"\n                placeholder={t(\"login_placeholder\")}\n              />\n            </div>\n            <button\n              type=\"submit\"\n              class=\"btn btn-light\"\n              onClick={e => sendPasswordReset(e)}\n              disabled={sending}\n            >\n              {t(\"submit\")}\n            </button>\n          </form>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { alert, storage, http, router } from \"/src/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function PasswordReset() {\n\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n\n  const sendNewPassword = e => {\n    e.preventDefault();\n    storage.set(\"apiKey\", \"\");\n    const password = document.getElementById(\"password\").value || \"\";\n    const passwordConfirmation = document.getElementById(\"password_confirmation\").value || \"\";\n    const mail = router.getParam(\"mail\");\n    const key = router.getParam(\"key\");\n    if (mail && password) {\n      if (password != passwordConfirmation) {\n        alert.add(t(\"passwords_dont_match\"));\n        return;\n      }\n      http\n        .post(\"/api/new-password\", { mail, key, password })\n        .then(res => {\n          if (res.api_key) {\n            storage.set(\"apiKey\", res.api_key);\n            setTimeout(() => navigate(\"/\"), 100);\n          } else {\n            alert.add(t(res.message));\n          }\n        })\n        .catch(res => console.warn(res));\n    }\n  };\n\n  return (\n    <div class=\"login\">\n      <div class=\"login-form\">\n        <h2 class=\"title\">{t(\"reset_password_title\")}</h2>\n        <form>\n          <div class=\"form-group\">\n            <input\n              type=\"password\"\n              class=\"form-control\"\n              required\n              id=\"password\"\n              placeholder={t(\"new_password_placeholder\")}\n            />\n          </div>\n          <div class=\"form-group\">\n            <input\n              type=\"password\"\n              class=\"form-control\"\n              required\n              id=\"password_confirmation\"\n              placeholder={t(\"confirm_password_placeholder\")}\n            />\n          </div>\n          <button\n            type=\"submit\"\n            class=\"btn btn-light\"\n            onClick={e => sendNewPassword(e)}\n          >\n            {t(\"submit\")}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { alert, storage, http, router } from \"/src/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Signup() {\n\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n\n  const sendSignupForm = e => {\n    e.preventDefault();\n    let login = document.getElementById(\"login\").value || \"\";\n    login.toLowerCase();\n    const password = document.getElementById(\"password\").value;\n    storage.set(\"apiKey\", \"\");\n    http\n      .post(\"/api/signup\", {\n        login,\n        password,\n        invite_key: router.getParam(\"inviteKey\")\n      })\n      .then(res => {\n        if (res && !res.message) {\n          storage.set(\"apiKey\", res.api_key);\n          setTimeout(() => navigate(\"/\"), 100);\n        } else {\n          alert.add(t(res.message));\n        }\n      });\n  };\n\n  return (\n    <div class=\"signup\">\n      <div class=\"signup-form\">\n        <img src={new URL(\"/src/assets/zusam_logo.svg\", import.meta.url)} />\n        <div class=\"welcome lead\">{t(\"invitation_welcome\")}</div>\n        <form>\n          <div class=\"form-group\">\n            <input\n              type=\"email\"\n              class=\"form-control\"\n              required\n              id=\"login\"\n              placeholder={t(\"login_placeholder\")}\n            />\n          </div>\n          <div class=\"form-group\">\n            <input\n              type=\"password\"\n              class=\"form-control\"\n              required\n              id=\"password\"\n              placeholder={t(\"password_placeholder\")}\n            />\n          </div>\n          <button\n            type=\"submit\"\n            class=\"btn btn-light\"\n            onClick={e => sendSignupForm(e)}\n          >\n            {t(\"signup\")}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { Message } from \"/src/message\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function Public() {\n  let params = useParams();\n\n  return (\n    <article class=\"justify-content-center d-flex mt-2\">\n      <div class=\"container\">\n        <main>\n          <div class=\"content\">\n            <article class=\"mb-3 justify-content-center d-flex\">\n              <div class=\"container pb-3\">\n                <Message\n                  focus={false}\n                  isPublic={true}\n                  isChild={false}\n                  token={params.token}\n                />\n              </div>\n            </article>\n          </div>\n        </main>\n      </div>\n    </article>\n  );\n}\n","import { h } from \"preact\";\nimport { alert, http, util, router } from \"/src/core\";\nimport { useStoreon } from \"storeon/preact\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nexport default function GroupSettings() {\n\n  const params = useParams();\n  const { t } = useTranslation();\n  const { me, dispatch } = useStoreon(\"me\");\n  const navigate = useNavigate();\n  const [secretKey, setSecretKey] = useState(\"\");\n  const [users, setUsers] = useState([]);\n  const [group, setGroup] = useState({});\n  const [alertMessage, setAlertMessage] = useState(\"\");\n\n  useEffect(() => {\n    http.get(`/api/groups/${params.id}`).then(\n      group => {\n        setGroup(group);\n        setSecretKey(group.secretKey);\n        Promise.all(group.users.map(u => http.get(`/api/users/${u.id}`).then(u => u))).then(\n          users => setUsers(users)\n        );\n      }\n    );\n    setAlertMessage(t(router.getParam(\"alert\")));\n  }, []);\n\n  const resetSecretKey = (event) => {\n    event.preventDefault();\n    http\n      .post(`/api/groups/${group.id}/reset-invite-key`, {})\n      .then(res => {\n        alert.add(t(\"group_updated\"));\n        setSecretKey(res[\"inviteKey\"]);\n      });\n  };\n\n  const updateSettings = (event) => {\n    event.preventDefault();\n    const name = document.querySelector(\"#settings_form input[name='name']\").value;\n    if (name) {\n      group.name = name;\n    }\n    setGroup(Object.assign({}, group));\n    http.put(`/api/groups/${group.id}`, group).then(res => {\n      setGroup(res);\n      setAlertMessage(t(\"group_updated\"));\n      navigate(`${location.pathname}?alert=group_updated`);\n    });\n  };\n\n  const leaveGroup = (event) => {\n    event.preventDefault();\n    if (me.data?.default_group == group.id) {\n      let user = {};\n      user.data = { default_group: me.groups[0].id };\n      http.put(`/api/users/${me.id}`, user).then(() => {\n        dispatch(\"me/fetch\");\n        leave();\n      });\n    } else {\n      leave();\n    }\n  };\n\n  const leave = () => {\n    http.post(`/api/groups/${group.id}/leave`, {}).then(res => {\n      if (!res || !res[\"entityType\"]) {\n        alert.add(t(\"error\"), \"alert-danger\");\n      } else {\n        dispatch(\"me/fetch\");\n        alert.add(t(\"group_left\"));\n        navigate(\"/\");\n      }\n    });\n  };\n\n  return (\n    <div>\n      <div class=\"group-settings mb-3\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <div class=\"container-fluid p-1\">\n              <div class=\"row\">\n                <div class=\"col-12 col-md-10\">\n                  <form id=\"settings_form\" class=\"mb-1 border-bottom pb-1\">\n                    <div class=\"form-group\">\n                      <label for=\"name\">{t(\"name\")}: </label>\n                      <input\n                        type=\"text\"\n                        name=\"name\"\n                        minlength=\"1\"\n                        maxlength=\"128\"\n                        placeholder={t(\"name_input\")}\n                        value={group.name}\n                        class=\"form-control\"\n                        required\n                      />\n                    </div>\n                    <button\n                      onClick={updateSettings}\n                      class=\"btn btn-outline-secondary\"\n                    >\n                      {t(\"save_changes\")}\n                    </button>\n                  </form>\n                  <form class=\"mb-1 border-bottom pb-1\">\n                    <div class=\"form-group\">\n                      <label for=\"inviteKey\">\n                        {t(\"invitation_link\")}:{\" \"}\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"inviteKey\"\n                        value={\n                          `${window.location.protocol}//${window.location.host}/invitation/${secretKey}`\n                        }\n                        class=\"form-control font-size-80\"\n                        readonly=\"readonly\"\n                      />\n                    </div>\n                    <button\n                      class=\"btn btn-outline-secondary\"\n                      onClick={resetSecretKey}\n                    >\n                      {t(\"reset_invitation_link\")}\n                    </button>\n                  </form>\n                  <form>\n                    <button\n                      onClick={e => leaveGroup(e)}\n                      class=\"btn btn-outline-danger\"\n                    >\n                      {t(\"quit_group\")}\n                    </button>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"user-list mb-3\">\n        <h3>{t(\"users\")}</h3>\n        {users.map(\n          user =>\n            user && (\n              <div class=\"user-card\">\n                <img\n                  class=\"avatar material-shadow-with-hover\"\n                  style={util.backgroundHash(user.id)}\n                  src={\n                    user.avatar\n                      ? util.crop(user.avatar[\"id\"], 200, 200)\n                      : util.defaultAvatar\n                  }\n                  onError={e => (e.currentTarget.src = util.defaultAvatar)}\n                />\n                <span>{user[\"name\"]}</span>\n              </div>\n            )\n        )}\n      </div>\n      {alertMessage && (\n        <div class=\"global-alert alert alert-success\">{alertMessage}</div>\n      )}\n    </div>\n  );\n}\n","import { h } from \"preact\";\nimport { lang, router, alert, http, util, storage } from \"/src/core\";\nimport { useStoreon } from \"storeon/preact\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\n\nexport default function UserSettings() {\n\n  const { t } = useTranslation();\n  const { me } = useStoreon(\"me\");\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [apiKey, setApiKey] = useState(null);\n  const [alertMessage, setAlertMessage] = useState(\"\");\n\n  useEffect(() => {\n    storage.get(\"apiKey\").then(apiKey => setApiKey(apiKey));\n    setAlertMessage(t(router.getParam(\"alert\")));\n  }, []);\n\n  const resetApiKey = (event) => {\n    event.preventDefault();\n    http.post(`/api/users/${me.id}/reset-api-key`, {}).then(() => router.logout());\n  };\n\n  const inputAvatar = () => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \"image/*\";\n    input.addEventListener(\"change\", event => {\n      const formData = new FormData();\n      formData.append(\"file\", event.target.files[0]);\n      http.sendFile(\n        formData,\n        file => {\n          http.put(`/api/users/${me.id}`, { avatar: file[\"id\"] }).then(() => {\n            setAlertMessage(t(\"settings_updated\"));\n            navigate(`${location.pathname}?alert=settings_updated`);\n          });\n        }\n      );\n    });\n    input.click();\n  };\n\n  const destroyAccount = (event) => {\n    event.preventDefault();\n    let confirmDeletion = confirm(t(\"are_you_sure\"));\n    if (confirmDeletion) {\n      http.delete(`/api/users/${me.id}`).then(() => {\n        navigate(\"/logout\");\n      });\n    }\n  };\n\n  const updateSettings = (event) => {\n    event.preventDefault();\n    const name = document.querySelector(\"#settings_form input[name='name']\")\n      .value;\n    const login = document.querySelector(\"#settings_form input[name='email']\")\n      .value;\n    const password = document.querySelector(\n      \"#settings_form input[name='password']\"\n    ).value;\n    const notification_emails = document.querySelector(\n      \"#settings_form select[name='notification_emails']\"\n    ).value;\n    const default_group = document.querySelector(\n      \"#settings_form select[name='default_group']\"\n    ).value;\n    const lang = document.querySelector(\"#settings_form select[name='lang']\")\n      .value;\n    let user = {};\n    if (name) {\n      user.name = name;\n    }\n    if (login) {\n      user.login = login;\n    }\n    if (password) {\n      user.password = password;\n    }\n    user[\"data\"] = {\n      notification_emails,\n      default_group,\n      lang\n    };\n    http.put(`/api/users/${me.id}`, user).then(res => {\n      if (res[\"error\"]) {\n        alert.add(res[\"error\"], \"alert-danger\");\n      } else {\n        setAlertMessage(t(\"settings_updated\"));\n        navigate(`${location.pathname}?alert=settings_updated`);\n      }\n    });\n  };\n\n  return (\n    <div class=\"user-settings\">\n      <div class=\"card\">\n        <div class=\"identite card-body\">\n          <div class=\"container-fluid p-1\">\n            <div class=\"row\">\n              <div class=\"col-12 col-md-2\">\n                <img\n                  class=\"img-fluid rounded-circle material-shadow avatar\"\n                  src={\n                    me.avatar\n                      ? util.crop(me.avatar[\"id\"], 100, 100)\n                      : util.defaultAvatar\n                  }\n                  style={util.backgroundHash(me.id || \"\")}\n                  onError={e => (e.currentTarget.src = util.defaultAvatar)}\n                  onClick={e => inputAvatar(e)}\n                />\n              </div>\n              <div class=\"col-12 col-md-10\">\n                <form id=\"settings_form\" class=\"mb-3\">\n                  <div class=\"form-group\">\n                    <label for=\"name\">{t(\"name\")}: </label>\n                    <input\n                      type=\"text\"\n                      name=\"name\"\n                      minlength=\"1\"\n                      maxlength=\"128\"\n                      placeholder={t(\"name_input\")}\n                      value={me.name}\n                      class=\"form-control\"\n                    />\n                  </div>\n                  <div class=\"form-group\">\n                    <label for=\"email\">{t(\"email\")}: </label>\n                    <input\n                      type=\"email\"\n                      name=\"email\"\n                      placeholder={t(\"email_input\")}\n                      value={me.login}\n                      class=\"form-control\"\n                    />\n                  </div>\n                  <div class=\"form-group\">\n                    <label for=\"password\">{t(\"password\")}: </label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      autocomplete=\"off\"\n                      minlength=\"8\"\n                      maxlength=\"128\"\n                      placeholder={t(\"password_input\")}\n                      class=\"form-control\"\n                    />\n                  </div>\n                  <div class=\"form-group\">\n                    <label for=\"notification_emails\">\n                      {t(\"notification_emails\")}:\n                    </label>\n                    <select\n                      name=\"notification_emails\"\n                      class=\"form-control\"\n                      value={me?.data[\"notification_emails\"]}\n                    >\n                      <option value=\"none\">{t(\"none\")}</option>\n                      <option value=\"hourly\">{t(\"hourly\")}</option>\n                      <option value=\"daily\">{t(\"daily\")}</option>\n                      <option value=\"weekly\">{t(\"weekly\")}</option>\n                      <option value=\"monthly\">{t(\"monthly\")}</option>\n                    </select>\n                  </div>\n                  <div class=\"form-group\">\n                    <label for=\"default_group\">\n                      {t(\"default_group\")}:\n                    </label>\n                    <select\n                      name=\"default_group\"\n                      class=\"form-control\"\n                      value={me?.data[\"default_group\"]}\n                    >\n                      {me.groups?.map(e => (\n                        <option key={e.id} value={e.id}>{e.name}</option>\n                      ))}\n                    </select>\n                  </div>\n                  <div class=\"form-group\">\n                    <label class=\"capitalize\" for=\"lang\">\n                      {t(\"lang\")}:\n                    </label>\n                    <select\n                      name=\"lang\"\n                      class=\"form-control\"\n                      value={lang.getCurrentLang()}\n                    >\n                      {Object.keys(lang.possibleLang).map(k => (\n                        <option key={k} value={k}>{lang.possibleLang[k]}</option>\n                      ))}\n                    </select>\n                  </div>\n                  <button\n                    onClick={e => updateSettings(e)}\n                    class=\"btn btn-primary\"\n                  >\n                    {t(\"save_changes\")}\n                  </button>\n                </form>\n                <form id=\"api_key_form\">\n                  <div class=\"form-group\">\n                    <label for=\"apiKey\">\n                      {t(\"api_key\")}:{\" \"}\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"apiKey\"\n                      value={apiKey}\n                      class=\"form-control font-size-80\"\n                      readonly=\"readonly\"\n                    />\n                  </div>\n                  <button\n                    class=\"btn btn-outline-secondary\"\n                    onClick={resetApiKey}\n                  >\n                    {t(\"reset_api_key\")}\n                  </button>\n                </form>\n                <form id=\"destroy_form\">\n                  <label class=\"d-block\" for=\"destroy_account\">\n                    {t(\"destroy_account_explain\")}\n                  </label>\n                  <button\n                    onClick={e => destroyAccount(e)}\n                    name=\"destroy_account\"\n                    class=\"btn btn-danger\"\n                  >\n                    {t(\"destroy_account\")}\n                  </button>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {alertMessage && (\n        <div class=\"global-alert alert alert-success\">{alertMessage}</div>\n      )}\n    </div>\n  );\n}\n","import _GroupSettings from \"./group-settings.component.js\";\nimport _Settings from \"./settings.component.js\";\nimport _UserSettings from \"./user-settings.component.js\";\n\nexport const GroupSettings = _GroupSettings;\nexport const Settings = _Settings;\nexport const UserSettings = _UserSettings;\n","import { h } from \"preact\";\nimport UserSettings from \"./user-settings.component.js\";\nimport GroupSettings from \"./group-settings.component.js\";\nimport { Navbar } from \"/src/navbar\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { useStoreon } from \"storeon/preact\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function Settings() {\n\n  const params = useParams();\n  const { t } = useTranslation();\n  const { me } = useStoreon(\"me\");\n\n  return (\n    <main>\n      <Navbar />\n      <div class=\"content\">\n        <article class=\"mt-2 justify-content-center d-flex\">\n          <div class=\"container pb-3\">\n            <div class=\"settings\">\n              <ul class=\"nav nav-tabs\">\n                <li class=\"nav-item\">\n                  <Link\n                    class={`nav-link${params.type == \"users\" ? \" active\" : \"\"}`}\n                    to={`/users/${me.id}/settings`}\n                  >\n                    {t(\"account\")}\n                  </Link>\n                </li>\n                {me.groups?.length > 0 && (\n                  <li\n                    class=\"nav-item dropdown group-list\"\n                    tabindex=\"-1\"\n                    onClick={e => e.currentTarget.classList.toggle(\"active\")}\n                  >\n                    <div\n                      class={`nav-link${params.type == \"groups\" ? \" active\" : \"\"}`}\n                    >\n                      {t(\"groups\")}\n                    </div>\n                    <div class=\"dropdown-menu\">\n                      {me.groups?.map(e => (\n                        <Link\n                          key={`/groups/${e.id}/settings`}\n                          class=\"seamless-link\"\n                          to={`/groups/${e.id}/settings`}\n                        >\n                          {e.name}\n                        </Link>\n                      ))}\n                    </div>\n                  </li>\n                )}\n              </ul>\n              {params.type === \"users\" && (\n                <UserSettings id={params.id} key={params.id} />\n              )}\n              {params.type === \"groups\" && (\n                <GroupSettings id={params.id} key={params.id} />\n              )}\n            </div>\n          </div>\n        </article>\n      </div>\n    </main>\n  );\n}\n","import { h } from \"preact\";\nimport { http, api, me, notifications, bookmarks, router } from \"/src/core\";\nimport {\n  Login,\n  Public,\n  PasswordReset,\n  Signup,\n  StopNotificationEmails\n} from \"/src/outside\";\nimport { MessageParent } from \"/src/message\";\nimport { GroupWriter } from \"/src/writer\";\nimport { CreateGroup, GroupBoard, Share, BookmarkBoard } from \"/src/pages\";\nimport { Settings } from \"/src/settings\";\nimport { GroupSearchWrapper } from \"/src/navbar\";\nimport {\n  Navigate,\n  Routes,\n  Route,\n  useNavigate,\n  useLocation,\n} from \"react-router-dom\";\nimport { useEffect } from \"preact/hooks\";\n\nfunction App() {\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const toggleDropdowns = e => {\n    if (!e.target.closest(\".dropdown\")) {\n      // close dropdowns if we are clicking on something else\n      document.querySelectorAll(\".dropdown\").forEach(n => n.classList.remove(\"active\"));\n    } else {\n      // close dropdowns that are not clicked on\n      document\n        .querySelectorAll(\".dropdown\")\n        .forEach(n => {\n          if(n != e.target.closest(\".dropdown\")) {\n            n.classList.remove(\"active\");\n          }\n        });\n    }\n  };\n\n  // initial load\n  useEffect(() => {\n    api.update();\n    notifications.update();\n    bookmarks.update();\n\n    // manage dropdowns\n    window.addEventListener(\"click\", e => toggleDropdowns(e));\n    return () => {\n      window.removeEventListener(\"click\", e => toggleDropdowns(e));\n    };\n  });\n\n  me.fetch().then(user => {\n    if (location.pathname == \"/\") {\n      let redirect = \"/login\";\n      if (user) {\n        redirect = \"/create-group\";\n        if (user.data?.default_group) {\n          redirect = `/groups/${user?.data[\"default_group\"]}`;\n        } else if (user?.groups[0]) {\n          redirect = `/groups/${user?.groups[0].id}`;\n        }\n      }\n      navigate(redirect);\n    }\n\n    if (location.pathname.match(/^\\/invitation/)) {\n      if (user) {\n        http.post(`/api/groups/invitation/${router.id}`, {}).then(() => {\n          navigate(\"/\");\n        });\n      } else {\n        navigate(`/signup?inviteKey=${router.id}`);\n      }\n    }\n\n    if (!router.isOutside() && !user) {\n      navigate(\"/login\");\n    }\n  });\n\n  return (\n    <Routes>\n      <Route path=\"/password-reset\" element={<PasswordReset />} />\n      <Route path=\"/public/:token\" element={<Public />} />\n      <Route path=\"/share\" element={<Share />} />\n      <Route path=\"/signup\" element={<Signup />} />\n      <Route path=\"/stop-notification-emails\" element={<StopNotificationEmails />} />\n      <Route path=\"/login\" element={<Login />} />\n      <Route path=\"/logout\" element={<Navigate replace to=\"/login\" />} />\n      <Route path=\"/:type/:id/settings\" element={<Settings />} />\n      <Route path=\"/bookmarks\" element={<BookmarkBoard />} />\n      <Route path=\"/create-group\" element={<CreateGroup />} />\n      <Route path=\"/groups/:id\" element={<GroupBoard />} />\n      <Route path=\"/groups/:id/search\" element={<GroupSearchWrapper />} />\n      <Route path=\"/groups/:id/write\" element={<GroupWriter />} />\n      <Route path=\"/messages/:id\" element={<MessageParent />} />\n      <Route path=\"/messages/:id/:child_id\" element={<MessageParent />} />\n    </Routes>\n  );\n}\n\nexport default App;\n","import { h, render } from \"preact\";\nimport App from \"./app.js\";\nimport {\n  BrowserRouter as Router,\n} from \"react-router-dom\";\nimport { StoreContext } from \"storeon/preact\";\nimport store from \"/src/store\";\nimport { storage, util } from \"/src/core\";\n\nfunction Index() {\n  return (\n    <Router>\n      <MainRouter />\n    </Router>\n  );\n}\n\nfunction MainRouter() {\n  return (\n    <StoreContext.Provider value={store}>\n      <App />\n    </StoreContext.Provider>\n  );\n}\n\nrender(<Index />, document.body);\n\nif (\"serviceWorker\" in navigator) {\n  window.addEventListener(\"load\", () => {\n    storage.get(\"version\").then(version => {\n      if (\n        location.search.includes(\"service-workers=unregister\")\n        || util.getVersion() != version\n      ) {\n        navigator.serviceWorker.getRegistrations().then((registrations) => {\n          for (let registration of registrations) {\n            registration.unregister();\n          }\n        });\n        console.log(\"Service workers unregistered\");\n        storage.set(\"version\", util.getVersion());\n      }\n      navigator.serviceWorker.register(new URL(\"service-workers.js\", import.meta.url), {type: \"module\"}).then(\n        (registration) => {\n          console.log(\n            \"ServiceWorker registration successful with scope: \",\n            registration.scope\n          );\n        },\n        (err) => {\n          console.warn(\"ServiceWorker registration failed: \", err);\n        }\n      );\n    });\n  });\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fGyc1\")).toString();"],"names":["$8bfebded0011ab7d$export$6503ec6e8aabbaf","$8bfebded0011ab7d$export$f7ad0328861e2f03","$8bfebded0011ab7d$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","module","exports","import","parcelRequire","resolve","then","register","JSON","parse","slice","options","vnodeId","rerenderQueue","defer","prevDebounce","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","key","ref","normalizedProps","arguments","call","defaultProps","createVNode","original","vnode","__","__b","__e","__d","undefined","__h","constructor","Fragment","Component","context","getDomSibling","childIndex","indexOf","sibling","updateParentDomPointers","child","base","enqueueRender","c","push","process","debounceRendering","queue","sort","a","b","some","component","commitQueue","oldVNode","oldDom","parentDom","diff","ownerSVGElement","commitRoot","diffChildren","renderResult","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","j","childVNode","newDom","firstChildDom","refs","oldChildren","oldChildrenLength","Array","isArray","reorderChildren","placeChild","unmount","applyRef","tmp","toChildArray","out","nextDom","sibDom","outer","appendChild","nextSibling","insertBefore","setStyle","style","value","setProperty","test","dom","name","oldValue","useCapture","o","cssText","replace","toLowerCase","_listeners","addEventListener","eventProxyCapture","eventProxy","removeEventListener","e","setAttribute","removeAttribute","event","newVNode","isNew","oldProps","oldState","snapshot","clearProcessingException","newProps","provider","componentContext","renderHook","count","newType","contextType","prototype","render","doRender","sub","state","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","is","data","childNodes","dangerouslySetInnerHTML","attributes","innerHTML","hydrate","diffProps","checked","diffElementNodes","diffed","root","cb","current","parentVNode","skipRemove","r","componentWillUnmount","this","replaceNode","firstChild","createContext","defaultValue","contextId","__c","Consumer","contextValue","Provider","subs","ctx","_props","old","splice","error","errorInfo","ctor","handled","getDerivedStateFromError","setState","componentDidCatch","update","callback","s","forceUpdate","Promise","bind","setTimeout","alert","remove","getElementById","outerHTML","add","text","alertStyle","countdown","alertNode","hash","classList","body","str","charCodeAt","$7e84e1a08353bb30$export$2e2bcd8739ae039","storage","usage","k","total","localStorage","hasOwnProperty","createStorageBox","metadata","createdAt","Date","now","removeItem","set","setItem","stringify","get","getItem","reset","clear","window","dispatchEvent","CustomEvent","$a43f12068c4c782d$export$2e2bcd8739ae039","$b7ae12cde431bd4b$export$2e2bcd8739ae039","modules","events","store","dispatch","changes","includes","on","filter","createStoreon","api","me","route","action","backUrl","entityType","search","entity","_","newState","notifications","notification","n","bookmarks","bookmark","http","delete","message_id","post","message","$d4110a1d7481b094$export$2e2bcd8739ae039","obj1","Symbol","iterator","$b2a6fe0f4f9c89ca$export$2e2bcd8739ae039","instance","Constructor","TypeError","$69360f21e368d1e4$var$_defineProperties","target","descriptor","enumerable","configurable","writable","defineProperty","$69360f21e368d1e4$export$2e2bcd8739ae039","protoProps","staticProps","$7b25196cacc198b0$export$2e2bcd8739ae039","self","ReferenceError","$4e74da8401c76214$export$2e2bcd8739ae039","o1","p1","setPrototypeOf","p","__proto__","$15bbb65a3fcb3f83$export$2e2bcd8739ae039","subClass","superClass","create","$10307927c882a208$export$2e2bcd8739ae039","$9902ed729c7b9bdb$export$2e2bcd8739ae039","getPrototypeOf","$94e2474df811d5b3$export$2e2bcd8739ae039","$17148112845185f8$export$2e2bcd8739ae039","arr","$5c52cccb4a33f6de$export$2e2bcd8739ae039","iter","from","$5ea11774479c0e07$export$2e2bcd8739ae039","len","arr2","$f13a0005733939a9$export$2e2bcd8739ae039","minLen","toString","$5d837501e4b6d22f$export$2e2bcd8739ae039","$52cadf4d2e680428$export$2e2bcd8739ae039","$cb95bcae1947788f$var$ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","apply","$cb95bcae1947788f$var$_objectSpread","source","getOwnPropertyDescriptors","defineProperties","$cb95bcae1947788f$var$consoleLogger","log","args","output","warn","console","$cb95bcae1947788f$var$baseLogger","Logger1","concreteLogger","init","prefix","logger","debug","bool","_len","_key","forward","_len2","_key2","_len3","_key3","_len4","_key4","lvl","debugOnly","concat","moduleName","$cb95bcae1947788f$var$EventEmitter","EventEmitter1","observers","listener","_this","split","l","cloned","observer","_cloned","$cb95bcae1947788f$var$defer","res","rej","promise","reject","$cb95bcae1947788f$var$makeString","$cb95bcae1947788f$var$copy","t1","m","$cb95bcae1947788f$var$getLastOfPath","path","Empty","cleanKey","canNotTraverseDeeper","stack","key1","shift","$cb95bcae1947788f$var$setPath","newValue","_getLastOfPath","$cb95bcae1947788f$var$getPath","_getLastOfPath3","$cb95bcae1947788f$var$getPathWithDefaults","defaultData","$cb95bcae1947788f$var$deepExtend","overwrite","prop","String","$cb95bcae1947788f$var$regexEscape","$cb95bcae1947788f$var$_entityMap","$cb95bcae1947788f$var$escape","$cb95bcae1947788f$var$isIE10","navigator","userAgentData","userAgent","$cb95bcae1947788f$var$chars","$cb95bcae1947788f$var$ownKeys$1","$cb95bcae1947788f$var$_objectSpread$1","$cb95bcae1947788f$var$_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","$cb95bcae1947788f$var$_isNativeReflectConstruct","result","Super","NewTarget","$cb95bcae1947788f$var$deepFind","keySeparator","paths","join","mix","endsWith","joinedPath","$cb95bcae1947788f$var$ResourceStore","_EventEmitter","ResourceStore1","_super","ns","defaultNS","ignoreJSONStructure","index","lng","silent","addNamespaces","emit","resources","addResource","deep","pack","hasResourceBundle","removeNamespaces","getResource","compatibilityAPI","getDataByLanguage","find","v","$cb95bcae1947788f$var$postProcessor","processors","addPostProcessor","handle","translator","processor","$cb95bcae1947788f$var$ownKeys$2","$cb95bcae1947788f$var$_objectSpread$2","$cb95bcae1947788f$var$_createSuper$1","$cb95bcae1947788f$var$_isNativeReflectConstruct$1","$cb95bcae1947788f$var$checkedLoadedFor","$cb95bcae1947788f$var$Translator","Translator1","services","language","interpolation","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","possibleChars","RegExp","map","matched","ki","substring","$cb95bcae1947788f$var$looksLikeObjectPath","match","interpolator","nestingRegexp","parts","lastKey","_this2","overloadTranslationOptionHandler","returnDetails","_this$extractFromKey","extractFromKey","namespace","appendNamespaceToCIMode","resUsedKey","usedKey","resExactUsedKey","exactUsedKey","resType","noObject","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","copy1","newKeyToUse","deepKey","translate","extendTranslation","usedDefault","needsPluralHandling","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","isValidLookup","missingKeyNoValueFallbackToKey","resForMissing","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","specificDefaultValue","defaultForMissing","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","getSuffixes","suffix","appendNamespaceToMissingKey","parseMissingKeyHandler","_this3","defaultVariables","usedLng","usedNS","skipInterpolation","nestBef","skipOnVariables","nb","interpolate","na","nest","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","_this4","extracted","fallbackNS","needsZeroSuffixLookup","ordinal","shouldUseIntlApi","needsContextHandling","codes","utils","hasLoadedNamespace","code","possibleKey","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","pluralSeparator","contextKey","contextSeparator","pop","returnNull","returnEmptyString","resourceStore","option","$cb95bcae1947788f$var$capitalize","string","charAt","toUpperCase","$cb95bcae1947788f$var$LanguageUtil","LanguageUtil1","supportedLngs","formatLanguageCode","specialCases","lowerCaseLng","part","cleanCode","load","nonExplicitSupportedLngs","getLanguagePartFromCode","cleanedLng","isSupportedCode","lngOnly","supportedLng","fallbacks","getScriptPartFromCode","fallbackCode","fallbackCodes","addCode","fc","$cb95bcae1947788f$var$sets","nr","$cb95bcae1947788f$var$_rulesPluralsTypes","Number","$cb95bcae1947788f$var$deprecatedJsonVersions","$cb95bcae1947788f$var$suffixesOrder","zero","one","two","few","many","other","$cb95bcae1947788f$var$createRules","rules","numbers","plurals","$cb95bcae1947788f$var$PluralResolver","PluralResolver1","compatibilityJSON","Intl","PluralRules","_unused","rule","getRule","resolvedOptions","pluralCategories","pluralCategory1","pluralCategory2","pluralCategory","prepend","number","select","getSuffixRetroCompatible","idx","noAbs","Math","abs","simplifyPluralSuffix","returnSuffix","$cb95bcae1947788f$var$ownKeys$3","$cb95bcae1947788f$var$_objectSpread$3","$cb95bcae1947788f$var$Interpolator","Interpolator1","format","escapeValue","iOpts","escape","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexp","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","val","handleFormat","interpolationkey","trim","f","missingInterpolationHandler","regex","safeValue","todo","exec","matchedVar","temp","lastIndex","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","formatters","doReduce","elem","reduce","$cb95bcae1947788f$var$ownKeys$4","$cb95bcae1947788f$var$_objectSpread$4","$cb95bcae1947788f$var$Formatter","Formatter1","options1","formats","NumberFormat","currency","datetime","DateTimeFormat","relativetime","RelativeTimeFormat","range","list","ListFormat","_format","mem","_parseFormatStr","formatStr","formatName","formatOptions","optStr","opt","_opt$split2","isNaN","parseInt","$cb95bcae1947788f$var$parseFormatStr","formatted","valOptions","formatParams","locale","$cb95bcae1947788f$var$ownKeys$5","$cb95bcae1947788f$var$_objectSpread$5","$cb95bcae1947788f$var$_createSuper$2","$cb95bcae1947788f$var$_isNativeReflectConstruct$2","$cb95bcae1947788f$var$Connector","Connector1","backend","waitingReads","maxParallelReads","readingCalls","languages","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","pendingCount","loaded","errors","err","ns1","addResourceBundle","q","_getLastOfPath2","$cb95bcae1947788f$var$removePending","done","loadedKeys","fcName","tried","wait","read","next","queueLoad","loadOne","prepareLoading","_this5","fallbackValue","isUpdate","$cb95bcae1947788f$var$get","initImmediate","preload","partialBundledLanguages","ret","tDescription","$cb95bcae1947788f$var$transformOptions","$cb95bcae1947788f$var$ownKeys$6","$cb95bcae1947788f$var$_objectSpread$6","$cb95bcae1947788f$var$_createSuper$3","$cb95bcae1947788f$var$_isNativeReflectConstruct$3","$cb95bcae1947788f$var$noop","$cb95bcae1947788f$var$bindMemberFunctions","inst","getOwnPropertyNames","$cb95bcae1947788f$var$I18n","I18n1","external","isInitialized","isClone","defOpts","createClassOnDemand","ClassOrObject","formatter","lu","languageDetector","detection","storeApi","_this2$store","storeApiChained","_this2$store2","deferred","finish","t2","initializedStoreOnce","t","changeLanguage","usedCallback","append","resolvedLanguage","setResolvedLanguage","li","lngInLngs","hasLanguageSomeTranslations","isLanguageChangingTo","setLngProps","setLng","getBestMatchFromCodes","cacheUserLanguage","loadResources","async","detect","keyPrefix","fixedT1","fixedT","opts","rest","resultKey","_this$translator","_this$translator2","exists","_this6","lastLng","loadNotPending","loadState","precheck","preResult","_this7","preloaded","newLngs","_this8","mergedOptions","clone","membersToCopy","$cb95bcae1947788f$var$instance","createInstance","reloadResources","use","getFixedT","setDefaultNamespace","loadNamespaces","loadLanguages","$cb95bcae1947788f$export$2e2bcd8739ae039","lang","groups","avatar","getGroupName","group","g","all","i18n","fetch","logout","$c6f88c2c6ea3c4b1$export$2e2bcd8739ae039","$0f4d54e2115f3ae0$exports","__esModule","$836bb6f8ac925f19$exports","_i","_s","_e","_arr","_n","_d","$0770eecc7cf2705f$exports","$69badd8e9720e718$exports","$60fa399380c2cbe7$exports","$93ea8ed0685ac00c$exports","$52c10a7e0302e632$exports","currentIndex","currentComponent","previousComponent","prevRaf","currentHook","afterPaintEffects","EMPTY","oldBeforeDiff","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","getHookState","hooks","__V","useState","initialState","useReducer","invokeOrReturn","reducer","hookState","_reducer","nextValue","useEffect","argsChanged","_pendingArgs","useLayoutEffect","useRef","initialValue","useMemo","factory","useCallback","useContext","flushAfterPaintEffects","invokeCleanup","invokeEffect","hookItem","requestAnimationFrame","raf","clearTimeout","timeout","HAS_RAF","cancelAnimationFrame","hasErrored","hook","comp","cleanup","oldArgs","newArgs","arg","shallowDiffers","PureComponent","isPureReactComponent","oldDiffHook","REACT_FORWARD_SYMBOL","for","forwardRef","fn","Forwarded","$$typeof","isReactComponent","displayName","mapFn","Children","only","normalized","toArray","oldCatchError","oldUnmount","Suspense","_suspenders","suspended","SuspenseList","_next","_map","suspendingVNode","suspendingComponent","onResolved","onSuspensionComplete","suspendedVNode","removeOriginal","detachedParent","originalParent","__a","wasHydrating","detachedComponent","__v","__k","detachedClone","effect","fallback","revealOrder","size","delegated","unsuspend","wrappedUnsuspend","Map","reverse","n35","REACT_ELEMENT_TYPE","CAMEL_PROPS","IS_DOM","oldEventHook","empty","isPropagationStopped","cancelBubble","isDefaultPrevented","defaultPrevented","persist","nativeEvent","classNameDescriptor","class","oldVNodeHook","nonCustomElement","multiple","selected","className","isValidElement","element","$96a962f2c17a303f$exports","$a0411826caf064ca$var$_defineProperties","$a0411826caf064ca$exports","$41e77d45d3c057fa$var$matchHtmlEntity","$41e77d45d3c057fa$var$htmlEntities","$41e77d45d3c057fa$var$unescapeHtmlEntity","$7769fa9636e2bfa3$var$ownKeys","$7769fa9636e2bfa3$var$_objectSpread","$parcel$interopDefault","$7769fa9636e2bfa3$var$i18nInstance","$7769fa9636e2bfa3$var$defaultOptions","bindI18n","bindI18nStore","transEmptyNodeValue","transSupportBasicHtmlNodes","transWrapTextNodes","transKeepBasicHtmlNodesFor","useSuspense","unescape","$7769fa9636e2bfa3$export$5603ab5ced17ce64","$73048c6b859c8a02$export$fd42f52fd3ae1109","$7769fa9636e2bfa3$export$212bb2fc580a90a8","$7769fa9636e2bfa3$export$ea171b67e3820290","ReportNamespaces1","usedNamespaces","$7769fa9636e2bfa3$export$64af334f494c2f47","$7769fa9636e2bfa3$export$ae7e14d40d89f296","$7769fa9636e2bfa3$export$2e2366488d12e20d","react","$7769fa9636e2bfa3$export$a039134f2fc7e0","$8948bff4a00b46d7$export$c106dd0671a0fc2d","_console","$8948bff4a00b46d7$var$alreadyWarned","$8948bff4a00b46d7$export$5b28268982f175ba","$8948bff4a00b46d7$export$83be934b53fff43b","initialized","off","$8948bff4a00b46d7$var$oldI18nextHasLoadedNamespace","$8948bff4a00b46d7$export$93d9ee97c1ad3f31","isNewerI18next","i18nInstance","$8948bff4a00b46d7$export$be63e0664592e141","$23287d5819478a30$var$ownKeys","$23287d5819478a30$var$_objectSpread","$23287d5819478a30$var$usePrevious","ignore","$88a9540d1aad6464$export$b8f5890fc79d6aca","$88a9540d1aad6464$export$6d9c69b0de29b591","$23287d5819478a30$export$9fc83ad70ead8663","i18nFromProps","_ref","$88a9540d1aad6464$export$fae74005e78b1a27","i18nFromContext","defaultNSFromContext","reportNamespaces","notReadyT","retNotReady","ready","i18nOptions","addUsedNamespaces","every","getT","nsMode","_useState","$88a9540d1aad6464$export$60241385465d0a34","_useState2","setT","joinedNS","previousJoinedNS","isMounted","boundReset","isInitial","$3f3845f28076355d$exports","excluded","sourceKeys","$1fc9f677ed11a4b2$exports","sourceSymbolKeys","propertyIsEnumerable","$ee5bb531210bb8d0$var$_excluded","$ee5bb531210bb8d0$var$ownKeys","$ee5bb531210bb8d0$var$_objectSpread","$ee5bb531210bb8d0$export$2dcb0053efd21124","WrappedComponent","I18nextWithTranslation","forwardedRef","_useTranslation","_useTranslation2","passDownProps","tReady","withRef","$73048c6b859c8a02$export$c8a8987d4410bf2d","$d51ff6fbc6548743$export$257a8862b851cb5b","possibleLang","en","es","fr","sk","getDefaultLang","querySelector","content","getCurrentLang","initReactI18next","translation","util","isValidUrl","url","URL","limitLength","floor","escapeRegex","getSubpath","baseURI","pathname","toApp","location","origin","genId","seed","random","id2Int","urlRegExp","getUrl","txt","startsWith","link","limitStrSize","limit","humanFullDate","timestamp","d","getTime","getTimezoneOffset","toISOString","humanTime","duration","round","getId","thumbnail","width","height","crop","defaultAvatar","colorHash","backgroundHash","c1","c2","is_it_enter","keyCode","getVersion","$30ef6c271b4e9124$export$2e2bcd8739ae039","sendFile","formData","loadFn","progressFn","errorFn","apiKey","xhr","XMLHttpRequest","open","setRequestHeader","status","response","statusText","upload","onprogress","catch","nocache","delay","x","h","method","headers","Headers","ok","json","contentType","request","put","fetchOptions","exception","$dcc08ede0b85ca51$export$2e2bcd8739ae039","LIMIT","matchNotification","fromMessage","removeAllNotifications","removeMatchingNotifications","notif","matchBookmark","removeAllBookmarks","removeMatchingBookmarks","hasBookmark","addBookmark","router","removeSubpath","getEntity","isEntity","getParam","param","searchParams","decodeURIComponent","getSegments","isOutside","getUrlComponents","components","_alert","info","_http","_lang","_me","_storage","_util","$903848071325eeea$export$2e2bcd8739ae039","NavigationContext","React","LocationContext","RouteContext","outlet","matches","invariant","cond","matchRoutes","routes","locationArg","basename","stripBasename","parsePath","branches","flattenRoutes","score","compareIndexes","routesMeta","meta","childrenIndex","rankRouteBranches","matchRouteBranch","parentsMeta","parentPath","relativePath","caseSensitive","joinPaths","computeScore","paramRe","isSplat","segments","initialScore","segment","branch","matchedParams","matchedPathname","end","remainingPathname","matchPath","params","pathnameBase","normalizePathname","pattern","matcher","paramNames","regexpSource","paramName","compilePath","captureGroups","memo","splatValue","safelyDecodeURIComponent","resolveTo","toArg","routePathnames","locationPathname","to","toPathname","routePathnameIndex","toSegments","fromPathname","resolvePathname","normalizeSearch","normalizeHash","resolvePath","nextChar","useHref","useInRouterContext","useResolvedPath","joinedPathname","getToPathname","endsWithSlash","createHref","useLocation","useNavigate","routePathnamesJson","activeRef","go","useParams","routeMatch","_renderMatches","parentMatches","reduceRight","React.createElement","$79509669c5938df5$export$9072aa6dd1f93057","Navigate","_ref2","navigate","Route","Router","_ref3","basenameProp","locationProp","navigationType","NavigationType","Pop","static","staticProp","navigationContext","trailingPathname","$79509669c5938df5$export$26749e8557646306","$79509669c5938df5$export$c7914228fb69b0f5","Routes","_ref4","parentParams","parentPathnameBase","locationFromContext","_parsedLocationArg$pa","parsedLocationArg","useRoutes","createRoutesFromChildren","BrowserRouter","historyRef","createBrowserHistory","history","listen","$79509669c5938df5$export$55185c17a0fcbe46","Link","onClick","reloadDocument","$f99415ec9d84eeea$var$_objectWithoutPropertiesLoose","$f99415ec9d84eeea$var$_excluded","href","internalOnClick","_temp","replaceProp","button","metaKey","altKey","ctrlKey","shiftKey","isModifiedEvent","preventDefault","createPath","useLinkClickHandler","$f99415ec9d84eeea$var$_extends","$ec34f7025013ec94$exports","$10fcb144e46b2198$export$2e2bcd8739ae039","withTranslation","super","$6e64521ddde455b6$export$2e2bcd8739ae039","$48e0eac2816dd5e6$export$2e2bcd8739ae039","isChild","$02bd391920972de4$export$2e2bcd8739ae039","useTranslation","firstDisplayedChild","setFirstDisplayedChild","lastDisplayedChild","setLastDisplayedChild","onNewChild","newMsg","detail","parent","childMessages","msgIndex","findIndex","max","min","$d385cb0a744355a5$export$2e2bcd8739ae039","isPublic","author","src","title","FaIcon","icon","regular","comment","images","bell","solid","film","times","family","rotation","viewBox","fill","$5fa7d79990e2bc5d$export$554ccc96b126a426","$5fa7d79990e2bc5d$var$useIsomorphicLayoutEffect","$88a9540d1aad6464$export$e5c5a5f917a5871c","$5fa7d79990e2bc5d$export$11aeef812f154e9e","rerender","changed","$88a9540d1aad6464$export$1538c33de8887b59","GroupSearch","groupId","setLoaded","setSearch","hashtags","setHashtags","messages","setMessages","loadMessages","msg","$6a345a2434031edc$export$423dfe6469a8e0dd","tabindex","GroupSearchWrapper","$520fa8871428281e$export$42cfbb80f7861e77","$520fa8871428281e$export$8eb86eb08c0b5c12","GroupsDropdownNavbar","$73048c6b859c8a02$export$ffb0004e005737fa","currentTarget","toggle","$607f51540ffcd426$export$8b29a4b6778bf7f","$f99415ec9d84eeea$export$a6c7ac8248d6e38a","Navbar","useStoreon","onError","$520fa8871428281e$export$2d8ae0bb40c793f6","$be03c4de42ac64ff$export$4b85d3515bd863a5","$520fa8871428281e$export$ffe0a8eecde78dfa","NotificationsDropdownNavbar","notifs","$be03c4de42ac64ff$export$14834abbfce3b8cd","$664ade9a4f66382d$var$_extends","$dd2a1b0379ca9bf9$export$2e2bcd8739ae039","postNewGroup","secretKey","minlength","maxlength","placeholder","required","$471cd1c649eea7ba$export$2e2bcd8739ae039","embedUrl","revealed","preview","$c7b1e05ee08f4704$export$2e2bcd8739ae039","rel","description","$1dd5e274a4fb4aa6$export$2e2bcd8739ae039","allowfullscreen","playBtnClass","EmbedBlock","getPreview","__html","video_id","playlist_id","host","timecode","inWriter","controls","FileGrid","nlg","default","start","toggleFile","evt","stopPropagation","closest","files","fileIndex","$c72cf4b6b78e8f8e$export$40e4fb50d87564f1","file","$c72cf4b6b78e8f8e$export$48621228a997a4e0","BigFile","filePath","contentUrl","poster","removed","progress","MiniFile","GroupWriter","$b0c42e92c84db02f$export$d7a960146e1a269e","focus","Writer","setFiles","sending","setSending","uploading","setUploading","writerId","setForm","writerForm","getElementsByClassName","updateFile","uploadFile","fileId","FormData","inputFile","addFiles","mimetype","input_files","$b0c42e92c84db02f$export$29beae8571dce55f","input","display","accept","click","sendMessage","messageId","putMessage","lastActivityDate","postMessage","cancel","WritingWidget","setPreview","setLink","setText","setTitle","genPreview","scrollHeight","links","encodeURIComponent","onKeyPress","doGenPreview","onChange","onPaste","clipboardData","rows","autocomplete","autofocus","$c72cf4b6b78e8f8e$export$330d558700ffa676","$bd90da8fd697beab$var$_extends","$c72cf4b6b78e8f8e$export$ca445ff2f74d7dc4","image","video","pdf","disabled","BookmarkBoard","$6a345a2434031edc$export$84c965ec8b6b0f92","CreateGroup","_CreateGroup","GroupBoard","$6a345a2434031edc$export$89085c7857c3f940","HumanTime","Notification","setTarget","setAction","setNotification","setMiniatureOnError","fromGroup","getTarget","getAction","imgSrc","miniature","getMiniature","parentAuthorName","getObject","Search","onSubmit","group_id","searchTerms","normalize","Share","URLSearchParams","setUrl","setGroup","meService","user","readonly","$d0274a88e468a969$export$2e2bcd8739ae039","editMessage","$be03c4de42ac64ff$export$35f3ae0a16fef81","deleteMessage","openPublicLink","shareMessage","isInFront","publishInGroup","$5345fa5f2538b9ef$export$2e2bcd8739ae039","previewUrl","displayMessageText","$7cd04194507a3338$export$2e2bcd8739ae039","lineage","breadcrumbs","setBreadcrumbs","getTitle","previewLink","ids","loadBreadcrumbs","stack_truncated","breadcrumbs_truncated","setAuthor","setParent","isRemoved","setIsRemoved","edit","setEdit","setMessage","messageRef","setMessageRef","onEditMessage","loadMessage","scrollTo","msgElement","scrollIntoView","block","behavior","hydrateMessage","u","token","newChildren","newRef","cancelEdit","displayWriter","cn","getComponentClass","confirm","newTab","postMessageComponent","Message","_Message","MessageList","screen","scrollTop","totalMessages","pageYOffset","page","scroll_cooldown","onScroll","onNewParent","new_loaded","msgList","getComputedStyle","prevState","MessageParent","MessagePreview","setId","setData","setLastActivityDate","setChildren","MessageSearchResult","authorName","words","displayAuthorName","displayMessageTitle","lines","Login","showResetPassword","setShowResetPassword","login","password","api_key","redirect","default_group","sendLoginForm","mail","sendPasswordReset","PasswordReset","passwordConfirmation","sendNewPassword","Signup","invite_key","sendSignupForm","StopNotificationEmails","_StopNotificationEmails","Public","$6a345a2434031edc$export$f69c19e57285b83a","$69115444f08d0dc6$export$2e2bcd8739ae039","setSecretKey","users","setUsers","alertMessage","setAlertMessage","leave","protocol","leaveGroup","$eee779cb2410b301$export$2e2bcd8739ae039","setApiKey","inputAvatar","notification_emails","updateSettings","Settings","$63a436771d8fc45d$export$2e2bcd8739ae039","toggleDropdowns","querySelectorAll","$79509669c5938df5$export$3565eb3d00ca5a74","$79509669c5938df5$export$e7b0ac011bb776c6","$f367d32ad26358d9$export$b44239f84c8f0268","$f367d32ad26358d9$export$68b4491d6924a6d1","$be03c4de42ac64ff$export$c9915453de10000b","$f367d32ad26358d9$export$89200835fb4edfb9","$f367d32ad26358d9$export$e9e03eeea26d4dee","$f367d32ad26358d9$export$21a94553ffa41578","$79509669c5938df5$export$444b3ab0cb9aec40","$1180cc40af8fd7c1$export$c72f6eaae7b9adff","$be03c4de42ac64ff$export$9c257beea3dbd13a","$be03c4de42ac64ff$export$1a13290ec7702c7","$be03c4de42ac64ff$export$959a4441e74dcd2b","$520fa8871428281e$export$5cc34a6155e65c0e","$b0c42e92c84db02f$export$29913b8f065577b2","$6a345a2434031edc$export$4025c8e17986f775","MainRouter","$f99415ec9d84eeea$export$9ba4e89fdfa1fc54","$2b67dd6f65354df9$var$MainRouter","$b17081aca2c1ec70$exports","version","serviceWorker","getRegistrations","registrations","registration","unregister","scope"],"version":3,"file":"index.23b84aff.js.map"}